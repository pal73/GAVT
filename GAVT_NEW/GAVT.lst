
AVRASM ver. 1.52  GAVT.asm Fri Apr 15 15:13:11 2016


         ;CodeVisionAVR C Compiler V1.24.1d Standard
         ;(C) Copyright 1998-2004 Pavel Haiduc, HP InfoTech s.r.l.
         ;http://www.hpinfotech.ro
         ;e-mail:office@hpinfotech.ro
         
         ;Chip type           : ATmega32
         ;Program type        : Application
         ;Clock frequency     : 1,000000 MHz
         ;Memory model        : Small
         ;Optimize for        : Size
         ;(s)printf features  : int, width
         ;(s)scanf features   : long, width
         ;External SRAM size  : 0
         ;Data Stack size     : 512 byte(s)
         ;Heap size           : 0 byte(s)
         ;Promote char to int : No
         ;char is unsigned    : Yes
         ;8 bit enums         : Yes
         ;Enhanced core instructions    : On
         ;Automatic register allocation : On
         
          	.EQU UDRE=0x5
          	.EQU RXC=0x7
          	.EQU USR=0xB
          	.EQU UDR=0xC
          	.EQU EERE=0x0
          	.EQU EEWE=0x1
          	.EQU EEMWE=0x2
          	.EQU SPSR=0xE
          	.EQU SPDR=0xF
          	.EQU EECR=0x1C
          	.EQU EEDR=0x1D
          	.EQU EEARL=0x1E
          	.EQU EEARH=0x1F
          	.EQU WDTCR=0x21
          	.EQU MCUCR=0x35
          	.EQU GICR=0x3B
          	.EQU SPL=0x3D
          	.EQU SPH=0x3E
          	.EQU SREG=0x3F
         
          	.DEF R0X0=R0
          	.DEF R0X1=R1
          	.DEF R0X2=R2
          	.DEF R0X3=R3
          	.DEF R0X4=R4
          	.DEF R0X5=R5
          	.DEF R0X6=R6
          	.DEF R0X7=R7
          	.DEF R0X8=R8
          	.DEF R0X9=R9
          	.DEF R0XA=R10
          	.DEF R0XB=R11
          	.DEF R0XC=R12
          	.DEF R0XD=R13
          	.DEF R0XE=R14
          	.DEF R0XF=R15
          	.DEF R0X10=R16
          	.DEF R0X11=R17
          	.DEF R0X12=R18
          	.DEF R0X13=R19
          	.DEF R0X14=R20
          	.DEF R0X15=R21
          	.DEF R0X16=R22
          	.DEF R0X17=R23
          	.DEF R0X18=R24
          	.DEF R0X19=R25
          	.DEF R0X1A=R26
          	.DEF R0X1B=R27
          	.DEF R0X1C=R28
          	.DEF R0X1D=R29
          	.DEF R0X1E=R30
          	.DEF R0X1F=R31
         
          	.EQU __se_bit=0x80
          	.EQU __sm_mask=0x70
          	.EQU __sm_adc_noise_red=0x10
          	.EQU __sm_powerdown=0x20
          	.EQU __sm_powersave=0x30
          	.EQU __sm_standby=0x60
          	.EQU __sm_ext_standby=0x70
         
          	.MACRO __CPD1N
          	CPI  R30,LOW(@0)
          	LDI  R26,HIGH(@0)
          	CPC  R31,R26
          	LDI  R26,BYTE3(@0)
          	CPC  R22,R26
          	LDI  R26,BYTE4(@0)
          	CPC  R23,R26
          	.ENDM
         
          	.MACRO __CPD2N
          	CPI  R26,LOW(@0)
          	LDI  R30,HIGH(@0)
          	CPC  R27,R30
          	LDI  R30,BYTE3(@0)
          	CPC  R24,R30
          	LDI  R30,BYTE4(@0)
          	CPC  R25,R30
          	.ENDM
         
          	.MACRO __CPWRR
          	CP   R@0,R@2
          	CPC  R@1,R@3
          	.ENDM
         
          	.MACRO __CPWRN
          	CPI  R@0,LOW(@2)
          	LDI  R30,HIGH(@2)
          	CPC  R@1,R30
          	.ENDM
         
          	.MACRO __ADDD1N
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	SBCI R22,BYTE3(-@0)
          	SBCI R23,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __ADDD2N
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	SBCI R24,BYTE3(-@0)
          	SBCI R25,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __SUBD1N
          	SUBI R30,LOW(@0)
          	SBCI R31,HIGH(@0)
          	SBCI R22,BYTE3(@0)
          	SBCI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __SUBD2N
          	SUBI R26,LOW(@0)
          	SBCI R27,HIGH(@0)
          	SBCI R24,BYTE3(@0)
          	SBCI R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ANDD1N
          	ANDI R30,LOW(@0)
          	ANDI R31,HIGH(@0)
          	ANDI R22,BYTE3(@0)
          	ANDI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ORD1N
          	ORI  R30,LOW(@0)
          	ORI  R31,HIGH(@0)
          	ORI  R22,BYTE3(@0)
          	ORI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __DELAY_USB
          	LDI  R24,LOW(@0)
          __DELAY_USB_LOOP:
          	DEC  R24
          	BRNE __DELAY_USB_LOOP
          	.ENDM
         
          	.MACRO __DELAY_USW
          	LDI  R24,LOW(@0)
          	LDI  R25,HIGH(@0)
          __DELAY_USW_LOOP:
          	SBIW R24,1
          	BRNE __DELAY_USW_LOOP
          	.ENDM
         
          	.MACRO __CLRD1S
          	LDI  R30,0
          	STD  Y+@0,R30
          	STD  Y+@0+1,R30
          	STD  Y+@0+2,R30
          	STD  Y+@0+3,R30
          	.ENDM
         
          	.MACRO __GETD1S
          	LDD  R30,Y+@0
          	LDD  R31,Y+@0+1
          	LDD  R22,Y+@0+2
          	LDD  R23,Y+@0+3
          	.ENDM
         
          	.MACRO __PUTD1S
          	STD  Y+@0,R30
          	STD  Y+@0+1,R31
          	STD  Y+@0+2,R22
          	STD  Y+@0+3,R23
          	.ENDM
         
          	.MACRO __POINTB1MN
          	LDI  R30,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1MN
          	LDI  R30,LOW(@0+@1)
          	LDI  R31,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1FN
          	LDI  R30,LOW(2*@0+@1)
          	LDI  R31,HIGH(2*@0+@1)
          	.ENDM
         
          	.MACRO __POINTB2MN
          	LDI  R26,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW2MN
          	LDI  R26,LOW(@0+@1)
          	LDI  R27,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTBRM
          	LDI  R@0,LOW(@1)
          	.ENDM
         
          	.MACRO __POINTWRM
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __POINTBRMN
          	LDI  R@0,LOW(@1+@2)
          	.ENDM
         
          	.MACRO __POINTWRMN
          	LDI  R@0,LOW(@2+@3)
          	LDI  R@1,HIGH(@2+@3)
          	.ENDM
         
          	.MACRO __GETD1N
          	LDI  R30,LOW(@0)
          	LDI  R31,HIGH(@0)
          	LDI  R22,BYTE3(@0)
          	LDI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2N
          	LDI  R26,LOW(@0)
          	LDI  R27,HIGH(@0)
          	LDI  R24,BYTE3(@0)
          	LDI  R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2S
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	LDD  R24,Y+@0+2
          	LDD  R25,Y+@0+3
          	.ENDM
         
          	.MACRO __GETB1MN
          	LDS  R30,@0+@1
          	.ENDM
         
          	.MACRO __GETW1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	LDS  R22,@0+@1+2
          	LDS  R23,@0+@1+3
          	.ENDM
         
          	.MACRO __GETBRMN
          	LDS  R@2,@0+@1
          	.ENDM
         
          	.MACRO __GETWRMN
          	LDS  R@2,@0+@1
          	LDS  R@3,@0+@1+1
          	.ENDM
         
          	.MACRO __GETB2MN
          	LDS  R26,@0+@1
          	.ENDM
         
          	.MACRO __GETW2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	LDS  R24,@0+@1+2
          	LDS  R25,@0+@1+3
          	.ENDM
         
          	.MACRO __PUTB1MN
          	STS  @0+@1,R30
          	.ENDM
         
          	.MACRO __PUTW1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	.ENDM
         
          	.MACRO __PUTD1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	STS  @0+@1+2,R22
          	STS  @0+@1+3,R23
          	.ENDM
         
          	.MACRO __PUTBMRN
          	STS  @0+@1,R@2
          	.ENDM
         
          	.MACRO __PUTWMRN
          	STS  @0+@1,R@2
          	STS  @0+@1+1,R@3
          	.ENDM
         
          	.MACRO __GETW1R
          	MOV  R30,R@0
          	MOV  R31,R@1
          	.ENDM
         
          	.MACRO __GETW2R
          	MOV  R26,R@0
          	MOV  R27,R@1
          	.ENDM
         
          	.MACRO __GETWRN
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __PUTW1R
          	MOV  R@0,R30
          	MOV  R@1,R31
          	.ENDM
         
          	.MACRO __PUTW2R
          	MOV  R@0,R26
          	MOV  R@1,R27
          	.ENDM
         
          	.MACRO __ADDWRN
          	SUBI R@0,LOW(-@2)
          	SBCI R@1,HIGH(-@2)
          	.ENDM
         
          	.MACRO __ADDWRR
          	ADD  R@0,R@2
          	ADC  R@1,R@3
          	.ENDM
         
          	.MACRO __SUBWRN
          	SUBI R@0,LOW(@2)
          	SBCI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __SUBWRR
          	SUB  R@0,R@2
          	SBC  R@1,R@3
          	.ENDM
         
          	.MACRO __ANDWRN
          	ANDI R@0,LOW(@2)
          	ANDI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ANDWRR
          	AND  R@0,R@2
          	AND  R@1,R@3
          	.ENDM
         
          	.MACRO __ORWRN
          	ORI  R@0,LOW(@2)
          	ORI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ORWRR
          	OR   R@0,R@2
          	OR   R@1,R@3
          	.ENDM
         
          	.MACRO __EORWRR
          	EOR  R@0,R@2
          	EOR  R@1,R@3
          	.ENDM
         
          	.MACRO __GETWRS
          	LDD  R@0,Y+@2
          	LDD  R@1,Y+@2+1
          	.ENDM
         
          	.MACRO __PUTWSR
          	STD  Y+@2,R@0
          	STD  Y+@2+1,R@1
          	.ENDM
         
          	.MACRO __MOVEWRR
          	MOV  R@0,R@2
          	MOV  R@1,R@3
          	.ENDM
         
          	.MACRO __INWR
          	IN   R@0,@2
          	IN   R@1,@2+1
          	.ENDM
         
          	.MACRO __OUTWR
          	OUT  @2+1,R@1
          	OUT  @2,R@0
          	.ENDM
         
          	.MACRO __CALL1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	ICALL
          	.ENDM
         
          	.MACRO __NBST
          	BST  R@0,@1
          	IN   R30,SREG
          	LDI  R31,0x40
          	EOR  R30,R31
          	OUT  SREG,R30
          	.ENDM
         
         
          	.MACRO __PUTB1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	CALL __PUTDP1
          	.ENDM
         
         
          	.MACRO __GETB1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R30,Z
          	.ENDM
         
          	.MACRO __GETW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R31,Z
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __GETD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R1,Z+
          	LD   R22,Z+
          	LD   R23,Z
          	MOVW R30,R0
          	.ENDM
         
          	.MACRO __GETB2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R26,X
          	.ENDM
         
          	.MACRO __GETW2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	.ENDM
         
          	.MACRO __GETD2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R1,X+
          	LD   R24,X+
          	LD   R25,X
          	MOVW R26,R0
          	.ENDM
         
          	.MACRO __GETBRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@1)
          	SBCI R31,HIGH(-@1)
          	LD   R@0,Z
          	.ENDM
         
          	.MACRO __GETWRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	LD   R@0,Z+
          	LD   R@1,Z
          	.ENDM
         
          	.MACRO __LSLW8SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R31,Z
          	CLR  R30
          	.ENDM
         
          	.MACRO __PUTB1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __CLRW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __CLRD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __PUTB2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R26
          	.ENDM
         
          	.MACRO __PUTW2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z+,R26
          	ST   Z,R27
          	.ENDM
         
          	.MACRO __PUTBSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTWSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	ST   Z+,R@0
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTB1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __MULBRR
          	MULS R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __MULBRRU
          	MUL  R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.CSEG
          	.ORG 0
         
          	.INCLUDE "GAVT.vec"
         
         ;INTERRUPT VECTORS
000000 940c 003a 	JMP  __RESET
000002 940c 0000 	JMP  0
000004 940c 0000 	JMP  0
000006 940c 0000 	JMP  0
000008 940c 0000 	JMP  0
00000a 940c 0000 	JMP  0
00000c 940c 0000 	JMP  0
00000e 940c 0000 	JMP  0
000010 940c 0000 	JMP  0
000012 940c 0000 	JMP  0
000014 940c 0000 	JMP  0
000016 940c 05e0 	JMP  _timer0_ovf_isr
000018 940c 0000 	JMP  0
00001a 940c 0000 	JMP  0
00001c 940c 0000 	JMP  0
00001e 940c 0000 	JMP  0
000020 940c 0000 	JMP  0
000022 940c 0000 	JMP  0
000024 940c 0000 	JMP  0
000026 940c 0000 	JMP  0
000028 940c 0000 	JMP  0
         
          	.INCLUDE "GAVT.inc"
          	.DEF _t0_cnt0=R4
          	.DEF _t0_cnt1=R5
          	.DEF _t0_cnt2=R6
          	.DEF _t0_cnt3=R7
          	.DEF _ind_cnt=R8
          _IND_STROB:
          	.DB  0xBF,0xDF,0xEF,0xF7,0x7F
00002a dfbf
00002b f7ef
00002c 007f
          _DIGISYM:
          	.DB  0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8
00002d f9c0
00002e b0a4
00002f 9299
000030 f882
          	.DB  0x80,0x90,0xFF
000031 9080
000032 00ff
          _3:
          	.DB  0x55,0x55,0x55,0x55,0x55
000033 5555
000034 5555
000035 0055
          	.DEF _but=R9
          	.DEF _prog=R10
          	.DEF _step=R11
          	.DEF _ind=R12
          	.DEF _sub_ind=R13
          	.DEF _in_word=R14
         
          __GLOBAL_INI_TBL:
          	.DW  0x05
000036 0005
          	.DW  _ind_out
000037 0260
          	.DW  _3*2
000038 0066
         
          	.DW  0
000039 0000
         
          __RESET:
00003a 94f8      	CLI
00003b 27ee      	CLR  R30
00003c bbec      	OUT  EECR,R30
         
         ;INTERRUPT VECTORS ARE PLACED
         ;AT THE START OF FLASH
00003d e0f1      	LDI  R31,1
00003e bffb      	OUT  GICR,R31
00003f bfeb      	OUT  GICR,R30
000040 bfe5      	OUT  MCUCR,R30
         
         ;DISABLE WATCHDOG
000041 e1f8      	LDI  R31,0x18
000042 bdf1      	OUT  WDTCR,R31
000043 bde1      	OUT  WDTCR,R30
         
         ;CLEAR R2-R14
000044 e08d      	LDI  R24,13
000045 e0a2      	LDI  R26,2
000046 27bb      	CLR  R27
          __CLEAR_REG:
000047 93ed      	ST   X+,R30
000048 958a      	DEC  R24
000049 f7e9      	BRNE __CLEAR_REG
         
         ;CLEAR SRAM
00004a e080      	LDI  R24,LOW(0x800)
00004b e098      	LDI  R25,HIGH(0x800)
00004c e6a0      	LDI  R26,0x60
          __CLEAR_SRAM:
00004d 93ed      	ST   X+,R30
00004e 9701      	SBIW R24,1
00004f f7e9      	BRNE __CLEAR_SRAM
         
         ;GLOBAL VARIABLES INITIALIZATION
000050 e6ec      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
000051 e0f0      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
          __GLOBAL_INI_NEXT:
000052 9185      	LPM  R24,Z+
000053 9195      	LPM  R25,Z+
000054 9700      	SBIW R24,0
000055 f061      	BREQ __GLOBAL_INI_END
000056 91a5      	LPM  R26,Z+
000057 91b5      	LPM  R27,Z+
000058 9005      	LPM  R0,Z+
000059 9015      	LPM  R1,Z+
00005a 01bf      	MOVW R22,R30
00005b 01f0      	MOVW R30,R0
          __GLOBAL_INI_LOOP:
00005c 9005      	LPM  R0,Z+
00005d 920d      	ST   X+,R0
00005e 9701      	SBIW R24,1
00005f f7e1      	BRNE __GLOBAL_INI_LOOP
000060 01fb      	MOVW R30,R22
000061 cff0      	RJMP __GLOBAL_INI_NEXT
          __GLOBAL_INI_END:
         
         ;STACK POINTER INITIALIZATION
000062 e5ef      	LDI  R30,LOW(0x85F)
000063 bfed      	OUT  SPL,R30
000064 e0e8      	LDI  R30,HIGH(0x85F)
000065 bfee      	OUT  SPH,R30
         
         ;DATA STACK POINTER INITIALIZATION
000066 e6c0      	LDI  R28,LOW(0x260)
000067 e0d2      	LDI  R29,HIGH(0x260)
         
000068 940c 061b 	JMP  _main
         
          	.ESEG
          	.ORG 0
         
          	.DSEG
          	.ORG 0x260
         ;       1 #define LED_POW_ON	5
         ;       2 #define LED_PROG4	1
         ;       3 #define LED_PROG2	2
         ;       4 #define LED_PROG3	3
         ;       5 #define LED_PROG1	4 
         ;       6 #define LED_ERROR	0 
         ;       7 #define LED_WRK	6
         ;       8 #define LED_VACUUM	7
         ;       9 
         ;      10 #define GAVT3
         ;      11 
         ;      12 //#define P380
         ;      13 //#define I380
         ;      14 //#define I220
         ;      15 //#define P380_MINI
         ;      16 //#define TVIST_SKO
         ;      17 //#define I380_WI
         ;      18 //#define I220_WI
         ;      19 //#define DV3KL2MD 
         ;      20 #define  I380_WI_GAZ
         ;      21 
         ;      22 #define MD1	2
         ;      23 #define MD2	3
         ;      24 #define VR	4
         ;      25 #define MD3	5
         ;      26 
         ;      27 #define PP1	6
         ;      28 #define PP2	7
         ;      29 #define PP3	5
         ;      30 #define PP4	4
         ;      31 #define PP5	3
         ;      32 #define DV	0 
         ;      33 
         ;      34 #define PP7	2
         ;      35 
         ;      36 #ifdef P380_MINI
         ;      37 #define MINPROG 1
         ;      38 #define MAXPROG 1 
         ;      39 #ifdef GAVT3
         ;      40 #define DV	2
         ;      41 #endif
         ;      42 #define PP3	3
         ;      43 #endif 
         ;      44 
         ;      45 #ifdef P380
         ;      46 #define MINPROG 1
         ;      47 #define MAXPROG 3 
         ;      48 #ifdef GAVT3
         ;      49 #define DV	2
         ;      50 #endif
         ;      51 #endif 
         ;      52 
         ;      53 #ifdef I380
         ;      54 #define MINPROG 1
         ;      55 #define MAXPROG 4
         ;      56 #endif
         ;      57 
         ;      58 #ifdef I380_WI
         ;      59 #define MINPROG 1
         ;      60 #define MAXPROG 4
         ;      61 #endif
         ;      62 
         ;      63 #ifdef I220
         ;      64 #define MINPROG 3
         ;      65 #define MAXPROG 4
         ;      66 #endif
         ;      67 
         ;      68 
         ;      69 #ifdef I220_WI
         ;      70 #define MINPROG 3
         ;      71 #define MAXPROG 4
         ;      72 #endif
         ;      73 
         ;      74 #ifdef TVIST_SKO
         ;      75 #define MINPROG 2
         ;      76 #define MAXPROG 3
         ;      77 #define DV	2
         ;      78 #endif
         ;      79 
         ;      80 #ifdef DV3KL2MD
         ;      81 
         ;      82 #define PP1	6
         ;      83 #define PP2	7
         ;      84 #define PP3	3
         ;      85 //#define PP4	4
         ;      86 //#define PP5	3
         ;      87 #define DV	2 
         ;      88 
         ;      89 #define MINPROG 2
         ;      90 #define MAXPROG 3
         ;      91 
         ;      92 #endif
         ;      93        
         ;      94 
         ;      95 #ifdef I380_WI_GAZ
         ;      96 
         ;      97 #define PP1	6
         ;      98 #define PP2	7
         ;      99 #define PP3	3
         ;     100 #define PP4	4
         ;     101 #define PP5	3
         ;     102 #define PP6	3
         ;     103 #define PP7	3
         ;     104 #define PP8	3
         ;     105 
         ;     106 #define DV	2 
         ;     107 
         ;     108 #define MINPROG 1
         ;     109 #define MAXPROG 3
         ;     110 
         ;     111 #endif
         ;     112 
         ;     113 bit b600Hz;
         ;     114 
         ;     115 bit b100Hz;
         ;     116 bit b10Hz;
         ;     117 char t0_cnt0,t0_cnt1,t0_cnt2,t0_cnt3;
         ;     118 char ind_cnt;
         ;     119 flash char IND_STROB[]={0b10111111,0b11011111,0b11101111,0b11110111,0b01111111};
         
          	.CSEG
         ;     120 flash char DIGISYM[]={0b11000000,0b11111001,0b10100100,0b10110000,0b10011001,0b10010010,0b10000010,0b11111000,0b10000000,0b10010000,0b11111111};								
         ;     121 
         ;     122 char ind_out[5]={0x255,0x255,0x255,0x255,0x255};
         
          	.DSEG
          _ind_out:
000260      	.BYTE 0x5
         ;     123 char dig[4];
          _dig:
000265      	.BYTE 0x4
         ;     124 bit bZ;    
         ;     125 char but;
         ;     126 static char but_n;
          _but_n_G1:
000269      	.BYTE 0x1
         ;     127 static char but_s;
          _but_s_G1:
00026a      	.BYTE 0x1
         ;     128 static char but0_cnt;
          _but0_cnt_G1:
00026b      	.BYTE 0x1
         ;     129 static char but1_cnt;
          _but1_cnt_G1:
00026c      	.BYTE 0x1
         ;     130 static char but_onL_temp;
          _but_onL_temp_G1:
00026d      	.BYTE 0x1
         ;     131 bit l_but;		//идет длинное нажатие на кнопку
         ;     132 bit n_but;          //произошло нажатие
         ;     133 bit speed;		//разрешение ускорения перебора 
         ;     134 bit bFL2; 
         ;     135 bit bFL5;
         ;     136 eeprom enum{evmON=0x55,evmOFF=0xaa}ee_vacuum_mode;
         
          	.ESEG
          _ee_vacuum_mode:
          	.DB  0x0
000000 00
         ;     137 eeprom char ee_program[2];
          _ee_program:
          	.DB  0x0
000001 00
          	.DB  0x0
000002 00
         ;     138 enum {p1=1,p2=2,p3=3,p4=4}prog;
         ;     139 enum{sOFF=0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13,s14,s15,s16,s54,s55,s100}step=sOFF;
         ;     140 enum {iMn,iPr_sel,iVr} ind;
         ;     141 char sub_ind;
         ;     142 char in_word,in_word_old,in_word_new,in_word_cnt;
         
          	.DSEG
          _in_word_old:
00026e      	.BYTE 0x1
          _in_word_new:
00026f      	.BYTE 0x1
          _in_word_cnt:
000270      	.BYTE 0x1
         ;     143 bit bERR;
         ;     144 signed int cnt_del=0;
          _cnt_del:
000271      	.BYTE 0x2
         ;     145 
         ;     146 char bVR;
          _bVR:
000273      	.BYTE 0x1
         ;     147 char bMD1;
          _bMD1:
000274      	.BYTE 0x1
         ;     148 bit bMD2;
         ;     149 bit bMD3;
         ;     150 char cnt_md1,cnt_md2,cnt_vr,cnt_md3;
          _cnt_md1:
000275      	.BYTE 0x1
          _cnt_md2:
000276      	.BYTE 0x1
          _cnt_vr:
000277      	.BYTE 0x1
          _cnt_md3:
000278      	.BYTE 0x1
         ;     151 
         ;     152 eeprom unsigned ee_delay[4,2];
         
          	.ESEG
          _ee_delay:
          	.DW  0x0
000003 00 00
          	.DW  0x0
000005 00 00
          	.DW  0x0
000007 00 00
          	.DW  0x0
000009 00 00
          	.DW  0x0
00000b 00 00
          	.DW  0x0
00000d 00 00
          	.DW  0x0
00000f 00 00
          	.DW  0x0
000011 00 00
         ;     153 eeprom char ee_vr_log;
          _ee_vr_log:
          	.DB  0x0
000013 00
         ;     154 //#include <mega16.h>
         ;     155 //#include <mega8535.h>
         ;     156 #include <mega32.h>
         ;     157 //-----------------------------------------------
         ;     158 void prog_drv(void)
         ;     159 {
         
          	.CSEG
          _prog_drv:
         ;     160 char temp,temp1,temp2;
         ;     161 
         ;     162 temp=ee_program[0];
00006a 940e 0729 	CALL __SAVELOCR3
         ;	temp -> R16
         ;	temp1 -> R17
         ;	temp2 -> R18
00006c e0a1      	LDI  R26,LOW(_ee_program)
00006d e0b0      	LDI  R27,HIGH(_ee_program)
00006e 940e 0705 	CALL __EEPROMRDB
000070 2f0e      	MOV  R16,R30
         ;     163 temp1=ee_program[1];
000071   +  	__POINTW2MN _ee_program,1
000073 940e 0705 	CALL __EEPROMRDB
000075 2f1e      	MOV  R17,R30
         ;     164 temp2=ee_program[2];
000076   +  	__POINTW2MN _ee_program,2
000078 940e 0705 	CALL __EEPROMRDB
00007a 2f2e      	MOV  R18,R30
         ;     165 
         ;     166 if((temp==temp1)&&(temp==temp2))
00007b 1710      	CP   R17,R16
00007c f411      	BRNE _0x5
00007d 1720      	CP   R18,R16
00007e f009      	BREQ _0x6
          _0x5:
00007f c001      	RJMP _0x4
          _0x6:
         ;     167 	{
         ;     168 	}
         ;     169 else if((temp==temp1)&&(temp!=temp2))
000080 c01d      	RJMP _0x7
          _0x4:
000081 1710      	CP   R17,R16
000082 f411      	BRNE _0x9
000083 1720      	CP   R18,R16
000084 f409      	BRNE _0xA
          _0x9:
000085 c002      	RJMP _0x8
          _0xA:
         ;     170 	{
         ;     171 	temp2=temp;
000086 2f20      	MOV  R18,R16
         ;     172 	}
         ;     173 else if((temp!=temp1)&&(temp==temp2))
000087 c016      	RJMP _0xB
          _0x8:
000088 1710      	CP   R17,R16
000089 f011      	BREQ _0xD
00008a 1720      	CP   R18,R16
00008b f009      	BREQ _0xE
          _0xD:
00008c c002      	RJMP _0xC
          _0xE:
         ;     174 	{
         ;     175 	temp1=temp;
00008d 2f10      	MOV  R17,R16
         ;     176 	}
         ;     177 else if((temp!=temp1)&&(temp1==temp2))
00008e c00f      	RJMP _0xF
          _0xC:
00008f 1710      	CP   R17,R16
000090 f011      	BREQ _0x11
000091 1721      	CP   R18,R17
000092 f009      	BREQ _0x12
          _0x11:
000093 c002      	RJMP _0x10
          _0x12:
         ;     178 	{
         ;     179 	temp=temp1;
000094 2f01      	MOV  R16,R17
         ;     180 	}
         ;     181 else if((temp!=temp1)&&(temp!=temp2))
000095 c008      	RJMP _0x13
          _0x10:
000096 1710      	CP   R17,R16
000097 f011      	BREQ _0x15
000098 1720      	CP   R18,R16
000099 f409      	BRNE _0x16
          _0x15:
00009a c003      	RJMP _0x14
          _0x16:
         ;     182 	{
         ;     183 	temp=MINPROG;
00009b e001      	LDI  R16,LOW(1)
         ;     184 	temp1=MINPROG;
00009c e011      	LDI  R17,LOW(1)
         ;     185 	temp2=MINPROG;
00009d e021      	LDI  R18,LOW(1)
         ;     186 	}
         ;     187 
         ;     188 if(!((temp<=MAXPROG)&&(temp>=MINPROG)))
          _0x14:
          _0x13:
          _0xF:
          _0xB:
          _0x7:
00009e e0e3      	LDI  R30,LOW(3)
00009f 17e0      	CP   R30,R16
0000a0 f010      	BRLO _0x18
0000a1 3001      	CPI  R16,1
0000a2 f408      	BRSH _0x17
          _0x18:
         ;     189 	{
         ;     190 	temp=MINPROG;
0000a3 e001      	LDI  R16,LOW(1)
         ;     191 	}
         ;     192 
         ;     193 if(temp!=ee_program[0])ee_program[0]=temp;
          _0x17:
0000a4 e0a1      	LDI  R26,LOW(_ee_program)
0000a5 e0b0      	LDI  R27,HIGH(_ee_program)
0000a6 940e 0705 	CALL __EEPROMRDB
0000a8 17e0      	CP   R30,R16
0000a9 f029      	BREQ _0x1A
0000aa 2fe0      	MOV  R30,R16
0000ab e0a1      	LDI  R26,LOW(_ee_program)
0000ac e0b0      	LDI  R27,HIGH(_ee_program)
0000ad 940e 0719 	CALL __EEPROMWRB
         ;     194 if(temp!=ee_program[1])ee_program[1]=temp;
          _0x1A:
0000af   +  	__POINTW2MN _ee_program,1
0000b1 940e 0705 	CALL __EEPROMRDB
0000b3 17e0      	CP   R30,R16
0000b4 f029      	BREQ _0x1B
0000b5   +  	__POINTW2MN _ee_program,1
0000b7 2fe0      	MOV  R30,R16
0000b8 940e 0719 	CALL __EEPROMWRB
         ;     195 if(temp!=ee_program[2])ee_program[2]=temp;
          _0x1B:
0000ba   +  	__POINTW2MN _ee_program,2
0000bc 940e 0705 	CALL __EEPROMRDB
0000be 17e0      	CP   R30,R16
0000bf f029      	BREQ _0x1C
0000c0   +  	__POINTW2MN _ee_program,2
0000c2 2fe0      	MOV  R30,R16
0000c3 940e 0719 	CALL __EEPROMWRB
         ;     196 
         ;     197 prog=temp;
          _0x1C:
0000c5 2ea0      	MOV  R10,R16
         ;     198 }
0000c6 940e 072e 	CALL __LOADLOCR3
0000c8 c2fe      	RJMP _0x125
         ;     199 
         ;     200 //-----------------------------------------------
         ;     201 void in_drv(void)
         ;     202 {
          _in_drv:
         ;     203 char i,temp;
         ;     204 unsigned int tempUI;
         ;     205 DDRA=0x00;
0000c9 940e 0728 	CALL __SAVELOCR4
         ;	i -> R16
         ;	temp -> R17
         ;	tempUI -> R18,R19
0000cb 940e 0663 	CALL SUBOPT_0x0
         ;     206 PORTA=0xff;
0000cd bbeb      	OUT  0x1B,R30
         ;     207 in_word_new=PINA;
0000ce b3e9      	IN   R30,0x19
0000cf 93e0 026f 	STS  _in_word_new,R30
         ;     208 if(in_word_old==in_word_new)
0000d1 91a0 026e 	LDS  R26,_in_word_old
0000d3 17ea      	CP   R30,R26
0000d4 f481      	BRNE _0x1D
         ;     209 	{
         ;     210 	if(in_word_cnt<10)
0000d5 91a0 0270 	LDS  R26,_in_word_cnt
0000d7 30aa      	CPI  R26,LOW(0xA)
0000d8 f458      	BRSH _0x1E
         ;     211 		{
         ;     212 		in_word_cnt++;
0000d9 91e0 0270 	LDS  R30,_in_word_cnt
0000db 5fef      	SUBI R30,-LOW(1)
0000dc 93e0 0270 	STS  _in_word_cnt,R30
         ;     213 		if(in_word_cnt>=10)
0000de 91a0 0270 	LDS  R26,_in_word_cnt
0000e0 30aa      	CPI  R26,LOW(0xA)
0000e1 f010      	BRLO _0x1F
         ;     214 			{
         ;     215 			in_word=in_word_old;
0000e2 90e0 026e 	LDS  R14,_in_word_old
         ;     216 			}
         ;     217 		}
          _0x1F:
         ;     218 	}
          _0x1E:
         ;     219 else in_word_cnt=0;
0000e4 c003      	RJMP _0x20
          _0x1D:
0000e5 e0e0      	LDI  R30,LOW(0)
0000e6 93e0 0270 	STS  _in_word_cnt,R30
          _0x20:
         ;     220 
         ;     221 
         ;     222 in_word_old=in_word_new;
0000e8 91e0 026f 	LDS  R30,_in_word_new
0000ea 93e0 026e 	STS  _in_word_old,R30
         ;     223 }   
0000ec 940e 072d 	CALL __LOADLOCR4
0000ee 9624      	ADIW R28,4
0000ef 9508      	RET
         ;     224 
         ;     225 #ifdef TVIST_SKO
         ;     226 //-----------------------------------------------
         ;     227 void err_drv(void)
         ;     228 {
         ;     229 if(step==sOFF)
         ;     230 	{
         ;     231     	if(prog==p2)	
         ;     232     		{
         ;     233        		if(bMD1) bERR=1;
         ;     234        		else bERR=0;
         ;     235 		}
         ;     236 	}
         ;     237 else bERR=0;
         ;     238 }
         ;     239 #endif  
         ;     240 
         ;     241 #ifndef TVIST_SKO
         ;     242 //-----------------------------------------------
         ;     243 void err_drv(void)
         ;     244 {
          _err_drv:
         ;     245 if(step==sOFF)
0000f0 20bb      	TST  R11
0000f1 f491      	BRNE _0x21
         ;     246 	{
         ;     247 	if((bMD1)||(bMD2)||(bVR)||(bMD3)) bERR=1;
0000f2 91e0 0274 	LDS  R30,_bMD1
0000f4 30e0      	CPI  R30,0
0000f5 f441      	BRNE _0x23
0000f6 fc32      	SBRC R3,2
0000f7 c006      	RJMP _0x23
0000f8 91e0 0273 	LDS  R30,_bVR
0000fa 30e0      	CPI  R30,0
0000fb f411      	BRNE _0x23
0000fc fe33      	SBRS R3,3
0000fd c003      	RJMP _0x22
          _0x23:
0000fe 9468      	SET
0000ff f831      	BLD  R3,1
         ;     248 	else bERR=0;
000100 c002      	RJMP _0x25
          _0x22:
000101 94e8      	CLT
000102 f831      	BLD  R3,1
          _0x25:
         ;     249 	}
         ;     250 else bERR=0;
000103 c002      	RJMP _0x26
          _0x21:
000104 94e8      	CLT
000105 f831      	BLD  R3,1
          _0x26:
         ;     251 }
000106 9508      	RET
         ;     252 #endif
         ;     253 //-----------------------------------------------
         ;     254 void mdvr_drv(void)
         ;     255 {
          _mdvr_drv:
         ;     256 if(!(in_word&(1<<MD1)))
000107 fce2      	SBRC R14,2
000108 c011      	RJMP _0x27
         ;     257 	{
         ;     258 	if(cnt_md1<10)
000109 91a0 0275 	LDS  R26,_cnt_md1
00010b 30aa      	CPI  R26,LOW(0xA)
00010c f460      	BRSH _0x28
         ;     259 		{
         ;     260 		cnt_md1++;
00010d 91e0 0275 	LDS  R30,_cnt_md1
00010f 5fef      	SUBI R30,-LOW(1)
000110 93e0 0275 	STS  _cnt_md1,R30
         ;     261 		if(cnt_md1==10) bMD1=1;
000112 91a0 0275 	LDS  R26,_cnt_md1
000114 30aa      	CPI  R26,LOW(0xA)
000115 f419      	BRNE _0x29
000116 e0e1      	LDI  R30,LOW(1)
000117 93e0 0274 	STS  _bMD1,R30
         ;     262 		}
          _0x29:
         ;     263 
         ;     264 	}
          _0x28:
         ;     265 else
000119 c00c      	RJMP _0x2A
          _0x27:
         ;     266 	{
         ;     267 	if(cnt_md1)
00011a 91e0 0275 	LDS  R30,_cnt_md1
00011c 30e0      	CPI  R30,0
00011d f041      	BREQ _0x2B
         ;     268 		{
         ;     269 		cnt_md1--;
00011e 50e1      	SUBI R30,LOW(1)
00011f 93e0 0275 	STS  _cnt_md1,R30
         ;     270 		if(cnt_md1==0) bMD1=0;
000121 30e0      	CPI  R30,0
000122 f419      	BRNE _0x2C
000123 e0e0      	LDI  R30,LOW(0)
000124 93e0 0274 	STS  _bMD1,R30
         ;     271 		}
          _0x2C:
         ;     272 
         ;     273 	}
          _0x2B:
          _0x2A:
         ;     274 
         ;     275 if(!(in_word&(1<<MD2)))
000126 fce3      	SBRC R14,3
000127 c010      	RJMP _0x2D
         ;     276 	{
         ;     277 	if(cnt_md2<10)
000128 91a0 0276 	LDS  R26,_cnt_md2
00012a 30aa      	CPI  R26,LOW(0xA)
00012b f458      	BRSH _0x2E
         ;     278 		{
         ;     279 		cnt_md2++;
00012c 91e0 0276 	LDS  R30,_cnt_md2
00012e 5fef      	SUBI R30,-LOW(1)
00012f 93e0 0276 	STS  _cnt_md2,R30
         ;     280 		if(cnt_md2==10) bMD2=1;
000131 91a0 0276 	LDS  R26,_cnt_md2
000133 30aa      	CPI  R26,LOW(0xA)
000134 f411      	BRNE _0x2F
000135 9468      	SET
000136 f832      	BLD  R3,2
         ;     281 		}
          _0x2F:
         ;     282 
         ;     283 	}
          _0x2E:
         ;     284 else
000137 c00b      	RJMP _0x30
          _0x2D:
         ;     285 	{
         ;     286 	if(cnt_md2)
000138 91e0 0276 	LDS  R30,_cnt_md2
00013a 30e0      	CPI  R30,0
00013b f039      	BREQ _0x31
         ;     287 		{
         ;     288 		cnt_md2--;
00013c 50e1      	SUBI R30,LOW(1)
00013d 93e0 0276 	STS  _cnt_md2,R30
         ;     289 		if(cnt_md2==0) bMD2=0;
00013f 30e0      	CPI  R30,0
000140 f411      	BRNE _0x32
000141 94e8      	CLT
000142 f832      	BLD  R3,2
         ;     290 		}
          _0x32:
         ;     291 
         ;     292 	}
          _0x31:
          _0x30:
         ;     293 
         ;     294 if(!(in_word&(1<<MD3)))
000143 fce5      	SBRC R14,5
000144 c010      	RJMP _0x33
         ;     295 	{
         ;     296 	if(cnt_md3<10)
000145 91a0 0278 	LDS  R26,_cnt_md3
000147 30aa      	CPI  R26,LOW(0xA)
000148 f458      	BRSH _0x34
         ;     297 		{
         ;     298 		cnt_md3++;
000149 91e0 0278 	LDS  R30,_cnt_md3
00014b 5fef      	SUBI R30,-LOW(1)
00014c 93e0 0278 	STS  _cnt_md3,R30
         ;     299 		if(cnt_md3==10) bMD3=1;
00014e 91a0 0278 	LDS  R26,_cnt_md3
000150 30aa      	CPI  R26,LOW(0xA)
000151 f411      	BRNE _0x35
000152 9468      	SET
000153 f833      	BLD  R3,3
         ;     300 		}
          _0x35:
         ;     301 
         ;     302 	}
          _0x34:
         ;     303 else
000154 c00b      	RJMP _0x36
          _0x33:
         ;     304 	{
         ;     305 	if(cnt_md3)
000155 91e0 0278 	LDS  R30,_cnt_md3
000157 30e0      	CPI  R30,0
000158 f039      	BREQ _0x37
         ;     306 		{
         ;     307 		cnt_md3--;
000159 50e1      	SUBI R30,LOW(1)
00015a 93e0 0278 	STS  _cnt_md3,R30
         ;     308 		if(cnt_md3==0) bMD3=0;
00015c 30e0      	CPI  R30,0
00015d f411      	BRNE _0x38
00015e 94e8      	CLT
00015f f833      	BLD  R3,3
         ;     309 		}
          _0x38:
         ;     310 
         ;     311 	}
          _0x37:
          _0x36:
         ;     312 
         ;     313 if(((!(in_word&(1<<VR)))&&(ee_vr_log)) || (((in_word&(1<<VR)))&&(!ee_vr_log)))
000160 fce4      	SBRC R14,4
000161 c006      	RJMP _0x3A
000162 e1a3      	LDI  R26,LOW(_ee_vr_log)
000163 e0b0      	LDI  R27,HIGH(_ee_vr_log)
000164 940e 0705 	CALL __EEPROMRDB
000166 30e0      	CPI  R30,0
000167 f449      	BRNE _0x3C
          _0x3A:
000168 fee4      	SBRS R14,4
000169 c006      	RJMP _0x3D
00016a e1a3      	LDI  R26,LOW(_ee_vr_log)
00016b e0b0      	LDI  R27,HIGH(_ee_vr_log)
00016c 940e 0705 	CALL __EEPROMRDB
00016e 30e0      	CPI  R30,0
00016f f009      	BREQ _0x3C
          _0x3D:
000170 c011      	RJMP _0x39
          _0x3C:
         ;     314 	{
         ;     315 	if(cnt_vr<10)
000171 91a0 0277 	LDS  R26,_cnt_vr
000173 30aa      	CPI  R26,LOW(0xA)
000174 f460      	BRSH _0x40
         ;     316 		{
         ;     317 		cnt_vr++;
000175 91e0 0277 	LDS  R30,_cnt_vr
000177 5fef      	SUBI R30,-LOW(1)
000178 93e0 0277 	STS  _cnt_vr,R30
         ;     318 		if(cnt_vr==10) bVR=1;
00017a 91a0 0277 	LDS  R26,_cnt_vr
00017c 30aa      	CPI  R26,LOW(0xA)
00017d f419      	BRNE _0x41
00017e e0e1      	LDI  R30,LOW(1)
00017f 93e0 0273 	STS  _bVR,R30
         ;     319 		}
          _0x41:
         ;     320 
         ;     321 	}
          _0x40:
         ;     322 else
000181 c00c      	RJMP _0x42
          _0x39:
         ;     323 	{
         ;     324 	if(cnt_vr)
000182 91e0 0277 	LDS  R30,_cnt_vr
000184 30e0      	CPI  R30,0
000185 f041      	BREQ _0x43
         ;     325 		{
         ;     326 		cnt_vr--;
000186 50e1      	SUBI R30,LOW(1)
000187 93e0 0277 	STS  _cnt_vr,R30
         ;     327 		if(cnt_vr==0) bVR=0;
000189 30e0      	CPI  R30,0
00018a f419      	BRNE _0x44
00018b e0e0      	LDI  R30,LOW(0)
00018c 93e0 0273 	STS  _bVR,R30
         ;     328 		}
          _0x44:
         ;     329 
         ;     330 	}
          _0x43:
          _0x42:
         ;     331 } 
00018e 9508      	RET
         ;     332 
         ;     333 #ifdef DV3KL2MD
         ;     334 //-----------------------------------------------
         ;     335 void step_contr(void)
         ;     336 {
         ;     337 char temp=0;
         ;     338 DDRB=0xFF;
         ;     339 
         ;     340 if(step==sOFF)
         ;     341 	{
         ;     342 	temp=0;
         ;     343 	}
         ;     344 
         ;     345 else if(step==s1)
         ;     346 	{
         ;     347 	temp|=(1<<PP1);
         ;     348 
         ;     349 	cnt_del--;
         ;     350 	if(cnt_del==0)
         ;     351 		{
         ;     352 		step=s2;
         ;     353 		cnt_del=20;
         ;     354 		}
         ;     355 	}
         ;     356 
         ;     357 
         ;     358 else if(step==s2)
         ;     359 	{
         ;     360 	temp|=(1<<PP1)|(1<<DV);
         ;     361 
         ;     362 	cnt_del--;
         ;     363 	if(cnt_del==0)
         ;     364 		{
         ;     365 		step=s3;
         ;     366 		}
         ;     367 	}
         ;     368 	
         ;     369 else if(step==s3)
         ;     370 	{
         ;     371 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
         ;     372      if(!bMD1)goto step_contr_end;
         ;     373      step=s4;
         ;     374      }     
         ;     375 else if(step==s4)
         ;     376 	{          
         ;     377      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     378      if(!bMD2)goto step_contr_end;
         ;     379      step=s5;
         ;     380      cnt_del=50;
         ;     381      } 
         ;     382 else if(step==s5)
         ;     383 	{
         ;     384 	temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     385 
         ;     386 	cnt_del--;
         ;     387 	if(cnt_del==0)
         ;     388 		{
         ;     389 		step=s6;
         ;     390 		cnt_del=50;
         ;     391 		}
         ;     392 	}         
         ;     393 /*else if(step==s6)
         ;     394 	{
         ;     395 	temp|=(1<<PP1)|(1<<DV);
         ;     396 
         ;     397 	cnt_del--;
         ;     398 	if(cnt_del==0)
         ;     399 		{
         ;     400 		step=s6;
         ;     401 		cnt_del=70;
         ;     402 		}
         ;     403 	}*/     
         ;     404 else if(step==s6)
         ;     405 		{
         ;     406 	temp|=(1<<PP1);
         ;     407 	cnt_del--;
         ;     408 	if(cnt_del==0)
         ;     409 		{
         ;     410 		step=sOFF;
         ;     411           }     
         ;     412      }     
         ;     413 
         ;     414 step_contr_end:
         ;     415 
         ;     416 PORTB=~temp;
         ;     417 }
         ;     418 #endif
         ;     419 
         ;     420 #ifdef P380_MINI
         ;     421 //-----------------------------------------------
         ;     422 void step_contr(void)
         ;     423 {
         ;     424 char temp=0;
         ;     425 DDRB=0xFF;
         ;     426 
         ;     427 if(step==sOFF)
         ;     428 	{
         ;     429 	temp=0;
         ;     430 	}
         ;     431 
         ;     432 else if(step==s1)
         ;     433 	{
         ;     434 	temp|=(1<<PP1);
         ;     435 
         ;     436 	cnt_del--;
         ;     437 	if(cnt_del==0)
         ;     438 		{
         ;     439 		step=s2;
         ;     440 		}
         ;     441 	}
         ;     442 
         ;     443 else if(step==s2)
         ;     444 	{
         ;     445 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
         ;     446      if(!bMD1)goto step_contr_end;
         ;     447      step=s3;
         ;     448      }     
         ;     449 else if(step==s3)
         ;     450 	{          
         ;     451      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     452      if(!bMD2)goto step_contr_end;
         ;     453      step=s4;
         ;     454      cnt_del=50;
         ;     455      }
         ;     456 else if(step==s4)
         ;     457 		{
         ;     458 	temp|=(1<<PP1);
         ;     459 	cnt_del--;
         ;     460 	if(cnt_del==0)
         ;     461 		{
         ;     462 		step=sOFF;
         ;     463           }     
         ;     464      }     
         ;     465 
         ;     466 step_contr_end:
         ;     467 
         ;     468 PORTB=~temp;
         ;     469 }
         ;     470 #endif
         ;     471 
         ;     472 #ifdef P380
         ;     473 //-----------------------------------------------
         ;     474 void step_contr(void)
         ;     475 {
         ;     476 char temp=0;
         ;     477 DDRB=0xFF;
         ;     478 
         ;     479 if(step==sOFF)
         ;     480 	{
         ;     481 	temp=0;
         ;     482 	}
         ;     483 
         ;     484 else if(prog==p1)
         ;     485 	{
         ;     486 	if(step==s1)
         ;     487 		{
         ;     488 		temp|=(1<<PP1)|(1<<PP2);
         ;     489 
         ;     490 		cnt_del--;
         ;     491 		if(cnt_del==0)
         ;     492 			{
         ;     493 			if(ee_vacuum_mode==evmOFF)
         ;     494 				{
         ;     495 				goto lbl_0001;
         ;     496 				}
         ;     497 			else step=s2;
         ;     498 			}
         ;     499 		}
         ;     500 
         ;     501 	else if(step==s2)
         ;     502 		{
         ;     503 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     504 
         ;     505           if(!bVR)goto step_contr_end;
         ;     506 lbl_0001:
         ;     507 #ifndef BIG_CAM
         ;     508 		cnt_del=30;
         ;     509 #endif
         ;     510 
         ;     511 #ifdef BIG_CAM
         ;     512 		cnt_del=100;
         ;     513 #endif
         ;     514 		step=s3;
         ;     515 		}
         ;     516 
         ;     517 	else if(step==s3)
         ;     518 		{
         ;     519 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     520 		cnt_del--;
         ;     521 		if(cnt_del==0)
         ;     522 			{
         ;     523 			step=s4;
         ;     524 			}
         ;     525           }
         ;     526 	else if(step==s4)
         ;     527 		{
         ;     528 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     529 
         ;     530           if(!bMD1)goto step_contr_end;
         ;     531 
         ;     532 		cnt_del=40;
         ;     533 		step=s5;
         ;     534 		}
         ;     535 	else if(step==s5)
         ;     536 		{
         ;     537 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     538 
         ;     539 		cnt_del--;
         ;     540 		if(cnt_del==0)
         ;     541 			{
         ;     542 			step=s6;
         ;     543 			}
         ;     544 		}
         ;     545 	else if(step==s6)
         ;     546 		{
         ;     547 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     548 
         ;     549          	if(!bMD2)goto step_contr_end;
         ;     550           cnt_del=40;
         ;     551 		//step=s7;
         ;     552 		
         ;     553           step=s55;
         ;     554           cnt_del=40;
         ;     555 		}
         ;     556 	else if(step==s55)
         ;     557 		{
         ;     558 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     559           cnt_del--;
         ;     560           if(cnt_del==0)
         ;     561 			{
         ;     562           	step=s7;
         ;     563           	cnt_del=20;
         ;     564 			}
         ;     565          		
         ;     566 		}
         ;     567 	else if(step==s7)
         ;     568 		{
         ;     569 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     570 
         ;     571 		cnt_del--;
         ;     572 		if(cnt_del==0)
         ;     573 			{
         ;     574 			step=s8;
         ;     575 			cnt_del=30;
         ;     576 			}
         ;     577 		}
         ;     578 	else if(step==s8)
         ;     579 		{
         ;     580 		temp|=(1<<PP1)|(1<<PP3);
         ;     581 
         ;     582 		cnt_del--;
         ;     583 		if(cnt_del==0)
         ;     584 			{
         ;     585 			step=s9;
         ;     586 #ifndef BIG_CAM
         ;     587 		cnt_del=150;
         ;     588 #endif
         ;     589 
         ;     590 #ifdef BIG_CAM
         ;     591 		cnt_del=200;
         ;     592 #endif
         ;     593 			}
         ;     594 		}
         ;     595 	else if(step==s9)
         ;     596 		{
         ;     597 		temp|=(1<<PP1)|(1<<PP2);
         ;     598 
         ;     599 		cnt_del--;
         ;     600 		if(cnt_del==0)
         ;     601 			{
         ;     602 			step=s10;
         ;     603 			cnt_del=30;
         ;     604 			}
         ;     605 		}
         ;     606 	else if(step==s10)
         ;     607 		{
         ;     608 		temp|=(1<<PP2);
         ;     609 		cnt_del--;
         ;     610 		if(cnt_del==0)
         ;     611 			{
         ;     612 			step=sOFF;
         ;     613 			}
         ;     614 		}
         ;     615 	}
         ;     616 
         ;     617 if(prog==p2)
         ;     618 	{
         ;     619 
         ;     620 	if(step==s1)
         ;     621 		{
         ;     622 		temp|=(1<<PP1)|(1<<PP2);
         ;     623 
         ;     624 		cnt_del--;
         ;     625 		if(cnt_del==0)
         ;     626 			{
         ;     627 			if(ee_vacuum_mode==evmOFF)
         ;     628 				{
         ;     629 				goto lbl_0002;
         ;     630 				}
         ;     631 			else step=s2;
         ;     632 			}
         ;     633 		}
         ;     634 
         ;     635 	else if(step==s2)
         ;     636 		{
         ;     637 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     638 
         ;     639           if(!bVR)goto step_contr_end;
         ;     640 lbl_0002:
         ;     641 #ifndef BIG_CAM
         ;     642 		cnt_del=30;
         ;     643 #endif
         ;     644 
         ;     645 #ifdef BIG_CAM
         ;     646 		cnt_del=100;
         ;     647 #endif
         ;     648 		step=s3;
         ;     649 		}
         ;     650 
         ;     651 	else if(step==s3)
         ;     652 		{
         ;     653 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     654 
         ;     655 		cnt_del--;
         ;     656 		if(cnt_del==0)
         ;     657 			{
         ;     658 			step=s4;
         ;     659 			}
         ;     660 		}
         ;     661 
         ;     662 	else if(step==s4)
         ;     663 		{
         ;     664 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     665 
         ;     666           if(!bMD1)goto step_contr_end;
         ;     667          	cnt_del=30;
         ;     668 		step=s5;
         ;     669 		}
         ;     670 
         ;     671 	else if(step==s5)
         ;     672 		{
         ;     673 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     674 
         ;     675 		cnt_del--;
         ;     676 		if(cnt_del==0)
         ;     677 			{
         ;     678 			step=s6;
         ;     679 			cnt_del=30;
         ;     680 			}
         ;     681 		}
         ;     682 
         ;     683 	else if(step==s6)
         ;     684 		{
         ;     685 		temp|=(1<<PP1)|(1<<PP3);
         ;     686 
         ;     687 		cnt_del--;
         ;     688 		if(cnt_del==0)
         ;     689 			{
         ;     690 			step=s7;
         ;     691 #ifndef BIG_CAM
         ;     692 		cnt_del=150;
         ;     693 #endif
         ;     694 
         ;     695 #ifdef BIG_CAM
         ;     696 		cnt_del=200;
         ;     697 #endif
         ;     698 			}
         ;     699 		}
         ;     700 
         ;     701 	else if(step==s7)
         ;     702 		{
         ;     703 		temp|=(1<<PP1)|(1<<PP2);
         ;     704 
         ;     705 		cnt_del--;
         ;     706 		if(cnt_del==0)
         ;     707 			{
         ;     708 			step=s8;
         ;     709 			cnt_del=30;
         ;     710 			}
         ;     711 		}
         ;     712 	else if(step==s8)
         ;     713 		{
         ;     714 		temp|=(1<<PP2);
         ;     715 
         ;     716 		cnt_del--;
         ;     717 		if(cnt_del==0)
         ;     718 			{
         ;     719 			step=sOFF;
         ;     720 			}
         ;     721 		}
         ;     722 	}
         ;     723 
         ;     724 if(prog==p3)
         ;     725 	{
         ;     726 
         ;     727 	if(step==s1)
         ;     728 		{
         ;     729 		temp|=(1<<PP1)|(1<<PP2);
         ;     730 
         ;     731 		cnt_del--;
         ;     732 		if(cnt_del==0)
         ;     733 			{
         ;     734 			if(ee_vacuum_mode==evmOFF)
         ;     735 				{
         ;     736 				goto lbl_0003;
         ;     737 				}
         ;     738 			else step=s2;
         ;     739 			}
         ;     740 		}
         ;     741 
         ;     742 	else if(step==s2)
         ;     743 		{
         ;     744 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     745 
         ;     746           if(!bVR)goto step_contr_end;
         ;     747 lbl_0003:
         ;     748 #ifndef BIG_CAM
         ;     749 		cnt_del=80;
         ;     750 #endif
         ;     751 
         ;     752 #ifdef BIG_CAM
         ;     753 		cnt_del=100;
         ;     754 #endif
         ;     755 		step=s3;
         ;     756 		}
         ;     757 
         ;     758 	else if(step==s3)
         ;     759 		{
         ;     760 		temp|=(1<<PP1)|(1<<PP3);
         ;     761 
         ;     762 		cnt_del--;
         ;     763 		if(cnt_del==0)
         ;     764 			{
         ;     765 			step=s4;
         ;     766 			cnt_del=120;
         ;     767 			}
         ;     768 		}
         ;     769 
         ;     770 	else if(step==s4)
         ;     771 		{
         ;     772 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<PP5);
         ;     773 
         ;     774 		cnt_del--;
         ;     775 		if(cnt_del==0)
         ;     776 			{
         ;     777 			step=s5;
         ;     778 
         ;     779 		
         ;     780 #ifndef BIG_CAM
         ;     781 		cnt_del=150;
         ;     782 #endif
         ;     783 
         ;     784 #ifdef BIG_CAM
         ;     785 		cnt_del=200;
         ;     786 #endif
         ;     787 	//	step=s5;
         ;     788 	}
         ;     789 		}
         ;     790 
         ;     791 	else if(step==s5)
         ;     792 		{
         ;     793 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<PP5);
         ;     794 
         ;     795 		cnt_del--;
         ;     796 		if(cnt_del==0)
         ;     797 			{
         ;     798 			step=s6;
         ;     799 			cnt_del=30;
         ;     800 			}
         ;     801 		}
         ;     802 
         ;     803 	else if(step==s6)
         ;     804 		{
         ;     805 		temp|=(1<<PP2)|(1<<PP4)|(1<<PP5);
         ;     806 
         ;     807 		cnt_del--;
         ;     808 		if(cnt_del==0)
         ;     809 			{
         ;     810 			step=s7;
         ;     811 			cnt_del=30;
         ;     812 			}
         ;     813 		}
         ;     814 
         ;     815 	else if(step==s7)
         ;     816 		{
         ;     817 		temp|=(1<<PP2);
         ;     818 
         ;     819 		cnt_del--;
         ;     820 		if(cnt_del==0)
         ;     821 			{
         ;     822 			step=sOFF;
         ;     823 			}
         ;     824 		}
         ;     825 
         ;     826 	}
         ;     827 step_contr_end:
         ;     828 
         ;     829 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;     830 
         ;     831 PORTB=~temp;
         ;     832 }
         ;     833 #endif
         ;     834 #ifdef I380
         ;     835 //-----------------------------------------------
         ;     836 void step_contr(void)
         ;     837 {
         ;     838 char temp=0;
         ;     839 DDRB=0xFF;
         ;     840 
         ;     841 if(step==sOFF)goto step_contr_end;
         ;     842 
         ;     843 else if(prog==p1)
         ;     844 	{
         ;     845 	if(step==s1)    //жесть
         ;     846 		{
         ;     847 		temp|=(1<<PP1);
         ;     848           if(!bMD1)goto step_contr_end;
         ;     849 
         ;     850 			if(ee_vacuum_mode==evmOFF)
         ;     851 				{
         ;     852 				goto lbl_0001;
         ;     853 				}
         ;     854 			else step=s2;
         ;     855 		}
         ;     856 
         ;     857 	else if(step==s2)
         ;     858 		{
         ;     859 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     860           if(!bVR)goto step_contr_end;
         ;     861 lbl_0001:
         ;     862 
         ;     863           step=s100;
         ;     864 		cnt_del=40;
         ;     865           }
         ;     866 	else if(step==s100)
         ;     867 		{
         ;     868 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;     869           cnt_del--;
         ;     870           if(cnt_del==0)
         ;     871 			{
         ;     872           	step=s3;
         ;     873           	cnt_del=50;
         ;     874 			}
         ;     875 		}
         ;     876 
         ;     877 	else if(step==s3)
         ;     878 		{
         ;     879 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     880           cnt_del--;
         ;     881           if(cnt_del==0)
         ;     882 			{
         ;     883           	step=s4;
         ;     884 			}
         ;     885 		}
         ;     886 	else if(step==s4)
         ;     887 		{
         ;     888 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;     889           if(!bMD2)goto step_contr_end;
         ;     890           step=s5;
         ;     891           cnt_del=20;
         ;     892 		}
         ;     893 	else if(step==s5)
         ;     894 		{
         ;     895 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     896           cnt_del--;
         ;     897           if(cnt_del==0)
         ;     898 			{
         ;     899           	step=s6;
         ;     900 			}
         ;     901           }
         ;     902 	else if(step==s6)
         ;     903 		{
         ;     904 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;     905           if(!bMD3)goto step_contr_end;
         ;     906           step=s7;
         ;     907           cnt_del=20;
         ;     908 		}
         ;     909 
         ;     910 	else if(step==s7)
         ;     911 		{
         ;     912 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     913           cnt_del--;
         ;     914           if(cnt_del==0)
         ;     915 			{
         ;     916           	step=s8;
         ;     917           	cnt_del=ee_delay[prog,0]*10U;;
         ;     918 			}
         ;     919           }
         ;     920 	else if(step==s8)
         ;     921 		{
         ;     922 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;     923           cnt_del--;
         ;     924           if(cnt_del==0)
         ;     925 			{
         ;     926           	step=s9;
         ;     927           	cnt_del=20;
         ;     928 			}
         ;     929           }
         ;     930 	else if(step==s9)
         ;     931 		{
         ;     932 		temp|=(1<<PP1);
         ;     933           cnt_del--;
         ;     934           if(cnt_del==0)
         ;     935 			{
         ;     936           	step=sOFF;
         ;     937           	}
         ;     938           }
         ;     939 	}
         ;     940 
         ;     941 else if(prog==p2)  //ско
         ;     942 	{
         ;     943 	if(step==s1)
         ;     944 		{
         ;     945 		temp|=(1<<PP1);
         ;     946           if(!bMD1)goto step_contr_end;
         ;     947 
         ;     948 			if(ee_vacuum_mode==evmOFF)
         ;     949 				{
         ;     950 				goto lbl_0002;
         ;     951 				}
         ;     952 			else step=s2;
         ;     953 
         ;     954           //step=s2;
         ;     955 		}
         ;     956 
         ;     957 	else if(step==s2)
         ;     958 		{
         ;     959 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     960           if(!bVR)goto step_contr_end;
         ;     961 
         ;     962 lbl_0002:
         ;     963           step=s100;
         ;     964 		cnt_del=40;
         ;     965           }
         ;     966 	else if(step==s100)
         ;     967 		{
         ;     968 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;     969           cnt_del--;
         ;     970           if(cnt_del==0)
         ;     971 			{
         ;     972           	step=s3;
         ;     973           	cnt_del=50;
         ;     974 			}
         ;     975 		}
         ;     976 	else if(step==s3)
         ;     977 		{
         ;     978 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     979           cnt_del--;
         ;     980           if(cnt_del==0)
         ;     981 			{
         ;     982           	step=s4;
         ;     983 			}
         ;     984 		}
         ;     985 	else if(step==s4)
         ;     986 		{
         ;     987 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;     988           if(!bMD2)goto step_contr_end;
         ;     989           step=s5;
         ;     990           cnt_del=20;
         ;     991 		}
         ;     992 	else if(step==s5)
         ;     993 		{
         ;     994 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     995           cnt_del--;
         ;     996           if(cnt_del==0)
         ;     997 			{
         ;     998           	step=s6;
         ;     999           	cnt_del=ee_delay[prog,0]*10U;
         ;    1000 			}
         ;    1001           }
         ;    1002 	else if(step==s6)
         ;    1003 		{
         ;    1004 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1005           cnt_del--;
         ;    1006           if(cnt_del==0)
         ;    1007 			{
         ;    1008           	step=s7;
         ;    1009           	cnt_del=20;
         ;    1010 			}
         ;    1011           }
         ;    1012 	else if(step==s7)
         ;    1013 		{
         ;    1014 		temp|=(1<<PP1);
         ;    1015           cnt_del--;
         ;    1016           if(cnt_del==0)
         ;    1017 			{
         ;    1018           	step=sOFF;
         ;    1019           	}
         ;    1020           }
         ;    1021 	}
         ;    1022 
         ;    1023 else if(prog==p3)   //твист
         ;    1024 	{
         ;    1025 	if(step==s1)
         ;    1026 		{
         ;    1027 		temp|=(1<<PP1);
         ;    1028           if(!bMD1)goto step_contr_end;
         ;    1029 
         ;    1030 			if(ee_vacuum_mode==evmOFF)
         ;    1031 				{
         ;    1032 				goto lbl_0003;
         ;    1033 				}
         ;    1034 			else step=s2;
         ;    1035 
         ;    1036           //step=s2;
         ;    1037 		}
         ;    1038 
         ;    1039 	else if(step==s2)
         ;    1040 		{
         ;    1041 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1042           if(!bVR)goto step_contr_end;
         ;    1043 lbl_0003:
         ;    1044           cnt_del=50;
         ;    1045 		step=s3;
         ;    1046 		}
         ;    1047 
         ;    1048 
         ;    1049 	else	if(step==s3)
         ;    1050 		{
         ;    1051 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1052 		cnt_del--;
         ;    1053 		if(cnt_del==0)
         ;    1054 			{
         ;    1055 			cnt_del=ee_delay[prog,0]*10U;
         ;    1056 			step=s4;
         ;    1057 			}
         ;    1058           }
         ;    1059 	else if(step==s4)
         ;    1060 		{
         ;    1061 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1062 		cnt_del--;
         ;    1063  		if(cnt_del==0)
         ;    1064 			{
         ;    1065 			cnt_del=ee_delay[prog,1]*10U;
         ;    1066 			step=s5;
         ;    1067 			}
         ;    1068 		}
         ;    1069 
         ;    1070 	else if(step==s5)
         ;    1071 		{
         ;    1072 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1073 		cnt_del--;
         ;    1074 		if(cnt_del==0)
         ;    1075 			{
         ;    1076 			step=s6;
         ;    1077 			cnt_del=20;
         ;    1078 			}
         ;    1079 		}
         ;    1080 
         ;    1081 	else if(step==s6)
         ;    1082 		{
         ;    1083 		temp|=(1<<PP1);
         ;    1084   		cnt_del--;
         ;    1085 		if(cnt_del==0)
         ;    1086 			{
         ;    1087 			step=sOFF;
         ;    1088 			}
         ;    1089 		}
         ;    1090 
         ;    1091 	}
         ;    1092 
         ;    1093 else if(prog==p4)      //замок
         ;    1094 	{
         ;    1095 	if(step==s1)
         ;    1096 		{
         ;    1097 		temp|=(1<<PP1);
         ;    1098           if(!bMD1)goto step_contr_end;
         ;    1099 
         ;    1100 			if(ee_vacuum_mode==evmOFF)
         ;    1101 				{
         ;    1102 				goto lbl_0004;
         ;    1103 				}
         ;    1104 			else step=s2;
         ;    1105           //step=s2;
         ;    1106 		}
         ;    1107 
         ;    1108 	else if(step==s2)
         ;    1109 		{
         ;    1110 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1111           if(!bVR)goto step_contr_end;
         ;    1112 lbl_0004:
         ;    1113           step=s3;
         ;    1114 		cnt_del=50;
         ;    1115           }
         ;    1116 
         ;    1117 	else if(step==s3)
         ;    1118 		{
         ;    1119 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1120           cnt_del--;
         ;    1121           if(cnt_del==0)
         ;    1122 			{
         ;    1123           	step=s4;
         ;    1124 			cnt_del=ee_delay[prog,0]*10U;
         ;    1125 			}
         ;    1126           }
         ;    1127 
         ;    1128    	else if(step==s4)
         ;    1129 		{
         ;    1130 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1131 		cnt_del--;
         ;    1132 		if(cnt_del==0)
         ;    1133 			{
         ;    1134 			step=s5;
         ;    1135 			cnt_del=30;
         ;    1136 			}
         ;    1137 		}
         ;    1138 
         ;    1139 	else if(step==s5)
         ;    1140 		{
         ;    1141 		temp|=(1<<PP1)|(1<<PP4);
         ;    1142 		cnt_del--;
         ;    1143 		if(cnt_del==0)
         ;    1144 			{
         ;    1145 			step=s6;
         ;    1146 			cnt_del=ee_delay[prog,1]*10U;
         ;    1147 			}
         ;    1148 		}
         ;    1149 
         ;    1150 	else if(step==s6)
         ;    1151 		{
         ;    1152 		temp|=(1<<PP4);
         ;    1153 		cnt_del--;
         ;    1154 		if(cnt_del==0)
         ;    1155 			{
         ;    1156 			step=sOFF;
         ;    1157 			}
         ;    1158 		}
         ;    1159 
         ;    1160 	}
         ;    1161 	
         ;    1162 step_contr_end:
         ;    1163 
         ;    1164 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1165 
         ;    1166 PORTB=~temp;
         ;    1167 //PORTB=0x55;
         ;    1168 }
         ;    1169 #endif
         ;    1170 
         ;    1171 #ifdef I220_WI
         ;    1172 //-----------------------------------------------
         ;    1173 void step_contr(void)
         ;    1174 {
         ;    1175 char temp=0;
         ;    1176 DDRB=0xFF;
         ;    1177 
         ;    1178 if(step==sOFF)goto step_contr_end;
         ;    1179 
         ;    1180 else if(prog==p3)   //твист
         ;    1181 	{
         ;    1182 	if(step==s1)
         ;    1183 		{
         ;    1184 		temp|=(1<<PP1);
         ;    1185           if(!bMD1)goto step_contr_end;
         ;    1186 
         ;    1187 			if(ee_vacuum_mode==evmOFF)
         ;    1188 				{
         ;    1189 				goto lbl_0003;
         ;    1190 				}
         ;    1191 			else step=s2;
         ;    1192 
         ;    1193           //step=s2;
         ;    1194 		}
         ;    1195 
         ;    1196 	else if(step==s2)
         ;    1197 		{
         ;    1198 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1199           if(!bVR)goto step_contr_end;
         ;    1200 lbl_0003:
         ;    1201           cnt_del=50;
         ;    1202 		step=s3;
         ;    1203 		}
         ;    1204 
         ;    1205 
         ;    1206 	else	if(step==s3)
         ;    1207 		{
         ;    1208 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1209 		cnt_del--;
         ;    1210 		if(cnt_del==0)
         ;    1211 			{
         ;    1212 			cnt_del=90;
         ;    1213 			step=s4;
         ;    1214 			}
         ;    1215           }
         ;    1216 	else if(step==s4)
         ;    1217 		{
         ;    1218 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1219 		cnt_del--;
         ;    1220  		if(cnt_del==0)
         ;    1221 			{
         ;    1222 			cnt_del=130;
         ;    1223 			step=s5;
         ;    1224 			}
         ;    1225 		}
         ;    1226 
         ;    1227 	else if(step==s5)
         ;    1228 		{
         ;    1229 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1230 		cnt_del--;
         ;    1231 		if(cnt_del==0)
         ;    1232 			{
         ;    1233 			step=s6;
         ;    1234 			cnt_del=20;
         ;    1235 			}
         ;    1236 		}
         ;    1237 
         ;    1238 	else if(step==s6)
         ;    1239 		{
         ;    1240 		temp|=(1<<PP1);
         ;    1241   		cnt_del--;
         ;    1242 		if(cnt_del==0)
         ;    1243 			{
         ;    1244 			step=sOFF;
         ;    1245 			}
         ;    1246 		}
         ;    1247 
         ;    1248 	}
         ;    1249 
         ;    1250 else if(prog==p4)      //замок
         ;    1251 	{
         ;    1252 	if(step==s1)
         ;    1253 		{
         ;    1254 		temp|=(1<<PP1);
         ;    1255           if(!bMD1)goto step_contr_end;
         ;    1256 
         ;    1257 			if(ee_vacuum_mode==evmOFF)
         ;    1258 				{
         ;    1259 				goto lbl_0004;
         ;    1260 				}
         ;    1261 			else step=s2;
         ;    1262           //step=s2;
         ;    1263 		}
         ;    1264 
         ;    1265 	else if(step==s2)
         ;    1266 		{
         ;    1267 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1268           if(!bVR)goto step_contr_end;
         ;    1269 lbl_0004:
         ;    1270           step=s3;
         ;    1271 		cnt_del=50;
         ;    1272           }
         ;    1273 
         ;    1274 	else if(step==s3)
         ;    1275 		{
         ;    1276 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1277           cnt_del--;
         ;    1278           if(cnt_del==0)
         ;    1279 			{
         ;    1280           	step=s4;
         ;    1281 			cnt_del=120;
         ;    1282 			}
         ;    1283           }
         ;    1284 
         ;    1285    	else if(step==s4)
         ;    1286 		{
         ;    1287 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1288 		cnt_del--;
         ;    1289 		if(cnt_del==0)
         ;    1290 			{
         ;    1291 			step=s5;
         ;    1292 			cnt_del=30;
         ;    1293 			}
         ;    1294 		}
         ;    1295 
         ;    1296 	else if(step==s5)
         ;    1297 		{
         ;    1298 		temp|=(1<<PP1)|(1<<PP4);
         ;    1299 		cnt_del--;
         ;    1300 		if(cnt_del==0)
         ;    1301 			{
         ;    1302 			step=s6;
         ;    1303 			cnt_del=120;
         ;    1304 			}
         ;    1305 		}
         ;    1306 
         ;    1307 	else if(step==s6)
         ;    1308 		{
         ;    1309 		temp|=(1<<PP4);
         ;    1310 		cnt_del--;
         ;    1311 		if(cnt_del==0)
         ;    1312 			{
         ;    1313 			step=sOFF;
         ;    1314 			}
         ;    1315 		}
         ;    1316 
         ;    1317 	}
         ;    1318 	
         ;    1319 step_contr_end:
         ;    1320 
         ;    1321 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1322 
         ;    1323 PORTB=~temp;
         ;    1324 //PORTB=0x55;
         ;    1325 }
         ;    1326 #endif 
         ;    1327 
         ;    1328 #ifdef I380_WI
         ;    1329 //-----------------------------------------------
         ;    1330 void step_contr(void)
         ;    1331 {
         ;    1332 char temp=0;
         ;    1333 DDRB=0xFF;
         ;    1334 
         ;    1335 if(step==sOFF)goto step_contr_end;
         ;    1336 
         ;    1337 else if(prog==p1)
         ;    1338 	{
         ;    1339 	if(step==s1)    //жесть
         ;    1340 		{
         ;    1341 		temp|=(1<<PP1);
         ;    1342           if(!bMD1)goto step_contr_end;
         ;    1343 
         ;    1344 			if(ee_vacuum_mode==evmOFF)
         ;    1345 				{
         ;    1346 				goto lbl_0001;
         ;    1347 				}
         ;    1348 			else step=s2;
         ;    1349 		}
         ;    1350 
         ;    1351 	else if(step==s2)
         ;    1352 		{
         ;    1353 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1354           if(!bVR)goto step_contr_end;
         ;    1355 lbl_0001:
         ;    1356 
         ;    1357           step=s100;
         ;    1358 		cnt_del=40;
         ;    1359           }
         ;    1360 	else if(step==s100)
         ;    1361 		{
         ;    1362 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1363           cnt_del--;
         ;    1364           if(cnt_del==0)
         ;    1365 			{
         ;    1366           	step=s3;
         ;    1367           	cnt_del=50;
         ;    1368 			}
         ;    1369 		}
         ;    1370 
         ;    1371 	else if(step==s3)
         ;    1372 		{
         ;    1373 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1374           cnt_del--;
         ;    1375           if(cnt_del==0)
         ;    1376 			{
         ;    1377           	step=s4;
         ;    1378 			}
         ;    1379 		}
         ;    1380 	else if(step==s4)
         ;    1381 		{
         ;    1382 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1383           if(!bMD2)goto step_contr_end;
         ;    1384           step=s54;
         ;    1385           cnt_del=20;
         ;    1386 		}
         ;    1387 	else if(step==s54)
         ;    1388 		{
         ;    1389 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1390           cnt_del--;
         ;    1391           if(cnt_del==0)
         ;    1392 			{
         ;    1393           	step=s5;
         ;    1394           	cnt_del=20;
         ;    1395 			}
         ;    1396           }
         ;    1397 
         ;    1398 	else if(step==s5)
         ;    1399 		{
         ;    1400 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1401           cnt_del--;
         ;    1402           if(cnt_del==0)
         ;    1403 			{
         ;    1404           	step=s6;
         ;    1405 			}
         ;    1406           }
         ;    1407 	else if(step==s6)
         ;    1408 		{
         ;    1409 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1410           if(!bMD3)goto step_contr_end;
         ;    1411           step=s55;
         ;    1412           cnt_del=40;
         ;    1413 		}
         ;    1414 	else if(step==s55)
         ;    1415 		{
         ;    1416 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1417           cnt_del--;
         ;    1418           if(cnt_del==0)
         ;    1419 			{
         ;    1420           	step=s7;
         ;    1421           	cnt_del=20;
         ;    1422 			}
         ;    1423           }
         ;    1424 	else if(step==s7)
         ;    1425 		{
         ;    1426 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1427           cnt_del--;
         ;    1428           if(cnt_del==0)
         ;    1429 			{
         ;    1430           	step=s8;
         ;    1431           	cnt_del=130;
         ;    1432 			}
         ;    1433           }
         ;    1434 	else if(step==s8)
         ;    1435 		{
         ;    1436 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1437           cnt_del--;
         ;    1438           if(cnt_del==0)
         ;    1439 			{
         ;    1440           	step=s9;
         ;    1441           	cnt_del=20;
         ;    1442 			}
         ;    1443           }
         ;    1444 	else if(step==s9)
         ;    1445 		{
         ;    1446 		temp|=(1<<PP1);
         ;    1447           cnt_del--;
         ;    1448           if(cnt_del==0)
         ;    1449 			{
         ;    1450           	step=sOFF;
         ;    1451           	}
         ;    1452           }
         ;    1453 	}
         ;    1454 
         ;    1455 else if(prog==p2)  //ско
         ;    1456 	{
         ;    1457 	if(step==s1)
         ;    1458 		{
         ;    1459 		temp|=(1<<PP1);
         ;    1460           if(!bMD1)goto step_contr_end;
         ;    1461 
         ;    1462 			if(ee_vacuum_mode==evmOFF)
         ;    1463 				{
         ;    1464 				goto lbl_0002;
         ;    1465 				}
         ;    1466 			else step=s2;
         ;    1467 
         ;    1468           //step=s2;
         ;    1469 		}
         ;    1470 
         ;    1471 	else if(step==s2)
         ;    1472 		{
         ;    1473 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1474           if(!bVR)goto step_contr_end;
         ;    1475 
         ;    1476 lbl_0002:
         ;    1477           step=s100;
         ;    1478 		cnt_del=40;
         ;    1479           }
         ;    1480 	else if(step==s100)
         ;    1481 		{
         ;    1482 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1483           cnt_del--;
         ;    1484           if(cnt_del==0)
         ;    1485 			{
         ;    1486           	step=s3;
         ;    1487           	cnt_del=50;
         ;    1488 			}
         ;    1489 		}
         ;    1490 	else if(step==s3)
         ;    1491 		{
         ;    1492 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1493           cnt_del--;
         ;    1494           if(cnt_del==0)
         ;    1495 			{
         ;    1496           	step=s4;
         ;    1497 			}
         ;    1498 		}
         ;    1499 	else if(step==s4)
         ;    1500 		{
         ;    1501 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1502           if(!bMD2)goto step_contr_end;
         ;    1503           step=s5;
         ;    1504           cnt_del=20;
         ;    1505 		}
         ;    1506 	else if(step==s5)
         ;    1507 		{
         ;    1508 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1509           cnt_del--;
         ;    1510           if(cnt_del==0)
         ;    1511 			{
         ;    1512           	step=s6;
         ;    1513           	cnt_del=130;
         ;    1514 			}
         ;    1515           }
         ;    1516 	else if(step==s6)
         ;    1517 		{
         ;    1518 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1519           cnt_del--;
         ;    1520           if(cnt_del==0)
         ;    1521 			{
         ;    1522           	step=s7;
         ;    1523           	cnt_del=20;
         ;    1524 			}
         ;    1525           }
         ;    1526 	else if(step==s7)
         ;    1527 		{
         ;    1528 		temp|=(1<<PP1);
         ;    1529           cnt_del--;
         ;    1530           if(cnt_del==0)
         ;    1531 			{
         ;    1532           	step=sOFF;
         ;    1533           	}
         ;    1534           }
         ;    1535 	}
         ;    1536 
         ;    1537 else if(prog==p3)   //твист
         ;    1538 	{
         ;    1539 	if(step==s1)
         ;    1540 		{
         ;    1541 		temp|=(1<<PP1);
         ;    1542           if(!bMD1)goto step_contr_end;
         ;    1543 
         ;    1544 			if(ee_vacuum_mode==evmOFF)
         ;    1545 				{
         ;    1546 				goto lbl_0003;
         ;    1547 				}
         ;    1548 			else step=s2;
         ;    1549 
         ;    1550           //step=s2;
         ;    1551 		}
         ;    1552 
         ;    1553 	else if(step==s2)
         ;    1554 		{
         ;    1555 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1556           if(!bVR)goto step_contr_end;
         ;    1557 lbl_0003:
         ;    1558           cnt_del=50;
         ;    1559 		step=s3;
         ;    1560 		}
         ;    1561 
         ;    1562 
         ;    1563 	else	if(step==s3)
         ;    1564 		{
         ;    1565 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1566 		cnt_del--;
         ;    1567 		if(cnt_del==0)
         ;    1568 			{
         ;    1569 			cnt_del=90;
         ;    1570 			step=s4;
         ;    1571 			}
         ;    1572           }
         ;    1573 	else if(step==s4)
         ;    1574 		{
         ;    1575 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1576 		cnt_del--;
         ;    1577  		if(cnt_del==0)
         ;    1578 			{
         ;    1579 			cnt_del=130;
         ;    1580 			step=s5;
         ;    1581 			}
         ;    1582 		}
         ;    1583 
         ;    1584 	else if(step==s5)
         ;    1585 		{
         ;    1586 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1587 		cnt_del--;
         ;    1588 		if(cnt_del==0)
         ;    1589 			{
         ;    1590 			step=s6;
         ;    1591 			cnt_del=20;
         ;    1592 			}
         ;    1593 		}
         ;    1594 
         ;    1595 	else if(step==s6)
         ;    1596 		{
         ;    1597 		temp|=(1<<PP1);
         ;    1598   		cnt_del--;
         ;    1599 		if(cnt_del==0)
         ;    1600 			{
         ;    1601 			step=sOFF;
         ;    1602 			}
         ;    1603 		}
         ;    1604 
         ;    1605 	}
         ;    1606 
         ;    1607 else if(prog==p4)      //замок
         ;    1608 	{
         ;    1609 	if(step==s1)
         ;    1610 		{
         ;    1611 		temp|=(1<<PP1);
         ;    1612           if(!bMD1)goto step_contr_end;
         ;    1613 
         ;    1614 			if(ee_vacuum_mode==evmOFF)
         ;    1615 				{
         ;    1616 				goto lbl_0004;
         ;    1617 				}
         ;    1618 			else step=s2;
         ;    1619           //step=s2;
         ;    1620 		}
         ;    1621 
         ;    1622 	else if(step==s2)
         ;    1623 		{
         ;    1624 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1625           if(!bVR)goto step_contr_end;
         ;    1626 lbl_0004:
         ;    1627           step=s3;
         ;    1628 		cnt_del=50;
         ;    1629           }
         ;    1630 
         ;    1631 	else if(step==s3)
         ;    1632 		{
         ;    1633 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1634           cnt_del--;
         ;    1635           if(cnt_del==0)
         ;    1636 			{
         ;    1637           	step=s4;
         ;    1638 			cnt_del=120U;
         ;    1639 			}
         ;    1640           }
         ;    1641 
         ;    1642    	else if(step==s4)
         ;    1643 		{
         ;    1644 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1645 		cnt_del--;
         ;    1646 		if(cnt_del==0)
         ;    1647 			{
         ;    1648 			step=s5;
         ;    1649 			cnt_del=30;
         ;    1650 			}
         ;    1651 		}
         ;    1652 
         ;    1653 	else if(step==s5)
         ;    1654 		{
         ;    1655 		temp|=(1<<PP1)|(1<<PP4);
         ;    1656 		cnt_del--;
         ;    1657 		if(cnt_del==0)
         ;    1658 			{
         ;    1659 			step=s6;
         ;    1660 			cnt_del=120U;
         ;    1661 			}
         ;    1662 		}
         ;    1663 
         ;    1664 	else if(step==s6)
         ;    1665 		{
         ;    1666 		temp|=(1<<PP4);
         ;    1667 		cnt_del--;
         ;    1668 		if(cnt_del==0)
         ;    1669 			{
         ;    1670 			step=sOFF;
         ;    1671 			}
         ;    1672 		}
         ;    1673 
         ;    1674 	}
         ;    1675 	
         ;    1676 step_contr_end:
         ;    1677 
         ;    1678 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1679 
         ;    1680 PORTB=~temp;
         ;    1681 //PORTB=0x55;
         ;    1682 }
         ;    1683 #endif
         ;    1684 
         ;    1685 #ifdef I220
         ;    1686 //-----------------------------------------------
         ;    1687 void step_contr(void)
         ;    1688 {
         ;    1689 char temp=0;
         ;    1690 DDRB=0xFF;
         ;    1691 
         ;    1692 if(step==sOFF)goto step_contr_end;
         ;    1693 
         ;    1694 else if(prog==p3)   //твист
         ;    1695 	{
         ;    1696 	if(step==s1)
         ;    1697 		{
         ;    1698 		temp|=(1<<PP1);
         ;    1699           if(!bMD1)goto step_contr_end;
         ;    1700 
         ;    1701 			if(ee_vacuum_mode==evmOFF)
         ;    1702 				{
         ;    1703 				goto lbl_0003;
         ;    1704 				}
         ;    1705 			else step=s2;
         ;    1706 
         ;    1707           //step=s2;
         ;    1708 		}
         ;    1709 
         ;    1710 	else if(step==s2)
         ;    1711 		{
         ;    1712 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1713           if(!bVR)goto step_contr_end;
         ;    1714 lbl_0003:
         ;    1715           cnt_del=50;
         ;    1716 		step=s3;
         ;    1717 		}
         ;    1718 
         ;    1719 
         ;    1720 	else	if(step==s3)
         ;    1721 		{
         ;    1722 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1723 		cnt_del--;
         ;    1724 		if(cnt_del==0)
         ;    1725 			{
         ;    1726 			cnt_del=ee_delay[prog,0]*10U;
         ;    1727 			step=s4;
         ;    1728 			}
         ;    1729           }
         ;    1730 	else if(step==s4)
         ;    1731 		{
         ;    1732 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1733 		cnt_del--;
         ;    1734  		if(cnt_del==0)
         ;    1735 			{
         ;    1736 			cnt_del=ee_delay[prog,1]*10U;
         ;    1737 			step=s5;
         ;    1738 			}
         ;    1739 		}
         ;    1740 
         ;    1741 	else if(step==s5)
         ;    1742 		{
         ;    1743 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1744 		cnt_del--;
         ;    1745 		if(cnt_del==0)
         ;    1746 			{
         ;    1747 			step=s6;
         ;    1748 			cnt_del=20;
         ;    1749 			}
         ;    1750 		}
         ;    1751 
         ;    1752 	else if(step==s6)
         ;    1753 		{
         ;    1754 		temp|=(1<<PP1);
         ;    1755   		cnt_del--;
         ;    1756 		if(cnt_del==0)
         ;    1757 			{
         ;    1758 			step=sOFF;
         ;    1759 			}
         ;    1760 		}
         ;    1761 
         ;    1762 	}
         ;    1763 
         ;    1764 else if(prog==p4)      //замок
         ;    1765 	{
         ;    1766 	if(step==s1)
         ;    1767 		{
         ;    1768 		temp|=(1<<PP1);
         ;    1769           if(!bMD1)goto step_contr_end;
         ;    1770 
         ;    1771 			if(ee_vacuum_mode==evmOFF)
         ;    1772 				{
         ;    1773 				goto lbl_0004;
         ;    1774 				}
         ;    1775 			else step=s2;
         ;    1776           //step=s2;
         ;    1777 		}
         ;    1778 
         ;    1779 	else if(step==s2)
         ;    1780 		{
         ;    1781 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1782           if(!bVR)goto step_contr_end;
         ;    1783 lbl_0004:
         ;    1784           step=s3;
         ;    1785 		cnt_del=50;
         ;    1786           }
         ;    1787 
         ;    1788 	else if(step==s3)
         ;    1789 		{
         ;    1790 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1791           cnt_del--;
         ;    1792           if(cnt_del==0)
         ;    1793 			{
         ;    1794           	step=s4;
         ;    1795 			cnt_del=ee_delay[prog,0]*10U;
         ;    1796 			}
         ;    1797           }
         ;    1798 
         ;    1799    	else if(step==s4)
         ;    1800 		{
         ;    1801 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1802 		cnt_del--;
         ;    1803 		if(cnt_del==0)
         ;    1804 			{
         ;    1805 			step=s5;
         ;    1806 			cnt_del=30;
         ;    1807 			}
         ;    1808 		}
         ;    1809 
         ;    1810 	else if(step==s5)
         ;    1811 		{
         ;    1812 		temp|=(1<<PP1)|(1<<PP4);
         ;    1813 		cnt_del--;
         ;    1814 		if(cnt_del==0)
         ;    1815 			{
         ;    1816 			step=s6;
         ;    1817 			cnt_del=ee_delay[prog,1]*10U;
         ;    1818 			}
         ;    1819 		}
         ;    1820 
         ;    1821 	else if(step==s6)
         ;    1822 		{
         ;    1823 		temp|=(1<<PP4);
         ;    1824 		cnt_del--;
         ;    1825 		if(cnt_del==0)
         ;    1826 			{
         ;    1827 			step=sOFF;
         ;    1828 			}
         ;    1829 		}
         ;    1830 
         ;    1831 	}
         ;    1832 	
         ;    1833 step_contr_end:
         ;    1834 
         ;    1835 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1836 
         ;    1837 PORTB=~temp;
         ;    1838 //PORTB=0x55;
         ;    1839 }
         ;    1840 #endif 
         ;    1841 
         ;    1842 #ifdef TVIST_SKO
         ;    1843 //-----------------------------------------------
         ;    1844 void step_contr(void)
         ;    1845 {
         ;    1846 char temp=0;
         ;    1847 DDRB=0xFF;
         ;    1848 
         ;    1849 if(step==sOFF)
         ;    1850 	{
         ;    1851 	temp=0;
         ;    1852 	}
         ;    1853 
         ;    1854 if(prog==p2) //СКО
         ;    1855 	{
         ;    1856 	if(step==s1)
         ;    1857 		{
         ;    1858 		temp|=(1<<PP1);
         ;    1859 
         ;    1860 		cnt_del--;
         ;    1861 		if(cnt_del==0)
         ;    1862 			{
         ;    1863 			step=s2;
         ;    1864 			cnt_del=30;
         ;    1865 			}
         ;    1866 		}
         ;    1867 
         ;    1868 	else if(step==s2)
         ;    1869 		{
         ;    1870 		temp|=(1<<PP1)|(1<<DV);
         ;    1871 
         ;    1872 		cnt_del--;
         ;    1873 		if(cnt_del==0)
         ;    1874 			{
         ;    1875 			step=s3;
         ;    1876 			}
         ;    1877 		}
         ;    1878 
         ;    1879 
         ;    1880 	else if(step==s3)
         ;    1881 		{
         ;    1882 		temp|=(1<<PP1)|(1<<DV)|(1<<PP2);
         ;    1883 
         ;    1884                	if(bMD1)//goto step_contr_end;
         ;    1885                		{  
         ;    1886                		cnt_del=100;
         ;    1887 	       		step=s4;
         ;    1888 	       		}
         ;    1889 	       	}
         ;    1890 
         ;    1891 	else if(step==s4)
         ;    1892 		{
         ;    1893 		temp|=(1<<PP1);
         ;    1894 		cnt_del--;
         ;    1895 		if(cnt_del==0)
         ;    1896 			{
         ;    1897 			step=sOFF;
         ;    1898 			}
         ;    1899 		}
         ;    1900 
         ;    1901 	}
         ;    1902 
         ;    1903 if(prog==p3)
         ;    1904 	{
         ;    1905 	if(step==s1)
         ;    1906 		{
         ;    1907 		temp|=(1<<PP1);
         ;    1908 
         ;    1909 		cnt_del--;
         ;    1910 		if(cnt_del==0)
         ;    1911 			{
         ;    1912 			step=s2;
         ;    1913 			cnt_del=100;
         ;    1914 			}
         ;    1915 		}
         ;    1916 
         ;    1917 	else if(step==s2)
         ;    1918 		{
         ;    1919 		temp|=(1<<PP1)|(1<<PP2);
         ;    1920 
         ;    1921 		cnt_del--;
         ;    1922 		if(cnt_del==0)
         ;    1923 			{
         ;    1924 			step=s3;
         ;    1925 			cnt_del=50;
         ;    1926 			}
         ;    1927 		}
         ;    1928 
         ;    1929 
         ;    1930 	else if(step==s3)
         ;    1931 		{
         ;    1932 		temp|=(1<<PP2);
         ;    1933 	
         ;    1934 		cnt_del--;
         ;    1935 		if(cnt_del==0)
         ;    1936 			{
         ;    1937 			step=sOFF;
         ;    1938 			}
         ;    1939                	}
         ;    1940 	}
         ;    1941 step_contr_end:
         ;    1942 
         ;    1943 PORTB=~temp;
         ;    1944 }
         ;    1945 #endif
         ;    1946 
         ;    1947 #ifdef I380_WI_GAZ
         ;    1948 //-----------------------------------------------
         ;    1949 void step_contr(void)
         ;    1950 {
          _step_contr:
         ;    1951 char temp=0;
         ;    1952 DDRB=0xFF;
00018f 930a      	ST   -Y,R16
         ;	temp -> R16
000190 e000      	LDI  R16,0
000191 efef      	LDI  R30,LOW(255)
000192 bbe7      	OUT  0x17,R30
         ;    1953 
         ;    1954 if(step==sOFF)goto step_contr_end;
000193 20bb      	TST  R11
000194 f409      	BRNE _0x45
000195 c19b      	RJMP _0x46
         ;    1955 
         ;    1956 else if(prog==p1)
          _0x45:
000196 e0e1      	LDI  R30,LOW(1)
000197 15ea      	CP   R30,R10
000198 f011      	BREQ PC+3
000199 940c 0224 	JMP _0x48
         ;    1957 	{
         ;    1958 	if(step==s1)    //жесть
00019b 15eb      	CP   R30,R11
00019c f479      	BRNE _0x49
         ;    1959 		{
         ;    1960 		temp|=(1<<PP1);
00019d 6400      	ORI  R16,LOW(64)
         ;    1961           if(!bMD1)goto step_contr_end;
00019e 91e0 0274 	LDS  R30,_bMD1
0001a0 30e0      	CPI  R30,0
0001a1 f409      	BRNE _0x4A
0001a2 c18e      	RJMP _0x46
         ;    1962 
         ;    1963 			if(ee_vacuum_mode==evmOFF)
          _0x4A:
0001a3 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0001a4 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0001a5 940e 0705 	CALL __EEPROMRDB
0001a7 3aea      	CPI  R30,LOW(0xAA)
0001a8 f061      	BREQ _0x4C
         ;    1964 				{
         ;    1965 				goto lbl_0001;
         ;    1966 				}
         ;    1967 			else step=s2;
0001a9 e0e2      	LDI  R30,LOW(2)
0001aa 2ebe      	MOV  R11,R30
         ;    1968 		}
         ;    1969 
         ;    1970 	else if(step==s2)
0001ab c077      	RJMP _0x4E
          _0x49:
0001ac e0e2      	LDI  R30,LOW(2)
0001ad 15eb      	CP   R30,R11
0001ae f449      	BRNE _0x4F
         ;    1971 		{
         ;    1972 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
0001af 6c08      	ORI  R16,LOW(200)
         ;    1973           if(!bVR)goto step_contr_end;
0001b0 91e0 0273 	LDS  R30,_bVR
0001b2 30e0      	CPI  R30,0
0001b3 f409      	BRNE _0x50
0001b4 c17c      	RJMP _0x46
         ;    1974 lbl_0001:
          _0x50:
          _0x4C:
         ;    1975 
         ;    1976           step=s100;
0001b5 940e 0667 	CALL SUBOPT_0x1
         ;    1977 		cnt_del=40;
         ;    1978           }
         ;    1979 	else if(step==s100)
0001b7 c06b      	RJMP _0x51
          _0x4F:
0001b8 e1e3      	LDI  R30,LOW(19)
0001b9 15eb      	CP   R30,R11
0001ba f439      	BRNE _0x52
         ;    1980 		{
         ;    1981 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
0001bb 6d08      	ORI  R16,LOW(216)
         ;    1982           cnt_del--;
0001bc 940e 0670 	CALL SUBOPT_0x2
         ;    1983           if(cnt_del==0)
0001be f411      	BRNE _0x53
         ;    1984 			{
         ;    1985           	step=s3;
0001bf 940e 067b 	CALL SUBOPT_0x3
         ;    1986           	cnt_del=50;
         ;    1987 			}
         ;    1988 		}
          _0x53:
         ;    1989 
         ;    1990 	else if(step==s3)
0001c1 c061      	RJMP _0x54
          _0x52:
0001c2 e0e3      	LDI  R30,LOW(3)
0001c3 15eb      	CP   R30,R11
0001c4 f439      	BRNE _0x55
         ;    1991 		{
         ;    1992 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
0001c5 6d0c      	ORI  R16,LOW(220)
         ;    1993           cnt_del--;
0001c6 940e 0670 	CALL SUBOPT_0x2
         ;    1994           if(cnt_del==0)
0001c8 f411      	BRNE _0x56
         ;    1995 			{
         ;    1996           	step=s4;
0001c9 e0e4      	LDI  R30,LOW(4)
0001ca 2ebe      	MOV  R11,R30
         ;    1997 			}
         ;    1998 		}
          _0x56:
         ;    1999 	else if(step==s4)
0001cb c057      	RJMP _0x57
          _0x55:
0001cc e0e4      	LDI  R30,LOW(4)
0001cd 15eb      	CP   R30,R11
0001ce f439      	BRNE _0x58
         ;    2000 		{
         ;    2001 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
0001cf 6d0c      	ORI  R16,LOW(220)
         ;    2002           if(!bMD2)goto step_contr_end;
0001d0 fe32      	SBRS R3,2
0001d1 c15f      	RJMP _0x46
         ;    2003           step=s54;
0001d2 e1e1      	LDI  R30,LOW(17)
0001d3 940e 0684 	CALL SUBOPT_0x4
         ;    2004           cnt_del=20;
         ;    2005 		}
         ;    2006 	else if(step==s54)
0001d5 c04d      	RJMP _0x5A
          _0x58:
0001d6 e1e1      	LDI  R30,LOW(17)
0001d7 15eb      	CP   R30,R11
0001d8 f441      	BRNE _0x5B
         ;    2007 		{
         ;    2008 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
0001d9 6d0c      	ORI  R16,LOW(220)
         ;    2009           cnt_del--;
0001da 940e 0670 	CALL SUBOPT_0x2
         ;    2010           if(cnt_del==0)
0001dc f419      	BRNE _0x5C
         ;    2011 			{
         ;    2012           	step=s5;
0001dd e0e5      	LDI  R30,LOW(5)
0001de 940e 0684 	CALL SUBOPT_0x4
         ;    2013           	cnt_del=20;
         ;    2014 			}
         ;    2015           }
          _0x5C:
         ;    2016 
         ;    2017 	else if(step==s5)
0001e0 c042      	RJMP _0x5D
          _0x5B:
0001e1 e0e5      	LDI  R30,LOW(5)
0001e2 15eb      	CP   R30,R11
0001e3 f439      	BRNE _0x5E
         ;    2018 		{
         ;    2019 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
0001e4 6d0c      	ORI  R16,LOW(220)
         ;    2020           cnt_del--;
0001e5 940e 0670 	CALL SUBOPT_0x2
         ;    2021           if(cnt_del==0)
0001e7 f411      	BRNE _0x5F
         ;    2022 			{
         ;    2023           	step=s6;
0001e8 e0e6      	LDI  R30,LOW(6)
0001e9 2ebe      	MOV  R11,R30
         ;    2024 			}
         ;    2025           }
          _0x5F:
         ;    2026 	else if(step==s6)
0001ea c038      	RJMP _0x60
          _0x5E:
0001eb e0e6      	LDI  R30,LOW(6)
0001ec 15eb      	CP   R30,R11
0001ed f461      	BRNE _0x61
         ;    2027 		{
         ;    2028 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
0001ee 6d0c      	ORI  R16,LOW(220)
         ;    2029           if(!bMD3)goto step_contr_end;
0001ef fe33      	SBRS R3,3
0001f0 c140      	RJMP _0x46
         ;    2030           step=s55;
0001f1 e1e2      	LDI  R30,LOW(18)
0001f2 2ebe      	MOV  R11,R30
         ;    2031           cnt_del=40;
0001f3 e2e8      	LDI  R30,LOW(40)
0001f4 e0f0      	LDI  R31,HIGH(40)
0001f5 93e0 0271 	STS  _cnt_del,R30
0001f7 93f0 0272 	STS  _cnt_del+1,R31
         ;    2032 		}
         ;    2033 	else if(step==s55)
0001f9 c029      	RJMP _0x63
          _0x61:
0001fa e1e2      	LDI  R30,LOW(18)
0001fb 15eb      	CP   R30,R11
0001fc f441      	BRNE _0x64
         ;    2034 		{
         ;    2035 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
0001fd 6d0c      	ORI  R16,LOW(220)
         ;    2036           cnt_del--;
0001fe 940e 0670 	CALL SUBOPT_0x2
         ;    2037           if(cnt_del==0)
000200 f419      	BRNE _0x65
         ;    2038 			{
         ;    2039           	step=s7;
000201 e0e7      	LDI  R30,LOW(7)
000202 940e 0684 	CALL SUBOPT_0x4
         ;    2040           	cnt_del=20;
         ;    2041 			}
         ;    2042           }
          _0x65:
         ;    2043 	else if(step==s7)
000204 c01e      	RJMP _0x66
          _0x64:
000205 e0e7      	LDI  R30,LOW(7)
000206 15eb      	CP   R30,R11
000207 f441      	BRNE _0x67
         ;    2044 		{
         ;    2045 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
000208 6d0c      	ORI  R16,LOW(220)
         ;    2046           cnt_del--;
000209 940e 0670 	CALL SUBOPT_0x2
         ;    2047           if(cnt_del==0)
00020b f419      	BRNE _0x68
         ;    2048 			{
         ;    2049           	step=s8;
00020c e0e8      	LDI  R30,LOW(8)
00020d 940e 068c 	CALL SUBOPT_0x5
         ;    2050           	cnt_del=130;
         ;    2051 			}
         ;    2052           }
          _0x68:
         ;    2053 	else if(step==s8)
00020f c013      	RJMP _0x69
          _0x67:
000210 e0e8      	LDI  R30,LOW(8)
000211 15eb      	CP   R30,R11
000212 f441      	BRNE _0x6A
         ;    2054 		{
         ;    2055 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
000213 6d00      	ORI  R16,LOW(208)
         ;    2056           cnt_del--;
000214 940e 0670 	CALL SUBOPT_0x2
         ;    2057           if(cnt_del==0)
000216 f419      	BRNE _0x6B
         ;    2058 			{
         ;    2059           	step=s9;
000217 e0e9      	LDI  R30,LOW(9)
000218 940e 0684 	CALL SUBOPT_0x4
         ;    2060           	cnt_del=20;
         ;    2061 			}
         ;    2062           }
          _0x6B:
         ;    2063 	else if(step==s9)
00021a c008      	RJMP _0x6C
          _0x6A:
00021b e0e9      	LDI  R30,LOW(9)
00021c 15eb      	CP   R30,R11
00021d f429      	BRNE _0x6D
         ;    2064 		{
         ;    2065 		temp|=(1<<PP1);
00021e 6400      	ORI  R16,LOW(64)
         ;    2066           cnt_del--;
00021f 940e 0670 	CALL SUBOPT_0x2
         ;    2067           if(cnt_del==0)
000221 f409      	BRNE _0x6E
         ;    2068 			{
         ;    2069           	step=sOFF;
000222 24bb      	CLR  R11
         ;    2070           	}
         ;    2071           }
          _0x6E:
         ;    2072 	}
          _0x6D:
          _0x6C:
          _0x69:
          _0x66:
          _0x63:
          _0x60:
          _0x5D:
          _0x5A:
          _0x57:
          _0x54:
          _0x51:
          _0x4E:
         ;    2073 
         ;    2074 else if(prog==p2)  //ско
000223 c10d      	RJMP _0x6F
          _0x48:
000224 e0e2      	LDI  R30,LOW(2)
000225 15ea      	CP   R30,R10
000226 f011      	BREQ PC+3
000227 940c 0284 	JMP _0x70
         ;    2075 	{
         ;    2076 	if(step==s1)
000229 e0e1      	LDI  R30,LOW(1)
00022a 15eb      	CP   R30,R11
00022b f479      	BRNE _0x71
         ;    2077 		{
         ;    2078 		temp|=(1<<PP1);
00022c 6400      	ORI  R16,LOW(64)
         ;    2079           if(!bMD1)goto step_contr_end;
00022d 91e0 0274 	LDS  R30,_bMD1
00022f 30e0      	CPI  R30,0
000230 f409      	BRNE _0x72
000231 c0ff      	RJMP _0x46
         ;    2080 
         ;    2081 			if(ee_vacuum_mode==evmOFF)
          _0x72:
000232 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000233 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000234 940e 0705 	CALL __EEPROMRDB
000236 3aea      	CPI  R30,LOW(0xAA)
000237 f061      	BREQ _0x74
         ;    2082 				{
         ;    2083 				goto lbl_0002;
         ;    2084 				}
         ;    2085 			else step=s2;
000238 e0e2      	LDI  R30,LOW(2)
000239 2ebe      	MOV  R11,R30
         ;    2086 
         ;    2087           //step=s2;
         ;    2088 		}
         ;    2089 
         ;    2090 	else if(step==s2)
00023a c048      	RJMP _0x76
          _0x71:
00023b e0e2      	LDI  R30,LOW(2)
00023c 15eb      	CP   R30,R11
00023d f449      	BRNE _0x77
         ;    2091 		{
         ;    2092 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
00023e 6c08      	ORI  R16,LOW(200)
         ;    2093           if(!bVR)goto step_contr_end;
00023f 91e0 0273 	LDS  R30,_bVR
000241 30e0      	CPI  R30,0
000242 f409      	BRNE _0x78
000243 c0ed      	RJMP _0x46
         ;    2094 
         ;    2095 lbl_0002:
          _0x78:
          _0x74:
         ;    2096           step=s100;
000244 940e 0667 	CALL SUBOPT_0x1
         ;    2097 		cnt_del=40;
         ;    2098           }
         ;    2099 	else if(step==s100)
000246 c03c      	RJMP _0x79
          _0x77:
000247 e1e3      	LDI  R30,LOW(19)
000248 15eb      	CP   R30,R11
000249 f439      	BRNE _0x7A
         ;    2100 		{
         ;    2101 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
00024a 6d08      	ORI  R16,LOW(216)
         ;    2102           cnt_del--;
00024b 940e 0670 	CALL SUBOPT_0x2
         ;    2103           if(cnt_del==0)
00024d f411      	BRNE _0x7B
         ;    2104 			{
         ;    2105           	step=s3;
00024e 940e 067b 	CALL SUBOPT_0x3
         ;    2106           	cnt_del=50;
         ;    2107 			}
         ;    2108 		}
          _0x7B:
         ;    2109 	else if(step==s3)
000250 c032      	RJMP _0x7C
          _0x7A:
000251 e0e3      	LDI  R30,LOW(3)
000252 15eb      	CP   R30,R11
000253 f439      	BRNE _0x7D
         ;    2110 		{
         ;    2111 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
000254 6d0c      	ORI  R16,LOW(220)
         ;    2112           cnt_del--;
000255 940e 0670 	CALL SUBOPT_0x2
         ;    2113           if(cnt_del==0)
000257 f411      	BRNE _0x7E
         ;    2114 			{
         ;    2115           	step=s4;
000258 e0e4      	LDI  R30,LOW(4)
000259 2ebe      	MOV  R11,R30
         ;    2116 			}
         ;    2117 		}
          _0x7E:
         ;    2118 	else if(step==s4)
00025a c028      	RJMP _0x7F
          _0x7D:
00025b e0e4      	LDI  R30,LOW(4)
00025c 15eb      	CP   R30,R11
00025d f439      	BRNE _0x80
         ;    2119 		{
         ;    2120 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
00025e 6d0c      	ORI  R16,LOW(220)
         ;    2121           if(!bMD2)goto step_contr_end;
00025f fe32      	SBRS R3,2
000260 c0d0      	RJMP _0x46
         ;    2122           step=s5;
000261 e0e5      	LDI  R30,LOW(5)
000262 940e 0684 	CALL SUBOPT_0x4
         ;    2123           cnt_del=20;
         ;    2124 		}
         ;    2125 	else if(step==s5)
000264 c01e      	RJMP _0x82
          _0x80:
000265 e0e5      	LDI  R30,LOW(5)
000266 15eb      	CP   R30,R11
000267 f441      	BRNE _0x83
         ;    2126 		{
         ;    2127 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
000268 6d0c      	ORI  R16,LOW(220)
         ;    2128           cnt_del--;
000269 940e 0670 	CALL SUBOPT_0x2
         ;    2129           if(cnt_del==0)
00026b f419      	BRNE _0x84
         ;    2130 			{
         ;    2131           	step=s6;
00026c e0e6      	LDI  R30,LOW(6)
00026d 940e 068c 	CALL SUBOPT_0x5
         ;    2132           	cnt_del=130;
         ;    2133 			}
         ;    2134           }
          _0x84:
         ;    2135 	else if(step==s6)
00026f c013      	RJMP _0x85
          _0x83:
000270 e0e6      	LDI  R30,LOW(6)
000271 15eb      	CP   R30,R11
000272 f441      	BRNE _0x86
         ;    2136 		{
         ;    2137 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
000273 6d00      	ORI  R16,LOW(208)
         ;    2138           cnt_del--;
000274 940e 0670 	CALL SUBOPT_0x2
         ;    2139           if(cnt_del==0)
000276 f419      	BRNE _0x87
         ;    2140 			{
         ;    2141           	step=s7;
000277 e0e7      	LDI  R30,LOW(7)
000278 940e 0684 	CALL SUBOPT_0x4
         ;    2142           	cnt_del=20;
         ;    2143 			}
         ;    2144           }
          _0x87:
         ;    2145 	else if(step==s7)
00027a c008      	RJMP _0x88
          _0x86:
00027b e0e7      	LDI  R30,LOW(7)
00027c 15eb      	CP   R30,R11
00027d f429      	BRNE _0x89
         ;    2146 		{
         ;    2147 		temp|=(1<<PP1);
00027e 6400      	ORI  R16,LOW(64)
         ;    2148           cnt_del--;
00027f 940e 0670 	CALL SUBOPT_0x2
         ;    2149           if(cnt_del==0)
000281 f409      	BRNE _0x8A
         ;    2150 			{
         ;    2151           	step=sOFF;
000282 24bb      	CLR  R11
         ;    2152           	}
         ;    2153           }
          _0x8A:
         ;    2154 	}
          _0x89:
          _0x88:
          _0x85:
          _0x82:
          _0x7F:
          _0x7C:
          _0x79:
          _0x76:
         ;    2155 
         ;    2156 else if(prog==p3)   //твист
000283 c0ad      	RJMP _0x8B
          _0x70:
000284 e0e3      	LDI  R30,LOW(3)
000285 15ea      	CP   R30,R10
000286 f011      	BREQ PC+3
000287 940c 02e1 	JMP _0x8C
         ;    2157 	{
         ;    2158 	if(step==s1)
000289 e0e1      	LDI  R30,LOW(1)
00028a 15eb      	CP   R30,R11
00028b f479      	BRNE _0x8D
         ;    2159 		{
         ;    2160 		temp|=(1<<PP1);
00028c 6400      	ORI  R16,LOW(64)
         ;    2161           if(!bMD1)goto step_contr_end;
00028d 91e0 0274 	LDS  R30,_bMD1
00028f 30e0      	CPI  R30,0
000290 f409      	BRNE _0x8E
000291 c09f      	RJMP _0x46
         ;    2162 
         ;    2163 			if(ee_vacuum_mode==evmOFF)
          _0x8E:
000292 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000293 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000294 940e 0705 	CALL __EEPROMRDB
000296 3aea      	CPI  R30,LOW(0xAA)
000297 f061      	BREQ _0x90
         ;    2164 				{
         ;    2165 				goto lbl_0003;
         ;    2166 				}
         ;    2167 			else step=s2;
000298 e0e2      	LDI  R30,LOW(2)
000299 2ebe      	MOV  R11,R30
         ;    2168 
         ;    2169           //step=s2;
         ;    2170 		}
         ;    2171 
         ;    2172 	else if(step==s2)
00029a c045      	RJMP _0x92
          _0x8D:
00029b e0e2      	LDI  R30,LOW(2)
00029c 15eb      	CP   R30,R11
00029d f479      	BRNE _0x93
         ;    2173 		{
         ;    2174 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
00029e 6c08      	ORI  R16,LOW(200)
         ;    2175           if(!bVR)goto step_contr_end;
00029f 91e0 0273 	LDS  R30,_bVR
0002a1 30e0      	CPI  R30,0
0002a2 f409      	BRNE _0x94
0002a3 c08d      	RJMP _0x46
         ;    2176 lbl_0003:
          _0x94:
          _0x90:
         ;    2177           cnt_del=50;
0002a4 e3e2      	LDI  R30,LOW(50)
0002a5 e0f0      	LDI  R31,HIGH(50)
0002a6 93e0 0271 	STS  _cnt_del,R30
0002a8 93f0 0272 	STS  _cnt_del+1,R31
         ;    2178 		step=s3;
0002aa e0e3      	LDI  R30,LOW(3)
0002ab 2ebe      	MOV  R11,R30
         ;    2179 		}
         ;    2180 
         ;    2181 
         ;    2182 	else	if(step==s3)
0002ac c033      	RJMP _0x95
          _0x93:
0002ad e0e3      	LDI  R30,LOW(3)
0002ae 15eb      	CP   R30,R11
0002af f469      	BRNE _0x96
         ;    2183 		{
         ;    2184 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
0002b0 6d08      	ORI  R16,LOW(216)
         ;    2185 		cnt_del--;
0002b1 940e 0670 	CALL SUBOPT_0x2
         ;    2186 		if(cnt_del==0)
0002b3 f441      	BRNE _0x97
         ;    2187 			{
         ;    2188 			cnt_del=90;
0002b4 e5ea      	LDI  R30,LOW(90)
0002b5 e0f0      	LDI  R31,HIGH(90)
0002b6 93e0 0271 	STS  _cnt_del,R30
0002b8 93f0 0272 	STS  _cnt_del+1,R31
         ;    2189 			step=s4;
0002ba e0e4      	LDI  R30,LOW(4)
0002bb 2ebe      	MOV  R11,R30
         ;    2190 			}
         ;    2191           }
          _0x97:
         ;    2192 	else if(step==s4)
0002bc c023      	RJMP _0x98
          _0x96:
0002bd e0e4      	LDI  R30,LOW(4)
0002be 15eb      	CP   R30,R11
0002bf f469      	BRNE _0x99
         ;    2193 		{
         ;    2194 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
0002c0 6d08      	ORI  R16,LOW(216)
         ;    2195 		cnt_del--;
0002c1 940e 0670 	CALL SUBOPT_0x2
         ;    2196  		if(cnt_del==0)
0002c3 f441      	BRNE _0x9A
         ;    2197 			{
         ;    2198 			cnt_del=130;
0002c4 e8e2      	LDI  R30,LOW(130)
0002c5 e0f0      	LDI  R31,HIGH(130)
0002c6 93e0 0271 	STS  _cnt_del,R30
0002c8 93f0 0272 	STS  _cnt_del+1,R31
         ;    2199 			step=s5;
0002ca e0e5      	LDI  R30,LOW(5)
0002cb 2ebe      	MOV  R11,R30
         ;    2200 			}
         ;    2201 		}
          _0x9A:
         ;    2202 
         ;    2203 	else if(step==s5)
0002cc c013      	RJMP _0x9B
          _0x99:
0002cd e0e5      	LDI  R30,LOW(5)
0002ce 15eb      	CP   R30,R11
0002cf f441      	BRNE _0x9C
         ;    2204 		{
         ;    2205 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
0002d0 6c08      	ORI  R16,LOW(200)
         ;    2206 		cnt_del--;
0002d1 940e 0670 	CALL SUBOPT_0x2
         ;    2207 		if(cnt_del==0)
0002d3 f419      	BRNE _0x9D
         ;    2208 			{
         ;    2209 			step=s6;
0002d4 e0e6      	LDI  R30,LOW(6)
0002d5 940e 0684 	CALL SUBOPT_0x4
         ;    2210 			cnt_del=20;
         ;    2211 			}
         ;    2212 		}
          _0x9D:
         ;    2213 
         ;    2214 	else if(step==s6)
0002d7 c008      	RJMP _0x9E
          _0x9C:
0002d8 e0e6      	LDI  R30,LOW(6)
0002d9 15eb      	CP   R30,R11
0002da f429      	BRNE _0x9F
         ;    2215 		{
         ;    2216 		temp|=(1<<PP1);
0002db 6400      	ORI  R16,LOW(64)
         ;    2217   		cnt_del--;
0002dc 940e 0670 	CALL SUBOPT_0x2
         ;    2218 		if(cnt_del==0)
0002de f409      	BRNE _0xA0
         ;    2219 			{
         ;    2220 			step=sOFF;
0002df 24bb      	CLR  R11
         ;    2221 			}
         ;    2222 		}
          _0xA0:
         ;    2223 
         ;    2224 	}
          _0x9F:
          _0x9E:
          _0x9B:
          _0x98:
          _0x95:
          _0x92:
         ;    2225 
         ;    2226 else if(prog==p4)      //замок
0002e0 c050      	RJMP _0xA1
          _0x8C:
0002e1 e0e4      	LDI  R30,LOW(4)
0002e2 15ea      	CP   R30,R10
0002e3 f011      	BREQ PC+3
0002e4 940c 0331 	JMP _0xA2
         ;    2227 	{
         ;    2228 	if(step==s1)
0002e6 e0e1      	LDI  R30,LOW(1)
0002e7 15eb      	CP   R30,R11
0002e8 f479      	BRNE _0xA3
         ;    2229 		{
         ;    2230 		temp|=(1<<PP1);
0002e9 6400      	ORI  R16,LOW(64)
         ;    2231           if(!bMD1)goto step_contr_end;
0002ea 91e0 0274 	LDS  R30,_bMD1
0002ec 30e0      	CPI  R30,0
0002ed f409      	BRNE _0xA4
0002ee c042      	RJMP _0x46
         ;    2232 
         ;    2233 			if(ee_vacuum_mode==evmOFF)
          _0xA4:
0002ef e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0002f0 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0002f1 940e 0705 	CALL __EEPROMRDB
0002f3 3aea      	CPI  R30,LOW(0xAA)
0002f4 f059      	BREQ _0xA6
         ;    2234 				{
         ;    2235 				goto lbl_0004;
         ;    2236 				}
         ;    2237 			else step=s2;
0002f5 e0e2      	LDI  R30,LOW(2)
0002f6 2ebe      	MOV  R11,R30
         ;    2238           //step=s2;
         ;    2239 		}
         ;    2240 
         ;    2241 	else if(step==s2)
0002f7 c039      	RJMP _0xA8
          _0xA3:
0002f8 e0e2      	LDI  R30,LOW(2)
0002f9 15eb      	CP   R30,R11
0002fa f441      	BRNE _0xA9
         ;    2242 		{
         ;    2243 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
0002fb 6c08      	ORI  R16,LOW(200)
         ;    2244           if(!bVR)goto step_contr_end;
0002fc 91e0 0273 	LDS  R30,_bVR
0002fe 30e0      	CPI  R30,0
0002ff f189      	BREQ _0x46
         ;    2245 lbl_0004:
          _0xA6:
         ;    2246           step=s3;
000300 940e 067b 	CALL SUBOPT_0x3
         ;    2247 		cnt_del=50;
         ;    2248           }
         ;    2249 
         ;    2250 	else if(step==s3)
000302 c02e      	RJMP _0xAB
          _0xA9:
000303 e0e3      	LDI  R30,LOW(3)
000304 15eb      	CP   R30,R11
000305 f441      	BRNE _0xAC
         ;    2251 		{
         ;    2252 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
000306 6d08      	ORI  R16,LOW(216)
         ;    2253           cnt_del--;
000307 940e 0670 	CALL SUBOPT_0x2
         ;    2254           if(cnt_del==0)
000309 f419      	BRNE _0xAD
         ;    2255 			{
         ;    2256           	step=s4;
00030a e0e4      	LDI  R30,LOW(4)
00030b 940e 0694 	CALL SUBOPT_0x6
         ;    2257 			cnt_del=120U;
         ;    2258 			}
         ;    2259           }
          _0xAD:
         ;    2260 
         ;    2261    	else if(step==s4)
00030d c023      	RJMP _0xAE
          _0xAC:
00030e e0e4      	LDI  R30,LOW(4)
00030f 15eb      	CP   R30,R11
000310 f469      	BRNE _0xAF
         ;    2262 		{
         ;    2263 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
000311 6d00      	ORI  R16,LOW(208)
         ;    2264 		cnt_del--;
000312 940e 0670 	CALL SUBOPT_0x2
         ;    2265 		if(cnt_del==0)
000314 f441      	BRNE _0xB0
         ;    2266 			{
         ;    2267 			step=s5;
000315 e0e5      	LDI  R30,LOW(5)
000316 2ebe      	MOV  R11,R30
         ;    2268 			cnt_del=30;
000317 e1ee      	LDI  R30,LOW(30)
000318 e0f0      	LDI  R31,HIGH(30)
000319 93e0 0271 	STS  _cnt_del,R30
00031b 93f0 0272 	STS  _cnt_del+1,R31
         ;    2269 			}
         ;    2270 		}
          _0xB0:
         ;    2271 
         ;    2272 	else if(step==s5)
00031d c013      	RJMP _0xB1
          _0xAF:
00031e e0e5      	LDI  R30,LOW(5)
00031f 15eb      	CP   R30,R11
000320 f441      	BRNE _0xB2
         ;    2273 		{
         ;    2274 		temp|=(1<<PP1)|(1<<PP4);
000321 6500      	ORI  R16,LOW(80)
         ;    2275 		cnt_del--;
000322 940e 0670 	CALL SUBOPT_0x2
         ;    2276 		if(cnt_del==0)
000324 f419      	BRNE _0xB3
         ;    2277 			{
         ;    2278 			step=s6;
000325 e0e6      	LDI  R30,LOW(6)
000326 940e 0694 	CALL SUBOPT_0x6
         ;    2279 			cnt_del=120U;
         ;    2280 			}
         ;    2281 		}
          _0xB3:
         ;    2282 
         ;    2283 	else if(step==s6)
000328 c008      	RJMP _0xB4
          _0xB2:
000329 e0e6      	LDI  R30,LOW(6)
00032a 15eb      	CP   R30,R11
00032b f429      	BRNE _0xB5
         ;    2284 		{
         ;    2285 		temp|=(1<<PP4);
00032c 6100      	ORI  R16,LOW(16)
         ;    2286 		cnt_del--;
00032d 940e 0670 	CALL SUBOPT_0x2
         ;    2287 		if(cnt_del==0)
00032f f409      	BRNE _0xB6
         ;    2288 			{
         ;    2289 			step=sOFF;
000330 24bb      	CLR  R11
         ;    2290 			}
         ;    2291 		}
          _0xB6:
         ;    2292 
         ;    2293 	}
          _0xB5:
          _0xB4:
          _0xB1:
          _0xAE:
          _0xAB:
          _0xA8:
         ;    2294 	
         ;    2295 step_contr_end:
          _0xA2:
          _0xA1:
          _0x8B:
          _0x6F:
          _0x46:
         ;    2296 
         ;    2297 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
000331 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000332 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000333 940e 0705 	CALL __EEPROMRDB
000335 3aea      	CPI  R30,LOW(0xAA)
000336 f409      	BRNE _0xB7
000337 7f07      	ANDI R16,LOW(247)
         ;    2298 
         ;    2299 PORTB=~temp;
          _0xB7:
000338 2fe0      	MOV  R30,R16
000339 95e0      	COM  R30
00033a bbe8      	OUT  0x18,R30
         ;    2300 //PORTB=0x55;
         ;    2301 }
00033b 9109      	LD   R16,Y+
00033c 9508      	RET
         ;    2302 #endif
         ;    2303 
         ;    2304 
         ;    2305 //-----------------------------------------------
         ;    2306 void bin2bcd_int(unsigned int in)
         ;    2307 {
          _bin2bcd_int:
         ;    2308 char i;
         ;    2309 for(i=3;i>0;i--)
00033d 930a      	ST   -Y,R16
         ;	in -> Y+1
         ;	i -> R16
00033e e003      	LDI  R16,LOW(3)
          _0xB9:
00033f e0e0      	LDI  R30,LOW(0)
000340 17e0      	CP   R30,R16
000341 f4c8      	BRSH _0xBA
         ;    2310 	{
         ;    2311 	dig[i]=in%10;
000342 2fe0      	MOV  R30,R16
000343 e0f0      	LDI  R31,0
000344 59eb      	SUBI R30,LOW(-_dig)
000345 4ffd      	SBCI R31,HIGH(-_dig)
000346 93ff      	PUSH R31
000347 93ef      	PUSH R30
000348 81a9      	LDD  R26,Y+1
000349 81ba      	LDD  R27,Y+1+1
00034a e0ea      	LDI  R30,LOW(10)
00034b e0f0      	LDI  R31,HIGH(10)
00034c 940e 06fe 	CALL __MODW21U
00034e 91af      	POP  R26
00034f 91bf      	POP  R27
000350 93ec      	ST   X,R30
         ;    2312 	in/=10;
000351 81a9      	LDD  R26,Y+1
000352 81ba      	LDD  R27,Y+1+1
000353 e0ea      	LDI  R30,LOW(10)
000354 e0f0      	LDI  R31,HIGH(10)
000355 940e 06eb 	CALL __DIVW21U
000357 83e9      	STD  Y+1,R30
000358 83fa      	STD  Y+1+1,R31
         ;    2313 	}   
000359 5001      	SUBI R16,1
00035a cfe4      	RJMP _0xB9
          _0xBA:
         ;    2314 }
00035b 8108      	LDD  R16,Y+0
00035c c06a      	RJMP _0x125
         ;    2315 
         ;    2316 //-----------------------------------------------
         ;    2317 void bcd2ind(char s)
         ;    2318 {
          _bcd2ind:
         ;    2319 char i;
         ;    2320 bZ=1;
00035d 930a      	ST   -Y,R16
         ;	s -> Y+1
         ;	i -> R16
00035e 9468      	SET
00035f f823      	BLD  R2,3
         ;    2321 for (i=0;i<5;i++)
000360 e000      	LDI  R16,LOW(0)
          _0xBC:
000361 3005      	CPI  R16,5
000362 f010      	BRLO PC+3
000363 940c 03ba 	JMP _0xBD
         ;    2322 	{
         ;    2323 	if(bZ&&(!dig[i-1])&&(i<4))
000365 fe23      	SBRS R2,3
000366 c009      	RJMP _0xBF
000367 940e 069c 	CALL SUBOPT_0x7
000369 59eb      	SUBI R30,LOW(-_dig)
00036a 4ffd      	SBCI R31,HIGH(-_dig)
00036b 81e0      	LD   R30,Z
00036c 30e0      	CPI  R30,0
00036d f411      	BRNE _0xBF
00036e 3004      	CPI  R16,4
00036f f008      	BRLO _0xC0
          _0xBF:
000370 c01f      	RJMP _0xBE
          _0xC0:
         ;    2324 		{
         ;    2325 		if((4-i)>s)
000371 e0e4      	LDI  R30,LOW(4)
000372 1be0      	SUB  R30,R16
000373 2fae      	MOV  R26,R30
000374 81e9      	LDD  R30,Y+1
000375 17ea      	CP   R30,R26
000376 f460      	BRSH _0xC1
         ;    2326 			{
         ;    2327 			ind_out[i-1]=DIGISYM[10];
000377 940e 069c 	CALL SUBOPT_0x7
000379 5ae0      	SUBI R30,LOW(-_ind_out)
00037a 4ffd      	SBCI R31,HIGH(-_ind_out)
00037b 93ff      	PUSH R31
00037c 93ef      	PUSH R30
00037d   +  	__POINTW1FN _DIGISYM,10
00037f 91e4      	LPM  R30,Z
000380 91af      	POP  R26
000381 91bf      	POP  R27
000382 c00b      	RJMP _0x126
         ;    2328 			}
         ;    2329 		else ind_out[i-1]=DIGISYM[0];	
          _0xC1:
000383 940e 069c 	CALL SUBOPT_0x7
000385 5ae0      	SUBI R30,LOW(-_ind_out)
000386 4ffd      	SBCI R31,HIGH(-_ind_out)
000387 93ff      	PUSH R31
000388 93ef      	PUSH R30
000389 e5ea      	LDI  R30,LOW(_DIGISYM*2)
00038a e0f0      	LDI  R31,HIGH(_DIGISYM*2)
00038b 91e4      	LPM  R30,Z
00038c 91af      	POP  R26
00038d 91bf      	POP  R27
          _0x126:
00038e 93ec      	ST   X,R30
         ;    2330 		}
         ;    2331 	else
00038f c018      	RJMP _0xC3
          _0xBE:
         ;    2332 		{
         ;    2333 		ind_out[i-1]=DIGISYM[dig[i-1]];
000390 940e 069c 	CALL SUBOPT_0x7
000392 5ae0      	SUBI R30,LOW(-_ind_out)
000393 4ffd      	SBCI R31,HIGH(-_ind_out)
000394 93ff      	PUSH R31
000395 93ef      	PUSH R30
000396 e5ea      	LDI  R30,LOW(_DIGISYM*2)
000397 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
000398 93ff      	PUSH R31
000399 93ef      	PUSH R30
00039a 940e 069c 	CALL SUBOPT_0x7
00039c 59eb      	SUBI R30,LOW(-_dig)
00039d 4ffd      	SBCI R31,HIGH(-_dig)
00039e 81e0      	LD   R30,Z
00039f 91af      	POP  R26
0003a0 91bf      	POP  R27
0003a1 940e 06a0 	CALL SUBOPT_0x8
0003a3 91af      	POP  R26
0003a4 91bf      	POP  R27
0003a5 93ec      	ST   X,R30
         ;    2334 		bZ=0;
0003a6 94e8      	CLT
0003a7 f823      	BLD  R2,3
         ;    2335 		}                   
          _0xC3:
         ;    2336 
         ;    2337 	if(s)
0003a8 81e9      	LDD  R30,Y+1
0003a9 30e0      	CPI  R30,0
0003aa f069      	BREQ _0xC4
         ;    2338 		{
         ;    2339 		ind_out[3-s]&=0b01111111;
0003ab 81a9      	LDD  R26,Y+1
0003ac e0e3      	LDI  R30,LOW(3)
0003ad 1bea      	SUB  R30,R26
0003ae e0f0      	LDI  R31,0
0003af 5ae0      	SUBI R30,LOW(-_ind_out)
0003b0 4ffd      	SBCI R31,HIGH(-_ind_out)
0003b1 93ff      	PUSH R31
0003b2 93ef      	PUSH R30
0003b3 81e0      	LD   R30,Z
0003b4 77ef      	ANDI R30,0x7F
0003b5 91af      	POP  R26
0003b6 91bf      	POP  R27
0003b7 93ec      	ST   X,R30
         ;    2340 		}	
         ;    2341  
         ;    2342 	}
          _0xC4:
0003b8 5f0f      	SUBI R16,-1
0003b9 cfa7      	RJMP _0xBC
          _0xBD:
         ;    2343 }            
0003ba 8108      	LDD  R16,Y+0
0003bb 9622      	ADIW R28,2
0003bc 9508      	RET
         ;    2344 //-----------------------------------------------
         ;    2345 void int2ind(unsigned int in,char s)
         ;    2346 {
          _int2ind:
         ;    2347 bin2bcd_int(in);
0003bd 81e9      	LDD  R30,Y+1
0003be 81fa      	LDD  R31,Y+1+1
0003bf 93fa      	ST   -Y,R31
0003c0 93ea      	ST   -Y,R30
0003c1 940e 033d 	CALL _bin2bcd_int
         ;    2348 bcd2ind(s);
0003c3 81e8      	LD   R30,Y
0003c4 93ea      	ST   -Y,R30
0003c5 940e 035d 	CALL _bcd2ind
         ;    2349 
         ;    2350 } 
          _0x125:
0003c7 9623      	ADIW R28,3
0003c8 9508      	RET
         ;    2351 
         ;    2352 //-----------------------------------------------
         ;    2353 void ind_hndl(void)
         ;    2354 {
          _ind_hndl:
         ;    2355 int2ind(ee_delay[prog,sub_ind],1);  
0003c9 940e 06a5 	CALL SUBOPT_0x9
0003cb 93fa      	ST   -Y,R31
0003cc 93ea      	ST   -Y,R30
0003cd e0e1      	LDI  R30,LOW(1)
0003ce 93ea      	ST   -Y,R30
0003cf 940e 03bd 	CALL _int2ind
         ;    2356 //ind_out[0]=0xff;//DIGISYM[0];
         ;    2357 //ind_out[1]=0xff;//DIGISYM[1];
         ;    2358 //ind_out[2]=DIGISYM[2];//0xff;
         ;    2359 //ind_out[0]=DIGISYM[7]; 
         ;    2360 
         ;    2361 ind_out[0]=DIGISYM[sub_ind+1];
0003d1 e5ea      	LDI  R30,LOW(_DIGISYM*2)
0003d2 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
0003d3 93ff      	PUSH R31
0003d4 93ef      	PUSH R30
0003d5 2ded      	MOV  R30,R13
0003d6 5fef      	SUBI R30,-LOW(1)
0003d7 91af      	POP  R26
0003d8 91bf      	POP  R27
0003d9 940e 06a0 	CALL SUBOPT_0x8
0003db 93e0 0260 	STS  _ind_out,R30
         ;    2362 }
0003dd 9508      	RET
         ;    2363 
         ;    2364 //-----------------------------------------------
         ;    2365 void led_hndl(void)
         ;    2366 {
          _led_hndl:
         ;    2367 ind_out[4]=DIGISYM[10]; 
0003de   +  	__POINTW1FN _DIGISYM,10
0003e0 91e4      	LPM  R30,Z
0003e1   +  	__PUTB1MN _ind_out,4
         ;    2368 
         ;    2369 ind_out[4]&=~(1<<LED_POW_ON); 
0003e3   +  	__POINTW1MN _ind_out,4
0003e5 93ff      	PUSH R31
0003e6 93ef      	PUSH R30
0003e7 81e0      	LD   R30,Z
0003e8 7def      	ANDI R30,0xDF
0003e9 91af      	POP  R26
0003ea 91bf      	POP  R27
0003eb 93ec      	ST   X,R30
         ;    2370 
         ;    2371 if(step!=sOFF)
0003ec 20bb      	TST  R11
0003ed f049      	BREQ _0xC5
         ;    2372 	{
         ;    2373 	ind_out[4]&=~(1<<LED_WRK);
0003ee   +  	__POINTW1MN _ind_out,4
0003f0 93ff      	PUSH R31
0003f1 93ef      	PUSH R30
0003f2 81e0      	LD   R30,Z
0003f3 7bef      	ANDI R30,0xBF
0003f4 91af      	POP  R26
0003f5 91bf      	POP  R27
0003f6 c008      	RJMP _0x127
         ;    2374 	}
         ;    2375 else ind_out[4]|=(1<<LED_WRK);
          _0xC5:
0003f7   +  	__POINTW1MN _ind_out,4
0003f9 93ff      	PUSH R31
0003fa 93ef      	PUSH R30
0003fb 81e0      	LD   R30,Z
0003fc 64e0      	ORI  R30,0x40
0003fd 91af      	POP  R26
0003fe 91bf      	POP  R27
          _0x127:
0003ff 93ec      	ST   X,R30
         ;    2376 
         ;    2377 
         ;    2378 if(step==sOFF)
000400 20bb      	TST  R11
000401 f4a9      	BRNE _0xC7
         ;    2379 	{
         ;    2380  	if(bERR)
000402 fe31      	SBRS R3,1
000403 c009      	RJMP _0xC8
         ;    2381 		{
         ;    2382 		ind_out[4]&=~(1<<LED_ERROR);
000404   +  	__POINTW1MN _ind_out,4
000406 93ff      	PUSH R31
000407 93ef      	PUSH R30
000408 81e0      	LD   R30,Z
000409 7fee      	ANDI R30,0xFE
00040a 91af      	POP  R26
00040b 91bf      	POP  R27
00040c c008      	RJMP _0x128
         ;    2383 		}
         ;    2384 	else
          _0xC8:
         ;    2385 		{
         ;    2386 		ind_out[4]|=(1<<LED_ERROR);
00040d   +  	__POINTW1MN _ind_out,4
00040f 93ff      	PUSH R31
000410 93ef      	PUSH R30
000411 81e0      	LD   R30,Z
000412 60e1      	ORI  R30,1
000413 91af      	POP  R26
000414 91bf      	POP  R27
          _0x128:
000415 93ec      	ST   X,R30
         ;    2387 		}
         ;    2388      }
         ;    2389 else ind_out[4]|=(1<<LED_ERROR);
000416 c009      	RJMP _0xCA
          _0xC7:
000417   +  	__POINTW1MN _ind_out,4
000419 93ff      	PUSH R31
00041a 93ef      	PUSH R30
00041b 81e0      	LD   R30,Z
00041c 60e1      	ORI  R30,1
00041d 91af      	POP  R26
00041e 91bf      	POP  R27
00041f 93ec      	ST   X,R30
          _0xCA:
         ;    2390 
         ;    2391 /* 	if(bMD1)
         ;    2392 		{
         ;    2393 		ind_out[4]&=~(1<<LED_ERROR);
         ;    2394 		}
         ;    2395 	else
         ;    2396 		{
         ;    2397 		ind_out[4]|=(1<<LED_ERROR);
         ;    2398 		} */
         ;    2399 
         ;    2400 //if(bERR)ind_out[4]&=~(1<<LED_ERROR);
         ;    2401 if(ee_vacuum_mode==evmON)ind_out[4]&=~(1<<LED_VACUUM);
000420 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000421 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000422 940e 0705 	CALL __EEPROMRDB
000424 35e5      	CPI  R30,LOW(0x55)
000425 f449      	BRNE _0xCB
000426   +  	__POINTW1MN _ind_out,4
000428 93ff      	PUSH R31
000429 93ef      	PUSH R30
00042a 81e0      	LD   R30,Z
00042b 77ef      	ANDI R30,0x7F
00042c 91af      	POP  R26
00042d 91bf      	POP  R27
00042e c008      	RJMP _0x129
         ;    2402 else ind_out[4]|=(1<<LED_VACUUM);
          _0xCB:
00042f   +  	__POINTW1MN _ind_out,4
000431 93ff      	PUSH R31
000432 93ef      	PUSH R30
000433 81e0      	LD   R30,Z
000434 68e0      	ORI  R30,0x80
000435 91af      	POP  R26
000436 91bf      	POP  R27
          _0x129:
000437 93ec      	ST   X,R30
         ;    2403 
         ;    2404 if(prog==p1) ind_out[4]&=~(1<<LED_PROG1);
000438 e0e1      	LDI  R30,LOW(1)
000439 15ea      	CP   R30,R10
00043a f451      	BRNE _0xCD
00043b   +  	__POINTW1MN _ind_out,4
00043d 93ff      	PUSH R31
00043e 93ef      	PUSH R30
00043f 81e0      	LD   R30,Z
000440 7eef      	ANDI R30,0xEF
000441 91af      	POP  R26
000442 91bf      	POP  R27
000443 93ec      	ST   X,R30
         ;    2405 else if(prog==p2) ind_out[4]&=~(1<<LED_PROG2);
000444 c026      	RJMP _0xCE
          _0xCD:
000445 e0e2      	LDI  R30,LOW(2)
000446 15ea      	CP   R30,R10
000447 f451      	BRNE _0xCF
000448   +  	__POINTW1MN _ind_out,4
00044a 93ff      	PUSH R31
00044b 93ef      	PUSH R30
00044c 81e0      	LD   R30,Z
00044d 7feb      	ANDI R30,0xFB
00044e 91af      	POP  R26
00044f 91bf      	POP  R27
000450 93ec      	ST   X,R30
         ;    2406 else if(prog==p3) ind_out[4]&=~(1<<LED_PROG3);
000451 c019      	RJMP _0xD0
          _0xCF:
000452 e0e3      	LDI  R30,LOW(3)
000453 15ea      	CP   R30,R10
000454 f451      	BRNE _0xD1
000455   +  	__POINTW1MN _ind_out,4
000457 93ff      	PUSH R31
000458 93ef      	PUSH R30
000459 81e0      	LD   R30,Z
00045a 7fe7      	ANDI R30,0XF7
00045b 91af      	POP  R26
00045c 91bf      	POP  R27
00045d 93ec      	ST   X,R30
         ;    2407 else if(prog==p4) ind_out[4]&=~(1<<LED_PROG4);
00045e c00c      	RJMP _0xD2
          _0xD1:
00045f e0e4      	LDI  R30,LOW(4)
000460 15ea      	CP   R30,R10
000461 f449      	BRNE _0xD3
000462   +  	__POINTW1MN _ind_out,4
000464 93ff      	PUSH R31
000465 93ef      	PUSH R30
000466 81e0      	LD   R30,Z
000467 7fed      	ANDI R30,0xFD
000468 91af      	POP  R26
000469 91bf      	POP  R27
00046a 93ec      	ST   X,R30
         ;    2408 
         ;    2409 if(ind==iPr_sel)
          _0xD3:
          _0xD2:
          _0xD0:
          _0xCE:
00046b e0e1      	LDI  R30,LOW(1)
00046c 15ec      	CP   R30,R12
00046d f459      	BRNE _0xD4
         ;    2410 	{
         ;    2411 	if(bFL5)ind_out[4]|=(1<<LED_PROG1)|(1<<LED_PROG2)|(1<<LED_PROG3)|(1<<LED_PROG4);
00046e fe30      	SBRS R3,0
00046f c009      	RJMP _0xD5
000470   +  	__POINTW1MN _ind_out,4
000472 93ff      	PUSH R31
000473 93ef      	PUSH R30
000474 81e0      	LD   R30,Z
000475 61ee      	ORI  R30,LOW(0x1E)
000476 91af      	POP  R26
000477 91bf      	POP  R27
000478 93ec      	ST   X,R30
         ;    2412 	} 
          _0xD5:
         ;    2413 	 
         ;    2414 if(ind==iVr)
          _0xD4:
000479 e0e2      	LDI  R30,LOW(2)
00047a 15ec      	CP   R30,R12
00047b f459      	BRNE _0xD6
         ;    2415 	{
         ;    2416 	if(bFL5)ind_out[4]|=(1<<LED_POW_ON);
00047c fe30      	SBRS R3,0
00047d c009      	RJMP _0xD7
00047e   +  	__POINTW1MN _ind_out,4
000480 93ff      	PUSH R31
000481 93ef      	PUSH R30
000482 81e0      	LD   R30,Z
000483 62e0      	ORI  R30,0x20
000484 91af      	POP  R26
000485 91bf      	POP  R27
000486 93ec      	ST   X,R30
         ;    2417 	}	
          _0xD7:
         ;    2418 }
          _0xD6:
000487 9508      	RET
         ;    2419 
         ;    2420 //-----------------------------------------------
         ;    2421 // Подпрограмма драйва до 7 кнопок одного порта, 
         ;    2422 // различает короткое и длинное нажатие,
         ;    2423 // срабатывает на отпускание кнопки, возможность
         ;    2424 // ускорения перебора при длинном нажатии...
         ;    2425 #define but_port PORTC
         ;    2426 #define but_dir  DDRC
         ;    2427 #define but_pin  PINC
         ;    2428 #define but_mask 0b01101010
         ;    2429 #define no_but   0b11111111
         ;    2430 #define but_on   5
         ;    2431 #define but_onL  20
         ;    2432 
         ;    2433 
         ;    2434 
         ;    2435 
         ;    2436 void but_drv(void)
         ;    2437 { 
          _but_drv:
         ;    2438 DDRD&=0b00000111;
000488 b3e1      	IN   R30,0x11
000489 70e7      	ANDI R30,LOW(0x7)
00048a 940e 06b8 	CALL SUBOPT_0xA
         ;    2439 PORTD|=0b11111000;
         ;    2440 
         ;    2441 but_port|=(but_mask^0xff);
00048c 940e 06bd 	CALL SUBOPT_0xB
         ;    2442 but_dir&=but_mask;
         ;    2443 #asm
         ;    2444 nop
00048e 0000      nop
         ;    2445 nop
00048f 0000      nop
         ;    2446 nop
000490 0000      nop
         ;    2447 nop
000491 0000      nop
         ;    2448 #endasm
         
         ;    2449 
         ;    2450 but_n=but_pin|but_mask; 
000492 b3e3      	IN   R30,0x13
000493 66ea      	ORI  R30,LOW(0x6A)
000494 93e0 0269 	STS  _but_n_G1,R30
         ;    2451 
         ;    2452 if((but_n==no_but)||(but_n!=but_s))
000496 91a0 0269 	LDS  R26,_but_n_G1
000498 3faf      	CPI  R26,LOW(0xFF)
000499 f011      	BREQ _0xD9
00049a d229      	RCALL SUBOPT_0xC
00049b f109      	BREQ _0xD8
          _0xD9:
         ;    2453  	{
         ;    2454  	speed=0;
00049c 94e8      	CLT
00049d f826      	BLD  R2,6
         ;    2455    	if (((but0_cnt>=but_on)||(but1_cnt!=0))&&(!l_but))
00049e 91a0 026b 	LDS  R26,_but0_cnt_G1
0004a0 30a5      	CPI  R26,LOW(0x5)
0004a1 f420      	BRSH _0xDC
0004a2 91a0 026c 	LDS  R26,_but1_cnt_G1
0004a4 30a0      	CPI  R26,LOW(0x0)
0004a5 f011      	BREQ _0xDE
          _0xDC:
0004a6 fe24      	SBRS R2,4
0004a7 c001      	RJMP _0xDF
          _0xDE:
0004a8 c004      	RJMP _0xDB
          _0xDF:
         ;    2456   		{
         ;    2457    	     n_but=1;
0004a9 9468      	SET
0004aa f825      	BLD  R2,5
         ;    2458           but=but_s;
0004ab 9090 026a 	LDS  R9,_but_s_G1
         ;    2459           }
         ;    2460    	if (but1_cnt>=but_onL_temp)
          _0xDB:
0004ad d21c      	RCALL SUBOPT_0xD
0004ae f018      	BRLO _0xE0
         ;    2461   		{
         ;    2462    	     n_but=1;
0004af 9468      	SET
0004b0 f825      	BLD  R2,5
         ;    2463           but=but_s&0b11111101;
0004b1 d21e      	RCALL SUBOPT_0xE
         ;    2464           }
         ;    2465     	l_but=0;
          _0xE0:
0004b2 94e8      	CLT
0004b3 f824      	BLD  R2,4
         ;    2466    	but_onL_temp=but_onL;
0004b4 e1e4      	LDI  R30,LOW(20)
0004b5 93e0 026d 	STS  _but_onL_temp_G1,R30
         ;    2467     	but0_cnt=0;
0004b7 e0e0      	LDI  R30,LOW(0)
0004b8 93e0 026b 	STS  _but0_cnt_G1,R30
         ;    2468   	but1_cnt=0;          
0004ba 93e0 026c 	STS  _but1_cnt_G1,R30
         ;    2469      goto but_drv_out;
0004bc c02b      	RJMP _0xE1
         ;    2470   	}  
         ;    2471   	
         ;    2472 if(but_n==but_s)
          _0xD8:
0004bd d206      	RCALL SUBOPT_0xC
0004be f549      	BRNE _0xE2
         ;    2473  	{
         ;    2474   	but0_cnt++;
0004bf 91e0 026b 	LDS  R30,_but0_cnt_G1
0004c1 5fef      	SUBI R30,-LOW(1)
0004c2 93e0 026b 	STS  _but0_cnt_G1,R30
         ;    2475   	if(but0_cnt>=but_on)
0004c4 91a0 026b 	LDS  R26,_but0_cnt_G1
0004c6 30a5      	CPI  R26,LOW(0x5)
0004c7 f100      	BRLO _0xE3
         ;    2476   		{
         ;    2477    		but0_cnt=0;
0004c8 e0e0      	LDI  R30,LOW(0)
0004c9 93e0 026b 	STS  _but0_cnt_G1,R30
         ;    2478    		but1_cnt++;
0004cb 91e0 026c 	LDS  R30,_but1_cnt_G1
0004cd 5fef      	SUBI R30,-LOW(1)
0004ce 93e0 026c 	STS  _but1_cnt_G1,R30
         ;    2479    		if(but1_cnt>=but_onL_temp)
0004d0 d1f9      	RCALL SUBOPT_0xD
0004d1 f0b0      	BRLO _0xE4
         ;    2480    			{              
         ;    2481     			but=but_s&0b11111101;
0004d2 d1fd      	RCALL SUBOPT_0xE
         ;    2482     			but1_cnt=0;
0004d3 e0e0      	LDI  R30,LOW(0)
0004d4 93e0 026c 	STS  _but1_cnt_G1,R30
         ;    2483     			n_but=1;
0004d6 9468      	SET
0004d7 f825      	BLD  R2,5
         ;    2484     			l_but=1;
0004d8 9468      	SET
0004d9 f824      	BLD  R2,4
         ;    2485 			if(speed)
0004da fe26      	SBRS R2,6
0004db c00c      	RJMP _0xE5
         ;    2486 				{
         ;    2487     				but_onL_temp=but_onL_temp>>1;
0004dc 91e0 026d 	LDS  R30,_but_onL_temp_G1
0004de 95e6      	LSR  R30
0004df 93e0 026d 	STS  _but_onL_temp_G1,R30
         ;    2488         			if(but_onL_temp<=2) but_onL_temp=2;
0004e1 91a0 026d 	LDS  R26,_but_onL_temp_G1
0004e3 e0e2      	LDI  R30,LOW(2)
0004e4 17ea      	CP   R30,R26
0004e5 f010      	BRLO _0xE6
0004e6 93e0 026d 	STS  _but_onL_temp_G1,R30
         ;    2489 				}    
          _0xE6:
         ;    2490    			}
          _0xE5:
         ;    2491   		} 
          _0xE4:
         ;    2492  	}
          _0xE3:
         ;    2493 but_drv_out:
          _0xE2:
          _0xE1:
         ;    2494 but_s=but_n;
0004e8 91e0 0269 	LDS  R30,_but_n_G1
0004ea 93e0 026a 	STS  _but_s_G1,R30
         ;    2495 but_port|=(but_mask^0xff);
0004ec d1d0      	RCALL SUBOPT_0xB
         ;    2496 but_dir&=but_mask;
         ;    2497 }    
0004ed 9508      	RET
         ;    2498 
         ;    2499 #define butV	239
         ;    2500 #define butV_	237
         ;    2501 #define butP	251
         ;    2502 #define butP_	249
         ;    2503 #define butR	127
         ;    2504 #define butR_	125
         ;    2505 #define butL	254
         ;    2506 #define butL_	252
         ;    2507 #define butLR	126
         ;    2508 #define butLR_	124 
         ;    2509 #define butVP_ 233
         ;    2510 //-----------------------------------------------
         ;    2511 void but_an(void)
         ;    2512 {
          _but_an:
         ;    2513 
         ;    2514 if(!(in_word&0x01))
0004ee fce0      	SBRC R14,0
0004ef c024      	RJMP _0xE7
         ;    2515 	{
         ;    2516 	#ifdef TVIST_SKO
         ;    2517 	if((step==sOFF)&&(!bERR))
         ;    2518 		{
         ;    2519 		step=s1;
         ;    2520 		if(prog==p2) cnt_del=70;
         ;    2521 		else if(prog==p3) cnt_del=100;
         ;    2522 		}
         ;    2523 	#endif
         ;    2524 	#ifdef DV3KL2MD
         ;    2525 	if((step==sOFF)&&(!bERR))
         ;    2526 		{
         ;    2527 		step=s1;
         ;    2528 		cnt_del=70;
         ;    2529 		}
         ;    2530 	#endif	
         ;    2531 	#ifndef TVIST_SKO
         ;    2532 	if((step==sOFF)&&(!bERR))
0004f0 e0e0      	LDI  R30,LOW(0)
0004f1 15eb      	CP   R30,R11
0004f2 f411      	BRNE _0xE9
0004f3 fe31      	SBRS R3,1
0004f4 c001      	RJMP _0xEA
          _0xE9:
0004f5 c01e      	RJMP _0xE8
          _0xEA:
         ;    2533 		{
         ;    2534 		step=s1;
0004f6 e0e1      	LDI  R30,LOW(1)
0004f7 2ebe      	MOV  R11,R30
         ;    2535 		if(prog==p1) cnt_del=50;
0004f8 15ea      	CP   R30,R10
0004f9 f439      	BRNE _0xEB
0004fa e3e2      	LDI  R30,LOW(50)
0004fb e0f0      	LDI  R31,HIGH(50)
0004fc 93e0 0271 	STS  _cnt_del,R30
0004fe 93f0 0272 	STS  _cnt_del+1,R31
         ;    2536 		else if(prog==p2) cnt_del=50;
000500 c013      	RJMP _0xEC
          _0xEB:
000501 e0e2      	LDI  R30,LOW(2)
000502 15ea      	CP   R30,R10
000503 f439      	BRNE _0xED
000504 e3e2      	LDI  R30,LOW(50)
000505 e0f0      	LDI  R31,HIGH(50)
000506 93e0 0271 	STS  _cnt_del,R30
000508 93f0 0272 	STS  _cnt_del+1,R31
         ;    2537 		else if(prog==p3) cnt_del=50;
00050a c009      	RJMP _0xEE
          _0xED:
00050b e0e3      	LDI  R30,LOW(3)
00050c 15ea      	CP   R30,R10
00050d f431      	BRNE _0xEF
00050e e3e2      	LDI  R30,LOW(50)
00050f e0f0      	LDI  R31,HIGH(50)
000510 93e0 0271 	STS  _cnt_del,R30
000512 93f0 0272 	STS  _cnt_del+1,R31
         ;    2538           #ifdef P380_MINI
         ;    2539   		cnt_del=100;
         ;    2540   		#endif
         ;    2541 		}
          _0xEF:
          _0xEE:
          _0xEC:
         ;    2542 	#endif
         ;    2543 	}
          _0xE8:
         ;    2544 if(!(in_word&0x02))
          _0xE7:
000514 fce1      	SBRC R14,1
000515 c001      	RJMP _0xF0
         ;    2545 	{
         ;    2546 	step=sOFF;
000516 24bb      	CLR  R11
         ;    2547 
         ;    2548 	}
         ;    2549 
         ;    2550 if (!n_but) goto but_an_end;
          _0xF0:
000517 fe25      	SBRS R2,5
000518 c0a0      	RJMP _0xF2
         ;    2551 
         ;    2552 if(but==butV_)
000519 eeed      	LDI  R30,LOW(237)
00051a 15e9      	CP   R30,R9
00051b f469      	BRNE _0xF3
         ;    2553 	{
         ;    2554 	if(ee_vacuum_mode==evmON)ee_vacuum_mode=evmOFF;
00051c e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
00051d e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
00051e 940e 0705 	CALL __EEPROMRDB
000520 35e5      	CPI  R30,LOW(0x55)
000521 f411      	BRNE _0xF4
000522 eaea      	LDI  R30,LOW(170)
000523 c001      	RJMP _0x12A
         ;    2555 	else ee_vacuum_mode=evmON;
          _0xF4:
000524 e5e5      	LDI  R30,LOW(85)
          _0x12A:
000525 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000526 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000527 940e 0719 	CALL __EEPROMWRB
         ;    2556 	}
         ;    2557 
         ;    2558 if(but==butVP_)
          _0xF3:
000529 eee9      	LDI  R30,LOW(233)
00052a 15e9      	CP   R30,R9
00052b f431      	BRNE _0xF6
         ;    2559 	{
         ;    2560 	if(ind!=iVr)ind=iVr;
00052c e0e2      	LDI  R30,LOW(2)
00052d 15ec      	CP   R30,R12
00052e f011      	BREQ _0xF7
00052f 2ece      	MOV  R12,R30
         ;    2561 	else ind=iMn;
000530 c001      	RJMP _0xF8
          _0xF7:
000531 24cc      	CLR  R12
          _0xF8:
         ;    2562 	}
         ;    2563 
         ;    2564 	
         ;    2565 if(ind==iMn)
          _0xF6:
000532 20cc      	TST  R12
000533 f591      	BRNE _0xF9
         ;    2566 	{
         ;    2567 	if(but==butP_)ind=iPr_sel;
000534 efe9      	LDI  R30,LOW(249)
000535 15e9      	CP   R30,R9
000536 f411      	BRNE _0xFA
000537 e0e1      	LDI  R30,LOW(1)
000538 2ece      	MOV  R12,R30
         ;    2568 	if(but==butLR)	
          _0xFA:
000539 e7ee      	LDI  R30,LOW(126)
00053a 15e9      	CP   R30,R9
00053b f471      	BRNE _0xFB
         ;    2569 		{
         ;    2570 		if((prog==p3)||(prog==p4))
00053c e0e3      	LDI  R30,LOW(3)
00053d 15ea      	CP   R30,R10
00053e f019      	BREQ _0xFD
00053f e0e4      	LDI  R30,LOW(4)
000540 15ea      	CP   R30,R10
000541 f439      	BRNE _0xFC
          _0xFD:
         ;    2571 			{ 
         ;    2572 			if(sub_ind==0)sub_ind=1;
000542 20dd      	TST  R13
000543 f419      	BRNE _0xFF
000544 e0e1      	LDI  R30,LOW(1)
000545 2ede      	MOV  R13,R30
         ;    2573 			else sub_ind=0;
000546 c001      	RJMP _0x100
          _0xFF:
000547 24dd      	CLR  R13
          _0x100:
         ;    2574 			}
         ;    2575     		else sub_ind=0;
000548 c001      	RJMP _0x101
          _0xFC:
000549 24dd      	CLR  R13
          _0x101:
         ;    2576 		}	 
         ;    2577 	if((but==butR)||(but==butR_))	
          _0xFB:
00054a e7ef      	LDI  R30,LOW(127)
00054b 15e9      	CP   R30,R9
00054c f019      	BREQ _0x103
00054d e7ed      	LDI  R30,LOW(125)
00054e 15e9      	CP   R30,R9
00054f f441      	BRNE _0x102
          _0x103:
         ;    2578 		{  
         ;    2579 		speed=1;
000550 9468      	SET
000551 f826      	BLD  R2,6
         ;    2580 		ee_delay[prog,sub_ind]++;
000552 d152      	RCALL SUBOPT_0x9
000553 9631      	ADIW R30,1
000554 940e 0711 	CALL __EEPROMWRW
000556 9731      	SBIW R30,1
         ;    2581 		}   
         ;    2582 	
         ;    2583 	else if((but==butL)||(but==butL_))	
000557 c00d      	RJMP _0x105
          _0x102:
000558 efee      	LDI  R30,LOW(254)
000559 15e9      	CP   R30,R9
00055a f019      	BREQ _0x107
00055b efec      	LDI  R30,LOW(252)
00055c 15e9      	CP   R30,R9
00055d f439      	BRNE _0x106
          _0x107:
         ;    2584 		{  
         ;    2585     		speed=1;
00055e 9468      	SET
00055f f826      	BLD  R2,6
         ;    2586     		ee_delay[prog,sub_ind]--;
000560 d144      	RCALL SUBOPT_0x9
000561 9731      	SBIW R30,1
000562 940e 0711 	CALL __EEPROMWRW
000564 9631      	ADIW R30,1
         ;    2587     		}		
         ;    2588 	} 
          _0x106:
          _0x105:
         ;    2589 	
         ;    2590 else if(ind==iPr_sel)
000565 c053      	RJMP _0x109
          _0xF9:
000566 e0e1      	LDI  R30,LOW(1)
000567 15ec      	CP   R30,R12
000568 f5e9      	BRNE _0x10A
         ;    2591 	{
         ;    2592 	if(but==butP_)ind=iMn;
000569 efe9      	LDI  R30,LOW(249)
00056a 15e9      	CP   R30,R9
00056b f409      	BRNE _0x10B
00056c 24cc      	CLR  R12
         ;    2593 	if(but==butP)
          _0x10B:
00056d efeb      	LDI  R30,LOW(251)
00056e 15e9      	CP   R30,R9
00056f f479      	BRNE _0x10C
         ;    2594 		{
         ;    2595 		prog++;
000570 d164      	RCALL SUBOPT_0xF
         ;    2596 		if(prog>MAXPROG)prog=MINPROG;
000571 f414      	BRGE _0x10D
000572 e0e1      	LDI  R30,LOW(1)
000573 2eae      	MOV  R10,R30
         ;    2597 		ee_program[0]=prog;
          _0x10D:
000574 d164      	RCALL SUBOPT_0x10
         ;    2598 		ee_program[1]=prog;
000575   +  	__POINTW2MN _ee_program,1
000577 2dea      	MOV  R30,R10
000578 940e 0719 	CALL __EEPROMWRB
         ;    2599 		ee_program[2]=prog;
00057a   +  	__POINTW2MN _ee_program,2
00057c 2dea      	MOV  R30,R10
00057d 940e 0719 	CALL __EEPROMWRB
         ;    2600 		}
         ;    2601 	
         ;    2602 	if(but==butR)
          _0x10C:
00057f e7ef      	LDI  R30,LOW(127)
000580 15e9      	CP   R30,R9
000581 f479      	BRNE _0x10E
         ;    2603 		{
         ;    2604 		prog++;
000582 d152      	RCALL SUBOPT_0xF
         ;    2605 		if(prog>MAXPROG)prog=MINPROG;
000583 f414      	BRGE _0x10F
000584 e0e1      	LDI  R30,LOW(1)
000585 2eae      	MOV  R10,R30
         ;    2606 		ee_program[0]=prog;
          _0x10F:
000586 d152      	RCALL SUBOPT_0x10
         ;    2607 		ee_program[1]=prog;
000587   +  	__POINTW2MN _ee_program,1
000589 2dea      	MOV  R30,R10
00058a 940e 0719 	CALL __EEPROMWRB
         ;    2608 		ee_program[2]=prog;
00058c   +  	__POINTW2MN _ee_program,2
00058e 2dea      	MOV  R30,R10
00058f 940e 0719 	CALL __EEPROMWRB
         ;    2609 		}
         ;    2610 
         ;    2611 	if(but==butL)
          _0x10E:
000591 efee      	LDI  R30,LOW(254)
000592 15e9      	CP   R30,R9
000593 f489      	BRNE _0x110
         ;    2612 		{
         ;    2613 		prog--;
000594 94aa      	DEC  R10
         ;    2614 		if(prog>MAXPROG)prog=MINPROG;
000595 e0e3      	LDI  R30,LOW(3)
000596 15ea      	CP   R30,R10
000597 f414      	BRGE _0x111
000598 e0e1      	LDI  R30,LOW(1)
000599 2eae      	MOV  R10,R30
         ;    2615 		ee_program[0]=prog;
          _0x111:
00059a d13e      	RCALL SUBOPT_0x10
         ;    2616 		ee_program[1]=prog;
00059b   +  	__POINTW2MN _ee_program,1
00059d 2dea      	MOV  R30,R10
00059e 940e 0719 	CALL __EEPROMWRB
         ;    2617 		ee_program[2]=prog;
0005a0   +  	__POINTW2MN _ee_program,2
0005a2 2dea      	MOV  R30,R10
0005a3 940e 0719 	CALL __EEPROMWRB
         ;    2618 		}	
         ;    2619 	} 
          _0x110:
         ;    2620 
         ;    2621 else if(ind==iVr)
0005a5 c013      	RJMP _0x112
          _0x10A:
0005a6 e0e2      	LDI  R30,LOW(2)
0005a7 15ec      	CP   R30,R12
0005a8 f481      	BRNE _0x113
         ;    2622 	{
         ;    2623 	if(but==butP_)
0005a9 efe9      	LDI  R30,LOW(249)
0005aa 15e9      	CP   R30,R9
0005ab f469      	BRNE _0x114
         ;    2624 		{
         ;    2625 		if(ee_vr_log)ee_vr_log=0;
0005ac e1a3      	LDI  R26,LOW(_ee_vr_log)
0005ad e0b0      	LDI  R27,HIGH(_ee_vr_log)
0005ae 940e 0705 	CALL __EEPROMRDB
0005b0 30e0      	CPI  R30,0
0005b1 f011      	BREQ _0x115
0005b2 e0e0      	LDI  R30,LOW(0)
0005b3 c001      	RJMP _0x12B
         ;    2626 		else ee_vr_log=1;
          _0x115:
0005b4 e0e1      	LDI  R30,LOW(1)
          _0x12B:
0005b5 e1a3      	LDI  R26,LOW(_ee_vr_log)
0005b6 e0b0      	LDI  R27,HIGH(_ee_vr_log)
0005b7 940e 0719 	CALL __EEPROMWRB
         ;    2627 		}	
         ;    2628 	} 	
          _0x114:
         ;    2629 
         ;    2630 but_an_end:
          _0x113:
          _0x112:
          _0x109:
          _0xF2:
         ;    2631 n_but=0;
0005b9 94e8      	CLT
0005ba f825      	BLD  R2,5
         ;    2632 }
0005bb 9508      	RET
         ;    2633 
         ;    2634 //-----------------------------------------------
         ;    2635 void ind_drv(void)
         ;    2636 {
          _ind_drv:
         ;    2637 if(++ind_cnt>=6)ind_cnt=0;
0005bc 9483      	INC  R8
0005bd e0e6      	LDI  R30,LOW(6)
0005be 168e      	CP   R8,R30
0005bf f008      	BRLO _0x117
0005c0 2488      	CLR  R8
         ;    2638 
         ;    2639 if(ind_cnt<5)
          _0x117:
0005c1 e0e5      	LDI  R30,LOW(5)
0005c2 168e      	CP   R8,R30
0005c3 f4c8      	BRSH _0x118
         ;    2640 	{
         ;    2641 	DDRC=0xFF;
0005c4 efef      	LDI  R30,LOW(255)
0005c5 bbe4      	OUT  0x14,R30
         ;    2642 	PORTC=0xFF;
0005c6 bbe5      	OUT  0x15,R30
         ;    2643 	DDRD|=0b11111000;
0005c7 b3e1      	IN   R30,0x11
0005c8 6fe8      	ORI  R30,LOW(0xF8)
0005c9 d0ee      	RCALL SUBOPT_0xA
         ;    2644 	PORTD|=0b11111000;
         ;    2645 	PORTD&=IND_STROB[ind_cnt];
0005ca b3e2      	IN   R30,0x12
0005cb 93ef      	PUSH R30
0005cc e5a4      	LDI  R26,LOW(_IND_STROB*2)
0005cd e0b0      	LDI  R27,HIGH(_IND_STROB*2)
0005ce 2de8      	MOV  R30,R8
0005cf e0f0      	LDI  R31,0
0005d0 0fea      	ADD  R30,R26
0005d1 1ffb      	ADC  R31,R27
0005d2 91e4      	LPM  R30,Z
0005d3 91af      	POP  R26
0005d4 23ea      	AND  R30,R26
0005d5 bbe2      	OUT  0x12,R30
         ;    2646 	PORTC=ind_out[ind_cnt];
0005d6 2de8      	MOV  R30,R8
0005d7 e0f0      	LDI  R31,0
0005d8 5ae0      	SUBI R30,LOW(-_ind_out)
0005d9 4ffd      	SBCI R31,HIGH(-_ind_out)
0005da 81e0      	LD   R30,Z
0005db bbe5      	OUT  0x15,R30
         ;    2647 	}
         ;    2648 else but_drv();
0005dc c002      	RJMP _0x119
          _0x118:
0005dd 940e 0488 	CALL _but_drv
          _0x119:
         ;    2649 }
0005df 9508      	RET
         ;    2650 
         ;    2651 //***********************************************
         ;    2652 //***********************************************
         ;    2653 //***********************************************
         ;    2654 //***********************************************
         ;    2655 interrupt [TIM0_OVF] void timer0_ovf_isr(void)
         ;    2656 {
          _timer0_ovf_isr:
0005e0 920a      	ST   -Y,R0
0005e1 921a      	ST   -Y,R1
0005e2 92fa      	ST   -Y,R15
0005e3 936a      	ST   -Y,R22
0005e4 937a      	ST   -Y,R23
0005e5 938a      	ST   -Y,R24
0005e6 939a      	ST   -Y,R25
0005e7 93aa      	ST   -Y,R26
0005e8 93ba      	ST   -Y,R27
0005e9 93ea      	ST   -Y,R30
0005ea 93fa      	ST   -Y,R31
0005eb b7ef      	IN   R30,SREG
0005ec 93ea      	ST   -Y,R30
         ;    2657 TCCR0=0x02;
0005ed d0f1      	RCALL SUBOPT_0x11
         ;    2658 TCNT0=-208;
         ;    2659 OCR0=0x00; 
         ;    2660 
         ;    2661 
         ;    2662 b600Hz=1;
0005ee 9468      	SET
0005ef f820      	BLD  R2,0
         ;    2663 ind_drv();
0005f0 dfcb      	RCALL _ind_drv
         ;    2664 if(++t0_cnt0>=6)
0005f1 9443      	INC  R4
0005f2 e0e6      	LDI  R30,LOW(6)
0005f3 164e      	CP   R4,R30
0005f4 f018      	BRLO _0x11A
         ;    2665 	{
         ;    2666 	t0_cnt0=0;
0005f5 2444      	CLR  R4
         ;    2667 	b100Hz=1;
0005f6 9468      	SET
0005f7 f821      	BLD  R2,1
         ;    2668 	}
         ;    2669 
         ;    2670 if(++t0_cnt1>=60)
          _0x11A:
0005f8 9453      	INC  R5
0005f9 e3ec      	LDI  R30,LOW(60)
0005fa 165e      	CP   R5,R30
0005fb f088      	BRLO _0x11B
         ;    2671 	{
         ;    2672 	t0_cnt1=0;
0005fc 2455      	CLR  R5
         ;    2673 	b10Hz=1;
0005fd 9468      	SET
0005fe f822      	BLD  R2,2
         ;    2674 	
         ;    2675 	if(++t0_cnt2>=2)
0005ff 9463      	INC  R6
000600 e0e2      	LDI  R30,LOW(2)
000601 166e      	CP   R6,R30
000602 f018      	BRLO _0x11C
         ;    2676 		{
         ;    2677 		t0_cnt2=0;
000603 2466      	CLR  R6
         ;    2678 		bFL5=!bFL5;
000604 e0e1      	LDI  R30,LOW(1)
000605 263e      	EOR  R3,R30
         ;    2679 		}
         ;    2680 		
         ;    2681 	if(++t0_cnt3>=5)
          _0x11C:
000606 9473      	INC  R7
000607 e0e5      	LDI  R30,LOW(5)
000608 167e      	CP   R7,R30
000609 f018      	BRLO _0x11D
         ;    2682 		{
         ;    2683 		t0_cnt3=0;
00060a 2477      	CLR  R7
         ;    2684 		bFL2=!bFL2;
00060b e8e0      	LDI  R30,LOW(128)
00060c 262e      	EOR  R2,R30
         ;    2685 		}		
         ;    2686 	}
          _0x11D:
         ;    2687 }
          _0x11B:
00060d 91e9      	LD   R30,Y+
00060e bfef      	OUT  SREG,R30
00060f 91f9      	LD   R31,Y+
000610 91e9      	LD   R30,Y+
000611 91b9      	LD   R27,Y+
000612 91a9      	LD   R26,Y+
000613 9199      	LD   R25,Y+
000614 9189      	LD   R24,Y+
000615 9179      	LD   R23,Y+
000616 9169      	LD   R22,Y+
000617 90f9      	LD   R15,Y+
000618 9019      	LD   R1,Y+
000619 9009      	LD   R0,Y+
00061a 9518      	RETI
         ;    2688 
         ;    2689 //===============================================
         ;    2690 //===============================================
         ;    2691 //===============================================
         ;    2692 //===============================================
         ;    2693 
         ;    2694 void main(void)
         ;    2695 {
          _main:
         ;    2696 
         ;    2697 PORTA=0xff;
00061b efef      	LDI  R30,LOW(255)
00061c bbeb      	OUT  0x1B,R30
         ;    2698 DDRA=0x00;
00061d d045      	RCALL SUBOPT_0x0
         ;    2699 
         ;    2700 PORTB=0xff;
00061e d0c8      	RCALL SUBOPT_0x12
         ;    2701 DDRB=0xFF;
         ;    2702 
         ;    2703 PORTC=0x00;
00061f e0e0      	LDI  R30,LOW(0)
000620 bbe5      	OUT  0x15,R30
         ;    2704 DDRC=0x00;
000621 bbe4      	OUT  0x14,R30
         ;    2705 
         ;    2706 
         ;    2707 PORTD=0x00;
000622 bbe2      	OUT  0x12,R30
         ;    2708 DDRD=0x00;
000623 bbe1      	OUT  0x11,R30
         ;    2709 
         ;    2710 
         ;    2711 TCCR0=0x02;
000624 d0ba      	RCALL SUBOPT_0x11
         ;    2712 TCNT0=-208;
         ;    2713 OCR0=0x00;
         ;    2714 
         ;    2715 TCCR1A=0x00;
000625 e0e0      	LDI  R30,LOW(0)
000626 bdef      	OUT  0x2F,R30
         ;    2716 TCCR1B=0x00;
000627 bdee      	OUT  0x2E,R30
         ;    2717 TCNT1H=0x00;
000628 bded      	OUT  0x2D,R30
         ;    2718 TCNT1L=0x00;
000629 bdec      	OUT  0x2C,R30
         ;    2719 ICR1H=0x00;
00062a bde7      	OUT  0x27,R30
         ;    2720 ICR1L=0x00;
00062b bde6      	OUT  0x26,R30
         ;    2721 OCR1AH=0x00;
00062c bdeb      	OUT  0x2B,R30
         ;    2722 OCR1AL=0x00;
00062d bdea      	OUT  0x2A,R30
         ;    2723 OCR1BH=0x00;
00062e bde9      	OUT  0x29,R30
         ;    2724 OCR1BL=0x00;
00062f bde8      	OUT  0x28,R30
         ;    2725 
         ;    2726 
         ;    2727 ASSR=0x00;
000630 bde2      	OUT  0x22,R30
         ;    2728 TCCR2=0x00;
000631 bde5      	OUT  0x25,R30
         ;    2729 TCNT2=0x00;
000632 bde4      	OUT  0x24,R30
         ;    2730 OCR2=0x00;
000633 bde3      	OUT  0x23,R30
         ;    2731 
         ;    2732 MCUCR=0x00;
000634 bfe5      	OUT  0x35,R30
         ;    2733 MCUCSR=0x00;
000635 bfe4      	OUT  0x34,R30
         ;    2734 
         ;    2735 TIMSK=0x01;
000636 e0e1      	LDI  R30,LOW(1)
000637 bfe9      	OUT  0x39,R30
         ;    2736 
         ;    2737 ACSR=0x80;
000638 e8e0      	LDI  R30,LOW(128)
000639 b9e8      	OUT  0x8,R30
         ;    2738 SFIOR=0x00;
00063a e0e0      	LDI  R30,LOW(0)
00063b bfe0      	OUT  0x30,R30
         ;    2739 
         ;    2740 #asm("sei") 
00063c 9478      	sei
         ;    2741 PORTB=0xFF;
00063d efef      	LDI  R30,LOW(255)
00063e d0a8      	RCALL SUBOPT_0x12
         ;    2742 DDRB=0xFF;
         ;    2743 ind=iMn;
00063f 24cc      	CLR  R12
         ;    2744 prog_drv();
000640 940e 006a 	CALL _prog_drv
         ;    2745 ind_hndl();
000642 940e 03c9 	CALL _ind_hndl
         ;    2746 led_hndl();
000644 940e 03de 	CALL _led_hndl
         ;    2747 while (1)
          _0x11E:
         ;    2748       {
         ;    2749       if(b600Hz)
000646 fe20      	SBRS R2,0
000647 c002      	RJMP _0x121
         ;    2750 		{
         ;    2751 		b600Hz=0; 
000648 94e8      	CLT
000649 f820      	BLD  R2,0
         ;    2752           
         ;    2753 		}         
         ;    2754       if(b100Hz)
          _0x121:
00064a fe21      	SBRS R2,1
00064b c009      	RJMP _0x122
         ;    2755 		{        
         ;    2756 		b100Hz=0; 
00064c 94e8      	CLT
00064d f821      	BLD  R2,1
         ;    2757 		but_an();
00064e de9f      	RCALL _but_an
         ;    2758 	    	in_drv();
00064f 940e 00c9 	CALL _in_drv
         ;    2759           mdvr_drv();
000651 940e 0107 	CALL _mdvr_drv
         ;    2760           step_contr();
000653 940e 018f 	CALL _step_contr
         ;    2761 		}   
         ;    2762 	if(b10Hz)
          _0x122:
000655 fe22      	SBRS R2,2
000656 c00a      	RJMP _0x123
         ;    2763 		{
         ;    2764 		b10Hz=0;
000657 94e8      	CLT
000658 f822      	BLD  R2,2
         ;    2765 		prog_drv();
000659 940e 006a 	CALL _prog_drv
         ;    2766 		err_drv();
00065b 940e 00f0 	CALL _err_drv
         ;    2767 		
         ;    2768     	     ind_hndl();
00065d 940e 03c9 	CALL _ind_hndl
         ;    2769           led_hndl();
00065f 940e 03de 	CALL _led_hndl
         ;    2770           
         ;    2771           }
         ;    2772 
         ;    2773       };
          _0x123:
000661 cfe4      	RJMP _0x11E
         ;    2774 }
          _0x124:
000662 cfff      	RJMP _0x124
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x0:
000663 e0e0      	LDI  R30,LOW(0)
000664 bbea      	OUT  0x1A,R30
000665 efef      	LDI  R30,LOW(255)
000666 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x1:
000667 e1e3      	LDI  R30,LOW(19)
000668 2ebe      	MOV  R11,R30
000669 e2e8      	LDI  R30,LOW(40)
00066a e0f0      	LDI  R31,HIGH(40)
00066b 93e0 0271 	STS  _cnt_del,R30
00066d 93f0 0272 	STS  _cnt_del+1,R31
00066f 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 21 TIMES
          SUBOPT_0x2:
000670 91e0 0271 	LDS  R30,_cnt_del
000672 91f0 0272 	LDS  R31,_cnt_del+1
000674 9731      	SBIW R30,1
000675 93e0 0271 	STS  _cnt_del,R30
000677 93f0 0272 	STS  _cnt_del+1,R31
000679 9730      	SBIW R30,0
00067a 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x3:
00067b e0e3      	LDI  R30,LOW(3)
00067c 2ebe      	MOV  R11,R30
00067d e3e2      	LDI  R30,LOW(50)
00067e e0f0      	LDI  R31,HIGH(50)
00067f 93e0 0271 	STS  _cnt_del,R30
000681 93f0 0272 	STS  _cnt_del+1,R31
000683 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES
          SUBOPT_0x4:
000684 2ebe      	MOV  R11,R30
000685 e1e4      	LDI  R30,LOW(20)
000686 e0f0      	LDI  R31,HIGH(20)
000687 93e0 0271 	STS  _cnt_del,R30
000689 93f0 0272 	STS  _cnt_del+1,R31
00068b 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x5:
00068c 2ebe      	MOV  R11,R30
00068d e8e2      	LDI  R30,LOW(130)
00068e e0f0      	LDI  R31,HIGH(130)
00068f 93e0 0271 	STS  _cnt_del,R30
000691 93f0 0272 	STS  _cnt_del+1,R31
000693 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x6:
000694 2ebe      	MOV  R11,R30
000695 e7e8      	LDI  R30,LOW(120)
000696 e0f0      	LDI  R31,HIGH(120)
000697 93e0 0271 	STS  _cnt_del,R30
000699 93f0 0272 	STS  _cnt_del+1,R31
00069b 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES
          SUBOPT_0x7:
00069c 2fe0      	MOV  R30,R16
00069d 50e1      	SUBI R30,LOW(1)
00069e e0f0      	LDI  R31,0
00069f 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x8:
0006a0 e0f0      	LDI  R31,0
0006a1 0fea      	ADD  R30,R26
0006a2 1ffb      	ADC  R31,R27
0006a3 91e4      	LPM  R30,Z
0006a4 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x9:
0006a5 2dea      	MOV  R30,R10
0006a6 e0a3      	LDI  R26,LOW(_ee_delay)
0006a7 e0b0      	LDI  R27,HIGH(_ee_delay)
0006a8 e0f0      	LDI  R31,0
0006a9 0fee      	LSL  R30
0006aa 1fff      	ROL  R31
0006ab 0fee      	LSL  R30
0006ac 1fff      	ROL  R31
0006ad 0fae      	ADD  R26,R30
0006ae 1fbf      	ADC  R27,R31
0006af 2ded      	MOV  R30,R13
0006b0 e0f0      	LDI  R31,0
0006b1 0fee      	LSL  R30
0006b2 1fff      	ROL  R31
0006b3 0fae      	ADD  R26,R30
0006b4 1fbf      	ADC  R27,R31
0006b5 940e 0701 	CALL __EEPROMRDW
0006b7 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xA:
0006b8 bbe1      	OUT  0x11,R30
0006b9 b3e2      	IN   R30,0x12
0006ba 6fe8      	ORI  R30,LOW(0xF8)
0006bb bbe2      	OUT  0x12,R30
0006bc 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xB:
0006bd b3e5      	IN   R30,0x15
0006be 69e5      	ORI  R30,LOW(0x95)
0006bf bbe5      	OUT  0x15,R30
0006c0 b3e4      	IN   R30,0x14
0006c1 76ea      	ANDI R30,LOW(0x6A)
0006c2 bbe4      	OUT  0x14,R30
0006c3 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xC:
0006c4 91e0 026a 	LDS  R30,_but_s_G1
0006c6 91a0 0269 	LDS  R26,_but_n_G1
0006c8 17ea      	CP   R30,R26
0006c9 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xD:
0006ca 91e0 026d 	LDS  R30,_but_onL_temp_G1
0006cc 91a0 026c 	LDS  R26,_but1_cnt_G1
0006ce 17ae      	CP   R26,R30
0006cf 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xE:
0006d0 91e0 026a 	LDS  R30,_but_s_G1
0006d2 7fed      	ANDI R30,0xFD
0006d3 2e9e      	MOV  R9,R30
0006d4 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xF:
0006d5 94a3      	INC  R10
0006d6 e0e3      	LDI  R30,LOW(3)
0006d7 15ea      	CP   R30,R10
0006d8 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x10:
0006d9 2dea      	MOV  R30,R10
0006da e0a1      	LDI  R26,LOW(_ee_program)
0006db e0b0      	LDI  R27,HIGH(_ee_program)
0006dc 940e 0719 	CALL __EEPROMWRB
0006de 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x11:
0006df e0e2      	LDI  R30,LOW(2)
0006e0 bfe3      	OUT  0x33,R30
0006e1 e3e0      	LDI  R30,LOW(65328)
0006e2 efff      	LDI  R31,HIGH(65328)
0006e3 bfe2      	OUT  0x32,R30
0006e4 e0e0      	LDI  R30,LOW(0)
0006e5 bfec      	OUT  0x3C,R30
0006e6 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x12:
0006e7 bbe8      	OUT  0x18,R30
0006e8 efef      	LDI  R30,LOW(255)
0006e9 bbe7      	OUT  0x17,R30
0006ea 9508      	RET
         
          __DIVW21U:
0006eb 2400      	CLR  R0
0006ec 2411      	CLR  R1
0006ed e190      	LDI  R25,16
          __DIVW21U1:
0006ee 0faa      	LSL  R26
0006ef 1fbb      	ROL  R27
0006f0 1c00      	ROL  R0
0006f1 1c11      	ROL  R1
0006f2 1a0e      	SUB  R0,R30
0006f3 0a1f      	SBC  R1,R31
0006f4 f418      	BRCC __DIVW21U2
0006f5 0e0e      	ADD  R0,R30
0006f6 1e1f      	ADC  R1,R31
0006f7 c001      	RJMP __DIVW21U3
          __DIVW21U2:
0006f8 60a1      	SBR  R26,1
          __DIVW21U3:
0006f9 959a      	DEC  R25
0006fa f799      	BRNE __DIVW21U1
0006fb 01fd      	MOVW R30,R26
0006fc 01d0      	MOVW R26,R0
0006fd 9508      	RET
         
          __MODW21U:
0006fe dfec      	RCALL __DIVW21U
0006ff 01fd      	MOVW R30,R26
000700 9508      	RET
         
          __EEPROMRDW:
000701 9611      	ADIW R26,1
000702 d002      	RCALL __EEPROMRDB
000703 2ffe      	MOV  R31,R30
000704 9711      	SBIW R26,1
         
          __EEPROMRDB:
000705 99e1      	SBIC EECR,EEWE
000706 cffe      	RJMP __EEPROMRDB
000707 93ff      	PUSH R31
000708 b7ff      	IN   R31,SREG
000709 94f8      	CLI
00070a bbae      	OUT  EEARL,R26
00070b bbbf      	OUT  EEARH,R27
00070c 9ae0      	SBI  EECR,EERE
00070d b3ed      	IN   R30,EEDR
00070e bfff      	OUT  SREG,R31
00070f 91ff      	POP  R31
000710 9508      	RET
         
          __EEPROMWRW:
000711 d007      	RCALL __EEPROMWRB
000712 9611      	ADIW R26,1
000713 93ef      	PUSH R30
000714 2fef      	MOV  R30,R31
000715 d003      	RCALL __EEPROMWRB
000716 91ef      	POP  R30
000717 9711      	SBIW R26,1
000718 9508      	RET
         
          __EEPROMWRB:
000719 99e1      	SBIC EECR,EEWE
00071a cffe      	RJMP __EEPROMWRB
00071b b79f      	IN   R25,SREG
00071c 94f8      	CLI
00071d bbae      	OUT  EEARL,R26
00071e bbbf      	OUT  EEARH,R27
00071f 9ae0      	SBI  EECR,EERE
000720 b38d      	IN   R24,EEDR
000721 17e8      	CP   R30,R24
000722 f019      	BREQ __EEPROMWRB0
000723 bbed      	OUT  EEDR,R30
000724 9ae2      	SBI  EECR,EEMWE
000725 9ae1      	SBI  EECR,EEWE
          __EEPROMWRB0:
000726 bf9f      	OUT  SREG,R25
000727 9508      	RET
         
          __SAVELOCR4:
000728 933a      	ST   -Y,R19
          __SAVELOCR3:
000729 932a      	ST   -Y,R18
          __SAVELOCR2:
00072a 931a      	ST   -Y,R17
00072b 930a      	ST   -Y,R16
00072c 9508      	RET
         
          __LOADLOCR4:
00072d 813b      	LDD  R19,Y+3
          __LOADLOCR3:
00072e 812a      	LDD  R18,Y+2
          __LOADLOCR2:
00072f 8119      	LDD  R17,Y+1
000730 8108      	LD   R16,Y
000731 9508      	RET
         

Assembly complete with no errors.
