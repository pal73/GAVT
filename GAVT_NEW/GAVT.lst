
AVRASM ver. 1.52  GAVT.asm Tue Feb 16 00:15:20 2016


         ;CodeVisionAVR C Compiler V1.24.1d Standard
         ;(C) Copyright 1998-2004 Pavel Haiduc, HP InfoTech s.r.l.
         ;http://www.hpinfotech.ro
         ;e-mail:office@hpinfotech.ro
         
         ;Chip type           : ATmega32
         ;Program type        : Application
         ;Clock frequency     : 1,000000 MHz
         ;Memory model        : Small
         ;Optimize for        : Size
         ;(s)printf features  : int, width
         ;(s)scanf features   : long, width
         ;External SRAM size  : 0
         ;Data Stack size     : 512 byte(s)
         ;Heap size           : 0 byte(s)
         ;Promote char to int : No
         ;char is unsigned    : Yes
         ;8 bit enums         : Yes
         ;Enhanced core instructions    : On
         ;Automatic register allocation : On
         
          	.EQU UDRE=0x5
          	.EQU RXC=0x7
          	.EQU USR=0xB
          	.EQU UDR=0xC
          	.EQU EERE=0x0
          	.EQU EEWE=0x1
          	.EQU EEMWE=0x2
          	.EQU SPSR=0xE
          	.EQU SPDR=0xF
          	.EQU EECR=0x1C
          	.EQU EEDR=0x1D
          	.EQU EEARL=0x1E
          	.EQU EEARH=0x1F
          	.EQU WDTCR=0x21
          	.EQU MCUCR=0x35
          	.EQU GICR=0x3B
          	.EQU SPL=0x3D
          	.EQU SPH=0x3E
          	.EQU SREG=0x3F
         
          	.DEF R0X0=R0
          	.DEF R0X1=R1
          	.DEF R0X2=R2
          	.DEF R0X3=R3
          	.DEF R0X4=R4
          	.DEF R0X5=R5
          	.DEF R0X6=R6
          	.DEF R0X7=R7
          	.DEF R0X8=R8
          	.DEF R0X9=R9
          	.DEF R0XA=R10
          	.DEF R0XB=R11
          	.DEF R0XC=R12
          	.DEF R0XD=R13
          	.DEF R0XE=R14
          	.DEF R0XF=R15
          	.DEF R0X10=R16
          	.DEF R0X11=R17
          	.DEF R0X12=R18
          	.DEF R0X13=R19
          	.DEF R0X14=R20
          	.DEF R0X15=R21
          	.DEF R0X16=R22
          	.DEF R0X17=R23
          	.DEF R0X18=R24
          	.DEF R0X19=R25
          	.DEF R0X1A=R26
          	.DEF R0X1B=R27
          	.DEF R0X1C=R28
          	.DEF R0X1D=R29
          	.DEF R0X1E=R30
          	.DEF R0X1F=R31
         
          	.EQU __se_bit=0x80
          	.EQU __sm_mask=0x70
          	.EQU __sm_adc_noise_red=0x10
          	.EQU __sm_powerdown=0x20
          	.EQU __sm_powersave=0x30
          	.EQU __sm_standby=0x60
          	.EQU __sm_ext_standby=0x70
         
          	.MACRO __CPD1N
          	CPI  R30,LOW(@0)
          	LDI  R26,HIGH(@0)
          	CPC  R31,R26
          	LDI  R26,BYTE3(@0)
          	CPC  R22,R26
          	LDI  R26,BYTE4(@0)
          	CPC  R23,R26
          	.ENDM
         
          	.MACRO __CPD2N
          	CPI  R26,LOW(@0)
          	LDI  R30,HIGH(@0)
          	CPC  R27,R30
          	LDI  R30,BYTE3(@0)
          	CPC  R24,R30
          	LDI  R30,BYTE4(@0)
          	CPC  R25,R30
          	.ENDM
         
          	.MACRO __CPWRR
          	CP   R@0,R@2
          	CPC  R@1,R@3
          	.ENDM
         
          	.MACRO __CPWRN
          	CPI  R@0,LOW(@2)
          	LDI  R30,HIGH(@2)
          	CPC  R@1,R30
          	.ENDM
         
          	.MACRO __ADDD1N
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	SBCI R22,BYTE3(-@0)
          	SBCI R23,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __ADDD2N
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	SBCI R24,BYTE3(-@0)
          	SBCI R25,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __SUBD1N
          	SUBI R30,LOW(@0)
          	SBCI R31,HIGH(@0)
          	SBCI R22,BYTE3(@0)
          	SBCI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __SUBD2N
          	SUBI R26,LOW(@0)
          	SBCI R27,HIGH(@0)
          	SBCI R24,BYTE3(@0)
          	SBCI R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ANDD1N
          	ANDI R30,LOW(@0)
          	ANDI R31,HIGH(@0)
          	ANDI R22,BYTE3(@0)
          	ANDI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ORD1N
          	ORI  R30,LOW(@0)
          	ORI  R31,HIGH(@0)
          	ORI  R22,BYTE3(@0)
          	ORI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __DELAY_USB
          	LDI  R24,LOW(@0)
          __DELAY_USB_LOOP:
          	DEC  R24
          	BRNE __DELAY_USB_LOOP
          	.ENDM
         
          	.MACRO __DELAY_USW
          	LDI  R24,LOW(@0)
          	LDI  R25,HIGH(@0)
          __DELAY_USW_LOOP:
          	SBIW R24,1
          	BRNE __DELAY_USW_LOOP
          	.ENDM
         
          	.MACRO __CLRD1S
          	LDI  R30,0
          	STD  Y+@0,R30
          	STD  Y+@0+1,R30
          	STD  Y+@0+2,R30
          	STD  Y+@0+3,R30
          	.ENDM
         
          	.MACRO __GETD1S
          	LDD  R30,Y+@0
          	LDD  R31,Y+@0+1
          	LDD  R22,Y+@0+2
          	LDD  R23,Y+@0+3
          	.ENDM
         
          	.MACRO __PUTD1S
          	STD  Y+@0,R30
          	STD  Y+@0+1,R31
          	STD  Y+@0+2,R22
          	STD  Y+@0+3,R23
          	.ENDM
         
          	.MACRO __POINTB1MN
          	LDI  R30,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1MN
          	LDI  R30,LOW(@0+@1)
          	LDI  R31,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1FN
          	LDI  R30,LOW(2*@0+@1)
          	LDI  R31,HIGH(2*@0+@1)
          	.ENDM
         
          	.MACRO __POINTB2MN
          	LDI  R26,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW2MN
          	LDI  R26,LOW(@0+@1)
          	LDI  R27,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTBRM
          	LDI  R@0,LOW(@1)
          	.ENDM
         
          	.MACRO __POINTWRM
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __POINTBRMN
          	LDI  R@0,LOW(@1+@2)
          	.ENDM
         
          	.MACRO __POINTWRMN
          	LDI  R@0,LOW(@2+@3)
          	LDI  R@1,HIGH(@2+@3)
          	.ENDM
         
          	.MACRO __GETD1N
          	LDI  R30,LOW(@0)
          	LDI  R31,HIGH(@0)
          	LDI  R22,BYTE3(@0)
          	LDI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2N
          	LDI  R26,LOW(@0)
          	LDI  R27,HIGH(@0)
          	LDI  R24,BYTE3(@0)
          	LDI  R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2S
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	LDD  R24,Y+@0+2
          	LDD  R25,Y+@0+3
          	.ENDM
         
          	.MACRO __GETB1MN
          	LDS  R30,@0+@1
          	.ENDM
         
          	.MACRO __GETW1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	LDS  R22,@0+@1+2
          	LDS  R23,@0+@1+3
          	.ENDM
         
          	.MACRO __GETBRMN
          	LDS  R@2,@0+@1
          	.ENDM
         
          	.MACRO __GETWRMN
          	LDS  R@2,@0+@1
          	LDS  R@3,@0+@1+1
          	.ENDM
         
          	.MACRO __GETB2MN
          	LDS  R26,@0+@1
          	.ENDM
         
          	.MACRO __GETW2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	LDS  R24,@0+@1+2
          	LDS  R25,@0+@1+3
          	.ENDM
         
          	.MACRO __PUTB1MN
          	STS  @0+@1,R30
          	.ENDM
         
          	.MACRO __PUTW1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	.ENDM
         
          	.MACRO __PUTD1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	STS  @0+@1+2,R22
          	STS  @0+@1+3,R23
          	.ENDM
         
          	.MACRO __PUTBMRN
          	STS  @0+@1,R@2
          	.ENDM
         
          	.MACRO __PUTWMRN
          	STS  @0+@1,R@2
          	STS  @0+@1+1,R@3
          	.ENDM
         
          	.MACRO __GETW1R
          	MOV  R30,R@0
          	MOV  R31,R@1
          	.ENDM
         
          	.MACRO __GETW2R
          	MOV  R26,R@0
          	MOV  R27,R@1
          	.ENDM
         
          	.MACRO __GETWRN
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __PUTW1R
          	MOV  R@0,R30
          	MOV  R@1,R31
          	.ENDM
         
          	.MACRO __PUTW2R
          	MOV  R@0,R26
          	MOV  R@1,R27
          	.ENDM
         
          	.MACRO __ADDWRN
          	SUBI R@0,LOW(-@2)
          	SBCI R@1,HIGH(-@2)
          	.ENDM
         
          	.MACRO __ADDWRR
          	ADD  R@0,R@2
          	ADC  R@1,R@3
          	.ENDM
         
          	.MACRO __SUBWRN
          	SUBI R@0,LOW(@2)
          	SBCI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __SUBWRR
          	SUB  R@0,R@2
          	SBC  R@1,R@3
          	.ENDM
         
          	.MACRO __ANDWRN
          	ANDI R@0,LOW(@2)
          	ANDI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ANDWRR
          	AND  R@0,R@2
          	AND  R@1,R@3
          	.ENDM
         
          	.MACRO __ORWRN
          	ORI  R@0,LOW(@2)
          	ORI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ORWRR
          	OR   R@0,R@2
          	OR   R@1,R@3
          	.ENDM
         
          	.MACRO __EORWRR
          	EOR  R@0,R@2
          	EOR  R@1,R@3
          	.ENDM
         
          	.MACRO __GETWRS
          	LDD  R@0,Y+@2
          	LDD  R@1,Y+@2+1
          	.ENDM
         
          	.MACRO __PUTWSR
          	STD  Y+@2,R@0
          	STD  Y+@2+1,R@1
          	.ENDM
         
          	.MACRO __MOVEWRR
          	MOV  R@0,R@2
          	MOV  R@1,R@3
          	.ENDM
         
          	.MACRO __INWR
          	IN   R@0,@2
          	IN   R@1,@2+1
          	.ENDM
         
          	.MACRO __OUTWR
          	OUT  @2+1,R@1
          	OUT  @2,R@0
          	.ENDM
         
          	.MACRO __CALL1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	ICALL
          	.ENDM
         
          	.MACRO __NBST
          	BST  R@0,@1
          	IN   R30,SREG
          	LDI  R31,0x40
          	EOR  R30,R31
          	OUT  SREG,R30
          	.ENDM
         
         
          	.MACRO __PUTB1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	CALL __PUTDP1
          	.ENDM
         
         
          	.MACRO __GETB1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R30,Z
          	.ENDM
         
          	.MACRO __GETW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R31,Z
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __GETD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R1,Z+
          	LD   R22,Z+
          	LD   R23,Z
          	MOVW R30,R0
          	.ENDM
         
          	.MACRO __GETB2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R26,X
          	.ENDM
         
          	.MACRO __GETW2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	.ENDM
         
          	.MACRO __GETD2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R1,X+
          	LD   R24,X+
          	LD   R25,X
          	MOVW R26,R0
          	.ENDM
         
          	.MACRO __GETBRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@1)
          	SBCI R31,HIGH(-@1)
          	LD   R@0,Z
          	.ENDM
         
          	.MACRO __GETWRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	LD   R@0,Z+
          	LD   R@1,Z
          	.ENDM
         
          	.MACRO __LSLW8SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R31,Z
          	CLR  R30
          	.ENDM
         
          	.MACRO __PUTB1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __CLRW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __CLRD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __PUTB2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R26
          	.ENDM
         
          	.MACRO __PUTW2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z+,R26
          	ST   Z,R27
          	.ENDM
         
          	.MACRO __PUTBSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTWSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	ST   Z+,R@0
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTB1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __MULBRR
          	MULS R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __MULBRRU
          	MUL  R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.CSEG
          	.ORG 0
         
          	.INCLUDE "GAVT.vec"
         
         ;INTERRUPT VECTORS
000000 940c 003a 	JMP  __RESET
000002 940c 0000 	JMP  0
000004 940c 0000 	JMP  0
000006 940c 0000 	JMP  0
000008 940c 0000 	JMP  0
00000a 940c 0000 	JMP  0
00000c 940c 0000 	JMP  0
00000e 940c 0000 	JMP  0
000010 940c 0000 	JMP  0
000012 940c 0000 	JMP  0
000014 940c 0000 	JMP  0
000016 940c 0596 	JMP  _timer0_ovf_isr
000018 940c 0000 	JMP  0
00001a 940c 0000 	JMP  0
00001c 940c 0000 	JMP  0
00001e 940c 0000 	JMP  0
000020 940c 0000 	JMP  0
000022 940c 0000 	JMP  0
000024 940c 0000 	JMP  0
000026 940c 0000 	JMP  0
000028 940c 0000 	JMP  0
         
          	.INCLUDE "GAVT.inc"
          	.DEF _t0_cnt0=R4
          	.DEF _t0_cnt1=R5
          	.DEF _t0_cnt2=R6
          	.DEF _t0_cnt3=R7
          	.DEF _ind_cnt=R8
          _IND_STROB:
          	.DB  0xBF,0xDF,0xEF,0xF7,0x7F
00002a dfbf
00002b f7ef
00002c 007f
          _DIGISYM:
          	.DB  0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8
00002d f9c0
00002e b0a4
00002f 9299
000030 f882
          	.DB  0x80,0x90,0xFF
000031 9080
000032 00ff
          _3:
          	.DB  0x55,0x55,0x55,0x55,0x55
000033 5555
000034 5555
000035 0055
          	.DEF _but=R9
          	.DEF _prog=R10
          	.DEF _step=R11
          	.DEF _ind=R12
          	.DEF _sub_ind=R13
          	.DEF _in_word=R14
         
          __GLOBAL_INI_TBL:
          	.DW  0x05
000036 0005
          	.DW  _ind_out
000037 0260
          	.DW  _3*2
000038 0066
         
          	.DW  0
000039 0000
         
          __RESET:
00003a 94f8      	CLI
00003b 27ee      	CLR  R30
00003c bbec      	OUT  EECR,R30
         
         ;INTERRUPT VECTORS ARE PLACED
         ;AT THE START OF FLASH
00003d e0f1      	LDI  R31,1
00003e bffb      	OUT  GICR,R31
00003f bfeb      	OUT  GICR,R30
000040 bfe5      	OUT  MCUCR,R30
         
         ;DISABLE WATCHDOG
000041 e1f8      	LDI  R31,0x18
000042 bdf1      	OUT  WDTCR,R31
000043 bde1      	OUT  WDTCR,R30
         
         ;CLEAR R2-R14
000044 e08d      	LDI  R24,13
000045 e0a2      	LDI  R26,2
000046 27bb      	CLR  R27
          __CLEAR_REG:
000047 93ed      	ST   X+,R30
000048 958a      	DEC  R24
000049 f7e9      	BRNE __CLEAR_REG
         
         ;CLEAR SRAM
00004a e080      	LDI  R24,LOW(0x800)
00004b e098      	LDI  R25,HIGH(0x800)
00004c e6a0      	LDI  R26,0x60
          __CLEAR_SRAM:
00004d 93ed      	ST   X+,R30
00004e 9701      	SBIW R24,1
00004f f7e9      	BRNE __CLEAR_SRAM
         
         ;GLOBAL VARIABLES INITIALIZATION
000050 e6ec      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
000051 e0f0      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
          __GLOBAL_INI_NEXT:
000052 9185      	LPM  R24,Z+
000053 9195      	LPM  R25,Z+
000054 9700      	SBIW R24,0
000055 f061      	BREQ __GLOBAL_INI_END
000056 91a5      	LPM  R26,Z+
000057 91b5      	LPM  R27,Z+
000058 9005      	LPM  R0,Z+
000059 9015      	LPM  R1,Z+
00005a 01bf      	MOVW R22,R30
00005b 01f0      	MOVW R30,R0
          __GLOBAL_INI_LOOP:
00005c 9005      	LPM  R0,Z+
00005d 920d      	ST   X+,R0
00005e 9701      	SBIW R24,1
00005f f7e1      	BRNE __GLOBAL_INI_LOOP
000060 01fb      	MOVW R30,R22
000061 cff0      	RJMP __GLOBAL_INI_NEXT
          __GLOBAL_INI_END:
         
         ;STACK POINTER INITIALIZATION
000062 e5ef      	LDI  R30,LOW(0x85F)
000063 bfed      	OUT  SPL,R30
000064 e0e8      	LDI  R30,HIGH(0x85F)
000065 bfee      	OUT  SPH,R30
         
         ;DATA STACK POINTER INITIALIZATION
000066 e6c0      	LDI  R28,LOW(0x260)
000067 e0d2      	LDI  R29,HIGH(0x260)
         
000068 940c 05d1 	JMP  _main
         
          	.ESEG
          	.ORG 0
         
          	.DSEG
          	.ORG 0x260
         ;       1 #define LED_POW_ON	5
         ;       2 #define LED_PROG4	1
         ;       3 #define LED_PROG2	2
         ;       4 #define LED_PROG3	3
         ;       5 #define LED_PROG1	4 
         ;       6 #define LED_ERROR	0 
         ;       7 #define LED_WRK	6
         ;       8 #define LED_VACUUM	7
         ;       9 
         ;      10 #define GAVT3
         ;      11 
         ;      12 #define P380
         ;      13 //#define I380
         ;      14 //#define I220
         ;      15 //#define P380_MINI
         ;      16 //#define TVIST_SKO
         ;      17 //#define I380_WI
         ;      18 //#define I220_WI
         ;      19 //#define DV3KL2MD
         ;      20 
         ;      21 #define MD1	2
         ;      22 #define MD2	3
         ;      23 #define VR	4
         ;      24 #define MD3	5
         ;      25 
         ;      26 #define PP1	6
         ;      27 #define PP2	7
         ;      28 #define PP3	5
         ;      29 #define PP4	4
         ;      30 #define PP5	3
         ;      31 #define DV	0 
         ;      32 
         ;      33 #define PP7	2
         ;      34 
         ;      35 #ifdef P380_MINI
         ;      36 #define MINPROG 1
         ;      37 #define MAXPROG 1 
         ;      38 #ifdef GAVT3
         ;      39 #define DV	2
         ;      40 #endif
         ;      41 #define PP3	3
         ;      42 #endif 
         ;      43 
         ;      44 #ifdef P380
         ;      45 #define MINPROG 1
         ;      46 #define MAXPROG 3 
         ;      47 #ifdef GAVT3
         ;      48 #define DV	2
         ;      49 #endif
         ;      50 #endif 
         ;      51 
         ;      52 #ifdef I380
         ;      53 #define MINPROG 1
         ;      54 #define MAXPROG 4
         ;      55 #endif
         ;      56 
         ;      57 #ifdef I380_WI
         ;      58 #define MINPROG 1
         ;      59 #define MAXPROG 4
         ;      60 #endif
         ;      61 
         ;      62 #ifdef I220
         ;      63 #define MINPROG 3
         ;      64 #define MAXPROG 4
         ;      65 #endif
         ;      66 
         ;      67 
         ;      68 #ifdef I220_WI
         ;      69 #define MINPROG 3
         ;      70 #define MAXPROG 4
         ;      71 #endif
         ;      72 
         ;      73 #ifdef TVIST_SKO
         ;      74 #define MINPROG 2
         ;      75 #define MAXPROG 3
         ;      76 #define DV	2
         ;      77 #endif
         ;      78 
         ;      79 #ifdef DV3KL2MD
         ;      80 
         ;      81 #define PP1	6
         ;      82 #define PP2	7
         ;      83 #define PP3	3
         ;      84 //#define PP4	4
         ;      85 //#define PP5	3
         ;      86 #define DV	2 
         ;      87 
         ;      88 #define MINPROG 2
         ;      89 #define MAXPROG 3
         ;      90 
         ;      91 #endif
         ;      92 
         ;      93 bit b600Hz;
         ;      94 
         ;      95 bit b100Hz;
         ;      96 bit b10Hz;
         ;      97 char t0_cnt0,t0_cnt1,t0_cnt2,t0_cnt3;
         ;      98 char ind_cnt;
         ;      99 flash char IND_STROB[]={0b10111111,0b11011111,0b11101111,0b11110111,0b01111111};
         
          	.CSEG
         ;     100 flash char DIGISYM[]={0b11000000,0b11111001,0b10100100,0b10110000,0b10011001,0b10010010,0b10000010,0b11111000,0b10000000,0b10010000,0b11111111};								
         ;     101 
         ;     102 char ind_out[5]={0x255,0x255,0x255,0x255,0x255};
         
          	.DSEG
          _ind_out:
000260      	.BYTE 0x5
         ;     103 char dig[4];
          _dig:
000265      	.BYTE 0x4
         ;     104 bit bZ;    
         ;     105 char but;
         ;     106 static char but_n;
          _but_n_G1:
000269      	.BYTE 0x1
         ;     107 static char but_s;
          _but_s_G1:
00026a      	.BYTE 0x1
         ;     108 static char but0_cnt;
          _but0_cnt_G1:
00026b      	.BYTE 0x1
         ;     109 static char but1_cnt;
          _but1_cnt_G1:
00026c      	.BYTE 0x1
         ;     110 static char but_onL_temp;
          _but_onL_temp_G1:
00026d      	.BYTE 0x1
         ;     111 bit l_but;		//идет длинное нажатие на кнопку
         ;     112 bit n_but;          //произошло нажатие
         ;     113 bit speed;		//разрешение ускорения перебора 
         ;     114 bit bFL2; 
         ;     115 bit bFL5;
         ;     116 eeprom enum{evmON=0x55,evmOFF=0xaa}ee_vacuum_mode;
         
          	.ESEG
          _ee_vacuum_mode:
          	.DB  0x0
000000 00
         ;     117 eeprom char ee_program[2];
          _ee_program:
          	.DB  0x0
000001 00
          	.DB  0x0
000002 00
         ;     118 enum {p1=1,p2=2,p3=3,p4=4}prog;
         ;     119 enum{sOFF=0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13,s14,s15,s16,s54,s55,s100}step=sOFF;
         ;     120 enum {iMn,iPr_sel,iVr} ind;
         ;     121 char sub_ind;
         ;     122 char in_word,in_word_old,in_word_new,in_word_cnt;
         
          	.DSEG
          _in_word_old:
00026e      	.BYTE 0x1
          _in_word_new:
00026f      	.BYTE 0x1
          _in_word_cnt:
000270      	.BYTE 0x1
         ;     123 bit bERR;
         ;     124 signed int cnt_del=0;
          _cnt_del:
000271      	.BYTE 0x2
         ;     125 
         ;     126 char bVR;
          _bVR:
000273      	.BYTE 0x1
         ;     127 char bMD1;
          _bMD1:
000274      	.BYTE 0x1
         ;     128 bit bMD2;
         ;     129 bit bMD3;
         ;     130 char cnt_md1,cnt_md2,cnt_vr,cnt_md3;
          _cnt_md1:
000275      	.BYTE 0x1
          _cnt_md2:
000276      	.BYTE 0x1
          _cnt_vr:
000277      	.BYTE 0x1
          _cnt_md3:
000278      	.BYTE 0x1
         ;     131 
         ;     132 eeprom unsigned ee_delay[4,2];
         
          	.ESEG
          _ee_delay:
          	.DW  0x0
000003 00 00
          	.DW  0x0
000005 00 00
          	.DW  0x0
000007 00 00
          	.DW  0x0
000009 00 00
          	.DW  0x0
00000b 00 00
          	.DW  0x0
00000d 00 00
          	.DW  0x0
00000f 00 00
          	.DW  0x0
000011 00 00
         ;     133 eeprom char ee_vr_log;
          _ee_vr_log:
          	.DB  0x0
000013 00
         ;     134 //#include <mega16.h>
         ;     135 //#include <mega8535.h>
         ;     136 #include <mega32.h>
         ;     137 //-----------------------------------------------
         ;     138 void prog_drv(void)
         ;     139 {
         
          	.CSEG
          _prog_drv:
         ;     140 char temp,temp1,temp2;
         ;     141 
         ;     142 temp=ee_program[0];
00006a 940e 06de 	CALL __SAVELOCR3
         ;	temp -> R16
         ;	temp1 -> R17
         ;	temp2 -> R18
00006c e0a1      	LDI  R26,LOW(_ee_program)
00006d e0b0      	LDI  R27,HIGH(_ee_program)
00006e 940e 06ba 	CALL __EEPROMRDB
000070 2f0e      	MOV  R16,R30
         ;     143 temp1=ee_program[1];
000071   +  	__POINTW2MN _ee_program,1
000073 940e 06ba 	CALL __EEPROMRDB
000075 2f1e      	MOV  R17,R30
         ;     144 temp2=ee_program[2];
000076   +  	__POINTW2MN _ee_program,2
000078 940e 06ba 	CALL __EEPROMRDB
00007a 2f2e      	MOV  R18,R30
         ;     145 
         ;     146 if((temp==temp1)&&(temp==temp2))
00007b 1710      	CP   R17,R16
00007c f411      	BRNE _0x5
00007d 1720      	CP   R18,R16
00007e f009      	BREQ _0x6
          _0x5:
00007f c001      	RJMP _0x4
          _0x6:
         ;     147 	{
         ;     148 	}
         ;     149 else if((temp==temp1)&&(temp!=temp2))
000080 c01d      	RJMP _0x7
          _0x4:
000081 1710      	CP   R17,R16
000082 f411      	BRNE _0x9
000083 1720      	CP   R18,R16
000084 f409      	BRNE _0xA
          _0x9:
000085 c002      	RJMP _0x8
          _0xA:
         ;     150 	{
         ;     151 	temp2=temp;
000086 2f20      	MOV  R18,R16
         ;     152 	}
         ;     153 else if((temp!=temp1)&&(temp==temp2))
000087 c016      	RJMP _0xB
          _0x8:
000088 1710      	CP   R17,R16
000089 f011      	BREQ _0xD
00008a 1720      	CP   R18,R16
00008b f009      	BREQ _0xE
          _0xD:
00008c c002      	RJMP _0xC
          _0xE:
         ;     154 	{
         ;     155 	temp1=temp;
00008d 2f10      	MOV  R17,R16
         ;     156 	}
         ;     157 else if((temp!=temp1)&&(temp1==temp2))
00008e c00f      	RJMP _0xF
          _0xC:
00008f 1710      	CP   R17,R16
000090 f011      	BREQ _0x11
000091 1721      	CP   R18,R17
000092 f009      	BREQ _0x12
          _0x11:
000093 c002      	RJMP _0x10
          _0x12:
         ;     158 	{
         ;     159 	temp=temp1;
000094 2f01      	MOV  R16,R17
         ;     160 	}
         ;     161 else if((temp!=temp1)&&(temp!=temp2))
000095 c008      	RJMP _0x13
          _0x10:
000096 1710      	CP   R17,R16
000097 f011      	BREQ _0x15
000098 1720      	CP   R18,R16
000099 f409      	BRNE _0x16
          _0x15:
00009a c003      	RJMP _0x14
          _0x16:
         ;     162 	{
         ;     163 	temp=MINPROG;
00009b e001      	LDI  R16,LOW(1)
         ;     164 	temp1=MINPROG;
00009c e011      	LDI  R17,LOW(1)
         ;     165 	temp2=MINPROG;
00009d e021      	LDI  R18,LOW(1)
         ;     166 	}
         ;     167 
         ;     168 if(!((temp<=MAXPROG)&&(temp>=MINPROG)))
          _0x14:
          _0x13:
          _0xF:
          _0xB:
          _0x7:
00009e e0e3      	LDI  R30,LOW(3)
00009f 17e0      	CP   R30,R16
0000a0 f010      	BRLO _0x18
0000a1 3001      	CPI  R16,1
0000a2 f408      	BRSH _0x17
          _0x18:
         ;     169 	{
         ;     170 	temp=MINPROG;
0000a3 e001      	LDI  R16,LOW(1)
         ;     171 	}
         ;     172 
         ;     173 if(temp!=ee_program[0])ee_program[0]=temp;
          _0x17:
0000a4 e0a1      	LDI  R26,LOW(_ee_program)
0000a5 e0b0      	LDI  R27,HIGH(_ee_program)
0000a6 940e 06ba 	CALL __EEPROMRDB
0000a8 17e0      	CP   R30,R16
0000a9 f029      	BREQ _0x1A
0000aa 2fe0      	MOV  R30,R16
0000ab e0a1      	LDI  R26,LOW(_ee_program)
0000ac e0b0      	LDI  R27,HIGH(_ee_program)
0000ad 940e 06ce 	CALL __EEPROMWRB
         ;     174 if(temp!=ee_program[1])ee_program[1]=temp;
          _0x1A:
0000af   +  	__POINTW2MN _ee_program,1
0000b1 940e 06ba 	CALL __EEPROMRDB
0000b3 17e0      	CP   R30,R16
0000b4 f029      	BREQ _0x1B
0000b5   +  	__POINTW2MN _ee_program,1
0000b7 2fe0      	MOV  R30,R16
0000b8 940e 06ce 	CALL __EEPROMWRB
         ;     175 if(temp!=ee_program[2])ee_program[2]=temp;
          _0x1B:
0000ba   +  	__POINTW2MN _ee_program,2
0000bc 940e 06ba 	CALL __EEPROMRDB
0000be 17e0      	CP   R30,R16
0000bf f029      	BREQ _0x1C
0000c0   +  	__POINTW2MN _ee_program,2
0000c2 2fe0      	MOV  R30,R16
0000c3 940e 06ce 	CALL __EEPROMWRB
         ;     176 
         ;     177 prog=temp;
          _0x1C:
0000c5 2ea0      	MOV  R10,R16
         ;     178 }
0000c6 940e 06e3 	CALL __LOADLOCR3
0000c8 c2b4      	RJMP _0x10D
         ;     179 
         ;     180 //-----------------------------------------------
         ;     181 void in_drv(void)
         ;     182 {
          _in_drv:
         ;     183 char i,temp;
         ;     184 unsigned int tempUI;
         ;     185 DDRA=0x00;
0000c9 940e 06dd 	CALL __SAVELOCR4
         ;	i -> R16
         ;	temp -> R17
         ;	tempUI -> R18,R19
0000cb 940e 0619 	CALL SUBOPT_0x0
         ;     186 PORTA=0xff;
0000cd bbeb      	OUT  0x1B,R30
         ;     187 in_word_new=PINA;
0000ce b3e9      	IN   R30,0x19
0000cf 93e0 026f 	STS  _in_word_new,R30
         ;     188 if(in_word_old==in_word_new)
0000d1 91a0 026e 	LDS  R26,_in_word_old
0000d3 17ea      	CP   R30,R26
0000d4 f481      	BRNE _0x1D
         ;     189 	{
         ;     190 	if(in_word_cnt<10)
0000d5 91a0 0270 	LDS  R26,_in_word_cnt
0000d7 30aa      	CPI  R26,LOW(0xA)
0000d8 f458      	BRSH _0x1E
         ;     191 		{
         ;     192 		in_word_cnt++;
0000d9 91e0 0270 	LDS  R30,_in_word_cnt
0000db 5fef      	SUBI R30,-LOW(1)
0000dc 93e0 0270 	STS  _in_word_cnt,R30
         ;     193 		if(in_word_cnt>=10)
0000de 91a0 0270 	LDS  R26,_in_word_cnt
0000e0 30aa      	CPI  R26,LOW(0xA)
0000e1 f010      	BRLO _0x1F
         ;     194 			{
         ;     195 			in_word=in_word_old;
0000e2 90e0 026e 	LDS  R14,_in_word_old
         ;     196 			}
         ;     197 		}
          _0x1F:
         ;     198 	}
          _0x1E:
         ;     199 else in_word_cnt=0;
0000e4 c003      	RJMP _0x20
          _0x1D:
0000e5 e0e0      	LDI  R30,LOW(0)
0000e6 93e0 0270 	STS  _in_word_cnt,R30
          _0x20:
         ;     200 
         ;     201 
         ;     202 in_word_old=in_word_new;
0000e8 91e0 026f 	LDS  R30,_in_word_new
0000ea 93e0 026e 	STS  _in_word_old,R30
         ;     203 }   
0000ec 940e 06e2 	CALL __LOADLOCR4
0000ee 9624      	ADIW R28,4
0000ef 9508      	RET
         ;     204 
         ;     205 #ifdef TVIST_SKO
         ;     206 //-----------------------------------------------
         ;     207 void err_drv(void)
         ;     208 {
         ;     209 if(step==sOFF)
         ;     210 	{
         ;     211     	if(prog==p2)	
         ;     212     		{
         ;     213        		if(bMD1) bERR=1;
         ;     214        		else bERR=0;
         ;     215 		}
         ;     216 	}
         ;     217 else bERR=0;
         ;     218 }
         ;     219 #endif  
         ;     220 
         ;     221 #ifndef TVIST_SKO
         ;     222 //-----------------------------------------------
         ;     223 void err_drv(void)
         ;     224 {
          _err_drv:
         ;     225 if(step==sOFF)
0000f0 20bb      	TST  R11
0000f1 f491      	BRNE _0x21
         ;     226 	{
         ;     227 	if((bMD1)||(bMD2)||(bVR)||(bMD3)) bERR=1;
0000f2 91e0 0274 	LDS  R30,_bMD1
0000f4 30e0      	CPI  R30,0
0000f5 f441      	BRNE _0x23
0000f6 fc32      	SBRC R3,2
0000f7 c006      	RJMP _0x23
0000f8 91e0 0273 	LDS  R30,_bVR
0000fa 30e0      	CPI  R30,0
0000fb f411      	BRNE _0x23
0000fc fe33      	SBRS R3,3
0000fd c003      	RJMP _0x22
          _0x23:
0000fe 9468      	SET
0000ff f831      	BLD  R3,1
         ;     228 	else bERR=0;
000100 c002      	RJMP _0x25
          _0x22:
000101 94e8      	CLT
000102 f831      	BLD  R3,1
          _0x25:
         ;     229 	}
         ;     230 else bERR=0;
000103 c002      	RJMP _0x26
          _0x21:
000104 94e8      	CLT
000105 f831      	BLD  R3,1
          _0x26:
         ;     231 }
000106 9508      	RET
         ;     232 #endif
         ;     233 //-----------------------------------------------
         ;     234 void mdvr_drv(void)
         ;     235 {
          _mdvr_drv:
         ;     236 if(!(in_word&(1<<MD1)))
000107 fce2      	SBRC R14,2
000108 c011      	RJMP _0x27
         ;     237 	{
         ;     238 	if(cnt_md1<10)
000109 91a0 0275 	LDS  R26,_cnt_md1
00010b 30aa      	CPI  R26,LOW(0xA)
00010c f460      	BRSH _0x28
         ;     239 		{
         ;     240 		cnt_md1++;
00010d 91e0 0275 	LDS  R30,_cnt_md1
00010f 5fef      	SUBI R30,-LOW(1)
000110 93e0 0275 	STS  _cnt_md1,R30
         ;     241 		if(cnt_md1==10) bMD1=1;
000112 91a0 0275 	LDS  R26,_cnt_md1
000114 30aa      	CPI  R26,LOW(0xA)
000115 f419      	BRNE _0x29
000116 e0e1      	LDI  R30,LOW(1)
000117 93e0 0274 	STS  _bMD1,R30
         ;     242 		}
          _0x29:
         ;     243 
         ;     244 	}
          _0x28:
         ;     245 else
000119 c00c      	RJMP _0x2A
          _0x27:
         ;     246 	{
         ;     247 	if(cnt_md1)
00011a 91e0 0275 	LDS  R30,_cnt_md1
00011c 30e0      	CPI  R30,0
00011d f041      	BREQ _0x2B
         ;     248 		{
         ;     249 		cnt_md1--;
00011e 50e1      	SUBI R30,LOW(1)
00011f 93e0 0275 	STS  _cnt_md1,R30
         ;     250 		if(cnt_md1==0) bMD1=0;
000121 30e0      	CPI  R30,0
000122 f419      	BRNE _0x2C
000123 e0e0      	LDI  R30,LOW(0)
000124 93e0 0274 	STS  _bMD1,R30
         ;     251 		}
          _0x2C:
         ;     252 
         ;     253 	}
          _0x2B:
          _0x2A:
         ;     254 
         ;     255 if(!(in_word&(1<<MD2)))
000126 fce3      	SBRC R14,3
000127 c010      	RJMP _0x2D
         ;     256 	{
         ;     257 	if(cnt_md2<10)
000128 91a0 0276 	LDS  R26,_cnt_md2
00012a 30aa      	CPI  R26,LOW(0xA)
00012b f458      	BRSH _0x2E
         ;     258 		{
         ;     259 		cnt_md2++;
00012c 91e0 0276 	LDS  R30,_cnt_md2
00012e 5fef      	SUBI R30,-LOW(1)
00012f 93e0 0276 	STS  _cnt_md2,R30
         ;     260 		if(cnt_md2==10) bMD2=1;
000131 91a0 0276 	LDS  R26,_cnt_md2
000133 30aa      	CPI  R26,LOW(0xA)
000134 f411      	BRNE _0x2F
000135 9468      	SET
000136 f832      	BLD  R3,2
         ;     261 		}
          _0x2F:
         ;     262 
         ;     263 	}
          _0x2E:
         ;     264 else
000137 c00b      	RJMP _0x30
          _0x2D:
         ;     265 	{
         ;     266 	if(cnt_md2)
000138 91e0 0276 	LDS  R30,_cnt_md2
00013a 30e0      	CPI  R30,0
00013b f039      	BREQ _0x31
         ;     267 		{
         ;     268 		cnt_md2--;
00013c 50e1      	SUBI R30,LOW(1)
00013d 93e0 0276 	STS  _cnt_md2,R30
         ;     269 		if(cnt_md2==0) bMD2=0;
00013f 30e0      	CPI  R30,0
000140 f411      	BRNE _0x32
000141 94e8      	CLT
000142 f832      	BLD  R3,2
         ;     270 		}
          _0x32:
         ;     271 
         ;     272 	}
          _0x31:
          _0x30:
         ;     273 
         ;     274 if(!(in_word&(1<<MD3)))
000143 fce5      	SBRC R14,5
000144 c010      	RJMP _0x33
         ;     275 	{
         ;     276 	if(cnt_md3<10)
000145 91a0 0278 	LDS  R26,_cnt_md3
000147 30aa      	CPI  R26,LOW(0xA)
000148 f458      	BRSH _0x34
         ;     277 		{
         ;     278 		cnt_md3++;
000149 91e0 0278 	LDS  R30,_cnt_md3
00014b 5fef      	SUBI R30,-LOW(1)
00014c 93e0 0278 	STS  _cnt_md3,R30
         ;     279 		if(cnt_md3==10) bMD3=1;
00014e 91a0 0278 	LDS  R26,_cnt_md3
000150 30aa      	CPI  R26,LOW(0xA)
000151 f411      	BRNE _0x35
000152 9468      	SET
000153 f833      	BLD  R3,3
         ;     280 		}
          _0x35:
         ;     281 
         ;     282 	}
          _0x34:
         ;     283 else
000154 c00b      	RJMP _0x36
          _0x33:
         ;     284 	{
         ;     285 	if(cnt_md3)
000155 91e0 0278 	LDS  R30,_cnt_md3
000157 30e0      	CPI  R30,0
000158 f039      	BREQ _0x37
         ;     286 		{
         ;     287 		cnt_md3--;
000159 50e1      	SUBI R30,LOW(1)
00015a 93e0 0278 	STS  _cnt_md3,R30
         ;     288 		if(cnt_md3==0) bMD3=0;
00015c 30e0      	CPI  R30,0
00015d f411      	BRNE _0x38
00015e 94e8      	CLT
00015f f833      	BLD  R3,3
         ;     289 		}
          _0x38:
         ;     290 
         ;     291 	}
          _0x37:
          _0x36:
         ;     292 
         ;     293 if(((!(in_word&(1<<VR)))&&(ee_vr_log)) || (((in_word&(1<<VR)))&&(!ee_vr_log)))
000160 fce4      	SBRC R14,4
000161 c006      	RJMP _0x3A
000162 e1a3      	LDI  R26,LOW(_ee_vr_log)
000163 e0b0      	LDI  R27,HIGH(_ee_vr_log)
000164 940e 06ba 	CALL __EEPROMRDB
000166 30e0      	CPI  R30,0
000167 f449      	BRNE _0x3C
          _0x3A:
000168 fee4      	SBRS R14,4
000169 c006      	RJMP _0x3D
00016a e1a3      	LDI  R26,LOW(_ee_vr_log)
00016b e0b0      	LDI  R27,HIGH(_ee_vr_log)
00016c 940e 06ba 	CALL __EEPROMRDB
00016e 30e0      	CPI  R30,0
00016f f009      	BREQ _0x3C
          _0x3D:
000170 c011      	RJMP _0x39
          _0x3C:
         ;     294 	{
         ;     295 	if(cnt_vr<10)
000171 91a0 0277 	LDS  R26,_cnt_vr
000173 30aa      	CPI  R26,LOW(0xA)
000174 f460      	BRSH _0x40
         ;     296 		{
         ;     297 		cnt_vr++;
000175 91e0 0277 	LDS  R30,_cnt_vr
000177 5fef      	SUBI R30,-LOW(1)
000178 93e0 0277 	STS  _cnt_vr,R30
         ;     298 		if(cnt_vr==10) bVR=1;
00017a 91a0 0277 	LDS  R26,_cnt_vr
00017c 30aa      	CPI  R26,LOW(0xA)
00017d f419      	BRNE _0x41
00017e e0e1      	LDI  R30,LOW(1)
00017f 93e0 0273 	STS  _bVR,R30
         ;     299 		}
          _0x41:
         ;     300 
         ;     301 	}
          _0x40:
         ;     302 else
000181 c00c      	RJMP _0x42
          _0x39:
         ;     303 	{
         ;     304 	if(cnt_vr)
000182 91e0 0277 	LDS  R30,_cnt_vr
000184 30e0      	CPI  R30,0
000185 f041      	BREQ _0x43
         ;     305 		{
         ;     306 		cnt_vr--;
000186 50e1      	SUBI R30,LOW(1)
000187 93e0 0277 	STS  _cnt_vr,R30
         ;     307 		if(cnt_vr==0) bVR=0;
000189 30e0      	CPI  R30,0
00018a f419      	BRNE _0x44
00018b e0e0      	LDI  R30,LOW(0)
00018c 93e0 0273 	STS  _bVR,R30
         ;     308 		}
          _0x44:
         ;     309 
         ;     310 	}
          _0x43:
          _0x42:
         ;     311 } 
00018e 9508      	RET
         ;     312 
         ;     313 #ifdef DV3KL2MD
         ;     314 //-----------------------------------------------
         ;     315 void step_contr(void)
         ;     316 {
         ;     317 char temp=0;
         ;     318 DDRB=0xFF;
         ;     319 
         ;     320 if(step==sOFF)
         ;     321 	{
         ;     322 	temp=0;
         ;     323 	}
         ;     324 
         ;     325 else if(step==s1)
         ;     326 	{
         ;     327 	temp|=(1<<PP1);
         ;     328 
         ;     329 	cnt_del--;
         ;     330 	if(cnt_del==0)
         ;     331 		{
         ;     332 		step=s2;
         ;     333 		cnt_del=20;
         ;     334 		}
         ;     335 	}
         ;     336 
         ;     337 
         ;     338 else if(step==s2)
         ;     339 	{
         ;     340 	temp|=(1<<PP1)|(1<<DV);
         ;     341 
         ;     342 	cnt_del--;
         ;     343 	if(cnt_del==0)
         ;     344 		{
         ;     345 		step=s3;
         ;     346 		}
         ;     347 	}
         ;     348 	
         ;     349 else if(step==s3)
         ;     350 	{
         ;     351 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
         ;     352      if(!bMD1)goto step_contr_end;
         ;     353      step=s4;
         ;     354      }     
         ;     355 else if(step==s4)
         ;     356 	{          
         ;     357      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     358      if(!bMD2)goto step_contr_end;
         ;     359      step=s5;
         ;     360      cnt_del=50;
         ;     361      } 
         ;     362 else if(step==s5)
         ;     363 	{
         ;     364 	temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     365 
         ;     366 	cnt_del--;
         ;     367 	if(cnt_del==0)
         ;     368 		{
         ;     369 		step=s6;
         ;     370 		cnt_del=50;
         ;     371 		}
         ;     372 	}         
         ;     373 /*else if(step==s6)
         ;     374 	{
         ;     375 	temp|=(1<<PP1)|(1<<DV);
         ;     376 
         ;     377 	cnt_del--;
         ;     378 	if(cnt_del==0)
         ;     379 		{
         ;     380 		step=s6;
         ;     381 		cnt_del=70;
         ;     382 		}
         ;     383 	}*/     
         ;     384 else if(step==s6)
         ;     385 		{
         ;     386 	temp|=(1<<PP1);
         ;     387 	cnt_del--;
         ;     388 	if(cnt_del==0)
         ;     389 		{
         ;     390 		step=sOFF;
         ;     391           }     
         ;     392      }     
         ;     393 
         ;     394 step_contr_end:
         ;     395 
         ;     396 PORTB=~temp;
         ;     397 }
         ;     398 #endif
         ;     399 
         ;     400 #ifdef P380_MINI
         ;     401 //-----------------------------------------------
         ;     402 void step_contr(void)
         ;     403 {
         ;     404 char temp=0;
         ;     405 DDRB=0xFF;
         ;     406 
         ;     407 if(step==sOFF)
         ;     408 	{
         ;     409 	temp=0;
         ;     410 	}
         ;     411 
         ;     412 else if(step==s1)
         ;     413 	{
         ;     414 	temp|=(1<<PP1);
         ;     415 
         ;     416 	cnt_del--;
         ;     417 	if(cnt_del==0)
         ;     418 		{
         ;     419 		step=s2;
         ;     420 		}
         ;     421 	}
         ;     422 
         ;     423 else if(step==s2)
         ;     424 	{
         ;     425 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
         ;     426      if(!bMD1)goto step_contr_end;
         ;     427      step=s3;
         ;     428      }     
         ;     429 else if(step==s3)
         ;     430 	{          
         ;     431      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     432      if(!bMD2)goto step_contr_end;
         ;     433      step=s4;
         ;     434      cnt_del=50;
         ;     435      }
         ;     436 else if(step==s4)
         ;     437 		{
         ;     438 	temp|=(1<<PP1);
         ;     439 	cnt_del--;
         ;     440 	if(cnt_del==0)
         ;     441 		{
         ;     442 		step=sOFF;
         ;     443           }     
         ;     444      }     
         ;     445 
         ;     446 step_contr_end:
         ;     447 
         ;     448 PORTB=~temp;
         ;     449 }
         ;     450 #endif
         ;     451 
         ;     452 #ifdef P380
         ;     453 //-----------------------------------------------
         ;     454 void step_contr(void)
         ;     455 {
          _step_contr:
         ;     456 char temp=0;
         ;     457 DDRB=0xFF;
00018f 930a      	ST   -Y,R16
         ;	temp -> R16
000190 e000      	LDI  R16,0
000191 efef      	LDI  R30,LOW(255)
000192 bbe7      	OUT  0x17,R30
         ;     458 
         ;     459 if(step==sOFF)
000193 20bb      	TST  R11
000194 f411      	BRNE _0x45
         ;     460 	{
         ;     461 	temp=0;
000195 e000      	LDI  R16,LOW(0)
         ;     462 	}
         ;     463 
         ;     464 else if(prog==p1)
000196 c08f      	RJMP _0x46
          _0x45:
000197 e0e1      	LDI  R30,LOW(1)
000198 15ea      	CP   R30,R10
000199 f011      	BREQ PC+3
00019a 940c 0226 	JMP _0x47
         ;     465 	{
         ;     466 	if(step==s1)
00019c 15eb      	CP   R30,R11
00019d f469      	BRNE _0x48
         ;     467 		{
         ;     468 		temp|=(1<<PP1)|(1<<PP2);
00019e 6c00      	ORI  R16,LOW(192)
         ;     469 
         ;     470 		cnt_del--;
00019f 940e 061d 	CALL SUBOPT_0x1
         ;     471 		if(cnt_del==0)
0001a1 f441      	BRNE _0x49
         ;     472 			{
         ;     473 			if(ee_vacuum_mode==evmOFF)
0001a2 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0001a3 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0001a4 940e 06ba 	CALL __EEPROMRDB
0001a6 3aea      	CPI  R30,LOW(0xAA)
0001a7 f061      	BREQ _0x4B
         ;     474 				{
         ;     475 				goto lbl_0001;
         ;     476 				}
         ;     477 			else step=s2;
0001a8 e0e2      	LDI  R30,LOW(2)
0001a9 2ebe      	MOV  R11,R30
         ;     478 			}
         ;     479 		}
          _0x49:
         ;     480 
         ;     481 	else if(step==s2)
0001aa c07b      	RJMP _0x4D
          _0x48:
0001ab e0e2      	LDI  R30,LOW(2)
0001ac 15eb      	CP   R30,R11
0001ad f449      	BRNE _0x4E
         ;     482 		{
         ;     483 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
0001ae 6e00      	ORI  R16,LOW(224)
         ;     484 
         ;     485           if(!bVR)goto step_contr_end;
0001af 91e0 0273 	LDS  R30,_bVR
0001b1 30e0      	CPI  R30,0
0001b2 f409      	BRNE _0x4F
0001b3 c133      	RJMP _0x50
         ;     486 lbl_0001:
          _0x4F:
          _0x4B:
         ;     487 #ifndef BIG_CAM
         ;     488 		cnt_del=30;
0001b4 940e 0628 	CALL SUBOPT_0x2
         ;     489 #endif
         ;     490 
         ;     491 #ifdef BIG_CAM
         ;     492 		cnt_del=100;
         ;     493 #endif
         ;     494 		step=s3;
         ;     495 		}
         ;     496 
         ;     497 	else if(step==s3)
0001b6 c06f      	RJMP _0x51
          _0x4E:
0001b7 e0e3      	LDI  R30,LOW(3)
0001b8 15eb      	CP   R30,R11
0001b9 f439      	BRNE _0x52
         ;     498 		{
         ;     499 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
0001ba 6604      	ORI  R16,LOW(100)
         ;     500 		cnt_del--;
0001bb 940e 061d 	CALL SUBOPT_0x1
         ;     501 		if(cnt_del==0)
0001bd f411      	BRNE _0x53
         ;     502 			{
         ;     503 			step=s4;
0001be e0e4      	LDI  R30,LOW(4)
0001bf 2ebe      	MOV  R11,R30
         ;     504 			}
         ;     505           }
          _0x53:
         ;     506 	else if(step==s4)
0001c0 c065      	RJMP _0x54
          _0x52:
0001c1 e0e4      	LDI  R30,LOW(4)
0001c2 15eb      	CP   R30,R11
0001c3 f459      	BRNE _0x55
         ;     507 		{
         ;     508 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
0001c4 6704      	ORI  R16,LOW(116)
         ;     509 
         ;     510           if(!bMD1)goto step_contr_end;
0001c5 91e0 0274 	LDS  R30,_bMD1
0001c7 30e0      	CPI  R30,0
0001c8 f409      	BRNE _0x56
0001c9 c11d      	RJMP _0x50
         ;     511 
         ;     512 		cnt_del=40;
          _0x56:
0001ca e2e8      	LDI  R30,LOW(40)
0001cb e0f0      	LDI  R31,HIGH(40)
0001cc 940e 0631 	CALL SUBOPT_0x3
         ;     513 		step=s5;
         ;     514 		}
         ;     515 	else if(step==s5)
0001ce c057      	RJMP _0x57
          _0x55:
0001cf e0e5      	LDI  R30,LOW(5)
0001d0 15eb      	CP   R30,R11
0001d1 f439      	BRNE _0x58
         ;     516 		{
         ;     517 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
0001d2 6704      	ORI  R16,LOW(116)
         ;     518 
         ;     519 		cnt_del--;
0001d3 940e 061d 	CALL SUBOPT_0x1
         ;     520 		if(cnt_del==0)
0001d5 f411      	BRNE _0x59
         ;     521 			{
         ;     522 			step=s6;
0001d6 e0e6      	LDI  R30,LOW(6)
0001d7 2ebe      	MOV  R11,R30
         ;     523 			}
         ;     524 		}
          _0x59:
         ;     525 	else if(step==s6)
0001d8 c04d      	RJMP _0x5A
          _0x58:
0001d9 e0e6      	LDI  R30,LOW(6)
0001da 15eb      	CP   R30,R11
0001db f491      	BRNE _0x5B
         ;     526 		{
         ;     527 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
0001dc 660c      	ORI  R16,LOW(108)
         ;     528 
         ;     529          	if(!bMD2)goto step_contr_end;
0001dd fe32      	SBRS R3,2
0001de c108      	RJMP _0x50
         ;     530           cnt_del=40;
0001df e2e8      	LDI  R30,LOW(40)
0001e0 e0f0      	LDI  R31,HIGH(40)
0001e1 93e0 0271 	STS  _cnt_del,R30
0001e3 93f0 0272 	STS  _cnt_del+1,R31
         ;     531 		//step=s7;
         ;     532 		
         ;     533           step=s55;
0001e5 e1e2      	LDI  R30,LOW(18)
0001e6 2ebe      	MOV  R11,R30
         ;     534           cnt_del=40;
0001e7 e2e8      	LDI  R30,LOW(40)
0001e8 e0f0      	LDI  R31,HIGH(40)
0001e9 93e0 0271 	STS  _cnt_del,R30
0001eb 93f0 0272 	STS  _cnt_del+1,R31
         ;     535 		}
         ;     536 	else if(step==s55)
0001ed c038      	RJMP _0x5D
          _0x5B:
0001ee e1e2      	LDI  R30,LOW(18)
0001ef 15eb      	CP   R30,R11
0001f0 f469      	BRNE _0x5E
         ;     537 		{
         ;     538 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
0001f1 660c      	ORI  R16,LOW(108)
         ;     539           cnt_del--;
0001f2 940e 061d 	CALL SUBOPT_0x1
         ;     540           if(cnt_del==0)
0001f4 f441      	BRNE _0x5F
         ;     541 			{
         ;     542           	step=s7;
0001f5 e0e7      	LDI  R30,LOW(7)
0001f6 2ebe      	MOV  R11,R30
         ;     543           	cnt_del=20;
0001f7 e1e4      	LDI  R30,LOW(20)
0001f8 e0f0      	LDI  R31,HIGH(20)
0001f9 93e0 0271 	STS  _cnt_del,R30
0001fb 93f0 0272 	STS  _cnt_del+1,R31
         ;     544 			}
         ;     545          		
         ;     546 		}
          _0x5F:
         ;     547 	else if(step==s7)
0001fd c028      	RJMP _0x60
          _0x5E:
0001fe e0e7      	LDI  R30,LOW(7)
0001ff 15eb      	CP   R30,R11
000200 f439      	BRNE _0x61
         ;     548 		{
         ;     549 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
000201 660c      	ORI  R16,LOW(108)
         ;     550 
         ;     551 		cnt_del--;
000202 940e 061d 	CALL SUBOPT_0x1
         ;     552 		if(cnt_del==0)
000204 f411      	BRNE _0x62
         ;     553 			{
         ;     554 			step=s8;
000205 940e 0638 	CALL SUBOPT_0x4
         ;     555 			cnt_del=30;
         ;     556 			}
         ;     557 		}
          _0x62:
         ;     558 	else if(step==s8)
000207 c01e      	RJMP _0x63
          _0x61:
000208 e0e8      	LDI  R30,LOW(8)
000209 15eb      	CP   R30,R11
00020a f441      	BRNE _0x64
         ;     559 		{
         ;     560 		temp|=(1<<PP1)|(1<<PP3);
00020b 6600      	ORI  R16,LOW(96)
         ;     561 
         ;     562 		cnt_del--;
00020c 940e 061d 	CALL SUBOPT_0x1
         ;     563 		if(cnt_del==0)
00020e f419      	BRNE _0x65
         ;     564 			{
         ;     565 			step=s9;
00020f e0e9      	LDI  R30,LOW(9)
000210 940e 0641 	CALL SUBOPT_0x5
         ;     566 #ifndef BIG_CAM
         ;     567 		cnt_del=150;
         ;     568 #endif
         ;     569 
         ;     570 #ifdef BIG_CAM
         ;     571 		cnt_del=200;
         ;     572 #endif
         ;     573 			}
         ;     574 		}
          _0x65:
         ;     575 	else if(step==s9)
000212 c013      	RJMP _0x66
          _0x64:
000213 e0e9      	LDI  R30,LOW(9)
000214 15eb      	CP   R30,R11
000215 f441      	BRNE _0x67
         ;     576 		{
         ;     577 		temp|=(1<<PP1)|(1<<PP2);
000216 6c00      	ORI  R16,LOW(192)
         ;     578 
         ;     579 		cnt_del--;
000217 940e 061d 	CALL SUBOPT_0x1
         ;     580 		if(cnt_del==0)
000219 f419      	BRNE _0x68
         ;     581 			{
         ;     582 			step=s10;
00021a e0ea      	LDI  R30,LOW(10)
00021b 940e 0649 	CALL SUBOPT_0x6
         ;     583 			cnt_del=30;
         ;     584 			}
         ;     585 		}
          _0x68:
         ;     586 	else if(step==s10)
00021d c008      	RJMP _0x69
          _0x67:
00021e e0ea      	LDI  R30,LOW(10)
00021f 15eb      	CP   R30,R11
000220 f429      	BRNE _0x6A
         ;     587 		{
         ;     588 		temp|=(1<<PP2);
000221 6800      	ORI  R16,LOW(128)
         ;     589 		cnt_del--;
000222 940e 061d 	CALL SUBOPT_0x1
         ;     590 		if(cnt_del==0)
000224 f409      	BRNE _0x6B
         ;     591 			{
         ;     592 			step=sOFF;
000225 24bb      	CLR  R11
         ;     593 			}
         ;     594 		}
          _0x6B:
         ;     595 	}
          _0x6A:
          _0x69:
          _0x66:
          _0x63:
          _0x60:
          _0x5D:
          _0x5A:
          _0x57:
          _0x54:
          _0x51:
          _0x4D:
         ;     596 
         ;     597 if(prog==p2)
          _0x47:
          _0x46:
000226 e0e2      	LDI  R30,LOW(2)
000227 15ea      	CP   R30,R10
000228 f011      	BREQ PC+3
000229 940c 0287 	JMP _0x6C
         ;     598 	{
         ;     599 
         ;     600 	if(step==s1)
00022b e0e1      	LDI  R30,LOW(1)
00022c 15eb      	CP   R30,R11
00022d f469      	BRNE _0x6D
         ;     601 		{
         ;     602 		temp|=(1<<PP1)|(1<<PP2);
00022e 6c00      	ORI  R16,LOW(192)
         ;     603 
         ;     604 		cnt_del--;
00022f 940e 061d 	CALL SUBOPT_0x1
         ;     605 		if(cnt_del==0)
000231 f441      	BRNE _0x6E
         ;     606 			{
         ;     607 			if(ee_vacuum_mode==evmOFF)
000232 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000233 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000234 940e 06ba 	CALL __EEPROMRDB
000236 3aea      	CPI  R30,LOW(0xAA)
000237 f061      	BREQ _0x70
         ;     608 				{
         ;     609 				goto lbl_0002;
         ;     610 				}
         ;     611 			else step=s2;
000238 e0e2      	LDI  R30,LOW(2)
000239 2ebe      	MOV  R11,R30
         ;     612 			}
         ;     613 		}
          _0x6E:
         ;     614 
         ;     615 	else if(step==s2)
00023a c04c      	RJMP _0x72
          _0x6D:
00023b e0e2      	LDI  R30,LOW(2)
00023c 15eb      	CP   R30,R11
00023d f449      	BRNE _0x73
         ;     616 		{
         ;     617 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
00023e 6e00      	ORI  R16,LOW(224)
         ;     618 
         ;     619           if(!bVR)goto step_contr_end;
00023f 91e0 0273 	LDS  R30,_bVR
000241 30e0      	CPI  R30,0
000242 f409      	BRNE _0x74
000243 c0a3      	RJMP _0x50
         ;     620 lbl_0002:
          _0x74:
          _0x70:
         ;     621 #ifndef BIG_CAM
         ;     622 		cnt_del=30;
000244 940e 0628 	CALL SUBOPT_0x2
         ;     623 #endif
         ;     624 
         ;     625 #ifdef BIG_CAM
         ;     626 		cnt_del=100;
         ;     627 #endif
         ;     628 		step=s3;
         ;     629 		}
         ;     630 
         ;     631 	else if(step==s3)
000246 c040      	RJMP _0x75
          _0x73:
000247 e0e3      	LDI  R30,LOW(3)
000248 15eb      	CP   R30,R11
000249 f439      	BRNE _0x76
         ;     632 		{
         ;     633 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
00024a 6604      	ORI  R16,LOW(100)
         ;     634 
         ;     635 		cnt_del--;
00024b 940e 061d 	CALL SUBOPT_0x1
         ;     636 		if(cnt_del==0)
00024d f411      	BRNE _0x77
         ;     637 			{
         ;     638 			step=s4;
00024e e0e4      	LDI  R30,LOW(4)
00024f 2ebe      	MOV  R11,R30
         ;     639 			}
         ;     640 		}
          _0x77:
         ;     641 
         ;     642 	else if(step==s4)
000250 c036      	RJMP _0x78
          _0x76:
000251 e0e4      	LDI  R30,LOW(4)
000252 15eb      	CP   R30,R11
000253 f459      	BRNE _0x79
         ;     643 		{
         ;     644 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
000254 6704      	ORI  R16,LOW(116)
         ;     645 
         ;     646           if(!bMD1)goto step_contr_end;
000255 91e0 0274 	LDS  R30,_bMD1
000257 30e0      	CPI  R30,0
000258 f409      	BRNE _0x7A
000259 c08d      	RJMP _0x50
         ;     647          	cnt_del=30;
          _0x7A:
00025a e1ee      	LDI  R30,LOW(30)
00025b e0f0      	LDI  R31,HIGH(30)
00025c 940e 0631 	CALL SUBOPT_0x3
         ;     648 		step=s5;
         ;     649 		}
         ;     650 
         ;     651 	else if(step==s5)
00025e c028      	RJMP _0x7B
          _0x79:
00025f e0e5      	LDI  R30,LOW(5)
000260 15eb      	CP   R30,R11
000261 f441      	BRNE _0x7C
         ;     652 		{
         ;     653 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
000262 6704      	ORI  R16,LOW(116)
         ;     654 
         ;     655 		cnt_del--;
000263 940e 061d 	CALL SUBOPT_0x1
         ;     656 		if(cnt_del==0)
000265 f419      	BRNE _0x7D
         ;     657 			{
         ;     658 			step=s6;
000266 e0e6      	LDI  R30,LOW(6)
000267 940e 0649 	CALL SUBOPT_0x6
         ;     659 			cnt_del=30;
         ;     660 			}
         ;     661 		}
          _0x7D:
         ;     662 
         ;     663 	else if(step==s6)
000269 c01d      	RJMP _0x7E
          _0x7C:
00026a e0e6      	LDI  R30,LOW(6)
00026b 15eb      	CP   R30,R11
00026c f441      	BRNE _0x7F
         ;     664 		{
         ;     665 		temp|=(1<<PP1)|(1<<PP3);
00026d 6600      	ORI  R16,LOW(96)
         ;     666 
         ;     667 		cnt_del--;
00026e 940e 061d 	CALL SUBOPT_0x1
         ;     668 		if(cnt_del==0)
000270 f419      	BRNE _0x80
         ;     669 			{
         ;     670 			step=s7;
000271 e0e7      	LDI  R30,LOW(7)
000272 940e 0641 	CALL SUBOPT_0x5
         ;     671 #ifndef BIG_CAM
         ;     672 		cnt_del=150;
         ;     673 #endif
         ;     674 
         ;     675 #ifdef BIG_CAM
         ;     676 		cnt_del=200;
         ;     677 #endif
         ;     678 			}
         ;     679 		}
          _0x80:
         ;     680 
         ;     681 	else if(step==s7)
000274 c012      	RJMP _0x81
          _0x7F:
000275 e0e7      	LDI  R30,LOW(7)
000276 15eb      	CP   R30,R11
000277 f439      	BRNE _0x82
         ;     682 		{
         ;     683 		temp|=(1<<PP1)|(1<<PP2);
000278 6c00      	ORI  R16,LOW(192)
         ;     684 
         ;     685 		cnt_del--;
000279 940e 061d 	CALL SUBOPT_0x1
         ;     686 		if(cnt_del==0)
00027b f411      	BRNE _0x83
         ;     687 			{
         ;     688 			step=s8;
00027c 940e 0638 	CALL SUBOPT_0x4
         ;     689 			cnt_del=30;
         ;     690 			}
         ;     691 		}
          _0x83:
         ;     692 	else if(step==s8)
00027e c008      	RJMP _0x84
          _0x82:
00027f e0e8      	LDI  R30,LOW(8)
000280 15eb      	CP   R30,R11
000281 f429      	BRNE _0x85
         ;     693 		{
         ;     694 		temp|=(1<<PP2);
000282 6800      	ORI  R16,LOW(128)
         ;     695 
         ;     696 		cnt_del--;
000283 940e 061d 	CALL SUBOPT_0x1
         ;     697 		if(cnt_del==0)
000285 f409      	BRNE _0x86
         ;     698 			{
         ;     699 			step=sOFF;
000286 24bb      	CLR  R11
         ;     700 			}
         ;     701 		}
          _0x86:
         ;     702 	}
          _0x85:
          _0x84:
          _0x81:
          _0x7E:
          _0x7B:
          _0x78:
          _0x75:
          _0x72:
         ;     703 
         ;     704 if(prog==p3)
          _0x6C:
000287 e0e3      	LDI  R30,LOW(3)
000288 15ea      	CP   R30,R10
000289 f011      	BREQ PC+3
00028a 940c 02e7 	JMP _0x87
         ;     705 	{
         ;     706 
         ;     707 	if(step==s1)
00028c e0e1      	LDI  R30,LOW(1)
00028d 15eb      	CP   R30,R11
00028e f469      	BRNE _0x88
         ;     708 		{
         ;     709 		temp|=(1<<PP1)|(1<<PP2);
00028f 6c00      	ORI  R16,LOW(192)
         ;     710 
         ;     711 		cnt_del--;
000290 940e 061d 	CALL SUBOPT_0x1
         ;     712 		if(cnt_del==0)
000292 f441      	BRNE _0x89
         ;     713 			{
         ;     714 			if(ee_vacuum_mode==evmOFF)
000293 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000294 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000295 940e 06ba 	CALL __EEPROMRDB
000297 3aea      	CPI  R30,LOW(0xAA)
000298 f061      	BREQ _0x8B
         ;     715 				{
         ;     716 				goto lbl_0003;
         ;     717 				}
         ;     718 			else step=s2;
000299 e0e2      	LDI  R30,LOW(2)
00029a 2ebe      	MOV  R11,R30
         ;     719 			}
         ;     720 		}
          _0x89:
         ;     721 
         ;     722 	else if(step==s2)
00029b c04b      	RJMP _0x8D
          _0x88:
00029c e0e2      	LDI  R30,LOW(2)
00029d 15eb      	CP   R30,R11
00029e f479      	BRNE _0x8E
         ;     723 		{
         ;     724 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
00029f 6e00      	ORI  R16,LOW(224)
         ;     725 
         ;     726           if(!bVR)goto step_contr_end;
0002a0 91e0 0273 	LDS  R30,_bVR
0002a2 30e0      	CPI  R30,0
0002a3 f409      	BRNE _0x8F
0002a4 c042      	RJMP _0x50
         ;     727 lbl_0003:
          _0x8F:
          _0x8B:
         ;     728 #ifndef BIG_CAM
         ;     729 		cnt_del=80;
0002a5 e5e0      	LDI  R30,LOW(80)
0002a6 e0f0      	LDI  R31,HIGH(80)
0002a7 93e0 0271 	STS  _cnt_del,R30
0002a9 93f0 0272 	STS  _cnt_del+1,R31
         ;     730 #endif
         ;     731 
         ;     732 #ifdef BIG_CAM
         ;     733 		cnt_del=100;
         ;     734 #endif
         ;     735 		step=s3;
0002ab e0e3      	LDI  R30,LOW(3)
0002ac 2ebe      	MOV  R11,R30
         ;     736 		}
         ;     737 
         ;     738 	else if(step==s3)
0002ad c039      	RJMP _0x90
          _0x8E:
0002ae e0e3      	LDI  R30,LOW(3)
0002af 15eb      	CP   R30,R11
0002b0 f469      	BRNE _0x91
         ;     739 		{
         ;     740 		temp|=(1<<PP1)|(1<<PP3);
0002b1 6600      	ORI  R16,LOW(96)
         ;     741 
         ;     742 		cnt_del--;
0002b2 940e 061d 	CALL SUBOPT_0x1
         ;     743 		if(cnt_del==0)
0002b4 f441      	BRNE _0x92
         ;     744 			{
         ;     745 			step=s4;
0002b5 e0e4      	LDI  R30,LOW(4)
0002b6 2ebe      	MOV  R11,R30
         ;     746 			cnt_del=120;
0002b7 e7e8      	LDI  R30,LOW(120)
0002b8 e0f0      	LDI  R31,HIGH(120)
0002b9 93e0 0271 	STS  _cnt_del,R30
0002bb 93f0 0272 	STS  _cnt_del+1,R31
         ;     747 			}
         ;     748 		}
          _0x92:
         ;     749 
         ;     750 	else if(step==s4)
0002bd c029      	RJMP _0x93
          _0x91:
0002be e0e4      	LDI  R30,LOW(4)
0002bf 15eb      	CP   R30,R11
0002c0 f441      	BRNE _0x94
         ;     751 		{
         ;     752 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<PP5);
0002c1 6708      	ORI  R16,LOW(120)
         ;     753 
         ;     754 		cnt_del--;
0002c2 940e 061d 	CALL SUBOPT_0x1
         ;     755 		if(cnt_del==0)
0002c4 f419      	BRNE _0x95
         ;     756 			{
         ;     757 			step=s5;
0002c5 e0e5      	LDI  R30,LOW(5)
0002c6 940e 0641 	CALL SUBOPT_0x5
         ;     758 
         ;     759 		
         ;     760 #ifndef BIG_CAM
         ;     761 		cnt_del=150;
         ;     762 #endif
         ;     763 
         ;     764 #ifdef BIG_CAM
         ;     765 		cnt_del=200;
         ;     766 #endif
         ;     767 	//	step=s5;
         ;     768 	}
         ;     769 		}
          _0x95:
         ;     770 
         ;     771 	else if(step==s5)
0002c8 c01e      	RJMP _0x96
          _0x94:
0002c9 e0e5      	LDI  R30,LOW(5)
0002ca 15eb      	CP   R30,R11
0002cb f441      	BRNE _0x97
         ;     772 		{
         ;     773 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<PP5);
0002cc 6d08      	ORI  R16,LOW(216)
         ;     774 
         ;     775 		cnt_del--;
0002cd 940e 061d 	CALL SUBOPT_0x1
         ;     776 		if(cnt_del==0)
0002cf f419      	BRNE _0x98
         ;     777 			{
         ;     778 			step=s6;
0002d0 e0e6      	LDI  R30,LOW(6)
0002d1 940e 0649 	CALL SUBOPT_0x6
         ;     779 			cnt_del=30;
         ;     780 			}
         ;     781 		}
          _0x98:
         ;     782 
         ;     783 	else if(step==s6)
0002d3 c013      	RJMP _0x99
          _0x97:
0002d4 e0e6      	LDI  R30,LOW(6)
0002d5 15eb      	CP   R30,R11
0002d6 f441      	BRNE _0x9A
         ;     784 		{
         ;     785 		temp|=(1<<PP2)|(1<<PP4)|(1<<PP5);
0002d7 6908      	ORI  R16,LOW(152)
         ;     786 
         ;     787 		cnt_del--;
0002d8 940e 061d 	CALL SUBOPT_0x1
         ;     788 		if(cnt_del==0)
0002da f419      	BRNE _0x9B
         ;     789 			{
         ;     790 			step=s7;
0002db e0e7      	LDI  R30,LOW(7)
0002dc 940e 0649 	CALL SUBOPT_0x6
         ;     791 			cnt_del=30;
         ;     792 			}
         ;     793 		}
          _0x9B:
         ;     794 
         ;     795 	else if(step==s7)
0002de c008      	RJMP _0x9C
          _0x9A:
0002df e0e7      	LDI  R30,LOW(7)
0002e0 15eb      	CP   R30,R11
0002e1 f429      	BRNE _0x9D
         ;     796 		{
         ;     797 		temp|=(1<<PP2);
0002e2 6800      	ORI  R16,LOW(128)
         ;     798 
         ;     799 		cnt_del--;
0002e3 940e 061d 	CALL SUBOPT_0x1
         ;     800 		if(cnt_del==0)
0002e5 f409      	BRNE _0x9E
         ;     801 			{
         ;     802 			step=sOFF;
0002e6 24bb      	CLR  R11
         ;     803 			}
         ;     804 		}
          _0x9E:
         ;     805 
         ;     806 	}
          _0x9D:
          _0x9C:
          _0x99:
          _0x96:
          _0x93:
          _0x90:
          _0x8D:
         ;     807 step_contr_end:
          _0x87:
          _0x50:
         ;     808 
         ;     809 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
0002e7 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0002e8 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0002e9 940e 06ba 	CALL __EEPROMRDB
0002eb 3aea      	CPI  R30,LOW(0xAA)
0002ec f409      	BRNE _0x9F
0002ed 7d0f      	ANDI R16,LOW(223)
         ;     810 
         ;     811 PORTB=~temp;
          _0x9F:
0002ee 2fe0      	MOV  R30,R16
0002ef 95e0      	COM  R30
0002f0 bbe8      	OUT  0x18,R30
         ;     812 }
0002f1 9109      	LD   R16,Y+
0002f2 9508      	RET
         ;     813 #endif
         ;     814 #ifdef I380
         ;     815 //-----------------------------------------------
         ;     816 void step_contr(void)
         ;     817 {
         ;     818 char temp=0;
         ;     819 DDRB=0xFF;
         ;     820 
         ;     821 if(step==sOFF)goto step_contr_end;
         ;     822 
         ;     823 else if(prog==p1)
         ;     824 	{
         ;     825 	if(step==s1)    //жесть
         ;     826 		{
         ;     827 		temp|=(1<<PP1);
         ;     828           if(!bMD1)goto step_contr_end;
         ;     829 
         ;     830 			if(ee_vacuum_mode==evmOFF)
         ;     831 				{
         ;     832 				goto lbl_0001;
         ;     833 				}
         ;     834 			else step=s2;
         ;     835 		}
         ;     836 
         ;     837 	else if(step==s2)
         ;     838 		{
         ;     839 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     840           if(!bVR)goto step_contr_end;
         ;     841 lbl_0001:
         ;     842 
         ;     843           step=s100;
         ;     844 		cnt_del=40;
         ;     845           }
         ;     846 	else if(step==s100)
         ;     847 		{
         ;     848 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;     849           cnt_del--;
         ;     850           if(cnt_del==0)
         ;     851 			{
         ;     852           	step=s3;
         ;     853           	cnt_del=50;
         ;     854 			}
         ;     855 		}
         ;     856 
         ;     857 	else if(step==s3)
         ;     858 		{
         ;     859 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     860           cnt_del--;
         ;     861           if(cnt_del==0)
         ;     862 			{
         ;     863           	step=s4;
         ;     864 			}
         ;     865 		}
         ;     866 	else if(step==s4)
         ;     867 		{
         ;     868 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;     869           if(!bMD2)goto step_contr_end;
         ;     870           step=s5;
         ;     871           cnt_del=20;
         ;     872 		}
         ;     873 	else if(step==s5)
         ;     874 		{
         ;     875 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     876           cnt_del--;
         ;     877           if(cnt_del==0)
         ;     878 			{
         ;     879           	step=s6;
         ;     880 			}
         ;     881           }
         ;     882 	else if(step==s6)
         ;     883 		{
         ;     884 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;     885           if(!bMD3)goto step_contr_end;
         ;     886           step=s7;
         ;     887           cnt_del=20;
         ;     888 		}
         ;     889 
         ;     890 	else if(step==s7)
         ;     891 		{
         ;     892 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     893           cnt_del--;
         ;     894           if(cnt_del==0)
         ;     895 			{
         ;     896           	step=s8;
         ;     897           	cnt_del=ee_delay[prog,0]*10U;;
         ;     898 			}
         ;     899           }
         ;     900 	else if(step==s8)
         ;     901 		{
         ;     902 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;     903           cnt_del--;
         ;     904           if(cnt_del==0)
         ;     905 			{
         ;     906           	step=s9;
         ;     907           	cnt_del=20;
         ;     908 			}
         ;     909           }
         ;     910 	else if(step==s9)
         ;     911 		{
         ;     912 		temp|=(1<<PP1);
         ;     913           cnt_del--;
         ;     914           if(cnt_del==0)
         ;     915 			{
         ;     916           	step=sOFF;
         ;     917           	}
         ;     918           }
         ;     919 	}
         ;     920 
         ;     921 else if(prog==p2)  //ско
         ;     922 	{
         ;     923 	if(step==s1)
         ;     924 		{
         ;     925 		temp|=(1<<PP1);
         ;     926           if(!bMD1)goto step_contr_end;
         ;     927 
         ;     928 			if(ee_vacuum_mode==evmOFF)
         ;     929 				{
         ;     930 				goto lbl_0002;
         ;     931 				}
         ;     932 			else step=s2;
         ;     933 
         ;     934           //step=s2;
         ;     935 		}
         ;     936 
         ;     937 	else if(step==s2)
         ;     938 		{
         ;     939 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     940           if(!bVR)goto step_contr_end;
         ;     941 
         ;     942 lbl_0002:
         ;     943           step=s100;
         ;     944 		cnt_del=40;
         ;     945           }
         ;     946 	else if(step==s100)
         ;     947 		{
         ;     948 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;     949           cnt_del--;
         ;     950           if(cnt_del==0)
         ;     951 			{
         ;     952           	step=s3;
         ;     953           	cnt_del=50;
         ;     954 			}
         ;     955 		}
         ;     956 	else if(step==s3)
         ;     957 		{
         ;     958 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     959           cnt_del--;
         ;     960           if(cnt_del==0)
         ;     961 			{
         ;     962           	step=s4;
         ;     963 			}
         ;     964 		}
         ;     965 	else if(step==s4)
         ;     966 		{
         ;     967 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;     968           if(!bMD2)goto step_contr_end;
         ;     969           step=s5;
         ;     970           cnt_del=20;
         ;     971 		}
         ;     972 	else if(step==s5)
         ;     973 		{
         ;     974 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     975           cnt_del--;
         ;     976           if(cnt_del==0)
         ;     977 			{
         ;     978           	step=s6;
         ;     979           	cnt_del=ee_delay[prog,0]*10U;
         ;     980 			}
         ;     981           }
         ;     982 	else if(step==s6)
         ;     983 		{
         ;     984 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;     985           cnt_del--;
         ;     986           if(cnt_del==0)
         ;     987 			{
         ;     988           	step=s7;
         ;     989           	cnt_del=20;
         ;     990 			}
         ;     991           }
         ;     992 	else if(step==s7)
         ;     993 		{
         ;     994 		temp|=(1<<PP1);
         ;     995           cnt_del--;
         ;     996           if(cnt_del==0)
         ;     997 			{
         ;     998           	step=sOFF;
         ;     999           	}
         ;    1000           }
         ;    1001 	}
         ;    1002 
         ;    1003 else if(prog==p3)   //твист
         ;    1004 	{
         ;    1005 	if(step==s1)
         ;    1006 		{
         ;    1007 		temp|=(1<<PP1);
         ;    1008           if(!bMD1)goto step_contr_end;
         ;    1009 
         ;    1010 			if(ee_vacuum_mode==evmOFF)
         ;    1011 				{
         ;    1012 				goto lbl_0003;
         ;    1013 				}
         ;    1014 			else step=s2;
         ;    1015 
         ;    1016           //step=s2;
         ;    1017 		}
         ;    1018 
         ;    1019 	else if(step==s2)
         ;    1020 		{
         ;    1021 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1022           if(!bVR)goto step_contr_end;
         ;    1023 lbl_0003:
         ;    1024           cnt_del=50;
         ;    1025 		step=s3;
         ;    1026 		}
         ;    1027 
         ;    1028 
         ;    1029 	else	if(step==s3)
         ;    1030 		{
         ;    1031 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1032 		cnt_del--;
         ;    1033 		if(cnt_del==0)
         ;    1034 			{
         ;    1035 			cnt_del=ee_delay[prog,0]*10U;
         ;    1036 			step=s4;
         ;    1037 			}
         ;    1038           }
         ;    1039 	else if(step==s4)
         ;    1040 		{
         ;    1041 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1042 		cnt_del--;
         ;    1043  		if(cnt_del==0)
         ;    1044 			{
         ;    1045 			cnt_del=ee_delay[prog,1]*10U;
         ;    1046 			step=s5;
         ;    1047 			}
         ;    1048 		}
         ;    1049 
         ;    1050 	else if(step==s5)
         ;    1051 		{
         ;    1052 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1053 		cnt_del--;
         ;    1054 		if(cnt_del==0)
         ;    1055 			{
         ;    1056 			step=s6;
         ;    1057 			cnt_del=20;
         ;    1058 			}
         ;    1059 		}
         ;    1060 
         ;    1061 	else if(step==s6)
         ;    1062 		{
         ;    1063 		temp|=(1<<PP1);
         ;    1064   		cnt_del--;
         ;    1065 		if(cnt_del==0)
         ;    1066 			{
         ;    1067 			step=sOFF;
         ;    1068 			}
         ;    1069 		}
         ;    1070 
         ;    1071 	}
         ;    1072 
         ;    1073 else if(prog==p4)      //замок
         ;    1074 	{
         ;    1075 	if(step==s1)
         ;    1076 		{
         ;    1077 		temp|=(1<<PP1);
         ;    1078           if(!bMD1)goto step_contr_end;
         ;    1079 
         ;    1080 			if(ee_vacuum_mode==evmOFF)
         ;    1081 				{
         ;    1082 				goto lbl_0004;
         ;    1083 				}
         ;    1084 			else step=s2;
         ;    1085           //step=s2;
         ;    1086 		}
         ;    1087 
         ;    1088 	else if(step==s2)
         ;    1089 		{
         ;    1090 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1091           if(!bVR)goto step_contr_end;
         ;    1092 lbl_0004:
         ;    1093           step=s3;
         ;    1094 		cnt_del=50;
         ;    1095           }
         ;    1096 
         ;    1097 	else if(step==s3)
         ;    1098 		{
         ;    1099 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1100           cnt_del--;
         ;    1101           if(cnt_del==0)
         ;    1102 			{
         ;    1103           	step=s4;
         ;    1104 			cnt_del=ee_delay[prog,0]*10U;
         ;    1105 			}
         ;    1106           }
         ;    1107 
         ;    1108    	else if(step==s4)
         ;    1109 		{
         ;    1110 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1111 		cnt_del--;
         ;    1112 		if(cnt_del==0)
         ;    1113 			{
         ;    1114 			step=s5;
         ;    1115 			cnt_del=30;
         ;    1116 			}
         ;    1117 		}
         ;    1118 
         ;    1119 	else if(step==s5)
         ;    1120 		{
         ;    1121 		temp|=(1<<PP1)|(1<<PP4);
         ;    1122 		cnt_del--;
         ;    1123 		if(cnt_del==0)
         ;    1124 			{
         ;    1125 			step=s6;
         ;    1126 			cnt_del=ee_delay[prog,1]*10U;
         ;    1127 			}
         ;    1128 		}
         ;    1129 
         ;    1130 	else if(step==s6)
         ;    1131 		{
         ;    1132 		temp|=(1<<PP4);
         ;    1133 		cnt_del--;
         ;    1134 		if(cnt_del==0)
         ;    1135 			{
         ;    1136 			step=sOFF;
         ;    1137 			}
         ;    1138 		}
         ;    1139 
         ;    1140 	}
         ;    1141 	
         ;    1142 step_contr_end:
         ;    1143 
         ;    1144 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1145 
         ;    1146 PORTB=~temp;
         ;    1147 //PORTB=0x55;
         ;    1148 }
         ;    1149 #endif
         ;    1150 
         ;    1151 #ifdef I220_WI
         ;    1152 //-----------------------------------------------
         ;    1153 void step_contr(void)
         ;    1154 {
         ;    1155 char temp=0;
         ;    1156 DDRB=0xFF;
         ;    1157 
         ;    1158 if(step==sOFF)goto step_contr_end;
         ;    1159 
         ;    1160 else if(prog==p3)   //твист
         ;    1161 	{
         ;    1162 	if(step==s1)
         ;    1163 		{
         ;    1164 		temp|=(1<<PP1);
         ;    1165           if(!bMD1)goto step_contr_end;
         ;    1166 
         ;    1167 			if(ee_vacuum_mode==evmOFF)
         ;    1168 				{
         ;    1169 				goto lbl_0003;
         ;    1170 				}
         ;    1171 			else step=s2;
         ;    1172 
         ;    1173           //step=s2;
         ;    1174 		}
         ;    1175 
         ;    1176 	else if(step==s2)
         ;    1177 		{
         ;    1178 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1179           if(!bVR)goto step_contr_end;
         ;    1180 lbl_0003:
         ;    1181           cnt_del=50;
         ;    1182 		step=s3;
         ;    1183 		}
         ;    1184 
         ;    1185 
         ;    1186 	else	if(step==s3)
         ;    1187 		{
         ;    1188 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1189 		cnt_del--;
         ;    1190 		if(cnt_del==0)
         ;    1191 			{
         ;    1192 			cnt_del=90;
         ;    1193 			step=s4;
         ;    1194 			}
         ;    1195           }
         ;    1196 	else if(step==s4)
         ;    1197 		{
         ;    1198 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1199 		cnt_del--;
         ;    1200  		if(cnt_del==0)
         ;    1201 			{
         ;    1202 			cnt_del=130;
         ;    1203 			step=s5;
         ;    1204 			}
         ;    1205 		}
         ;    1206 
         ;    1207 	else if(step==s5)
         ;    1208 		{
         ;    1209 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1210 		cnt_del--;
         ;    1211 		if(cnt_del==0)
         ;    1212 			{
         ;    1213 			step=s6;
         ;    1214 			cnt_del=20;
         ;    1215 			}
         ;    1216 		}
         ;    1217 
         ;    1218 	else if(step==s6)
         ;    1219 		{
         ;    1220 		temp|=(1<<PP1);
         ;    1221   		cnt_del--;
         ;    1222 		if(cnt_del==0)
         ;    1223 			{
         ;    1224 			step=sOFF;
         ;    1225 			}
         ;    1226 		}
         ;    1227 
         ;    1228 	}
         ;    1229 
         ;    1230 else if(prog==p4)      //замок
         ;    1231 	{
         ;    1232 	if(step==s1)
         ;    1233 		{
         ;    1234 		temp|=(1<<PP1);
         ;    1235           if(!bMD1)goto step_contr_end;
         ;    1236 
         ;    1237 			if(ee_vacuum_mode==evmOFF)
         ;    1238 				{
         ;    1239 				goto lbl_0004;
         ;    1240 				}
         ;    1241 			else step=s2;
         ;    1242           //step=s2;
         ;    1243 		}
         ;    1244 
         ;    1245 	else if(step==s2)
         ;    1246 		{
         ;    1247 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1248           if(!bVR)goto step_contr_end;
         ;    1249 lbl_0004:
         ;    1250           step=s3;
         ;    1251 		cnt_del=50;
         ;    1252           }
         ;    1253 
         ;    1254 	else if(step==s3)
         ;    1255 		{
         ;    1256 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1257           cnt_del--;
         ;    1258           if(cnt_del==0)
         ;    1259 			{
         ;    1260           	step=s4;
         ;    1261 			cnt_del=120;
         ;    1262 			}
         ;    1263           }
         ;    1264 
         ;    1265    	else if(step==s4)
         ;    1266 		{
         ;    1267 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1268 		cnt_del--;
         ;    1269 		if(cnt_del==0)
         ;    1270 			{
         ;    1271 			step=s5;
         ;    1272 			cnt_del=30;
         ;    1273 			}
         ;    1274 		}
         ;    1275 
         ;    1276 	else if(step==s5)
         ;    1277 		{
         ;    1278 		temp|=(1<<PP1)|(1<<PP4);
         ;    1279 		cnt_del--;
         ;    1280 		if(cnt_del==0)
         ;    1281 			{
         ;    1282 			step=s6;
         ;    1283 			cnt_del=120;
         ;    1284 			}
         ;    1285 		}
         ;    1286 
         ;    1287 	else if(step==s6)
         ;    1288 		{
         ;    1289 		temp|=(1<<PP4);
         ;    1290 		cnt_del--;
         ;    1291 		if(cnt_del==0)
         ;    1292 			{
         ;    1293 			step=sOFF;
         ;    1294 			}
         ;    1295 		}
         ;    1296 
         ;    1297 	}
         ;    1298 	
         ;    1299 step_contr_end:
         ;    1300 
         ;    1301 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1302 
         ;    1303 PORTB=~temp;
         ;    1304 //PORTB=0x55;
         ;    1305 }
         ;    1306 #endif 
         ;    1307 
         ;    1308 #ifdef I380_WI
         ;    1309 //-----------------------------------------------
         ;    1310 void step_contr(void)
         ;    1311 {
         ;    1312 char temp=0;
         ;    1313 DDRB=0xFF;
         ;    1314 
         ;    1315 if(step==sOFF)goto step_contr_end;
         ;    1316 
         ;    1317 else if(prog==p1)
         ;    1318 	{
         ;    1319 	if(step==s1)    //жесть
         ;    1320 		{
         ;    1321 		temp|=(1<<PP1);
         ;    1322           if(!bMD1)goto step_contr_end;
         ;    1323 
         ;    1324 			if(ee_vacuum_mode==evmOFF)
         ;    1325 				{
         ;    1326 				goto lbl_0001;
         ;    1327 				}
         ;    1328 			else step=s2;
         ;    1329 		}
         ;    1330 
         ;    1331 	else if(step==s2)
         ;    1332 		{
         ;    1333 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1334           if(!bVR)goto step_contr_end;
         ;    1335 lbl_0001:
         ;    1336 
         ;    1337           step=s100;
         ;    1338 		cnt_del=40;
         ;    1339           }
         ;    1340 	else if(step==s100)
         ;    1341 		{
         ;    1342 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1343           cnt_del--;
         ;    1344           if(cnt_del==0)
         ;    1345 			{
         ;    1346           	step=s3;
         ;    1347           	cnt_del=50;
         ;    1348 			}
         ;    1349 		}
         ;    1350 
         ;    1351 	else if(step==s3)
         ;    1352 		{
         ;    1353 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1354           cnt_del--;
         ;    1355           if(cnt_del==0)
         ;    1356 			{
         ;    1357           	step=s4;
         ;    1358 			}
         ;    1359 		}
         ;    1360 	else if(step==s4)
         ;    1361 		{
         ;    1362 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1363           if(!bMD2)goto step_contr_end;
         ;    1364           step=s54;
         ;    1365           cnt_del=20;
         ;    1366 		}
         ;    1367 	else if(step==s54)
         ;    1368 		{
         ;    1369 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1370           cnt_del--;
         ;    1371           if(cnt_del==0)
         ;    1372 			{
         ;    1373           	step=s5;
         ;    1374           	cnt_del=20;
         ;    1375 			}
         ;    1376           }
         ;    1377 
         ;    1378 	else if(step==s5)
         ;    1379 		{
         ;    1380 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1381           cnt_del--;
         ;    1382           if(cnt_del==0)
         ;    1383 			{
         ;    1384           	step=s6;
         ;    1385 			}
         ;    1386           }
         ;    1387 	else if(step==s6)
         ;    1388 		{
         ;    1389 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1390           if(!bMD3)goto step_contr_end;
         ;    1391           step=s55;
         ;    1392           cnt_del=40;
         ;    1393 		}
         ;    1394 	else if(step==s55)
         ;    1395 		{
         ;    1396 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1397           cnt_del--;
         ;    1398           if(cnt_del==0)
         ;    1399 			{
         ;    1400           	step=s7;
         ;    1401           	cnt_del=20;
         ;    1402 			}
         ;    1403           }
         ;    1404 	else if(step==s7)
         ;    1405 		{
         ;    1406 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1407           cnt_del--;
         ;    1408           if(cnt_del==0)
         ;    1409 			{
         ;    1410           	step=s8;
         ;    1411           	cnt_del=130;
         ;    1412 			}
         ;    1413           }
         ;    1414 	else if(step==s8)
         ;    1415 		{
         ;    1416 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1417           cnt_del--;
         ;    1418           if(cnt_del==0)
         ;    1419 			{
         ;    1420           	step=s9;
         ;    1421           	cnt_del=20;
         ;    1422 			}
         ;    1423           }
         ;    1424 	else if(step==s9)
         ;    1425 		{
         ;    1426 		temp|=(1<<PP1);
         ;    1427           cnt_del--;
         ;    1428           if(cnt_del==0)
         ;    1429 			{
         ;    1430           	step=sOFF;
         ;    1431           	}
         ;    1432           }
         ;    1433 	}
         ;    1434 
         ;    1435 else if(prog==p2)  //ско
         ;    1436 	{
         ;    1437 	if(step==s1)
         ;    1438 		{
         ;    1439 		temp|=(1<<PP1);
         ;    1440           if(!bMD1)goto step_contr_end;
         ;    1441 
         ;    1442 			if(ee_vacuum_mode==evmOFF)
         ;    1443 				{
         ;    1444 				goto lbl_0002;
         ;    1445 				}
         ;    1446 			else step=s2;
         ;    1447 
         ;    1448           //step=s2;
         ;    1449 		}
         ;    1450 
         ;    1451 	else if(step==s2)
         ;    1452 		{
         ;    1453 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1454           if(!bVR)goto step_contr_end;
         ;    1455 
         ;    1456 lbl_0002:
         ;    1457           step=s100;
         ;    1458 		cnt_del=40;
         ;    1459           }
         ;    1460 	else if(step==s100)
         ;    1461 		{
         ;    1462 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1463           cnt_del--;
         ;    1464           if(cnt_del==0)
         ;    1465 			{
         ;    1466           	step=s3;
         ;    1467           	cnt_del=50;
         ;    1468 			}
         ;    1469 		}
         ;    1470 	else if(step==s3)
         ;    1471 		{
         ;    1472 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1473           cnt_del--;
         ;    1474           if(cnt_del==0)
         ;    1475 			{
         ;    1476           	step=s4;
         ;    1477 			}
         ;    1478 		}
         ;    1479 	else if(step==s4)
         ;    1480 		{
         ;    1481 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1482           if(!bMD2)goto step_contr_end;
         ;    1483           step=s5;
         ;    1484           cnt_del=20;
         ;    1485 		}
         ;    1486 	else if(step==s5)
         ;    1487 		{
         ;    1488 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1489           cnt_del--;
         ;    1490           if(cnt_del==0)
         ;    1491 			{
         ;    1492           	step=s6;
         ;    1493           	cnt_del=130;
         ;    1494 			}
         ;    1495           }
         ;    1496 	else if(step==s6)
         ;    1497 		{
         ;    1498 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1499           cnt_del--;
         ;    1500           if(cnt_del==0)
         ;    1501 			{
         ;    1502           	step=s7;
         ;    1503           	cnt_del=20;
         ;    1504 			}
         ;    1505           }
         ;    1506 	else if(step==s7)
         ;    1507 		{
         ;    1508 		temp|=(1<<PP1);
         ;    1509           cnt_del--;
         ;    1510           if(cnt_del==0)
         ;    1511 			{
         ;    1512           	step=sOFF;
         ;    1513           	}
         ;    1514           }
         ;    1515 	}
         ;    1516 
         ;    1517 else if(prog==p3)   //твист
         ;    1518 	{
         ;    1519 	if(step==s1)
         ;    1520 		{
         ;    1521 		temp|=(1<<PP1);
         ;    1522           if(!bMD1)goto step_contr_end;
         ;    1523 
         ;    1524 			if(ee_vacuum_mode==evmOFF)
         ;    1525 				{
         ;    1526 				goto lbl_0003;
         ;    1527 				}
         ;    1528 			else step=s2;
         ;    1529 
         ;    1530           //step=s2;
         ;    1531 		}
         ;    1532 
         ;    1533 	else if(step==s2)
         ;    1534 		{
         ;    1535 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1536           if(!bVR)goto step_contr_end;
         ;    1537 lbl_0003:
         ;    1538           cnt_del=50;
         ;    1539 		step=s3;
         ;    1540 		}
         ;    1541 
         ;    1542 
         ;    1543 	else	if(step==s3)
         ;    1544 		{
         ;    1545 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1546 		cnt_del--;
         ;    1547 		if(cnt_del==0)
         ;    1548 			{
         ;    1549 			cnt_del=90;
         ;    1550 			step=s4;
         ;    1551 			}
         ;    1552           }
         ;    1553 	else if(step==s4)
         ;    1554 		{
         ;    1555 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1556 		cnt_del--;
         ;    1557  		if(cnt_del==0)
         ;    1558 			{
         ;    1559 			cnt_del=130;
         ;    1560 			step=s5;
         ;    1561 			}
         ;    1562 		}
         ;    1563 
         ;    1564 	else if(step==s5)
         ;    1565 		{
         ;    1566 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1567 		cnt_del--;
         ;    1568 		if(cnt_del==0)
         ;    1569 			{
         ;    1570 			step=s6;
         ;    1571 			cnt_del=20;
         ;    1572 			}
         ;    1573 		}
         ;    1574 
         ;    1575 	else if(step==s6)
         ;    1576 		{
         ;    1577 		temp|=(1<<PP1);
         ;    1578   		cnt_del--;
         ;    1579 		if(cnt_del==0)
         ;    1580 			{
         ;    1581 			step=sOFF;
         ;    1582 			}
         ;    1583 		}
         ;    1584 
         ;    1585 	}
         ;    1586 
         ;    1587 else if(prog==p4)      //замок
         ;    1588 	{
         ;    1589 	if(step==s1)
         ;    1590 		{
         ;    1591 		temp|=(1<<PP1);
         ;    1592           if(!bMD1)goto step_contr_end;
         ;    1593 
         ;    1594 			if(ee_vacuum_mode==evmOFF)
         ;    1595 				{
         ;    1596 				goto lbl_0004;
         ;    1597 				}
         ;    1598 			else step=s2;
         ;    1599           //step=s2;
         ;    1600 		}
         ;    1601 
         ;    1602 	else if(step==s2)
         ;    1603 		{
         ;    1604 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1605           if(!bVR)goto step_contr_end;
         ;    1606 lbl_0004:
         ;    1607           step=s3;
         ;    1608 		cnt_del=50;
         ;    1609           }
         ;    1610 
         ;    1611 	else if(step==s3)
         ;    1612 		{
         ;    1613 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1614           cnt_del--;
         ;    1615           if(cnt_del==0)
         ;    1616 			{
         ;    1617           	step=s4;
         ;    1618 			cnt_del=120U;
         ;    1619 			}
         ;    1620           }
         ;    1621 
         ;    1622    	else if(step==s4)
         ;    1623 		{
         ;    1624 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1625 		cnt_del--;
         ;    1626 		if(cnt_del==0)
         ;    1627 			{
         ;    1628 			step=s5;
         ;    1629 			cnt_del=30;
         ;    1630 			}
         ;    1631 		}
         ;    1632 
         ;    1633 	else if(step==s5)
         ;    1634 		{
         ;    1635 		temp|=(1<<PP1)|(1<<PP4);
         ;    1636 		cnt_del--;
         ;    1637 		if(cnt_del==0)
         ;    1638 			{
         ;    1639 			step=s6;
         ;    1640 			cnt_del=120U;
         ;    1641 			}
         ;    1642 		}
         ;    1643 
         ;    1644 	else if(step==s6)
         ;    1645 		{
         ;    1646 		temp|=(1<<PP4);
         ;    1647 		cnt_del--;
         ;    1648 		if(cnt_del==0)
         ;    1649 			{
         ;    1650 			step=sOFF;
         ;    1651 			}
         ;    1652 		}
         ;    1653 
         ;    1654 	}
         ;    1655 	
         ;    1656 step_contr_end:
         ;    1657 
         ;    1658 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1659 
         ;    1660 PORTB=~temp;
         ;    1661 //PORTB=0x55;
         ;    1662 }
         ;    1663 #endif
         ;    1664 
         ;    1665 #ifdef I220
         ;    1666 //-----------------------------------------------
         ;    1667 void step_contr(void)
         ;    1668 {
         ;    1669 char temp=0;
         ;    1670 DDRB=0xFF;
         ;    1671 
         ;    1672 if(step==sOFF)goto step_contr_end;
         ;    1673 
         ;    1674 else if(prog==p3)   //твист
         ;    1675 	{
         ;    1676 	if(step==s1)
         ;    1677 		{
         ;    1678 		temp|=(1<<PP1);
         ;    1679           if(!bMD1)goto step_contr_end;
         ;    1680 
         ;    1681 			if(ee_vacuum_mode==evmOFF)
         ;    1682 				{
         ;    1683 				goto lbl_0003;
         ;    1684 				}
         ;    1685 			else step=s2;
         ;    1686 
         ;    1687           //step=s2;
         ;    1688 		}
         ;    1689 
         ;    1690 	else if(step==s2)
         ;    1691 		{
         ;    1692 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1693           if(!bVR)goto step_contr_end;
         ;    1694 lbl_0003:
         ;    1695           cnt_del=50;
         ;    1696 		step=s3;
         ;    1697 		}
         ;    1698 
         ;    1699 
         ;    1700 	else	if(step==s3)
         ;    1701 		{
         ;    1702 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1703 		cnt_del--;
         ;    1704 		if(cnt_del==0)
         ;    1705 			{
         ;    1706 			cnt_del=ee_delay[prog,0]*10U;
         ;    1707 			step=s4;
         ;    1708 			}
         ;    1709           }
         ;    1710 	else if(step==s4)
         ;    1711 		{
         ;    1712 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1713 		cnt_del--;
         ;    1714  		if(cnt_del==0)
         ;    1715 			{
         ;    1716 			cnt_del=ee_delay[prog,1]*10U;
         ;    1717 			step=s5;
         ;    1718 			}
         ;    1719 		}
         ;    1720 
         ;    1721 	else if(step==s5)
         ;    1722 		{
         ;    1723 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1724 		cnt_del--;
         ;    1725 		if(cnt_del==0)
         ;    1726 			{
         ;    1727 			step=s6;
         ;    1728 			cnt_del=20;
         ;    1729 			}
         ;    1730 		}
         ;    1731 
         ;    1732 	else if(step==s6)
         ;    1733 		{
         ;    1734 		temp|=(1<<PP1);
         ;    1735   		cnt_del--;
         ;    1736 		if(cnt_del==0)
         ;    1737 			{
         ;    1738 			step=sOFF;
         ;    1739 			}
         ;    1740 		}
         ;    1741 
         ;    1742 	}
         ;    1743 
         ;    1744 else if(prog==p4)      //замок
         ;    1745 	{
         ;    1746 	if(step==s1)
         ;    1747 		{
         ;    1748 		temp|=(1<<PP1);
         ;    1749           if(!bMD1)goto step_contr_end;
         ;    1750 
         ;    1751 			if(ee_vacuum_mode==evmOFF)
         ;    1752 				{
         ;    1753 				goto lbl_0004;
         ;    1754 				}
         ;    1755 			else step=s2;
         ;    1756           //step=s2;
         ;    1757 		}
         ;    1758 
         ;    1759 	else if(step==s2)
         ;    1760 		{
         ;    1761 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1762           if(!bVR)goto step_contr_end;
         ;    1763 lbl_0004:
         ;    1764           step=s3;
         ;    1765 		cnt_del=50;
         ;    1766           }
         ;    1767 
         ;    1768 	else if(step==s3)
         ;    1769 		{
         ;    1770 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1771           cnt_del--;
         ;    1772           if(cnt_del==0)
         ;    1773 			{
         ;    1774           	step=s4;
         ;    1775 			cnt_del=ee_delay[prog,0]*10U;
         ;    1776 			}
         ;    1777           }
         ;    1778 
         ;    1779    	else if(step==s4)
         ;    1780 		{
         ;    1781 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1782 		cnt_del--;
         ;    1783 		if(cnt_del==0)
         ;    1784 			{
         ;    1785 			step=s5;
         ;    1786 			cnt_del=30;
         ;    1787 			}
         ;    1788 		}
         ;    1789 
         ;    1790 	else if(step==s5)
         ;    1791 		{
         ;    1792 		temp|=(1<<PP1)|(1<<PP4);
         ;    1793 		cnt_del--;
         ;    1794 		if(cnt_del==0)
         ;    1795 			{
         ;    1796 			step=s6;
         ;    1797 			cnt_del=ee_delay[prog,1]*10U;
         ;    1798 			}
         ;    1799 		}
         ;    1800 
         ;    1801 	else if(step==s6)
         ;    1802 		{
         ;    1803 		temp|=(1<<PP4);
         ;    1804 		cnt_del--;
         ;    1805 		if(cnt_del==0)
         ;    1806 			{
         ;    1807 			step=sOFF;
         ;    1808 			}
         ;    1809 		}
         ;    1810 
         ;    1811 	}
         ;    1812 	
         ;    1813 step_contr_end:
         ;    1814 
         ;    1815 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1816 
         ;    1817 PORTB=~temp;
         ;    1818 //PORTB=0x55;
         ;    1819 }
         ;    1820 #endif 
         ;    1821 
         ;    1822 #ifdef TVIST_SKO
         ;    1823 //-----------------------------------------------
         ;    1824 void step_contr(void)
         ;    1825 {
         ;    1826 char temp=0;
         ;    1827 DDRB=0xFF;
         ;    1828 
         ;    1829 if(step==sOFF)
         ;    1830 	{
         ;    1831 	temp=0;
         ;    1832 	}
         ;    1833 
         ;    1834 if(prog==p2) //СКО
         ;    1835 	{
         ;    1836 	if(step==s1)
         ;    1837 		{
         ;    1838 		temp|=(1<<PP1);
         ;    1839 
         ;    1840 		cnt_del--;
         ;    1841 		if(cnt_del==0)
         ;    1842 			{
         ;    1843 			step=s2;
         ;    1844 			cnt_del=30;
         ;    1845 			}
         ;    1846 		}
         ;    1847 
         ;    1848 	else if(step==s2)
         ;    1849 		{
         ;    1850 		temp|=(1<<PP1)|(1<<DV);
         ;    1851 
         ;    1852 		cnt_del--;
         ;    1853 		if(cnt_del==0)
         ;    1854 			{
         ;    1855 			step=s3;
         ;    1856 			}
         ;    1857 		}
         ;    1858 
         ;    1859 
         ;    1860 	else if(step==s3)
         ;    1861 		{
         ;    1862 		temp|=(1<<PP1)|(1<<DV)|(1<<PP2);
         ;    1863 
         ;    1864                	if(bMD1)//goto step_contr_end;
         ;    1865                		{  
         ;    1866                		cnt_del=100;
         ;    1867 	       		step=s4;
         ;    1868 	       		}
         ;    1869 	       	}
         ;    1870 
         ;    1871 	else if(step==s4)
         ;    1872 		{
         ;    1873 		temp|=(1<<PP1);
         ;    1874 		cnt_del--;
         ;    1875 		if(cnt_del==0)
         ;    1876 			{
         ;    1877 			step=sOFF;
         ;    1878 			}
         ;    1879 		}
         ;    1880 
         ;    1881 	}
         ;    1882 
         ;    1883 if(prog==p3)
         ;    1884 	{
         ;    1885 	if(step==s1)
         ;    1886 		{
         ;    1887 		temp|=(1<<PP1);
         ;    1888 
         ;    1889 		cnt_del--;
         ;    1890 		if(cnt_del==0)
         ;    1891 			{
         ;    1892 			step=s2;
         ;    1893 			cnt_del=100;
         ;    1894 			}
         ;    1895 		}
         ;    1896 
         ;    1897 	else if(step==s2)
         ;    1898 		{
         ;    1899 		temp|=(1<<PP1)|(1<<PP2);
         ;    1900 
         ;    1901 		cnt_del--;
         ;    1902 		if(cnt_del==0)
         ;    1903 			{
         ;    1904 			step=s3;
         ;    1905 			cnt_del=50;
         ;    1906 			}
         ;    1907 		}
         ;    1908 
         ;    1909 
         ;    1910 	else if(step==s3)
         ;    1911 		{
         ;    1912 		temp|=(1<<PP2);
         ;    1913 	
         ;    1914 		cnt_del--;
         ;    1915 		if(cnt_del==0)
         ;    1916 			{
         ;    1917 			step=sOFF;
         ;    1918 			}
         ;    1919                	}
         ;    1920 	}
         ;    1921 step_contr_end:
         ;    1922 
         ;    1923 PORTB=~temp;
         ;    1924 }
         ;    1925 #endif
         ;    1926 //-----------------------------------------------
         ;    1927 void bin2bcd_int(unsigned int in)
         ;    1928 {
          _bin2bcd_int:
         ;    1929 char i;
         ;    1930 for(i=3;i>0;i--)
0002f3 930a      	ST   -Y,R16
         ;	in -> Y+1
         ;	i -> R16
0002f4 e003      	LDI  R16,LOW(3)
          _0xA1:
0002f5 e0e0      	LDI  R30,LOW(0)
0002f6 17e0      	CP   R30,R16
0002f7 f4c8      	BRSH _0xA2
         ;    1931 	{
         ;    1932 	dig[i]=in%10;
0002f8 2fe0      	MOV  R30,R16
0002f9 e0f0      	LDI  R31,0
0002fa 59eb      	SUBI R30,LOW(-_dig)
0002fb 4ffd      	SBCI R31,HIGH(-_dig)
0002fc 93ff      	PUSH R31
0002fd 93ef      	PUSH R30
0002fe 81a9      	LDD  R26,Y+1
0002ff 81ba      	LDD  R27,Y+1+1
000300 e0ea      	LDI  R30,LOW(10)
000301 e0f0      	LDI  R31,HIGH(10)
000302 940e 06b3 	CALL __MODW21U
000304 91af      	POP  R26
000305 91bf      	POP  R27
000306 93ec      	ST   X,R30
         ;    1933 	in/=10;
000307 81a9      	LDD  R26,Y+1
000308 81ba      	LDD  R27,Y+1+1
000309 e0ea      	LDI  R30,LOW(10)
00030a e0f0      	LDI  R31,HIGH(10)
00030b 940e 06a0 	CALL __DIVW21U
00030d 83e9      	STD  Y+1,R30
00030e 83fa      	STD  Y+1+1,R31
         ;    1934 	}   
00030f 5001      	SUBI R16,1
000310 cfe4      	RJMP _0xA1
          _0xA2:
         ;    1935 }
000311 8108      	LDD  R16,Y+0
000312 c06a      	RJMP _0x10D
         ;    1936 
         ;    1937 //-----------------------------------------------
         ;    1938 void bcd2ind(char s)
         ;    1939 {
          _bcd2ind:
         ;    1940 char i;
         ;    1941 bZ=1;
000313 930a      	ST   -Y,R16
         ;	s -> Y+1
         ;	i -> R16
000314 9468      	SET
000315 f823      	BLD  R2,3
         ;    1942 for (i=0;i<5;i++)
000316 e000      	LDI  R16,LOW(0)
          _0xA4:
000317 3005      	CPI  R16,5
000318 f010      	BRLO PC+3
000319 940c 0370 	JMP _0xA5
         ;    1943 	{
         ;    1944 	if(bZ&&(!dig[i-1])&&(i<4))
00031b fe23      	SBRS R2,3
00031c c009      	RJMP _0xA7
00031d 940e 0651 	CALL SUBOPT_0x7
00031f 59eb      	SUBI R30,LOW(-_dig)
000320 4ffd      	SBCI R31,HIGH(-_dig)
000321 81e0      	LD   R30,Z
000322 30e0      	CPI  R30,0
000323 f411      	BRNE _0xA7
000324 3004      	CPI  R16,4
000325 f008      	BRLO _0xA8
          _0xA7:
000326 c01f      	RJMP _0xA6
          _0xA8:
         ;    1945 		{
         ;    1946 		if((4-i)>s)
000327 e0e4      	LDI  R30,LOW(4)
000328 1be0      	SUB  R30,R16
000329 2fae      	MOV  R26,R30
00032a 81e9      	LDD  R30,Y+1
00032b 17ea      	CP   R30,R26
00032c f460      	BRSH _0xA9
         ;    1947 			{
         ;    1948 			ind_out[i-1]=DIGISYM[10];
00032d 940e 0651 	CALL SUBOPT_0x7
00032f 5ae0      	SUBI R30,LOW(-_ind_out)
000330 4ffd      	SBCI R31,HIGH(-_ind_out)
000331 93ff      	PUSH R31
000332 93ef      	PUSH R30
000333   +  	__POINTW1FN _DIGISYM,10
000335 91e4      	LPM  R30,Z
000336 91af      	POP  R26
000337 91bf      	POP  R27
000338 c00b      	RJMP _0x10E
         ;    1949 			}
         ;    1950 		else ind_out[i-1]=DIGISYM[0];	
          _0xA9:
000339 940e 0651 	CALL SUBOPT_0x7
00033b 5ae0      	SUBI R30,LOW(-_ind_out)
00033c 4ffd      	SBCI R31,HIGH(-_ind_out)
00033d 93ff      	PUSH R31
00033e 93ef      	PUSH R30
00033f e5ea      	LDI  R30,LOW(_DIGISYM*2)
000340 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
000341 91e4      	LPM  R30,Z
000342 91af      	POP  R26
000343 91bf      	POP  R27
          _0x10E:
000344 93ec      	ST   X,R30
         ;    1951 		}
         ;    1952 	else
000345 c018      	RJMP _0xAB
          _0xA6:
         ;    1953 		{
         ;    1954 		ind_out[i-1]=DIGISYM[dig[i-1]];
000346 940e 0651 	CALL SUBOPT_0x7
000348 5ae0      	SUBI R30,LOW(-_ind_out)
000349 4ffd      	SBCI R31,HIGH(-_ind_out)
00034a 93ff      	PUSH R31
00034b 93ef      	PUSH R30
00034c e5ea      	LDI  R30,LOW(_DIGISYM*2)
00034d e0f0      	LDI  R31,HIGH(_DIGISYM*2)
00034e 93ff      	PUSH R31
00034f 93ef      	PUSH R30
000350 940e 0651 	CALL SUBOPT_0x7
000352 59eb      	SUBI R30,LOW(-_dig)
000353 4ffd      	SBCI R31,HIGH(-_dig)
000354 81e0      	LD   R30,Z
000355 91af      	POP  R26
000356 91bf      	POP  R27
000357 940e 0655 	CALL SUBOPT_0x8
000359 91af      	POP  R26
00035a 91bf      	POP  R27
00035b 93ec      	ST   X,R30
         ;    1955 		bZ=0;
00035c 94e8      	CLT
00035d f823      	BLD  R2,3
         ;    1956 		}                   
          _0xAB:
         ;    1957 
         ;    1958 	if(s)
00035e 81e9      	LDD  R30,Y+1
00035f 30e0      	CPI  R30,0
000360 f069      	BREQ _0xAC
         ;    1959 		{
         ;    1960 		ind_out[3-s]&=0b01111111;
000361 81a9      	LDD  R26,Y+1
000362 e0e3      	LDI  R30,LOW(3)
000363 1bea      	SUB  R30,R26
000364 e0f0      	LDI  R31,0
000365 5ae0      	SUBI R30,LOW(-_ind_out)
000366 4ffd      	SBCI R31,HIGH(-_ind_out)
000367 93ff      	PUSH R31
000368 93ef      	PUSH R30
000369 81e0      	LD   R30,Z
00036a 77ef      	ANDI R30,0x7F
00036b 91af      	POP  R26
00036c 91bf      	POP  R27
00036d 93ec      	ST   X,R30
         ;    1961 		}	
         ;    1962  
         ;    1963 	}
          _0xAC:
00036e 5f0f      	SUBI R16,-1
00036f cfa7      	RJMP _0xA4
          _0xA5:
         ;    1964 }            
000370 8108      	LDD  R16,Y+0
000371 9622      	ADIW R28,2
000372 9508      	RET
         ;    1965 //-----------------------------------------------
         ;    1966 void int2ind(unsigned int in,char s)
         ;    1967 {
          _int2ind:
         ;    1968 bin2bcd_int(in);
000373 81e9      	LDD  R30,Y+1
000374 81fa      	LDD  R31,Y+1+1
000375 93fa      	ST   -Y,R31
000376 93ea      	ST   -Y,R30
000377 940e 02f3 	CALL _bin2bcd_int
         ;    1969 bcd2ind(s);
000379 81e8      	LD   R30,Y
00037a 93ea      	ST   -Y,R30
00037b 940e 0313 	CALL _bcd2ind
         ;    1970 
         ;    1971 } 
          _0x10D:
00037d 9623      	ADIW R28,3
00037e 9508      	RET
         ;    1972 
         ;    1973 //-----------------------------------------------
         ;    1974 void ind_hndl(void)
         ;    1975 {
          _ind_hndl:
         ;    1976 int2ind(ee_delay[prog,sub_ind],1);  
00037f 940e 065a 	CALL SUBOPT_0x9
000381 93fa      	ST   -Y,R31
000382 93ea      	ST   -Y,R30
000383 e0e1      	LDI  R30,LOW(1)
000384 93ea      	ST   -Y,R30
000385 940e 0373 	CALL _int2ind
         ;    1977 //ind_out[0]=0xff;//DIGISYM[0];
         ;    1978 //ind_out[1]=0xff;//DIGISYM[1];
         ;    1979 //ind_out[2]=DIGISYM[2];//0xff;
         ;    1980 //ind_out[0]=DIGISYM[7]; 
         ;    1981 
         ;    1982 ind_out[0]=DIGISYM[sub_ind+1];
000387 e5ea      	LDI  R30,LOW(_DIGISYM*2)
000388 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
000389 93ff      	PUSH R31
00038a 93ef      	PUSH R30
00038b 2ded      	MOV  R30,R13
00038c 5fef      	SUBI R30,-LOW(1)
00038d 91af      	POP  R26
00038e 91bf      	POP  R27
00038f 940e 0655 	CALL SUBOPT_0x8
000391 93e0 0260 	STS  _ind_out,R30
         ;    1983 }
000393 9508      	RET
         ;    1984 
         ;    1985 //-----------------------------------------------
         ;    1986 void led_hndl(void)
         ;    1987 {
          _led_hndl:
         ;    1988 ind_out[4]=DIGISYM[10]; 
000394   +  	__POINTW1FN _DIGISYM,10
000396 91e4      	LPM  R30,Z
000397   +  	__PUTB1MN _ind_out,4
         ;    1989 
         ;    1990 ind_out[4]&=~(1<<LED_POW_ON); 
000399   +  	__POINTW1MN _ind_out,4
00039b 93ff      	PUSH R31
00039c 93ef      	PUSH R30
00039d 81e0      	LD   R30,Z
00039e 7def      	ANDI R30,0xDF
00039f 91af      	POP  R26
0003a0 91bf      	POP  R27
0003a1 93ec      	ST   X,R30
         ;    1991 
         ;    1992 if(step!=sOFF)
0003a2 20bb      	TST  R11
0003a3 f049      	BREQ _0xAD
         ;    1993 	{
         ;    1994 	ind_out[4]&=~(1<<LED_WRK);
0003a4   +  	__POINTW1MN _ind_out,4
0003a6 93ff      	PUSH R31
0003a7 93ef      	PUSH R30
0003a8 81e0      	LD   R30,Z
0003a9 7bef      	ANDI R30,0xBF
0003aa 91af      	POP  R26
0003ab 91bf      	POP  R27
0003ac c008      	RJMP _0x10F
         ;    1995 	}
         ;    1996 else ind_out[4]|=(1<<LED_WRK);
          _0xAD:
0003ad   +  	__POINTW1MN _ind_out,4
0003af 93ff      	PUSH R31
0003b0 93ef      	PUSH R30
0003b1 81e0      	LD   R30,Z
0003b2 64e0      	ORI  R30,0x40
0003b3 91af      	POP  R26
0003b4 91bf      	POP  R27
          _0x10F:
0003b5 93ec      	ST   X,R30
         ;    1997 
         ;    1998 
         ;    1999 if(step==sOFF)
0003b6 20bb      	TST  R11
0003b7 f4a9      	BRNE _0xAF
         ;    2000 	{
         ;    2001  	if(bERR)
0003b8 fe31      	SBRS R3,1
0003b9 c009      	RJMP _0xB0
         ;    2002 		{
         ;    2003 		ind_out[4]&=~(1<<LED_ERROR);
0003ba   +  	__POINTW1MN _ind_out,4
0003bc 93ff      	PUSH R31
0003bd 93ef      	PUSH R30
0003be 81e0      	LD   R30,Z
0003bf 7fee      	ANDI R30,0xFE
0003c0 91af      	POP  R26
0003c1 91bf      	POP  R27
0003c2 c008      	RJMP _0x110
         ;    2004 		}
         ;    2005 	else
          _0xB0:
         ;    2006 		{
         ;    2007 		ind_out[4]|=(1<<LED_ERROR);
0003c3   +  	__POINTW1MN _ind_out,4
0003c5 93ff      	PUSH R31
0003c6 93ef      	PUSH R30
0003c7 81e0      	LD   R30,Z
0003c8 60e1      	ORI  R30,1
0003c9 91af      	POP  R26
0003ca 91bf      	POP  R27
          _0x110:
0003cb 93ec      	ST   X,R30
         ;    2008 		}
         ;    2009      }
         ;    2010 else ind_out[4]|=(1<<LED_ERROR);
0003cc c009      	RJMP _0xB2
          _0xAF:
0003cd   +  	__POINTW1MN _ind_out,4
0003cf 93ff      	PUSH R31
0003d0 93ef      	PUSH R30
0003d1 81e0      	LD   R30,Z
0003d2 60e1      	ORI  R30,1
0003d3 91af      	POP  R26
0003d4 91bf      	POP  R27
0003d5 93ec      	ST   X,R30
          _0xB2:
         ;    2011 
         ;    2012 /* 	if(bMD1)
         ;    2013 		{
         ;    2014 		ind_out[4]&=~(1<<LED_ERROR);
         ;    2015 		}
         ;    2016 	else
         ;    2017 		{
         ;    2018 		ind_out[4]|=(1<<LED_ERROR);
         ;    2019 		} */
         ;    2020 
         ;    2021 //if(bERR)ind_out[4]&=~(1<<LED_ERROR);
         ;    2022 if(ee_vacuum_mode==evmON)ind_out[4]&=~(1<<LED_VACUUM);
0003d6 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0003d7 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0003d8 940e 06ba 	CALL __EEPROMRDB
0003da 35e5      	CPI  R30,LOW(0x55)
0003db f449      	BRNE _0xB3
0003dc   +  	__POINTW1MN _ind_out,4
0003de 93ff      	PUSH R31
0003df 93ef      	PUSH R30
0003e0 81e0      	LD   R30,Z
0003e1 77ef      	ANDI R30,0x7F
0003e2 91af      	POP  R26
0003e3 91bf      	POP  R27
0003e4 c008      	RJMP _0x111
         ;    2023 else ind_out[4]|=(1<<LED_VACUUM);
          _0xB3:
0003e5   +  	__POINTW1MN _ind_out,4
0003e7 93ff      	PUSH R31
0003e8 93ef      	PUSH R30
0003e9 81e0      	LD   R30,Z
0003ea 68e0      	ORI  R30,0x80
0003eb 91af      	POP  R26
0003ec 91bf      	POP  R27
          _0x111:
0003ed 93ec      	ST   X,R30
         ;    2024 
         ;    2025 if(prog==p1) ind_out[4]&=~(1<<LED_PROG1);
0003ee e0e1      	LDI  R30,LOW(1)
0003ef 15ea      	CP   R30,R10
0003f0 f451      	BRNE _0xB5
0003f1   +  	__POINTW1MN _ind_out,4
0003f3 93ff      	PUSH R31
0003f4 93ef      	PUSH R30
0003f5 81e0      	LD   R30,Z
0003f6 7eef      	ANDI R30,0xEF
0003f7 91af      	POP  R26
0003f8 91bf      	POP  R27
0003f9 93ec      	ST   X,R30
         ;    2026 else if(prog==p2) ind_out[4]&=~(1<<LED_PROG2);
0003fa c026      	RJMP _0xB6
          _0xB5:
0003fb e0e2      	LDI  R30,LOW(2)
0003fc 15ea      	CP   R30,R10
0003fd f451      	BRNE _0xB7
0003fe   +  	__POINTW1MN _ind_out,4
000400 93ff      	PUSH R31
000401 93ef      	PUSH R30
000402 81e0      	LD   R30,Z
000403 7feb      	ANDI R30,0xFB
000404 91af      	POP  R26
000405 91bf      	POP  R27
000406 93ec      	ST   X,R30
         ;    2027 else if(prog==p3) ind_out[4]&=~(1<<LED_PROG3);
000407 c019      	RJMP _0xB8
          _0xB7:
000408 e0e3      	LDI  R30,LOW(3)
000409 15ea      	CP   R30,R10
00040a f451      	BRNE _0xB9
00040b   +  	__POINTW1MN _ind_out,4
00040d 93ff      	PUSH R31
00040e 93ef      	PUSH R30
00040f 81e0      	LD   R30,Z
000410 7fe7      	ANDI R30,0XF7
000411 91af      	POP  R26
000412 91bf      	POP  R27
000413 93ec      	ST   X,R30
         ;    2028 else if(prog==p4) ind_out[4]&=~(1<<LED_PROG4);
000414 c00c      	RJMP _0xBA
          _0xB9:
000415 e0e4      	LDI  R30,LOW(4)
000416 15ea      	CP   R30,R10
000417 f449      	BRNE _0xBB
000418   +  	__POINTW1MN _ind_out,4
00041a 93ff      	PUSH R31
00041b 93ef      	PUSH R30
00041c 81e0      	LD   R30,Z
00041d 7fed      	ANDI R30,0xFD
00041e 91af      	POP  R26
00041f 91bf      	POP  R27
000420 93ec      	ST   X,R30
         ;    2029 
         ;    2030 if(ind==iPr_sel)
          _0xBB:
          _0xBA:
          _0xB8:
          _0xB6:
000421 e0e1      	LDI  R30,LOW(1)
000422 15ec      	CP   R30,R12
000423 f459      	BRNE _0xBC
         ;    2031 	{
         ;    2032 	if(bFL5)ind_out[4]|=(1<<LED_PROG1)|(1<<LED_PROG2)|(1<<LED_PROG3)|(1<<LED_PROG4);
000424 fe30      	SBRS R3,0
000425 c009      	RJMP _0xBD
000426   +  	__POINTW1MN _ind_out,4
000428 93ff      	PUSH R31
000429 93ef      	PUSH R30
00042a 81e0      	LD   R30,Z
00042b 61ee      	ORI  R30,LOW(0x1E)
00042c 91af      	POP  R26
00042d 91bf      	POP  R27
00042e 93ec      	ST   X,R30
         ;    2033 	} 
          _0xBD:
         ;    2034 	 
         ;    2035 if(ind==iVr)
          _0xBC:
00042f e0e2      	LDI  R30,LOW(2)
000430 15ec      	CP   R30,R12
000431 f459      	BRNE _0xBE
         ;    2036 	{
         ;    2037 	if(bFL5)ind_out[4]|=(1<<LED_POW_ON);
000432 fe30      	SBRS R3,0
000433 c009      	RJMP _0xBF
000434   +  	__POINTW1MN _ind_out,4
000436 93ff      	PUSH R31
000437 93ef      	PUSH R30
000438 81e0      	LD   R30,Z
000439 62e0      	ORI  R30,0x20
00043a 91af      	POP  R26
00043b 91bf      	POP  R27
00043c 93ec      	ST   X,R30
         ;    2038 	}	
          _0xBF:
         ;    2039 }
          _0xBE:
00043d 9508      	RET
         ;    2040 
         ;    2041 //-----------------------------------------------
         ;    2042 // Подпрограмма драйва до 7 кнопок одного порта, 
         ;    2043 // различает короткое и длинное нажатие,
         ;    2044 // срабатывает на отпускание кнопки, возможность
         ;    2045 // ускорения перебора при длинном нажатии...
         ;    2046 #define but_port PORTC
         ;    2047 #define but_dir  DDRC
         ;    2048 #define but_pin  PINC
         ;    2049 #define but_mask 0b01101010
         ;    2050 #define no_but   0b11111111
         ;    2051 #define but_on   5
         ;    2052 #define but_onL  20
         ;    2053 
         ;    2054 
         ;    2055 
         ;    2056 
         ;    2057 void but_drv(void)
         ;    2058 { 
          _but_drv:
         ;    2059 DDRD&=0b00000111;
00043e b3e1      	IN   R30,0x11
00043f 70e7      	ANDI R30,LOW(0x7)
000440 940e 066d 	CALL SUBOPT_0xA
         ;    2060 PORTD|=0b11111000;
         ;    2061 
         ;    2062 but_port|=(but_mask^0xff);
000442 940e 0672 	CALL SUBOPT_0xB
         ;    2063 but_dir&=but_mask;
         ;    2064 #asm
         ;    2065 nop
000444 0000      nop
         ;    2066 nop
000445 0000      nop
         ;    2067 nop
000446 0000      nop
         ;    2068 nop
000447 0000      nop
         ;    2069 #endasm
         
         ;    2070 
         ;    2071 but_n=but_pin|but_mask; 
000448 b3e3      	IN   R30,0x13
000449 66ea      	ORI  R30,LOW(0x6A)
00044a 93e0 0269 	STS  _but_n_G1,R30
         ;    2072 
         ;    2073 if((but_n==no_but)||(but_n!=but_s))
00044c 91a0 0269 	LDS  R26,_but_n_G1
00044e 3faf      	CPI  R26,LOW(0xFF)
00044f f011      	BREQ _0xC1
000450 d228      	RCALL SUBOPT_0xC
000451 f109      	BREQ _0xC0
          _0xC1:
         ;    2074  	{
         ;    2075  	speed=0;
000452 94e8      	CLT
000453 f826      	BLD  R2,6
         ;    2076    	if (((but0_cnt>=but_on)||(but1_cnt!=0))&&(!l_but))
000454 91a0 026b 	LDS  R26,_but0_cnt_G1
000456 30a5      	CPI  R26,LOW(0x5)
000457 f420      	BRSH _0xC4
000458 91a0 026c 	LDS  R26,_but1_cnt_G1
00045a 30a0      	CPI  R26,LOW(0x0)
00045b f011      	BREQ _0xC6
          _0xC4:
00045c fe24      	SBRS R2,4
00045d c001      	RJMP _0xC7
          _0xC6:
00045e c004      	RJMP _0xC3
          _0xC7:
         ;    2077   		{
         ;    2078    	     n_but=1;
00045f 9468      	SET
000460 f825      	BLD  R2,5
         ;    2079           but=but_s;
000461 9090 026a 	LDS  R9,_but_s_G1
         ;    2080           }
         ;    2081    	if (but1_cnt>=but_onL_temp)
          _0xC3:
000463 d21b      	RCALL SUBOPT_0xD
000464 f018      	BRLO _0xC8
         ;    2082   		{
         ;    2083    	     n_but=1;
000465 9468      	SET
000466 f825      	BLD  R2,5
         ;    2084           but=but_s&0b11111101;
000467 d21d      	RCALL SUBOPT_0xE
         ;    2085           }
         ;    2086     	l_but=0;
          _0xC8:
000468 94e8      	CLT
000469 f824      	BLD  R2,4
         ;    2087    	but_onL_temp=but_onL;
00046a e1e4      	LDI  R30,LOW(20)
00046b 93e0 026d 	STS  _but_onL_temp_G1,R30
         ;    2088     	but0_cnt=0;
00046d e0e0      	LDI  R30,LOW(0)
00046e 93e0 026b 	STS  _but0_cnt_G1,R30
         ;    2089   	but1_cnt=0;          
000470 93e0 026c 	STS  _but1_cnt_G1,R30
         ;    2090      goto but_drv_out;
000472 c02b      	RJMP _0xC9
         ;    2091   	}  
         ;    2092   	
         ;    2093 if(but_n==but_s)
          _0xC0:
000473 d205      	RCALL SUBOPT_0xC
000474 f549      	BRNE _0xCA
         ;    2094  	{
         ;    2095   	but0_cnt++;
000475 91e0 026b 	LDS  R30,_but0_cnt_G1
000477 5fef      	SUBI R30,-LOW(1)
000478 93e0 026b 	STS  _but0_cnt_G1,R30
         ;    2096   	if(but0_cnt>=but_on)
00047a 91a0 026b 	LDS  R26,_but0_cnt_G1
00047c 30a5      	CPI  R26,LOW(0x5)
00047d f100      	BRLO _0xCB
         ;    2097   		{
         ;    2098    		but0_cnt=0;
00047e e0e0      	LDI  R30,LOW(0)
00047f 93e0 026b 	STS  _but0_cnt_G1,R30
         ;    2099    		but1_cnt++;
000481 91e0 026c 	LDS  R30,_but1_cnt_G1
000483 5fef      	SUBI R30,-LOW(1)
000484 93e0 026c 	STS  _but1_cnt_G1,R30
         ;    2100    		if(but1_cnt>=but_onL_temp)
000486 d1f8      	RCALL SUBOPT_0xD
000487 f0b0      	BRLO _0xCC
         ;    2101    			{              
         ;    2102     			but=but_s&0b11111101;
000488 d1fc      	RCALL SUBOPT_0xE
         ;    2103     			but1_cnt=0;
000489 e0e0      	LDI  R30,LOW(0)
00048a 93e0 026c 	STS  _but1_cnt_G1,R30
         ;    2104     			n_but=1;
00048c 9468      	SET
00048d f825      	BLD  R2,5
         ;    2105     			l_but=1;
00048e 9468      	SET
00048f f824      	BLD  R2,4
         ;    2106 			if(speed)
000490 fe26      	SBRS R2,6
000491 c00c      	RJMP _0xCD
         ;    2107 				{
         ;    2108     				but_onL_temp=but_onL_temp>>1;
000492 91e0 026d 	LDS  R30,_but_onL_temp_G1
000494 95e6      	LSR  R30
000495 93e0 026d 	STS  _but_onL_temp_G1,R30
         ;    2109         			if(but_onL_temp<=2) but_onL_temp=2;
000497 91a0 026d 	LDS  R26,_but_onL_temp_G1
000499 e0e2      	LDI  R30,LOW(2)
00049a 17ea      	CP   R30,R26
00049b f010      	BRLO _0xCE
00049c 93e0 026d 	STS  _but_onL_temp_G1,R30
         ;    2110 				}    
          _0xCE:
         ;    2111    			}
          _0xCD:
         ;    2112   		} 
          _0xCC:
         ;    2113  	}
          _0xCB:
         ;    2114 but_drv_out:
          _0xCA:
          _0xC9:
         ;    2115 but_s=but_n;
00049e 91e0 0269 	LDS  R30,_but_n_G1
0004a0 93e0 026a 	STS  _but_s_G1,R30
         ;    2116 but_port|=(but_mask^0xff);
0004a2 d1cf      	RCALL SUBOPT_0xB
         ;    2117 but_dir&=but_mask;
         ;    2118 }    
0004a3 9508      	RET
         ;    2119 
         ;    2120 #define butV	239
         ;    2121 #define butV_	237
         ;    2122 #define butP	251
         ;    2123 #define butP_	249
         ;    2124 #define butR	127
         ;    2125 #define butR_	125
         ;    2126 #define butL	254
         ;    2127 #define butL_	252
         ;    2128 #define butLR	126
         ;    2129 #define butLR_	124 
         ;    2130 #define butVP_ 233
         ;    2131 //-----------------------------------------------
         ;    2132 void but_an(void)
         ;    2133 {
          _but_an:
         ;    2134 
         ;    2135 if(!(in_word&0x01))
0004a4 fce0      	SBRC R14,0
0004a5 c024      	RJMP _0xCF
         ;    2136 	{
         ;    2137 	#ifdef TVIST_SKO
         ;    2138 	if((step==sOFF)&&(!bERR))
         ;    2139 		{
         ;    2140 		step=s1;
         ;    2141 		if(prog==p2) cnt_del=70;
         ;    2142 		else if(prog==p3) cnt_del=100;
         ;    2143 		}
         ;    2144 	#endif
         ;    2145 	#ifdef DV3KL2MD
         ;    2146 	if((step==sOFF)&&(!bERR))
         ;    2147 		{
         ;    2148 		step=s1;
         ;    2149 		cnt_del=70;
         ;    2150 		}
         ;    2151 	#endif	
         ;    2152 	#ifndef TVIST_SKO
         ;    2153 	if((step==sOFF)&&(!bERR))
0004a6 e0e0      	LDI  R30,LOW(0)
0004a7 15eb      	CP   R30,R11
0004a8 f411      	BRNE _0xD1
0004a9 fe31      	SBRS R3,1
0004aa c001      	RJMP _0xD2
          _0xD1:
0004ab c01e      	RJMP _0xD0
          _0xD2:
         ;    2154 		{
         ;    2155 		step=s1;
0004ac e0e1      	LDI  R30,LOW(1)
0004ad 2ebe      	MOV  R11,R30
         ;    2156 		if(prog==p1) cnt_del=50;
0004ae 15ea      	CP   R30,R10
0004af f439      	BRNE _0xD3
0004b0 e3e2      	LDI  R30,LOW(50)
0004b1 e0f0      	LDI  R31,HIGH(50)
0004b2 93e0 0271 	STS  _cnt_del,R30
0004b4 93f0 0272 	STS  _cnt_del+1,R31
         ;    2157 		else if(prog==p2) cnt_del=50;
0004b6 c013      	RJMP _0xD4
          _0xD3:
0004b7 e0e2      	LDI  R30,LOW(2)
0004b8 15ea      	CP   R30,R10
0004b9 f439      	BRNE _0xD5
0004ba e3e2      	LDI  R30,LOW(50)
0004bb e0f0      	LDI  R31,HIGH(50)
0004bc 93e0 0271 	STS  _cnt_del,R30
0004be 93f0 0272 	STS  _cnt_del+1,R31
         ;    2158 		else if(prog==p3) cnt_del=50;
0004c0 c009      	RJMP _0xD6
          _0xD5:
0004c1 e0e3      	LDI  R30,LOW(3)
0004c2 15ea      	CP   R30,R10
0004c3 f431      	BRNE _0xD7
0004c4 e3e2      	LDI  R30,LOW(50)
0004c5 e0f0      	LDI  R31,HIGH(50)
0004c6 93e0 0271 	STS  _cnt_del,R30
0004c8 93f0 0272 	STS  _cnt_del+1,R31
         ;    2159           #ifdef P380_MINI
         ;    2160   		cnt_del=100;
         ;    2161   		#endif
         ;    2162 		}
          _0xD7:
          _0xD6:
          _0xD4:
         ;    2163 	#endif
         ;    2164 	}
          _0xD0:
         ;    2165 if(!(in_word&0x02))
          _0xCF:
0004ca fce1      	SBRC R14,1
0004cb c001      	RJMP _0xD8
         ;    2166 	{
         ;    2167 	step=sOFF;
0004cc 24bb      	CLR  R11
         ;    2168 
         ;    2169 	}
         ;    2170 
         ;    2171 if (!n_but) goto but_an_end;
          _0xD8:
0004cd fe25      	SBRS R2,5
0004ce c0a0      	RJMP _0xDA
         ;    2172 
         ;    2173 if(but==butV_)
0004cf eeed      	LDI  R30,LOW(237)
0004d0 15e9      	CP   R30,R9
0004d1 f469      	BRNE _0xDB
         ;    2174 	{
         ;    2175 	if(ee_vacuum_mode==evmON)ee_vacuum_mode=evmOFF;
0004d2 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0004d3 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0004d4 940e 06ba 	CALL __EEPROMRDB
0004d6 35e5      	CPI  R30,LOW(0x55)
0004d7 f411      	BRNE _0xDC
0004d8 eaea      	LDI  R30,LOW(170)
0004d9 c001      	RJMP _0x112
         ;    2176 	else ee_vacuum_mode=evmON;
          _0xDC:
0004da e5e5      	LDI  R30,LOW(85)
          _0x112:
0004db e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0004dc e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0004dd 940e 06ce 	CALL __EEPROMWRB
         ;    2177 	}
         ;    2178 
         ;    2179 if(but==butVP_)
          _0xDB:
0004df eee9      	LDI  R30,LOW(233)
0004e0 15e9      	CP   R30,R9
0004e1 f431      	BRNE _0xDE
         ;    2180 	{
         ;    2181 	if(ind!=iVr)ind=iVr;
0004e2 e0e2      	LDI  R30,LOW(2)
0004e3 15ec      	CP   R30,R12
0004e4 f011      	BREQ _0xDF
0004e5 2ece      	MOV  R12,R30
         ;    2182 	else ind=iMn;
0004e6 c001      	RJMP _0xE0
          _0xDF:
0004e7 24cc      	CLR  R12
          _0xE0:
         ;    2183 	}
         ;    2184 
         ;    2185 	
         ;    2186 if(ind==iMn)
          _0xDE:
0004e8 20cc      	TST  R12
0004e9 f591      	BRNE _0xE1
         ;    2187 	{
         ;    2188 	if(but==butP_)ind=iPr_sel;
0004ea efe9      	LDI  R30,LOW(249)
0004eb 15e9      	CP   R30,R9
0004ec f411      	BRNE _0xE2
0004ed e0e1      	LDI  R30,LOW(1)
0004ee 2ece      	MOV  R12,R30
         ;    2189 	if(but==butLR)	
          _0xE2:
0004ef e7ee      	LDI  R30,LOW(126)
0004f0 15e9      	CP   R30,R9
0004f1 f471      	BRNE _0xE3
         ;    2190 		{
         ;    2191 		if((prog==p3)||(prog==p4))
0004f2 e0e3      	LDI  R30,LOW(3)
0004f3 15ea      	CP   R30,R10
0004f4 f019      	BREQ _0xE5
0004f5 e0e4      	LDI  R30,LOW(4)
0004f6 15ea      	CP   R30,R10
0004f7 f439      	BRNE _0xE4
          _0xE5:
         ;    2192 			{ 
         ;    2193 			if(sub_ind==0)sub_ind=1;
0004f8 20dd      	TST  R13
0004f9 f419      	BRNE _0xE7
0004fa e0e1      	LDI  R30,LOW(1)
0004fb 2ede      	MOV  R13,R30
         ;    2194 			else sub_ind=0;
0004fc c001      	RJMP _0xE8
          _0xE7:
0004fd 24dd      	CLR  R13
          _0xE8:
         ;    2195 			}
         ;    2196     		else sub_ind=0;
0004fe c001      	RJMP _0xE9
          _0xE4:
0004ff 24dd      	CLR  R13
          _0xE9:
         ;    2197 		}	 
         ;    2198 	if((but==butR)||(but==butR_))	
          _0xE3:
000500 e7ef      	LDI  R30,LOW(127)
000501 15e9      	CP   R30,R9
000502 f019      	BREQ _0xEB
000503 e7ed      	LDI  R30,LOW(125)
000504 15e9      	CP   R30,R9
000505 f441      	BRNE _0xEA
          _0xEB:
         ;    2199 		{  
         ;    2200 		speed=1;
000506 9468      	SET
000507 f826      	BLD  R2,6
         ;    2201 		ee_delay[prog,sub_ind]++;
000508 d151      	RCALL SUBOPT_0x9
000509 9631      	ADIW R30,1
00050a 940e 06c6 	CALL __EEPROMWRW
00050c 9731      	SBIW R30,1
         ;    2202 		}   
         ;    2203 	
         ;    2204 	else if((but==butL)||(but==butL_))	
00050d c00d      	RJMP _0xED
          _0xEA:
00050e efee      	LDI  R30,LOW(254)
00050f 15e9      	CP   R30,R9
000510 f019      	BREQ _0xEF
000511 efec      	LDI  R30,LOW(252)
000512 15e9      	CP   R30,R9
000513 f439      	BRNE _0xEE
          _0xEF:
         ;    2205 		{  
         ;    2206     		speed=1;
000514 9468      	SET
000515 f826      	BLD  R2,6
         ;    2207     		ee_delay[prog,sub_ind]--;
000516 d143      	RCALL SUBOPT_0x9
000517 9731      	SBIW R30,1
000518 940e 06c6 	CALL __EEPROMWRW
00051a 9631      	ADIW R30,1
         ;    2208     		}		
         ;    2209 	} 
          _0xEE:
          _0xED:
         ;    2210 	
         ;    2211 else if(ind==iPr_sel)
00051b c053      	RJMP _0xF1
          _0xE1:
00051c e0e1      	LDI  R30,LOW(1)
00051d 15ec      	CP   R30,R12
00051e f5e9      	BRNE _0xF2
         ;    2212 	{
         ;    2213 	if(but==butP_)ind=iMn;
00051f efe9      	LDI  R30,LOW(249)
000520 15e9      	CP   R30,R9
000521 f409      	BRNE _0xF3
000522 24cc      	CLR  R12
         ;    2214 	if(but==butP)
          _0xF3:
000523 efeb      	LDI  R30,LOW(251)
000524 15e9      	CP   R30,R9
000525 f479      	BRNE _0xF4
         ;    2215 		{
         ;    2216 		prog++;
000526 d163      	RCALL SUBOPT_0xF
         ;    2217 		if(prog>MAXPROG)prog=MINPROG;
000527 f414      	BRGE _0xF5
000528 e0e1      	LDI  R30,LOW(1)
000529 2eae      	MOV  R10,R30
         ;    2218 		ee_program[0]=prog;
          _0xF5:
00052a d163      	RCALL SUBOPT_0x10
         ;    2219 		ee_program[1]=prog;
00052b   +  	__POINTW2MN _ee_program,1
00052d 2dea      	MOV  R30,R10
00052e 940e 06ce 	CALL __EEPROMWRB
         ;    2220 		ee_program[2]=prog;
000530   +  	__POINTW2MN _ee_program,2
000532 2dea      	MOV  R30,R10
000533 940e 06ce 	CALL __EEPROMWRB
         ;    2221 		}
         ;    2222 	
         ;    2223 	if(but==butR)
          _0xF4:
000535 e7ef      	LDI  R30,LOW(127)
000536 15e9      	CP   R30,R9
000537 f479      	BRNE _0xF6
         ;    2224 		{
         ;    2225 		prog++;
000538 d151      	RCALL SUBOPT_0xF
         ;    2226 		if(prog>MAXPROG)prog=MINPROG;
000539 f414      	BRGE _0xF7
00053a e0e1      	LDI  R30,LOW(1)
00053b 2eae      	MOV  R10,R30
         ;    2227 		ee_program[0]=prog;
          _0xF7:
00053c d151      	RCALL SUBOPT_0x10
         ;    2228 		ee_program[1]=prog;
00053d   +  	__POINTW2MN _ee_program,1
00053f 2dea      	MOV  R30,R10
000540 940e 06ce 	CALL __EEPROMWRB
         ;    2229 		ee_program[2]=prog;
000542   +  	__POINTW2MN _ee_program,2
000544 2dea      	MOV  R30,R10
000545 940e 06ce 	CALL __EEPROMWRB
         ;    2230 		}
         ;    2231 
         ;    2232 	if(but==butL)
          _0xF6:
000547 efee      	LDI  R30,LOW(254)
000548 15e9      	CP   R30,R9
000549 f489      	BRNE _0xF8
         ;    2233 		{
         ;    2234 		prog--;
00054a 94aa      	DEC  R10
         ;    2235 		if(prog>MAXPROG)prog=MINPROG;
00054b e0e3      	LDI  R30,LOW(3)
00054c 15ea      	CP   R30,R10
00054d f414      	BRGE _0xF9
00054e e0e1      	LDI  R30,LOW(1)
00054f 2eae      	MOV  R10,R30
         ;    2236 		ee_program[0]=prog;
          _0xF9:
000550 d13d      	RCALL SUBOPT_0x10
         ;    2237 		ee_program[1]=prog;
000551   +  	__POINTW2MN _ee_program,1
000553 2dea      	MOV  R30,R10
000554 940e 06ce 	CALL __EEPROMWRB
         ;    2238 		ee_program[2]=prog;
000556   +  	__POINTW2MN _ee_program,2
000558 2dea      	MOV  R30,R10
000559 940e 06ce 	CALL __EEPROMWRB
         ;    2239 		}	
         ;    2240 	} 
          _0xF8:
         ;    2241 
         ;    2242 else if(ind==iVr)
00055b c013      	RJMP _0xFA
          _0xF2:
00055c e0e2      	LDI  R30,LOW(2)
00055d 15ec      	CP   R30,R12
00055e f481      	BRNE _0xFB
         ;    2243 	{
         ;    2244 	if(but==butP_)
00055f efe9      	LDI  R30,LOW(249)
000560 15e9      	CP   R30,R9
000561 f469      	BRNE _0xFC
         ;    2245 		{
         ;    2246 		if(ee_vr_log)ee_vr_log=0;
000562 e1a3      	LDI  R26,LOW(_ee_vr_log)
000563 e0b0      	LDI  R27,HIGH(_ee_vr_log)
000564 940e 06ba 	CALL __EEPROMRDB
000566 30e0      	CPI  R30,0
000567 f011      	BREQ _0xFD
000568 e0e0      	LDI  R30,LOW(0)
000569 c001      	RJMP _0x113
         ;    2247 		else ee_vr_log=1;
          _0xFD:
00056a e0e1      	LDI  R30,LOW(1)
          _0x113:
00056b e1a3      	LDI  R26,LOW(_ee_vr_log)
00056c e0b0      	LDI  R27,HIGH(_ee_vr_log)
00056d 940e 06ce 	CALL __EEPROMWRB
         ;    2248 		}	
         ;    2249 	} 	
          _0xFC:
         ;    2250 
         ;    2251 but_an_end:
          _0xFB:
          _0xFA:
          _0xF1:
          _0xDA:
         ;    2252 n_but=0;
00056f 94e8      	CLT
000570 f825      	BLD  R2,5
         ;    2253 }
000571 9508      	RET
         ;    2254 
         ;    2255 //-----------------------------------------------
         ;    2256 void ind_drv(void)
         ;    2257 {
          _ind_drv:
         ;    2258 if(++ind_cnt>=6)ind_cnt=0;
000572 9483      	INC  R8
000573 e0e6      	LDI  R30,LOW(6)
000574 168e      	CP   R8,R30
000575 f008      	BRLO _0xFF
000576 2488      	CLR  R8
         ;    2259 
         ;    2260 if(ind_cnt<5)
          _0xFF:
000577 e0e5      	LDI  R30,LOW(5)
000578 168e      	CP   R8,R30
000579 f4c8      	BRSH _0x100
         ;    2261 	{
         ;    2262 	DDRC=0xFF;
00057a efef      	LDI  R30,LOW(255)
00057b bbe4      	OUT  0x14,R30
         ;    2263 	PORTC=0xFF;
00057c bbe5      	OUT  0x15,R30
         ;    2264 	DDRD|=0b11111000;
00057d b3e1      	IN   R30,0x11
00057e 6fe8      	ORI  R30,LOW(0xF8)
00057f d0ed      	RCALL SUBOPT_0xA
         ;    2265 	PORTD|=0b11111000;
         ;    2266 	PORTD&=IND_STROB[ind_cnt];
000580 b3e2      	IN   R30,0x12
000581 93ef      	PUSH R30
000582 e5a4      	LDI  R26,LOW(_IND_STROB*2)
000583 e0b0      	LDI  R27,HIGH(_IND_STROB*2)
000584 2de8      	MOV  R30,R8
000585 e0f0      	LDI  R31,0
000586 0fea      	ADD  R30,R26
000587 1ffb      	ADC  R31,R27
000588 91e4      	LPM  R30,Z
000589 91af      	POP  R26
00058a 23ea      	AND  R30,R26
00058b bbe2      	OUT  0x12,R30
         ;    2267 	PORTC=ind_out[ind_cnt];
00058c 2de8      	MOV  R30,R8
00058d e0f0      	LDI  R31,0
00058e 5ae0      	SUBI R30,LOW(-_ind_out)
00058f 4ffd      	SBCI R31,HIGH(-_ind_out)
000590 81e0      	LD   R30,Z
000591 bbe5      	OUT  0x15,R30
         ;    2268 	}
         ;    2269 else but_drv();
000592 c002      	RJMP _0x101
          _0x100:
000593 940e 043e 	CALL _but_drv
          _0x101:
         ;    2270 }
000595 9508      	RET
         ;    2271 
         ;    2272 //***********************************************
         ;    2273 //***********************************************
         ;    2274 //***********************************************
         ;    2275 //***********************************************
         ;    2276 interrupt [TIM0_OVF] void timer0_ovf_isr(void)
         ;    2277 {
          _timer0_ovf_isr:
000596 920a      	ST   -Y,R0
000597 921a      	ST   -Y,R1
000598 92fa      	ST   -Y,R15
000599 936a      	ST   -Y,R22
00059a 937a      	ST   -Y,R23
00059b 938a      	ST   -Y,R24
00059c 939a      	ST   -Y,R25
00059d 93aa      	ST   -Y,R26
00059e 93ba      	ST   -Y,R27
00059f 93ea      	ST   -Y,R30
0005a0 93fa      	ST   -Y,R31
0005a1 b7ef      	IN   R30,SREG
0005a2 93ea      	ST   -Y,R30
         ;    2278 TCCR0=0x02;
0005a3 d0f0      	RCALL SUBOPT_0x11
         ;    2279 TCNT0=-208;
         ;    2280 OCR0=0x00; 
         ;    2281 
         ;    2282 
         ;    2283 b600Hz=1;
0005a4 9468      	SET
0005a5 f820      	BLD  R2,0
         ;    2284 ind_drv();
0005a6 dfcb      	RCALL _ind_drv
         ;    2285 if(++t0_cnt0>=6)
0005a7 9443      	INC  R4
0005a8 e0e6      	LDI  R30,LOW(6)
0005a9 164e      	CP   R4,R30
0005aa f018      	BRLO _0x102
         ;    2286 	{
         ;    2287 	t0_cnt0=0;
0005ab 2444      	CLR  R4
         ;    2288 	b100Hz=1;
0005ac 9468      	SET
0005ad f821      	BLD  R2,1
         ;    2289 	}
         ;    2290 
         ;    2291 if(++t0_cnt1>=60)
          _0x102:
0005ae 9453      	INC  R5
0005af e3ec      	LDI  R30,LOW(60)
0005b0 165e      	CP   R5,R30
0005b1 f088      	BRLO _0x103
         ;    2292 	{
         ;    2293 	t0_cnt1=0;
0005b2 2455      	CLR  R5
         ;    2294 	b10Hz=1;
0005b3 9468      	SET
0005b4 f822      	BLD  R2,2
         ;    2295 	
         ;    2296 	if(++t0_cnt2>=2)
0005b5 9463      	INC  R6
0005b6 e0e2      	LDI  R30,LOW(2)
0005b7 166e      	CP   R6,R30
0005b8 f018      	BRLO _0x104
         ;    2297 		{
         ;    2298 		t0_cnt2=0;
0005b9 2466      	CLR  R6
         ;    2299 		bFL5=!bFL5;
0005ba e0e1      	LDI  R30,LOW(1)
0005bb 263e      	EOR  R3,R30
         ;    2300 		}
         ;    2301 		
         ;    2302 	if(++t0_cnt3>=5)
          _0x104:
0005bc 9473      	INC  R7
0005bd e0e5      	LDI  R30,LOW(5)
0005be 167e      	CP   R7,R30
0005bf f018      	BRLO _0x105
         ;    2303 		{
         ;    2304 		t0_cnt3=0;
0005c0 2477      	CLR  R7
         ;    2305 		bFL2=!bFL2;
0005c1 e8e0      	LDI  R30,LOW(128)
0005c2 262e      	EOR  R2,R30
         ;    2306 		}		
         ;    2307 	}
          _0x105:
         ;    2308 }
          _0x103:
0005c3 91e9      	LD   R30,Y+
0005c4 bfef      	OUT  SREG,R30
0005c5 91f9      	LD   R31,Y+
0005c6 91e9      	LD   R30,Y+
0005c7 91b9      	LD   R27,Y+
0005c8 91a9      	LD   R26,Y+
0005c9 9199      	LD   R25,Y+
0005ca 9189      	LD   R24,Y+
0005cb 9179      	LD   R23,Y+
0005cc 9169      	LD   R22,Y+
0005cd 90f9      	LD   R15,Y+
0005ce 9019      	LD   R1,Y+
0005cf 9009      	LD   R0,Y+
0005d0 9518      	RETI
         ;    2309 
         ;    2310 //===============================================
         ;    2311 //===============================================
         ;    2312 //===============================================
         ;    2313 //===============================================
         ;    2314 
         ;    2315 void main(void)
         ;    2316 {
          _main:
         ;    2317 
         ;    2318 PORTA=0xff;
0005d1 efef      	LDI  R30,LOW(255)
0005d2 bbeb      	OUT  0x1B,R30
         ;    2319 DDRA=0x00;
0005d3 d045      	RCALL SUBOPT_0x0
         ;    2320 
         ;    2321 PORTB=0xff;
0005d4 d0c7      	RCALL SUBOPT_0x12
         ;    2322 DDRB=0xFF;
         ;    2323 
         ;    2324 PORTC=0x00;
0005d5 e0e0      	LDI  R30,LOW(0)
0005d6 bbe5      	OUT  0x15,R30
         ;    2325 DDRC=0x00;
0005d7 bbe4      	OUT  0x14,R30
         ;    2326 
         ;    2327 
         ;    2328 PORTD=0x00;
0005d8 bbe2      	OUT  0x12,R30
         ;    2329 DDRD=0x00;
0005d9 bbe1      	OUT  0x11,R30
         ;    2330 
         ;    2331 
         ;    2332 TCCR0=0x02;
0005da d0b9      	RCALL SUBOPT_0x11
         ;    2333 TCNT0=-208;
         ;    2334 OCR0=0x00;
         ;    2335 
         ;    2336 TCCR1A=0x00;
0005db e0e0      	LDI  R30,LOW(0)
0005dc bdef      	OUT  0x2F,R30
         ;    2337 TCCR1B=0x00;
0005dd bdee      	OUT  0x2E,R30
         ;    2338 TCNT1H=0x00;
0005de bded      	OUT  0x2D,R30
         ;    2339 TCNT1L=0x00;
0005df bdec      	OUT  0x2C,R30
         ;    2340 ICR1H=0x00;
0005e0 bde7      	OUT  0x27,R30
         ;    2341 ICR1L=0x00;
0005e1 bde6      	OUT  0x26,R30
         ;    2342 OCR1AH=0x00;
0005e2 bdeb      	OUT  0x2B,R30
         ;    2343 OCR1AL=0x00;
0005e3 bdea      	OUT  0x2A,R30
         ;    2344 OCR1BH=0x00;
0005e4 bde9      	OUT  0x29,R30
         ;    2345 OCR1BL=0x00;
0005e5 bde8      	OUT  0x28,R30
         ;    2346 
         ;    2347 
         ;    2348 ASSR=0x00;
0005e6 bde2      	OUT  0x22,R30
         ;    2349 TCCR2=0x00;
0005e7 bde5      	OUT  0x25,R30
         ;    2350 TCNT2=0x00;
0005e8 bde4      	OUT  0x24,R30
         ;    2351 OCR2=0x00;
0005e9 bde3      	OUT  0x23,R30
         ;    2352 
         ;    2353 MCUCR=0x00;
0005ea bfe5      	OUT  0x35,R30
         ;    2354 MCUCSR=0x00;
0005eb bfe4      	OUT  0x34,R30
         ;    2355 
         ;    2356 TIMSK=0x01;
0005ec e0e1      	LDI  R30,LOW(1)
0005ed bfe9      	OUT  0x39,R30
         ;    2357 
         ;    2358 ACSR=0x80;
0005ee e8e0      	LDI  R30,LOW(128)
0005ef b9e8      	OUT  0x8,R30
         ;    2359 SFIOR=0x00;
0005f0 e0e0      	LDI  R30,LOW(0)
0005f1 bfe0      	OUT  0x30,R30
         ;    2360 
         ;    2361 #asm("sei") 
0005f2 9478      	sei
         ;    2362 PORTB=0xFF;
0005f3 efef      	LDI  R30,LOW(255)
0005f4 d0a7      	RCALL SUBOPT_0x12
         ;    2363 DDRB=0xFF;
         ;    2364 ind=iMn;
0005f5 24cc      	CLR  R12
         ;    2365 prog_drv();
0005f6 940e 006a 	CALL _prog_drv
         ;    2366 ind_hndl();
0005f8 940e 037f 	CALL _ind_hndl
         ;    2367 led_hndl();
0005fa 940e 0394 	CALL _led_hndl
         ;    2368 while (1)
          _0x106:
         ;    2369       {
         ;    2370       if(b600Hz)
0005fc fe20      	SBRS R2,0
0005fd c002      	RJMP _0x109
         ;    2371 		{
         ;    2372 		b600Hz=0; 
0005fe 94e8      	CLT
0005ff f820      	BLD  R2,0
         ;    2373           
         ;    2374 		}         
         ;    2375       if(b100Hz)
          _0x109:
000600 fe21      	SBRS R2,1
000601 c009      	RJMP _0x10A
         ;    2376 		{        
         ;    2377 		b100Hz=0; 
000602 94e8      	CLT
000603 f821      	BLD  R2,1
         ;    2378 		but_an();
000604 de9f      	RCALL _but_an
         ;    2379 	    	in_drv();
000605 940e 00c9 	CALL _in_drv
         ;    2380           mdvr_drv();
000607 940e 0107 	CALL _mdvr_drv
         ;    2381           step_contr();
000609 940e 018f 	CALL _step_contr
         ;    2382 		}   
         ;    2383 	if(b10Hz)
          _0x10A:
00060b fe22      	SBRS R2,2
00060c c00a      	RJMP _0x10B
         ;    2384 		{
         ;    2385 		b10Hz=0;
00060d 94e8      	CLT
00060e f822      	BLD  R2,2
         ;    2386 		prog_drv();
00060f 940e 006a 	CALL _prog_drv
         ;    2387 		err_drv();
000611 940e 00f0 	CALL _err_drv
         ;    2388 		
         ;    2389     	     ind_hndl();
000613 940e 037f 	CALL _ind_hndl
         ;    2390           led_hndl();
000615 940e 0394 	CALL _led_hndl
         ;    2391           
         ;    2392           }
         ;    2393 
         ;    2394       };
          _0x10B:
000617 cfe4      	RJMP _0x106
         ;    2395 }
          _0x10C:
000618 cfff      	RJMP _0x10C
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x0:
000619 e0e0      	LDI  R30,LOW(0)
00061a bbea      	OUT  0x1A,R30
00061b efef      	LDI  R30,LOW(255)
00061c 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 20 TIMES
          SUBOPT_0x1:
00061d 91e0 0271 	LDS  R30,_cnt_del
00061f 91f0 0272 	LDS  R31,_cnt_del+1
000621 9731      	SBIW R30,1
000622 93e0 0271 	STS  _cnt_del,R30
000624 93f0 0272 	STS  _cnt_del+1,R31
000626 9730      	SBIW R30,0
000627 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x2:
000628 e1ee      	LDI  R30,LOW(30)
000629 e0f0      	LDI  R31,HIGH(30)
00062a 93e0 0271 	STS  _cnt_del,R30
00062c 93f0 0272 	STS  _cnt_del+1,R31
00062e e0e3      	LDI  R30,LOW(3)
00062f 2ebe      	MOV  R11,R30
000630 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x3:
000631 93e0 0271 	STS  _cnt_del,R30
000633 93f0 0272 	STS  _cnt_del+1,R31
000635 e0e5      	LDI  R30,LOW(5)
000636 2ebe      	MOV  R11,R30
000637 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x4:
000638 e0e8      	LDI  R30,LOW(8)
000639 2ebe      	MOV  R11,R30
00063a e1ee      	LDI  R30,LOW(30)
00063b e0f0      	LDI  R31,HIGH(30)
00063c 93e0 0271 	STS  _cnt_del,R30
00063e 93f0 0272 	STS  _cnt_del+1,R31
000640 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x5:
000641 2ebe      	MOV  R11,R30
000642 e9e6      	LDI  R30,LOW(150)
000643 e0f0      	LDI  R31,HIGH(150)
000644 93e0 0271 	STS  _cnt_del,R30
000646 93f0 0272 	STS  _cnt_del+1,R31
000648 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES
          SUBOPT_0x6:
000649 2ebe      	MOV  R11,R30
00064a e1ee      	LDI  R30,LOW(30)
00064b e0f0      	LDI  R31,HIGH(30)
00064c 93e0 0271 	STS  _cnt_del,R30
00064e 93f0 0272 	STS  _cnt_del+1,R31
000650 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES
          SUBOPT_0x7:
000651 2fe0      	MOV  R30,R16
000652 50e1      	SUBI R30,LOW(1)
000653 e0f0      	LDI  R31,0
000654 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x8:
000655 e0f0      	LDI  R31,0
000656 0fea      	ADD  R30,R26
000657 1ffb      	ADC  R31,R27
000658 91e4      	LPM  R30,Z
000659 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x9:
00065a 2dea      	MOV  R30,R10
00065b e0a3      	LDI  R26,LOW(_ee_delay)
00065c e0b0      	LDI  R27,HIGH(_ee_delay)
00065d e0f0      	LDI  R31,0
00065e 0fee      	LSL  R30
00065f 1fff      	ROL  R31
000660 0fee      	LSL  R30
000661 1fff      	ROL  R31
000662 0fae      	ADD  R26,R30
000663 1fbf      	ADC  R27,R31
000664 2ded      	MOV  R30,R13
000665 e0f0      	LDI  R31,0
000666 0fee      	LSL  R30
000667 1fff      	ROL  R31
000668 0fae      	ADD  R26,R30
000669 1fbf      	ADC  R27,R31
00066a 940e 06b6 	CALL __EEPROMRDW
00066c 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xA:
00066d bbe1      	OUT  0x11,R30
00066e b3e2      	IN   R30,0x12
00066f 6fe8      	ORI  R30,LOW(0xF8)
000670 bbe2      	OUT  0x12,R30
000671 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xB:
000672 b3e5      	IN   R30,0x15
000673 69e5      	ORI  R30,LOW(0x95)
000674 bbe5      	OUT  0x15,R30
000675 b3e4      	IN   R30,0x14
000676 76ea      	ANDI R30,LOW(0x6A)
000677 bbe4      	OUT  0x14,R30
000678 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xC:
000679 91e0 026a 	LDS  R30,_but_s_G1
00067b 91a0 0269 	LDS  R26,_but_n_G1
00067d 17ea      	CP   R30,R26
00067e 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xD:
00067f 91e0 026d 	LDS  R30,_but_onL_temp_G1
000681 91a0 026c 	LDS  R26,_but1_cnt_G1
000683 17ae      	CP   R26,R30
000684 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xE:
000685 91e0 026a 	LDS  R30,_but_s_G1
000687 7fed      	ANDI R30,0xFD
000688 2e9e      	MOV  R9,R30
000689 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xF:
00068a 94a3      	INC  R10
00068b e0e3      	LDI  R30,LOW(3)
00068c 15ea      	CP   R30,R10
00068d 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x10:
00068e 2dea      	MOV  R30,R10
00068f e0a1      	LDI  R26,LOW(_ee_program)
000690 e0b0      	LDI  R27,HIGH(_ee_program)
000691 940e 06ce 	CALL __EEPROMWRB
000693 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x11:
000694 e0e2      	LDI  R30,LOW(2)
000695 bfe3      	OUT  0x33,R30
000696 e3e0      	LDI  R30,LOW(65328)
000697 efff      	LDI  R31,HIGH(65328)
000698 bfe2      	OUT  0x32,R30
000699 e0e0      	LDI  R30,LOW(0)
00069a bfec      	OUT  0x3C,R30
00069b 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x12:
00069c bbe8      	OUT  0x18,R30
00069d efef      	LDI  R30,LOW(255)
00069e bbe7      	OUT  0x17,R30
00069f 9508      	RET
         
          __DIVW21U:
0006a0 2400      	CLR  R0
0006a1 2411      	CLR  R1
0006a2 e190      	LDI  R25,16
          __DIVW21U1:
0006a3 0faa      	LSL  R26
0006a4 1fbb      	ROL  R27
0006a5 1c00      	ROL  R0
0006a6 1c11      	ROL  R1
0006a7 1a0e      	SUB  R0,R30
0006a8 0a1f      	SBC  R1,R31
0006a9 f418      	BRCC __DIVW21U2
0006aa 0e0e      	ADD  R0,R30
0006ab 1e1f      	ADC  R1,R31
0006ac c001      	RJMP __DIVW21U3
          __DIVW21U2:
0006ad 60a1      	SBR  R26,1
          __DIVW21U3:
0006ae 959a      	DEC  R25
0006af f799      	BRNE __DIVW21U1
0006b0 01fd      	MOVW R30,R26
0006b1 01d0      	MOVW R26,R0
0006b2 9508      	RET
         
          __MODW21U:
0006b3 dfec      	RCALL __DIVW21U
0006b4 01fd      	MOVW R30,R26
0006b5 9508      	RET
         
          __EEPROMRDW:
0006b6 9611      	ADIW R26,1
0006b7 d002      	RCALL __EEPROMRDB
0006b8 2ffe      	MOV  R31,R30
0006b9 9711      	SBIW R26,1
         
          __EEPROMRDB:
0006ba 99e1      	SBIC EECR,EEWE
0006bb cffe      	RJMP __EEPROMRDB
0006bc 93ff      	PUSH R31
0006bd b7ff      	IN   R31,SREG
0006be 94f8      	CLI
0006bf bbae      	OUT  EEARL,R26
0006c0 bbbf      	OUT  EEARH,R27
0006c1 9ae0      	SBI  EECR,EERE
0006c2 b3ed      	IN   R30,EEDR
0006c3 bfff      	OUT  SREG,R31
0006c4 91ff      	POP  R31
0006c5 9508      	RET
         
          __EEPROMWRW:
0006c6 d007      	RCALL __EEPROMWRB
0006c7 9611      	ADIW R26,1
0006c8 93ef      	PUSH R30
0006c9 2fef      	MOV  R30,R31
0006ca d003      	RCALL __EEPROMWRB
0006cb 91ef      	POP  R30
0006cc 9711      	SBIW R26,1
0006cd 9508      	RET
         
          __EEPROMWRB:
0006ce 99e1      	SBIC EECR,EEWE
0006cf cffe      	RJMP __EEPROMWRB
0006d0 b79f      	IN   R25,SREG
0006d1 94f8      	CLI
0006d2 bbae      	OUT  EEARL,R26
0006d3 bbbf      	OUT  EEARH,R27
0006d4 9ae0      	SBI  EECR,EERE
0006d5 b38d      	IN   R24,EEDR
0006d6 17e8      	CP   R30,R24
0006d7 f019      	BREQ __EEPROMWRB0
0006d8 bbed      	OUT  EEDR,R30
0006d9 9ae2      	SBI  EECR,EEMWE
0006da 9ae1      	SBI  EECR,EEWE
          __EEPROMWRB0:
0006db bf9f      	OUT  SREG,R25
0006dc 9508      	RET
         
          __SAVELOCR4:
0006dd 933a      	ST   -Y,R19
          __SAVELOCR3:
0006de 932a      	ST   -Y,R18
          __SAVELOCR2:
0006df 931a      	ST   -Y,R17
0006e0 930a      	ST   -Y,R16
0006e1 9508      	RET
         
          __LOADLOCR4:
0006e2 813b      	LDD  R19,Y+3
          __LOADLOCR3:
0006e3 812a      	LDD  R18,Y+2
          __LOADLOCR2:
0006e4 8119      	LDD  R17,Y+1
0006e5 8108      	LD   R16,Y
0006e6 9508      	RET
         

Assembly complete with no errors.
