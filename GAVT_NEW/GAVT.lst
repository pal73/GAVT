
AVRASM ver. 1.52  GAVT.asm Fri Apr 15 23:39:13 2016


         ;CodeVisionAVR C Compiler V1.24.1d Standard
         ;(C) Copyright 1998-2004 Pavel Haiduc, HP InfoTech s.r.l.
         ;http://www.hpinfotech.ro
         ;e-mail:office@hpinfotech.ro
         
         ;Chip type           : ATmega32
         ;Program type        : Application
         ;Clock frequency     : 1,000000 MHz
         ;Memory model        : Small
         ;Optimize for        : Size
         ;(s)printf features  : int, width
         ;(s)scanf features   : long, width
         ;External SRAM size  : 0
         ;Data Stack size     : 512 byte(s)
         ;Heap size           : 0 byte(s)
         ;Promote char to int : No
         ;char is unsigned    : Yes
         ;8 bit enums         : Yes
         ;Enhanced core instructions    : On
         ;Automatic register allocation : On
         
          	.EQU UDRE=0x5
          	.EQU RXC=0x7
          	.EQU USR=0xB
          	.EQU UDR=0xC
          	.EQU EERE=0x0
          	.EQU EEWE=0x1
          	.EQU EEMWE=0x2
          	.EQU SPSR=0xE
          	.EQU SPDR=0xF
          	.EQU EECR=0x1C
          	.EQU EEDR=0x1D
          	.EQU EEARL=0x1E
          	.EQU EEARH=0x1F
          	.EQU WDTCR=0x21
          	.EQU MCUCR=0x35
          	.EQU GICR=0x3B
          	.EQU SPL=0x3D
          	.EQU SPH=0x3E
          	.EQU SREG=0x3F
         
          	.DEF R0X0=R0
          	.DEF R0X1=R1
          	.DEF R0X2=R2
          	.DEF R0X3=R3
          	.DEF R0X4=R4
          	.DEF R0X5=R5
          	.DEF R0X6=R6
          	.DEF R0X7=R7
          	.DEF R0X8=R8
          	.DEF R0X9=R9
          	.DEF R0XA=R10
          	.DEF R0XB=R11
          	.DEF R0XC=R12
          	.DEF R0XD=R13
          	.DEF R0XE=R14
          	.DEF R0XF=R15
          	.DEF R0X10=R16
          	.DEF R0X11=R17
          	.DEF R0X12=R18
          	.DEF R0X13=R19
          	.DEF R0X14=R20
          	.DEF R0X15=R21
          	.DEF R0X16=R22
          	.DEF R0X17=R23
          	.DEF R0X18=R24
          	.DEF R0X19=R25
          	.DEF R0X1A=R26
          	.DEF R0X1B=R27
          	.DEF R0X1C=R28
          	.DEF R0X1D=R29
          	.DEF R0X1E=R30
          	.DEF R0X1F=R31
         
          	.EQU __se_bit=0x80
          	.EQU __sm_mask=0x70
          	.EQU __sm_adc_noise_red=0x10
          	.EQU __sm_powerdown=0x20
          	.EQU __sm_powersave=0x30
          	.EQU __sm_standby=0x60
          	.EQU __sm_ext_standby=0x70
         
          	.MACRO __CPD1N
          	CPI  R30,LOW(@0)
          	LDI  R26,HIGH(@0)
          	CPC  R31,R26
          	LDI  R26,BYTE3(@0)
          	CPC  R22,R26
          	LDI  R26,BYTE4(@0)
          	CPC  R23,R26
          	.ENDM
         
          	.MACRO __CPD2N
          	CPI  R26,LOW(@0)
          	LDI  R30,HIGH(@0)
          	CPC  R27,R30
          	LDI  R30,BYTE3(@0)
          	CPC  R24,R30
          	LDI  R30,BYTE4(@0)
          	CPC  R25,R30
          	.ENDM
         
          	.MACRO __CPWRR
          	CP   R@0,R@2
          	CPC  R@1,R@3
          	.ENDM
         
          	.MACRO __CPWRN
          	CPI  R@0,LOW(@2)
          	LDI  R30,HIGH(@2)
          	CPC  R@1,R30
          	.ENDM
         
          	.MACRO __ADDD1N
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	SBCI R22,BYTE3(-@0)
          	SBCI R23,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __ADDD2N
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	SBCI R24,BYTE3(-@0)
          	SBCI R25,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __SUBD1N
          	SUBI R30,LOW(@0)
          	SBCI R31,HIGH(@0)
          	SBCI R22,BYTE3(@0)
          	SBCI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __SUBD2N
          	SUBI R26,LOW(@0)
          	SBCI R27,HIGH(@0)
          	SBCI R24,BYTE3(@0)
          	SBCI R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ANDD1N
          	ANDI R30,LOW(@0)
          	ANDI R31,HIGH(@0)
          	ANDI R22,BYTE3(@0)
          	ANDI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ORD1N
          	ORI  R30,LOW(@0)
          	ORI  R31,HIGH(@0)
          	ORI  R22,BYTE3(@0)
          	ORI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __DELAY_USB
          	LDI  R24,LOW(@0)
          __DELAY_USB_LOOP:
          	DEC  R24
          	BRNE __DELAY_USB_LOOP
          	.ENDM
         
          	.MACRO __DELAY_USW
          	LDI  R24,LOW(@0)
          	LDI  R25,HIGH(@0)
          __DELAY_USW_LOOP:
          	SBIW R24,1
          	BRNE __DELAY_USW_LOOP
          	.ENDM
         
          	.MACRO __CLRD1S
          	LDI  R30,0
          	STD  Y+@0,R30
          	STD  Y+@0+1,R30
          	STD  Y+@0+2,R30
          	STD  Y+@0+3,R30
          	.ENDM
         
          	.MACRO __GETD1S
          	LDD  R30,Y+@0
          	LDD  R31,Y+@0+1
          	LDD  R22,Y+@0+2
          	LDD  R23,Y+@0+3
          	.ENDM
         
          	.MACRO __PUTD1S
          	STD  Y+@0,R30
          	STD  Y+@0+1,R31
          	STD  Y+@0+2,R22
          	STD  Y+@0+3,R23
          	.ENDM
         
          	.MACRO __POINTB1MN
          	LDI  R30,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1MN
          	LDI  R30,LOW(@0+@1)
          	LDI  R31,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1FN
          	LDI  R30,LOW(2*@0+@1)
          	LDI  R31,HIGH(2*@0+@1)
          	.ENDM
         
          	.MACRO __POINTB2MN
          	LDI  R26,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW2MN
          	LDI  R26,LOW(@0+@1)
          	LDI  R27,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTBRM
          	LDI  R@0,LOW(@1)
          	.ENDM
         
          	.MACRO __POINTWRM
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __POINTBRMN
          	LDI  R@0,LOW(@1+@2)
          	.ENDM
         
          	.MACRO __POINTWRMN
          	LDI  R@0,LOW(@2+@3)
          	LDI  R@1,HIGH(@2+@3)
          	.ENDM
         
          	.MACRO __GETD1N
          	LDI  R30,LOW(@0)
          	LDI  R31,HIGH(@0)
          	LDI  R22,BYTE3(@0)
          	LDI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2N
          	LDI  R26,LOW(@0)
          	LDI  R27,HIGH(@0)
          	LDI  R24,BYTE3(@0)
          	LDI  R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2S
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	LDD  R24,Y+@0+2
          	LDD  R25,Y+@0+3
          	.ENDM
         
          	.MACRO __GETB1MN
          	LDS  R30,@0+@1
          	.ENDM
         
          	.MACRO __GETW1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	LDS  R22,@0+@1+2
          	LDS  R23,@0+@1+3
          	.ENDM
         
          	.MACRO __GETBRMN
          	LDS  R@2,@0+@1
          	.ENDM
         
          	.MACRO __GETWRMN
          	LDS  R@2,@0+@1
          	LDS  R@3,@0+@1+1
          	.ENDM
         
          	.MACRO __GETB2MN
          	LDS  R26,@0+@1
          	.ENDM
         
          	.MACRO __GETW2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	LDS  R24,@0+@1+2
          	LDS  R25,@0+@1+3
          	.ENDM
         
          	.MACRO __PUTB1MN
          	STS  @0+@1,R30
          	.ENDM
         
          	.MACRO __PUTW1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	.ENDM
         
          	.MACRO __PUTD1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	STS  @0+@1+2,R22
          	STS  @0+@1+3,R23
          	.ENDM
         
          	.MACRO __PUTBMRN
          	STS  @0+@1,R@2
          	.ENDM
         
          	.MACRO __PUTWMRN
          	STS  @0+@1,R@2
          	STS  @0+@1+1,R@3
          	.ENDM
         
          	.MACRO __GETW1R
          	MOV  R30,R@0
          	MOV  R31,R@1
          	.ENDM
         
          	.MACRO __GETW2R
          	MOV  R26,R@0
          	MOV  R27,R@1
          	.ENDM
         
          	.MACRO __GETWRN
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __PUTW1R
          	MOV  R@0,R30
          	MOV  R@1,R31
          	.ENDM
         
          	.MACRO __PUTW2R
          	MOV  R@0,R26
          	MOV  R@1,R27
          	.ENDM
         
          	.MACRO __ADDWRN
          	SUBI R@0,LOW(-@2)
          	SBCI R@1,HIGH(-@2)
          	.ENDM
         
          	.MACRO __ADDWRR
          	ADD  R@0,R@2
          	ADC  R@1,R@3
          	.ENDM
         
          	.MACRO __SUBWRN
          	SUBI R@0,LOW(@2)
          	SBCI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __SUBWRR
          	SUB  R@0,R@2
          	SBC  R@1,R@3
          	.ENDM
         
          	.MACRO __ANDWRN
          	ANDI R@0,LOW(@2)
          	ANDI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ANDWRR
          	AND  R@0,R@2
          	AND  R@1,R@3
          	.ENDM
         
          	.MACRO __ORWRN
          	ORI  R@0,LOW(@2)
          	ORI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ORWRR
          	OR   R@0,R@2
          	OR   R@1,R@3
          	.ENDM
         
          	.MACRO __EORWRR
          	EOR  R@0,R@2
          	EOR  R@1,R@3
          	.ENDM
         
          	.MACRO __GETWRS
          	LDD  R@0,Y+@2
          	LDD  R@1,Y+@2+1
          	.ENDM
         
          	.MACRO __PUTWSR
          	STD  Y+@2,R@0
          	STD  Y+@2+1,R@1
          	.ENDM
         
          	.MACRO __MOVEWRR
          	MOV  R@0,R@2
          	MOV  R@1,R@3
          	.ENDM
         
          	.MACRO __INWR
          	IN   R@0,@2
          	IN   R@1,@2+1
          	.ENDM
         
          	.MACRO __OUTWR
          	OUT  @2+1,R@1
          	OUT  @2,R@0
          	.ENDM
         
          	.MACRO __CALL1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	ICALL
          	.ENDM
         
          	.MACRO __NBST
          	BST  R@0,@1
          	IN   R30,SREG
          	LDI  R31,0x40
          	EOR  R30,R31
          	OUT  SREG,R30
          	.ENDM
         
         
          	.MACRO __PUTB1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	CALL __PUTDP1
          	.ENDM
         
         
          	.MACRO __GETB1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R30,Z
          	.ENDM
         
          	.MACRO __GETW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R31,Z
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __GETD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R1,Z+
          	LD   R22,Z+
          	LD   R23,Z
          	MOVW R30,R0
          	.ENDM
         
          	.MACRO __GETB2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R26,X
          	.ENDM
         
          	.MACRO __GETW2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	.ENDM
         
          	.MACRO __GETD2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R1,X+
          	LD   R24,X+
          	LD   R25,X
          	MOVW R26,R0
          	.ENDM
         
          	.MACRO __GETBRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@1)
          	SBCI R31,HIGH(-@1)
          	LD   R@0,Z
          	.ENDM
         
          	.MACRO __GETWRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	LD   R@0,Z+
          	LD   R@1,Z
          	.ENDM
         
          	.MACRO __LSLW8SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R31,Z
          	CLR  R30
          	.ENDM
         
          	.MACRO __PUTB1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __CLRW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __CLRD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __PUTB2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R26
          	.ENDM
         
          	.MACRO __PUTW2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z+,R26
          	ST   Z,R27
          	.ENDM
         
          	.MACRO __PUTBSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTWSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	ST   Z+,R@0
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTB1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __MULBRR
          	MULS R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __MULBRRU
          	MUL  R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.CSEG
          	.ORG 0
         
          	.INCLUDE "GAVT.vec"
         
         ;INTERRUPT VECTORS
000000 940c 003a 	JMP  __RESET
000002 940c 0000 	JMP  0
000004 940c 0000 	JMP  0
000006 940c 0000 	JMP  0
000008 940c 0000 	JMP  0
00000a 940c 0000 	JMP  0
00000c 940c 0000 	JMP  0
00000e 940c 0000 	JMP  0
000010 940c 0000 	JMP  0
000012 940c 0000 	JMP  0
000014 940c 0000 	JMP  0
000016 940c 0615 	JMP  _timer0_ovf_isr
000018 940c 0000 	JMP  0
00001a 940c 0000 	JMP  0
00001c 940c 0000 	JMP  0
00001e 940c 0000 	JMP  0
000020 940c 0000 	JMP  0
000022 940c 0000 	JMP  0
000024 940c 0000 	JMP  0
000026 940c 0000 	JMP  0
000028 940c 0000 	JMP  0
         
          	.INCLUDE "GAVT.inc"
          	.DEF _t0_cnt0=R4
          	.DEF _t0_cnt1=R5
          	.DEF _t0_cnt2=R6
          	.DEF _t0_cnt3=R7
          	.DEF _ind_cnt=R8
          _IND_STROB:
          	.DB  0xBF,0xDF,0xEF,0xF7,0x7F
00002a dfbf
00002b f7ef
00002c 007f
          _DIGISYM:
          	.DB  0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8
00002d f9c0
00002e b0a4
00002f 9299
000030 f882
          	.DB  0x80,0x90,0xFF
000031 9080
000032 00ff
          _3:
          	.DB  0x55,0x55,0x55,0x55,0x55
000033 5555
000034 5555
000035 0055
          	.DEF _but=R9
          	.DEF _prog=R10
          	.DEF _step=R11
          	.DEF _ind=R12
          	.DEF _sub_ind=R13
          	.DEF _in_word=R14
         
          __GLOBAL_INI_TBL:
          	.DW  0x05
000036 0005
          	.DW  _ind_out
000037 0260
          	.DW  _3*2
000038 0066
         
          	.DW  0
000039 0000
         
          __RESET:
00003a 94f8      	CLI
00003b 27ee      	CLR  R30
00003c bbec      	OUT  EECR,R30
         
         ;INTERRUPT VECTORS ARE PLACED
         ;AT THE START OF FLASH
00003d e0f1      	LDI  R31,1
00003e bffb      	OUT  GICR,R31
00003f bfeb      	OUT  GICR,R30
000040 bfe5      	OUT  MCUCR,R30
         
         ;DISABLE WATCHDOG
000041 e1f8      	LDI  R31,0x18
000042 bdf1      	OUT  WDTCR,R31
000043 bde1      	OUT  WDTCR,R30
         
         ;CLEAR R2-R14
000044 e08d      	LDI  R24,13
000045 e0a2      	LDI  R26,2
000046 27bb      	CLR  R27
          __CLEAR_REG:
000047 93ed      	ST   X+,R30
000048 958a      	DEC  R24
000049 f7e9      	BRNE __CLEAR_REG
         
         ;CLEAR SRAM
00004a e080      	LDI  R24,LOW(0x800)
00004b e098      	LDI  R25,HIGH(0x800)
00004c e6a0      	LDI  R26,0x60
          __CLEAR_SRAM:
00004d 93ed      	ST   X+,R30
00004e 9701      	SBIW R24,1
00004f f7e9      	BRNE __CLEAR_SRAM
         
         ;GLOBAL VARIABLES INITIALIZATION
000050 e6ec      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
000051 e0f0      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
          __GLOBAL_INI_NEXT:
000052 9185      	LPM  R24,Z+
000053 9195      	LPM  R25,Z+
000054 9700      	SBIW R24,0
000055 f061      	BREQ __GLOBAL_INI_END
000056 91a5      	LPM  R26,Z+
000057 91b5      	LPM  R27,Z+
000058 9005      	LPM  R0,Z+
000059 9015      	LPM  R1,Z+
00005a 01bf      	MOVW R22,R30
00005b 01f0      	MOVW R30,R0
          __GLOBAL_INI_LOOP:
00005c 9005      	LPM  R0,Z+
00005d 920d      	ST   X+,R0
00005e 9701      	SBIW R24,1
00005f f7e1      	BRNE __GLOBAL_INI_LOOP
000060 01fb      	MOVW R30,R22
000061 cff0      	RJMP __GLOBAL_INI_NEXT
          __GLOBAL_INI_END:
         
         ;STACK POINTER INITIALIZATION
000062 e5ef      	LDI  R30,LOW(0x85F)
000063 bfed      	OUT  SPL,R30
000064 e0e8      	LDI  R30,HIGH(0x85F)
000065 bfee      	OUT  SPH,R30
         
         ;DATA STACK POINTER INITIALIZATION
000066 e6c0      	LDI  R28,LOW(0x260)
000067 e0d2      	LDI  R29,HIGH(0x260)
         
000068 940c 0650 	JMP  _main
         
          	.ESEG
          	.ORG 0
         
          	.DSEG
          	.ORG 0x260
         ;       1 #define LED_POW_ON	5
         ;       2 #define LED_PROG4	1
         ;       3 #define LED_PROG2	2
         ;       4 #define LED_PROG3	3
         ;       5 #define LED_PROG1	4 
         ;       6 #define LED_ERROR	0 
         ;       7 #define LED_WRK	6
         ;       8 #define LED_VACUUM	7
         ;       9 
         ;      10 #define GAVT3
         ;      11 
         ;      12 //#define P380
         ;      13 //#define I380
         ;      14 //#define I220
         ;      15 //#define P380_MINI
         ;      16 //#define TVIST_SKO
         ;      17 //#define I380_WI
         ;      18 //#define I220_WI
         ;      19 //#define DV3KL2MD 
         ;      20 #define  I380_WI_GAZ
         ;      21 
         ;      22 #define MD1	2
         ;      23 #define MD2	3
         ;      24 #define VR	4
         ;      25 #define MD3	5
         ;      26 #define VR2	7
         ;      27 
         ;      28 #define PP1	6
         ;      29 #define PP2	7
         ;      30 #define PP3	5
         ;      31 #define PP4	4
         ;      32 #define PP5	3
         ;      33 #define DV	0 
         ;      34 
         ;      35 #define PP7	2
         ;      36 
         ;      37 #ifdef P380_MINI
         ;      38 #define MINPROG 1
         ;      39 #define MAXPROG 1 
         ;      40 #ifdef GAVT3
         ;      41 #define DV	2
         ;      42 #endif
         ;      43 #define PP3	3
         ;      44 #endif 
         ;      45 
         ;      46 #ifdef P380
         ;      47 #define MINPROG 1
         ;      48 #define MAXPROG 3 
         ;      49 #ifdef GAVT3
         ;      50 #define DV	2
         ;      51 #endif
         ;      52 #endif 
         ;      53 
         ;      54 #ifdef I380
         ;      55 #define MINPROG 1
         ;      56 #define MAXPROG 4
         ;      57 #endif
         ;      58 
         ;      59 #ifdef I380_WI
         ;      60 #define MINPROG 1
         ;      61 #define MAXPROG 4
         ;      62 #endif
         ;      63 
         ;      64 #ifdef I220
         ;      65 #define MINPROG 3
         ;      66 #define MAXPROG 4
         ;      67 #endif
         ;      68 
         ;      69 
         ;      70 #ifdef I220_WI
         ;      71 #define MINPROG 3
         ;      72 #define MAXPROG 4
         ;      73 #endif
         ;      74 
         ;      75 #ifdef TVIST_SKO
         ;      76 #define MINPROG 2
         ;      77 #define MAXPROG 3
         ;      78 #define DV	2
         ;      79 #endif
         ;      80 
         ;      81 #ifdef DV3KL2MD
         ;      82 
         ;      83 #define PP1	6
         ;      84 #define PP2	7
         ;      85 #define PP3	3
         ;      86 //#define PP4	4
         ;      87 //#define PP5	3
         ;      88 #define DV	2 
         ;      89 
         ;      90 #define MINPROG 2
         ;      91 #define MAXPROG 3
         ;      92 
         ;      93 #endif
         ;      94        
         ;      95 
         ;      96 #ifdef I380_WI_GAZ
         ;      97 
         ;      98 #define PP1	6
         ;      99 #define PP2	7
         ;     100 #define PP3	5
         ;     101 #define PP4	4
         ;     102 #define PP5	3
         ;     103 #define PP6	2
         ;     104 #define PP7	1
         ;     105 #define PP8	0
         ;     106 
         ;     107 #define DV	8 
         ;     108 
         ;     109 #define MINPROG 1
         ;     110 #define MAXPROG 4
         ;     111 
         ;     112 #endif
         ;     113 
         ;     114 bit b600Hz;
         ;     115 
         ;     116 bit b100Hz;
         ;     117 bit b10Hz;
         ;     118 char t0_cnt0,t0_cnt1,t0_cnt2,t0_cnt3;
         ;     119 char ind_cnt;
         ;     120 flash char IND_STROB[]={0b10111111,0b11011111,0b11101111,0b11110111,0b01111111};
         
          	.CSEG
         ;     121 flash char DIGISYM[]={0b11000000,0b11111001,0b10100100,0b10110000,0b10011001,0b10010010,0b10000010,0b11111000,0b10000000,0b10010000,0b11111111};								
         ;     122 
         ;     123 char ind_out[5]={0x255,0x255,0x255,0x255,0x255};
         
          	.DSEG
          _ind_out:
000260      	.BYTE 0x5
         ;     124 char dig[4];
          _dig:
000265      	.BYTE 0x4
         ;     125 bit bZ;    
         ;     126 char but;
         ;     127 static char but_n;
          _but_n_G1:
000269      	.BYTE 0x1
         ;     128 static char but_s;
          _but_s_G1:
00026a      	.BYTE 0x1
         ;     129 static char but0_cnt;
          _but0_cnt_G1:
00026b      	.BYTE 0x1
         ;     130 static char but1_cnt;
          _but1_cnt_G1:
00026c      	.BYTE 0x1
         ;     131 static char but_onL_temp;
          _but_onL_temp_G1:
00026d      	.BYTE 0x1
         ;     132 bit l_but;		//идет длинное нажатие на кнопку
         ;     133 bit n_but;          //произошло нажатие
         ;     134 bit speed;		//разрешение ускорения перебора 
         ;     135 bit bFL2; 
         ;     136 bit bFL5;
         ;     137 eeprom enum{evmON=0x55,evmOFF=0xaa}ee_vacuum_mode;
         
          	.ESEG
          _ee_vacuum_mode:
          	.DB  0x0
000000 00
         ;     138 eeprom char ee_program[2];
          _ee_program:
          	.DB  0x0
000001 00
          	.DB  0x0
000002 00
         ;     139 enum {p1=1,p2=2,p3=3,p4=4}prog;
         ;     140 enum{sOFF=0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13,s14,s15,s16,s54,s55,s100}step=sOFF;
         ;     141 enum {iMn,iPr_sel,iVr} ind;
         ;     142 char sub_ind;
         ;     143 char in_word,in_word_old,in_word_new,in_word_cnt;
         
          	.DSEG
          _in_word_old:
00026e      	.BYTE 0x1
          _in_word_new:
00026f      	.BYTE 0x1
          _in_word_cnt:
000270      	.BYTE 0x1
         ;     144 bit bERR;
         ;     145 signed int cnt_del=0;
          _cnt_del:
000271      	.BYTE 0x2
         ;     146 
         ;     147 char bVR;
          _bVR:
000273      	.BYTE 0x1
         ;     148 char bMD1;
          _bMD1:
000274      	.BYTE 0x1
         ;     149 bit bMD2;
         ;     150 bit bMD3;
         ;     151 bit bVR2;
         ;     152 char cnt_md1,cnt_md2,cnt_vr,cnt_md3,cnt_vr2;
          _cnt_md1:
000275      	.BYTE 0x1
          _cnt_md2:
000276      	.BYTE 0x1
          _cnt_vr:
000277      	.BYTE 0x1
          _cnt_md3:
000278      	.BYTE 0x1
          _cnt_vr2:
000279      	.BYTE 0x1
         ;     153 
         ;     154 eeprom unsigned ee_delay[4,2];
         
          	.ESEG
          _ee_delay:
          	.DW  0x0
000003 00 00
          	.DW  0x0
000005 00 00
          	.DW  0x0
000007 00 00
          	.DW  0x0
000009 00 00
          	.DW  0x0
00000b 00 00
          	.DW  0x0
00000d 00 00
          	.DW  0x0
00000f 00 00
          	.DW  0x0
000011 00 00
         ;     155 eeprom char ee_vr_log;
          _ee_vr_log:
          	.DB  0x0
000013 00
         ;     156 //#include <mega16.h>
         ;     157 //#include <mega8535.h>
         ;     158 #include <mega32.h>
         ;     159 //-----------------------------------------------
         ;     160 void prog_drv(void)
         ;     161 {
         
          	.CSEG
          _prog_drv:
         ;     162 char temp,temp1,temp2;
         ;     163 
         ;     164 temp=ee_program[0];
00006a 940e 0766 	CALL __SAVELOCR3
         ;	temp -> R16
         ;	temp1 -> R17
         ;	temp2 -> R18
00006c e0a1      	LDI  R26,LOW(_ee_program)
00006d e0b0      	LDI  R27,HIGH(_ee_program)
00006e 940e 0742 	CALL __EEPROMRDB
000070 2f0e      	MOV  R16,R30
         ;     165 temp1=ee_program[1];
000071   +  	__POINTW2MN _ee_program,1
000073 940e 0742 	CALL __EEPROMRDB
000075 2f1e      	MOV  R17,R30
         ;     166 temp2=ee_program[2];
000076   +  	__POINTW2MN _ee_program,2
000078 940e 0742 	CALL __EEPROMRDB
00007a 2f2e      	MOV  R18,R30
         ;     167 
         ;     168 if((temp==temp1)&&(temp==temp2))
00007b 1710      	CP   R17,R16
00007c f411      	BRNE _0x5
00007d 1720      	CP   R18,R16
00007e f009      	BREQ _0x6
          _0x5:
00007f c001      	RJMP _0x4
          _0x6:
         ;     169 	{
         ;     170 	}
         ;     171 else if((temp==temp1)&&(temp!=temp2))
000080 c01d      	RJMP _0x7
          _0x4:
000081 1710      	CP   R17,R16
000082 f411      	BRNE _0x9
000083 1720      	CP   R18,R16
000084 f409      	BRNE _0xA
          _0x9:
000085 c002      	RJMP _0x8
          _0xA:
         ;     172 	{
         ;     173 	temp2=temp;
000086 2f20      	MOV  R18,R16
         ;     174 	}
         ;     175 else if((temp!=temp1)&&(temp==temp2))
000087 c016      	RJMP _0xB
          _0x8:
000088 1710      	CP   R17,R16
000089 f011      	BREQ _0xD
00008a 1720      	CP   R18,R16
00008b f009      	BREQ _0xE
          _0xD:
00008c c002      	RJMP _0xC
          _0xE:
         ;     176 	{
         ;     177 	temp1=temp;
00008d 2f10      	MOV  R17,R16
         ;     178 	}
         ;     179 else if((temp!=temp1)&&(temp1==temp2))
00008e c00f      	RJMP _0xF
          _0xC:
00008f 1710      	CP   R17,R16
000090 f011      	BREQ _0x11
000091 1721      	CP   R18,R17
000092 f009      	BREQ _0x12
          _0x11:
000093 c002      	RJMP _0x10
          _0x12:
         ;     180 	{
         ;     181 	temp=temp1;
000094 2f01      	MOV  R16,R17
         ;     182 	}
         ;     183 else if((temp!=temp1)&&(temp!=temp2))
000095 c008      	RJMP _0x13
          _0x10:
000096 1710      	CP   R17,R16
000097 f011      	BREQ _0x15
000098 1720      	CP   R18,R16
000099 f409      	BRNE _0x16
          _0x15:
00009a c003      	RJMP _0x14
          _0x16:
         ;     184 	{
         ;     185 	temp=MINPROG;
00009b e001      	LDI  R16,LOW(1)
         ;     186 	temp1=MINPROG;
00009c e011      	LDI  R17,LOW(1)
         ;     187 	temp2=MINPROG;
00009d e021      	LDI  R18,LOW(1)
         ;     188 	}
         ;     189 
         ;     190 if(!((temp<=MAXPROG)&&(temp>=MINPROG)))
          _0x14:
          _0x13:
          _0xF:
          _0xB:
          _0x7:
00009e e0e4      	LDI  R30,LOW(4)
00009f 17e0      	CP   R30,R16
0000a0 f010      	BRLO _0x18
0000a1 3001      	CPI  R16,1
0000a2 f408      	BRSH _0x17
          _0x18:
         ;     191 	{
         ;     192 	temp=MINPROG;
0000a3 e001      	LDI  R16,LOW(1)
         ;     193 	}
         ;     194 
         ;     195 if(temp!=ee_program[0])ee_program[0]=temp;
          _0x17:
0000a4 e0a1      	LDI  R26,LOW(_ee_program)
0000a5 e0b0      	LDI  R27,HIGH(_ee_program)
0000a6 940e 0742 	CALL __EEPROMRDB
0000a8 17e0      	CP   R30,R16
0000a9 f029      	BREQ _0x1A
0000aa 2fe0      	MOV  R30,R16
0000ab e0a1      	LDI  R26,LOW(_ee_program)
0000ac e0b0      	LDI  R27,HIGH(_ee_program)
0000ad 940e 0756 	CALL __EEPROMWRB
         ;     196 if(temp!=ee_program[1])ee_program[1]=temp;
          _0x1A:
0000af   +  	__POINTW2MN _ee_program,1
0000b1 940e 0742 	CALL __EEPROMRDB
0000b3 17e0      	CP   R30,R16
0000b4 f029      	BREQ _0x1B
0000b5   +  	__POINTW2MN _ee_program,1
0000b7 2fe0      	MOV  R30,R16
0000b8 940e 0756 	CALL __EEPROMWRB
         ;     197 if(temp!=ee_program[2])ee_program[2]=temp;
          _0x1B:
0000ba   +  	__POINTW2MN _ee_program,2
0000bc 940e 0742 	CALL __EEPROMRDB
0000be 17e0      	CP   R30,R16
0000bf f029      	BREQ _0x1C
0000c0   +  	__POINTW2MN _ee_program,2
0000c2 2fe0      	MOV  R30,R16
0000c3 940e 0756 	CALL __EEPROMWRB
         ;     198 
         ;     199 prog=temp;
          _0x1C:
0000c5 2ea0      	MOV  R10,R16
         ;     200 }
0000c6 940e 076b 	CALL __LOADLOCR3
0000c8 c333      	RJMP _0x12D
         ;     201 
         ;     202 //-----------------------------------------------
         ;     203 void in_drv(void)
         ;     204 {
          _in_drv:
         ;     205 char i,temp;
         ;     206 unsigned int tempUI;
         ;     207 DDRA=0x00;
0000c9 940e 0765 	CALL __SAVELOCR4
         ;	i -> R16
         ;	temp -> R17
         ;	tempUI -> R18,R19
0000cb 940e 069a 	CALL SUBOPT_0x0
         ;     208 PORTA=0xff;
0000cd bbeb      	OUT  0x1B,R30
         ;     209 in_word_new=PINA;
0000ce b3e9      	IN   R30,0x19
0000cf 93e0 026f 	STS  _in_word_new,R30
         ;     210 if(in_word_old==in_word_new)
0000d1 91a0 026e 	LDS  R26,_in_word_old
0000d3 17ea      	CP   R30,R26
0000d4 f481      	BRNE _0x1D
         ;     211 	{
         ;     212 	if(in_word_cnt<10)
0000d5 91a0 0270 	LDS  R26,_in_word_cnt
0000d7 30aa      	CPI  R26,LOW(0xA)
0000d8 f458      	BRSH _0x1E
         ;     213 		{
         ;     214 		in_word_cnt++;
0000d9 91e0 0270 	LDS  R30,_in_word_cnt
0000db 5fef      	SUBI R30,-LOW(1)
0000dc 93e0 0270 	STS  _in_word_cnt,R30
         ;     215 		if(in_word_cnt>=10)
0000de 91a0 0270 	LDS  R26,_in_word_cnt
0000e0 30aa      	CPI  R26,LOW(0xA)
0000e1 f010      	BRLO _0x1F
         ;     216 			{
         ;     217 			in_word=in_word_old;
0000e2 90e0 026e 	LDS  R14,_in_word_old
         ;     218 			}
         ;     219 		}
          _0x1F:
         ;     220 	}
          _0x1E:
         ;     221 else in_word_cnt=0;
0000e4 c003      	RJMP _0x20
          _0x1D:
0000e5 e0e0      	LDI  R30,LOW(0)
0000e6 93e0 0270 	STS  _in_word_cnt,R30
          _0x20:
         ;     222 
         ;     223 
         ;     224 in_word_old=in_word_new;
0000e8 91e0 026f 	LDS  R30,_in_word_new
0000ea 93e0 026e 	STS  _in_word_old,R30
         ;     225 }   
0000ec 940e 076a 	CALL __LOADLOCR4
0000ee 9624      	ADIW R28,4
0000ef 9508      	RET
         ;     226 
         ;     227 #ifdef TVIST_SKO
         ;     228 //-----------------------------------------------
         ;     229 void err_drv(void)
         ;     230 {
         ;     231 if(step==sOFF)
         ;     232 	{
         ;     233     	if(prog==p2)	
         ;     234     		{
         ;     235        		if(bMD1) bERR=1;
         ;     236        		else bERR=0;
         ;     237 		}
         ;     238 	}
         ;     239 else bERR=0;
         ;     240 }
         ;     241 #else  
         ;     242 #ifdef I380_WI_GAZ
         ;     243 //-----------------------------------------------
         ;     244 void err_drv(void)
         ;     245 {
          _err_drv:
         ;     246 if(step==sOFF)
0000f0 20bb      	TST  R11
0000f1 f4a1      	BRNE _0x21
         ;     247 	{
         ;     248 	if((bMD1)||(bMD2)||(bVR)||(bMD3)||(bVR2)) bERR=1;
0000f2 91e0 0274 	LDS  R30,_bMD1
0000f4 30e0      	CPI  R30,0
0000f5 f451      	BRNE _0x23
0000f6 fc32      	SBRC R3,2
0000f7 c008      	RJMP _0x23
0000f8 91e0 0273 	LDS  R30,_bVR
0000fa 30e0      	CPI  R30,0
0000fb f421      	BRNE _0x23
0000fc fc33      	SBRC R3,3
0000fd c002      	RJMP _0x23
0000fe fe34      	SBRS R3,4
0000ff c003      	RJMP _0x22
          _0x23:
000100 9468      	SET
000101 f831      	BLD  R3,1
         ;     249 	else bERR=0;
000102 c002      	RJMP _0x25
          _0x22:
000103 94e8      	CLT
000104 f831      	BLD  R3,1
          _0x25:
         ;     250 	}
         ;     251 else bERR=0;
000105 c002      	RJMP _0x26
          _0x21:
000106 94e8      	CLT
000107 f831      	BLD  R3,1
          _0x26:
         ;     252 }
000108 9508      	RET
         ;     253 #else 
         ;     254 
         ;     255 //-----------------------------------------------
         ;     256 void err_drv(void)
         ;     257 {
         ;     258 if(step==sOFF)
         ;     259 	{
         ;     260 	if((bMD1)||(bMD2)||(bVR)||(bMD3)) bERR=1;
         ;     261 	else bERR=0;
         ;     262 	}
         ;     263 else bERR=0;
         ;     264 }
         ;     265 #endif
         ;     266 #endif
         ;     267 
         ;     268 //-----------------------------------------------
         ;     269 void mdvr_drv(void)
         ;     270 {
          _mdvr_drv:
         ;     271 if(!(in_word&(1<<MD1)))
000109 fce2      	SBRC R14,2
00010a c011      	RJMP _0x27
         ;     272 	{
         ;     273 	if(cnt_md1<10)
00010b 91a0 0275 	LDS  R26,_cnt_md1
00010d 30aa      	CPI  R26,LOW(0xA)
00010e f460      	BRSH _0x28
         ;     274 		{
         ;     275 		cnt_md1++;
00010f 91e0 0275 	LDS  R30,_cnt_md1
000111 5fef      	SUBI R30,-LOW(1)
000112 93e0 0275 	STS  _cnt_md1,R30
         ;     276 		if(cnt_md1==10) bMD1=1;
000114 91a0 0275 	LDS  R26,_cnt_md1
000116 30aa      	CPI  R26,LOW(0xA)
000117 f419      	BRNE _0x29
000118 e0e1      	LDI  R30,LOW(1)
000119 93e0 0274 	STS  _bMD1,R30
         ;     277 		}
          _0x29:
         ;     278 
         ;     279 	}
          _0x28:
         ;     280 else
00011b c00c      	RJMP _0x2A
          _0x27:
         ;     281 	{
         ;     282 	if(cnt_md1)
00011c 91e0 0275 	LDS  R30,_cnt_md1
00011e 30e0      	CPI  R30,0
00011f f041      	BREQ _0x2B
         ;     283 		{
         ;     284 		cnt_md1--;
000120 50e1      	SUBI R30,LOW(1)
000121 93e0 0275 	STS  _cnt_md1,R30
         ;     285 		if(cnt_md1==0) bMD1=0;
000123 30e0      	CPI  R30,0
000124 f419      	BRNE _0x2C
000125 e0e0      	LDI  R30,LOW(0)
000126 93e0 0274 	STS  _bMD1,R30
         ;     286 		}
          _0x2C:
         ;     287 
         ;     288 	}
          _0x2B:
          _0x2A:
         ;     289 
         ;     290 if(!(in_word&(1<<MD2)))
000128 fce3      	SBRC R14,3
000129 c010      	RJMP _0x2D
         ;     291 	{
         ;     292 	if(cnt_md2<10)
00012a 91a0 0276 	LDS  R26,_cnt_md2
00012c 30aa      	CPI  R26,LOW(0xA)
00012d f458      	BRSH _0x2E
         ;     293 		{
         ;     294 		cnt_md2++;
00012e 91e0 0276 	LDS  R30,_cnt_md2
000130 5fef      	SUBI R30,-LOW(1)
000131 93e0 0276 	STS  _cnt_md2,R30
         ;     295 		if(cnt_md2==10) bMD2=1;
000133 91a0 0276 	LDS  R26,_cnt_md2
000135 30aa      	CPI  R26,LOW(0xA)
000136 f411      	BRNE _0x2F
000137 9468      	SET
000138 f832      	BLD  R3,2
         ;     296 		}
          _0x2F:
         ;     297 
         ;     298 	}
          _0x2E:
         ;     299 else
000139 c00b      	RJMP _0x30
          _0x2D:
         ;     300 	{
         ;     301 	if(cnt_md2)
00013a 91e0 0276 	LDS  R30,_cnt_md2
00013c 30e0      	CPI  R30,0
00013d f039      	BREQ _0x31
         ;     302 		{
         ;     303 		cnt_md2--;
00013e 50e1      	SUBI R30,LOW(1)
00013f 93e0 0276 	STS  _cnt_md2,R30
         ;     304 		if(cnt_md2==0) bMD2=0;
000141 30e0      	CPI  R30,0
000142 f411      	BRNE _0x32
000143 94e8      	CLT
000144 f832      	BLD  R3,2
         ;     305 		}
          _0x32:
         ;     306 
         ;     307 	}
          _0x31:
          _0x30:
         ;     308 
         ;     309 if(!(in_word&(1<<MD3)))
000145 fce5      	SBRC R14,5
000146 c010      	RJMP _0x33
         ;     310 	{
         ;     311 	if(cnt_md3<10)
000147 91a0 0278 	LDS  R26,_cnt_md3
000149 30aa      	CPI  R26,LOW(0xA)
00014a f458      	BRSH _0x34
         ;     312 		{
         ;     313 		cnt_md3++;
00014b 91e0 0278 	LDS  R30,_cnt_md3
00014d 5fef      	SUBI R30,-LOW(1)
00014e 93e0 0278 	STS  _cnt_md3,R30
         ;     314 		if(cnt_md3==10) bMD3=1;
000150 91a0 0278 	LDS  R26,_cnt_md3
000152 30aa      	CPI  R26,LOW(0xA)
000153 f411      	BRNE _0x35
000154 9468      	SET
000155 f833      	BLD  R3,3
         ;     315 		}
          _0x35:
         ;     316 
         ;     317 	}
          _0x34:
         ;     318 else
000156 c00b      	RJMP _0x36
          _0x33:
         ;     319 	{
         ;     320 	if(cnt_md3)
000157 91e0 0278 	LDS  R30,_cnt_md3
000159 30e0      	CPI  R30,0
00015a f039      	BREQ _0x37
         ;     321 		{
         ;     322 		cnt_md3--;
00015b 50e1      	SUBI R30,LOW(1)
00015c 93e0 0278 	STS  _cnt_md3,R30
         ;     323 		if(cnt_md3==0) bMD3=0;
00015e 30e0      	CPI  R30,0
00015f f411      	BRNE _0x38
000160 94e8      	CLT
000161 f833      	BLD  R3,3
         ;     324 		}
          _0x38:
         ;     325 
         ;     326 	}
          _0x37:
          _0x36:
         ;     327 
         ;     328 if(((!(in_word&(1<<VR)))/*&&(ee_vr_log)*/) /*|| (((in_word&(1<<VR)))&&(!ee_vr_log))*/)
000162 fce4      	SBRC R14,4
000163 c011      	RJMP _0x39
         ;     329 	{
         ;     330 	if(cnt_vr<10)
000164 91a0 0277 	LDS  R26,_cnt_vr
000166 30aa      	CPI  R26,LOW(0xA)
000167 f460      	BRSH _0x3A
         ;     331 		{
         ;     332 		cnt_vr++;
000168 91e0 0277 	LDS  R30,_cnt_vr
00016a 5fef      	SUBI R30,-LOW(1)
00016b 93e0 0277 	STS  _cnt_vr,R30
         ;     333 		if(cnt_vr==10) bVR=1;
00016d 91a0 0277 	LDS  R26,_cnt_vr
00016f 30aa      	CPI  R26,LOW(0xA)
000170 f419      	BRNE _0x3B
000171 e0e1      	LDI  R30,LOW(1)
000172 93e0 0273 	STS  _bVR,R30
         ;     334 		}
          _0x3B:
         ;     335 
         ;     336 	}
          _0x3A:
         ;     337 else
000174 c00c      	RJMP _0x3C
          _0x39:
         ;     338 	{
         ;     339 	if(cnt_vr)
000175 91e0 0277 	LDS  R30,_cnt_vr
000177 30e0      	CPI  R30,0
000178 f041      	BREQ _0x3D
         ;     340 		{
         ;     341 		cnt_vr--;
000179 50e1      	SUBI R30,LOW(1)
00017a 93e0 0277 	STS  _cnt_vr,R30
         ;     342 		if(cnt_vr==0) bVR=0;
00017c 30e0      	CPI  R30,0
00017d f419      	BRNE _0x3E
00017e e0e0      	LDI  R30,LOW(0)
00017f 93e0 0273 	STS  _bVR,R30
         ;     343 		}
          _0x3E:
         ;     344 
         ;     345 	}
          _0x3D:
          _0x3C:
         ;     346 	
         ;     347 if(((!(in_word&(1<<VR2)))/*&&(ee_vr_log)*/) /*|| (((in_word&(1<<VR2)))&&(!ee_vr_log))*/)
000181 fce7      	SBRC R14,7
000182 c010      	RJMP _0x3F
         ;     348 	{
         ;     349 	if(cnt_vr2<10)
000183 91a0 0279 	LDS  R26,_cnt_vr2
000185 30aa      	CPI  R26,LOW(0xA)
000186 f458      	BRSH _0x40
         ;     350 		{
         ;     351 		cnt_vr2++;
000187 91e0 0279 	LDS  R30,_cnt_vr2
000189 5fef      	SUBI R30,-LOW(1)
00018a 93e0 0279 	STS  _cnt_vr2,R30
         ;     352 		if(cnt_vr2==10) bVR2=1;
00018c 91a0 0279 	LDS  R26,_cnt_vr2
00018e 30aa      	CPI  R26,LOW(0xA)
00018f f411      	BRNE _0x41
000190 9468      	SET
000191 f834      	BLD  R3,4
         ;     353 		}
          _0x41:
         ;     354 
         ;     355 	}
          _0x40:
         ;     356 else
000192 c00b      	RJMP _0x42
          _0x3F:
         ;     357 	{
         ;     358 	if(cnt_vr2)
000193 91e0 0279 	LDS  R30,_cnt_vr2
000195 30e0      	CPI  R30,0
000196 f039      	BREQ _0x43
         ;     359 		{
         ;     360 		cnt_vr2--;
000197 50e1      	SUBI R30,LOW(1)
000198 93e0 0279 	STS  _cnt_vr2,R30
         ;     361 		if(cnt_vr2==0) bVR2=0;
00019a 30e0      	CPI  R30,0
00019b f411      	BRNE _0x44
00019c 94e8      	CLT
00019d f834      	BLD  R3,4
         ;     362 		}
          _0x44:
         ;     363 
         ;     364 	}	
          _0x43:
          _0x42:
         ;     365 } 
00019e 9508      	RET
         ;     366 
         ;     367 #ifdef DV3KL2MD
         ;     368 //-----------------------------------------------
         ;     369 void step_contr(void)
         ;     370 {
         ;     371 char temp=0;
         ;     372 DDRB=0xFF;
         ;     373 
         ;     374 if(step==sOFF)
         ;     375 	{
         ;     376 	temp=0;
         ;     377 	}
         ;     378 
         ;     379 else if(step==s1)
         ;     380 	{
         ;     381 	temp|=(1<<PP1);
         ;     382 
         ;     383 	cnt_del--;
         ;     384 	if(cnt_del==0)
         ;     385 		{
         ;     386 		step=s2;
         ;     387 		cnt_del=20;
         ;     388 		}
         ;     389 	}
         ;     390 
         ;     391 
         ;     392 else if(step==s2)
         ;     393 	{
         ;     394 	temp|=(1<<PP1)|(1<<DV);
         ;     395 
         ;     396 	cnt_del--;
         ;     397 	if(cnt_del==0)
         ;     398 		{
         ;     399 		step=s3;
         ;     400 		}
         ;     401 	}
         ;     402 	
         ;     403 else if(step==s3)
         ;     404 	{
         ;     405 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
         ;     406      if(!bMD1)goto step_contr_end;
         ;     407      step=s4;
         ;     408      }     
         ;     409 else if(step==s4)
         ;     410 	{          
         ;     411      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     412      if(!bMD2)goto step_contr_end;
         ;     413      step=s5;
         ;     414      cnt_del=50;
         ;     415      } 
         ;     416 else if(step==s5)
         ;     417 	{
         ;     418 	temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     419 
         ;     420 	cnt_del--;
         ;     421 	if(cnt_del==0)
         ;     422 		{
         ;     423 		step=s6;
         ;     424 		cnt_del=50;
         ;     425 		}
         ;     426 	}         
         ;     427 /*else if(step==s6)
         ;     428 	{
         ;     429 	temp|=(1<<PP1)|(1<<DV);
         ;     430 
         ;     431 	cnt_del--;
         ;     432 	if(cnt_del==0)
         ;     433 		{
         ;     434 		step=s6;
         ;     435 		cnt_del=70;
         ;     436 		}
         ;     437 	}*/     
         ;     438 else if(step==s6)
         ;     439 		{
         ;     440 	temp|=(1<<PP1);
         ;     441 	cnt_del--;
         ;     442 	if(cnt_del==0)
         ;     443 		{
         ;     444 		step=sOFF;
         ;     445           }     
         ;     446      }     
         ;     447 
         ;     448 step_contr_end:
         ;     449 
         ;     450 PORTB=~temp;
         ;     451 }
         ;     452 #endif
         ;     453 
         ;     454 #ifdef P380_MINI
         ;     455 //-----------------------------------------------
         ;     456 void step_contr(void)
         ;     457 {
         ;     458 char temp=0;
         ;     459 DDRB=0xFF;
         ;     460 
         ;     461 if(step==sOFF)
         ;     462 	{
         ;     463 	temp=0;
         ;     464 	}
         ;     465 
         ;     466 else if(step==s1)
         ;     467 	{
         ;     468 	temp|=(1<<PP1);
         ;     469 
         ;     470 	cnt_del--;
         ;     471 	if(cnt_del==0)
         ;     472 		{
         ;     473 		step=s2;
         ;     474 		}
         ;     475 	}
         ;     476 
         ;     477 else if(step==s2)
         ;     478 	{
         ;     479 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
         ;     480      if(!bMD1)goto step_contr_end;
         ;     481      step=s3;
         ;     482      }     
         ;     483 else if(step==s3)
         ;     484 	{          
         ;     485      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     486      if(!bMD2)goto step_contr_end;
         ;     487      step=s4;
         ;     488      cnt_del=50;
         ;     489      }
         ;     490 else if(step==s4)
         ;     491 		{
         ;     492 	temp|=(1<<PP1);
         ;     493 	cnt_del--;
         ;     494 	if(cnt_del==0)
         ;     495 		{
         ;     496 		step=sOFF;
         ;     497           }     
         ;     498      }     
         ;     499 
         ;     500 step_contr_end:
         ;     501 
         ;     502 PORTB=~temp;
         ;     503 }
         ;     504 #endif
         ;     505 
         ;     506 #ifdef P380
         ;     507 //-----------------------------------------------
         ;     508 void step_contr(void)
         ;     509 {
         ;     510 char temp=0;
         ;     511 DDRB=0xFF;
         ;     512 
         ;     513 if(step==sOFF)
         ;     514 	{
         ;     515 	temp=0;
         ;     516 	}
         ;     517 
         ;     518 else if(prog==p1)
         ;     519 	{
         ;     520 	if(step==s1)
         ;     521 		{
         ;     522 		temp|=(1<<PP1)|(1<<PP2);
         ;     523 
         ;     524 		cnt_del--;
         ;     525 		if(cnt_del==0)
         ;     526 			{
         ;     527 			if(ee_vacuum_mode==evmOFF)
         ;     528 				{
         ;     529 				goto lbl_0001;
         ;     530 				}
         ;     531 			else step=s2;
         ;     532 			}
         ;     533 		}
         ;     534 
         ;     535 	else if(step==s2)
         ;     536 		{
         ;     537 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     538 
         ;     539           if(!bVR)goto step_contr_end;
         ;     540 lbl_0001:
         ;     541 #ifndef BIG_CAM
         ;     542 		cnt_del=30;
         ;     543 #endif
         ;     544 
         ;     545 #ifdef BIG_CAM
         ;     546 		cnt_del=100;
         ;     547 #endif
         ;     548 		step=s3;
         ;     549 		}
         ;     550 
         ;     551 	else if(step==s3)
         ;     552 		{
         ;     553 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     554 		cnt_del--;
         ;     555 		if(cnt_del==0)
         ;     556 			{
         ;     557 			step=s4;
         ;     558 			}
         ;     559           }
         ;     560 	else if(step==s4)
         ;     561 		{
         ;     562 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     563 
         ;     564           if(!bMD1)goto step_contr_end;
         ;     565 
         ;     566 		cnt_del=40;
         ;     567 		step=s5;
         ;     568 		}
         ;     569 	else if(step==s5)
         ;     570 		{
         ;     571 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     572 
         ;     573 		cnt_del--;
         ;     574 		if(cnt_del==0)
         ;     575 			{
         ;     576 			step=s6;
         ;     577 			}
         ;     578 		}
         ;     579 	else if(step==s6)
         ;     580 		{
         ;     581 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     582 
         ;     583          	if(!bMD2)goto step_contr_end;
         ;     584           cnt_del=40;
         ;     585 		//step=s7;
         ;     586 		
         ;     587           step=s55;
         ;     588           cnt_del=40;
         ;     589 		}
         ;     590 	else if(step==s55)
         ;     591 		{
         ;     592 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     593           cnt_del--;
         ;     594           if(cnt_del==0)
         ;     595 			{
         ;     596           	step=s7;
         ;     597           	cnt_del=20;
         ;     598 			}
         ;     599          		
         ;     600 		}
         ;     601 	else if(step==s7)
         ;     602 		{
         ;     603 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     604 
         ;     605 		cnt_del--;
         ;     606 		if(cnt_del==0)
         ;     607 			{
         ;     608 			step=s8;
         ;     609 			cnt_del=30;
         ;     610 			}
         ;     611 		}
         ;     612 	else if(step==s8)
         ;     613 		{
         ;     614 		temp|=(1<<PP1)|(1<<PP3);
         ;     615 
         ;     616 		cnt_del--;
         ;     617 		if(cnt_del==0)
         ;     618 			{
         ;     619 			step=s9;
         ;     620 #ifndef BIG_CAM
         ;     621 		cnt_del=150;
         ;     622 #endif
         ;     623 
         ;     624 #ifdef BIG_CAM
         ;     625 		cnt_del=200;
         ;     626 #endif
         ;     627 			}
         ;     628 		}
         ;     629 	else if(step==s9)
         ;     630 		{
         ;     631 		temp|=(1<<PP1)|(1<<PP2);
         ;     632 
         ;     633 		cnt_del--;
         ;     634 		if(cnt_del==0)
         ;     635 			{
         ;     636 			step=s10;
         ;     637 			cnt_del=30;
         ;     638 			}
         ;     639 		}
         ;     640 	else if(step==s10)
         ;     641 		{
         ;     642 		temp|=(1<<PP2);
         ;     643 		cnt_del--;
         ;     644 		if(cnt_del==0)
         ;     645 			{
         ;     646 			step=sOFF;
         ;     647 			}
         ;     648 		}
         ;     649 	}
         ;     650 
         ;     651 if(prog==p2)
         ;     652 	{
         ;     653 
         ;     654 	if(step==s1)
         ;     655 		{
         ;     656 		temp|=(1<<PP1)|(1<<PP2);
         ;     657 
         ;     658 		cnt_del--;
         ;     659 		if(cnt_del==0)
         ;     660 			{
         ;     661 			if(ee_vacuum_mode==evmOFF)
         ;     662 				{
         ;     663 				goto lbl_0002;
         ;     664 				}
         ;     665 			else step=s2;
         ;     666 			}
         ;     667 		}
         ;     668 
         ;     669 	else if(step==s2)
         ;     670 		{
         ;     671 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     672 
         ;     673           if(!bVR)goto step_contr_end;
         ;     674 lbl_0002:
         ;     675 #ifndef BIG_CAM
         ;     676 		cnt_del=30;
         ;     677 #endif
         ;     678 
         ;     679 #ifdef BIG_CAM
         ;     680 		cnt_del=100;
         ;     681 #endif
         ;     682 		step=s3;
         ;     683 		}
         ;     684 
         ;     685 	else if(step==s3)
         ;     686 		{
         ;     687 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     688 
         ;     689 		cnt_del--;
         ;     690 		if(cnt_del==0)
         ;     691 			{
         ;     692 			step=s4;
         ;     693 			}
         ;     694 		}
         ;     695 
         ;     696 	else if(step==s4)
         ;     697 		{
         ;     698 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     699 
         ;     700           if(!bMD1)goto step_contr_end;
         ;     701          	cnt_del=30;
         ;     702 		step=s5;
         ;     703 		}
         ;     704 
         ;     705 	else if(step==s5)
         ;     706 		{
         ;     707 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     708 
         ;     709 		cnt_del--;
         ;     710 		if(cnt_del==0)
         ;     711 			{
         ;     712 			step=s6;
         ;     713 			cnt_del=30;
         ;     714 			}
         ;     715 		}
         ;     716 
         ;     717 	else if(step==s6)
         ;     718 		{
         ;     719 		temp|=(1<<PP1)|(1<<PP3);
         ;     720 
         ;     721 		cnt_del--;
         ;     722 		if(cnt_del==0)
         ;     723 			{
         ;     724 			step=s7;
         ;     725 #ifndef BIG_CAM
         ;     726 		cnt_del=150;
         ;     727 #endif
         ;     728 
         ;     729 #ifdef BIG_CAM
         ;     730 		cnt_del=200;
         ;     731 #endif
         ;     732 			}
         ;     733 		}
         ;     734 
         ;     735 	else if(step==s7)
         ;     736 		{
         ;     737 		temp|=(1<<PP1)|(1<<PP2);
         ;     738 
         ;     739 		cnt_del--;
         ;     740 		if(cnt_del==0)
         ;     741 			{
         ;     742 			step=s8;
         ;     743 			cnt_del=30;
         ;     744 			}
         ;     745 		}
         ;     746 	else if(step==s8)
         ;     747 		{
         ;     748 		temp|=(1<<PP2);
         ;     749 
         ;     750 		cnt_del--;
         ;     751 		if(cnt_del==0)
         ;     752 			{
         ;     753 			step=sOFF;
         ;     754 			}
         ;     755 		}
         ;     756 	}
         ;     757 
         ;     758 if(prog==p3)
         ;     759 	{
         ;     760 
         ;     761 	if(step==s1)
         ;     762 		{
         ;     763 		temp|=(1<<PP1)|(1<<PP2);
         ;     764 
         ;     765 		cnt_del--;
         ;     766 		if(cnt_del==0)
         ;     767 			{
         ;     768 			if(ee_vacuum_mode==evmOFF)
         ;     769 				{
         ;     770 				goto lbl_0003;
         ;     771 				}
         ;     772 			else step=s2;
         ;     773 			}
         ;     774 		}
         ;     775 
         ;     776 	else if(step==s2)
         ;     777 		{
         ;     778 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     779 
         ;     780           if(!bVR)goto step_contr_end;
         ;     781 lbl_0003:
         ;     782 #ifndef BIG_CAM
         ;     783 		cnt_del=80;
         ;     784 #endif
         ;     785 
         ;     786 #ifdef BIG_CAM
         ;     787 		cnt_del=100;
         ;     788 #endif
         ;     789 		step=s3;
         ;     790 		}
         ;     791 
         ;     792 	else if(step==s3)
         ;     793 		{
         ;     794 		temp|=(1<<PP1)|(1<<PP3);
         ;     795 
         ;     796 		cnt_del--;
         ;     797 		if(cnt_del==0)
         ;     798 			{
         ;     799 			step=s4;
         ;     800 			cnt_del=120;
         ;     801 			}
         ;     802 		}
         ;     803 
         ;     804 	else if(step==s4)
         ;     805 		{
         ;     806 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<PP5);
         ;     807 
         ;     808 		cnt_del--;
         ;     809 		if(cnt_del==0)
         ;     810 			{
         ;     811 			step=s5;
         ;     812 
         ;     813 		
         ;     814 #ifndef BIG_CAM
         ;     815 		cnt_del=150;
         ;     816 #endif
         ;     817 
         ;     818 #ifdef BIG_CAM
         ;     819 		cnt_del=200;
         ;     820 #endif
         ;     821 	//	step=s5;
         ;     822 	}
         ;     823 		}
         ;     824 
         ;     825 	else if(step==s5)
         ;     826 		{
         ;     827 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<PP5);
         ;     828 
         ;     829 		cnt_del--;
         ;     830 		if(cnt_del==0)
         ;     831 			{
         ;     832 			step=s6;
         ;     833 			cnt_del=30;
         ;     834 			}
         ;     835 		}
         ;     836 
         ;     837 	else if(step==s6)
         ;     838 		{
         ;     839 		temp|=(1<<PP2)|(1<<PP4)|(1<<PP5);
         ;     840 
         ;     841 		cnt_del--;
         ;     842 		if(cnt_del==0)
         ;     843 			{
         ;     844 			step=s7;
         ;     845 			cnt_del=30;
         ;     846 			}
         ;     847 		}
         ;     848 
         ;     849 	else if(step==s7)
         ;     850 		{
         ;     851 		temp|=(1<<PP2);
         ;     852 
         ;     853 		cnt_del--;
         ;     854 		if(cnt_del==0)
         ;     855 			{
         ;     856 			step=sOFF;
         ;     857 			}
         ;     858 		}
         ;     859 
         ;     860 	}
         ;     861 step_contr_end:
         ;     862 
         ;     863 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;     864 
         ;     865 PORTB=~temp;
         ;     866 }
         ;     867 #endif
         ;     868 #ifdef I380
         ;     869 //-----------------------------------------------
         ;     870 void step_contr(void)
         ;     871 {
         ;     872 char temp=0;
         ;     873 DDRB=0xFF;
         ;     874 
         ;     875 if(step==sOFF)goto step_contr_end;
         ;     876 
         ;     877 else if(prog==p1)
         ;     878 	{
         ;     879 	if(step==s1)    //жесть
         ;     880 		{
         ;     881 		temp|=(1<<PP1);
         ;     882           if(!bMD1)goto step_contr_end;
         ;     883 
         ;     884 			if(ee_vacuum_mode==evmOFF)
         ;     885 				{
         ;     886 				goto lbl_0001;
         ;     887 				}
         ;     888 			else step=s2;
         ;     889 		}
         ;     890 
         ;     891 	else if(step==s2)
         ;     892 		{
         ;     893 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     894           if(!bVR)goto step_contr_end;
         ;     895 lbl_0001:
         ;     896 
         ;     897           step=s100;
         ;     898 		cnt_del=40;
         ;     899           }
         ;     900 	else if(step==s100)
         ;     901 		{
         ;     902 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;     903           cnt_del--;
         ;     904           if(cnt_del==0)
         ;     905 			{
         ;     906           	step=s3;
         ;     907           	cnt_del=50;
         ;     908 			}
         ;     909 		}
         ;     910 
         ;     911 	else if(step==s3)
         ;     912 		{
         ;     913 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     914           cnt_del--;
         ;     915           if(cnt_del==0)
         ;     916 			{
         ;     917           	step=s4;
         ;     918 			}
         ;     919 		}
         ;     920 	else if(step==s4)
         ;     921 		{
         ;     922 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;     923           if(!bMD2)goto step_contr_end;
         ;     924           step=s5;
         ;     925           cnt_del=20;
         ;     926 		}
         ;     927 	else if(step==s5)
         ;     928 		{
         ;     929 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     930           cnt_del--;
         ;     931           if(cnt_del==0)
         ;     932 			{
         ;     933           	step=s6;
         ;     934 			}
         ;     935           }
         ;     936 	else if(step==s6)
         ;     937 		{
         ;     938 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;     939           if(!bMD3)goto step_contr_end;
         ;     940           step=s7;
         ;     941           cnt_del=20;
         ;     942 		}
         ;     943 
         ;     944 	else if(step==s7)
         ;     945 		{
         ;     946 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     947           cnt_del--;
         ;     948           if(cnt_del==0)
         ;     949 			{
         ;     950           	step=s8;
         ;     951           	cnt_del=ee_delay[prog,0]*10U;;
         ;     952 			}
         ;     953           }
         ;     954 	else if(step==s8)
         ;     955 		{
         ;     956 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;     957           cnt_del--;
         ;     958           if(cnt_del==0)
         ;     959 			{
         ;     960           	step=s9;
         ;     961           	cnt_del=20;
         ;     962 			}
         ;     963           }
         ;     964 	else if(step==s9)
         ;     965 		{
         ;     966 		temp|=(1<<PP1);
         ;     967           cnt_del--;
         ;     968           if(cnt_del==0)
         ;     969 			{
         ;     970           	step=sOFF;
         ;     971           	}
         ;     972           }
         ;     973 	}
         ;     974 
         ;     975 else if(prog==p2)  //ско
         ;     976 	{
         ;     977 	if(step==s1)
         ;     978 		{
         ;     979 		temp|=(1<<PP1);
         ;     980           if(!bMD1)goto step_contr_end;
         ;     981 
         ;     982 			if(ee_vacuum_mode==evmOFF)
         ;     983 				{
         ;     984 				goto lbl_0002;
         ;     985 				}
         ;     986 			else step=s2;
         ;     987 
         ;     988           //step=s2;
         ;     989 		}
         ;     990 
         ;     991 	else if(step==s2)
         ;     992 		{
         ;     993 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     994           if(!bVR)goto step_contr_end;
         ;     995 
         ;     996 lbl_0002:
         ;     997           step=s100;
         ;     998 		cnt_del=40;
         ;     999           }
         ;    1000 	else if(step==s100)
         ;    1001 		{
         ;    1002 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1003           cnt_del--;
         ;    1004           if(cnt_del==0)
         ;    1005 			{
         ;    1006           	step=s3;
         ;    1007           	cnt_del=50;
         ;    1008 			}
         ;    1009 		}
         ;    1010 	else if(step==s3)
         ;    1011 		{
         ;    1012 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1013           cnt_del--;
         ;    1014           if(cnt_del==0)
         ;    1015 			{
         ;    1016           	step=s4;
         ;    1017 			}
         ;    1018 		}
         ;    1019 	else if(step==s4)
         ;    1020 		{
         ;    1021 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1022           if(!bMD2)goto step_contr_end;
         ;    1023           step=s5;
         ;    1024           cnt_del=20;
         ;    1025 		}
         ;    1026 	else if(step==s5)
         ;    1027 		{
         ;    1028 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1029           cnt_del--;
         ;    1030           if(cnt_del==0)
         ;    1031 			{
         ;    1032           	step=s6;
         ;    1033           	cnt_del=ee_delay[prog,0]*10U;
         ;    1034 			}
         ;    1035           }
         ;    1036 	else if(step==s6)
         ;    1037 		{
         ;    1038 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1039           cnt_del--;
         ;    1040           if(cnt_del==0)
         ;    1041 			{
         ;    1042           	step=s7;
         ;    1043           	cnt_del=20;
         ;    1044 			}
         ;    1045           }
         ;    1046 	else if(step==s7)
         ;    1047 		{
         ;    1048 		temp|=(1<<PP1);
         ;    1049           cnt_del--;
         ;    1050           if(cnt_del==0)
         ;    1051 			{
         ;    1052           	step=sOFF;
         ;    1053           	}
         ;    1054           }
         ;    1055 	}
         ;    1056 
         ;    1057 else if(prog==p3)   //твист
         ;    1058 	{
         ;    1059 	if(step==s1)
         ;    1060 		{
         ;    1061 		temp|=(1<<PP1);
         ;    1062           if(!bMD1)goto step_contr_end;
         ;    1063 
         ;    1064 			if(ee_vacuum_mode==evmOFF)
         ;    1065 				{
         ;    1066 				goto lbl_0003;
         ;    1067 				}
         ;    1068 			else step=s2;
         ;    1069 
         ;    1070           //step=s2;
         ;    1071 		}
         ;    1072 
         ;    1073 	else if(step==s2)
         ;    1074 		{
         ;    1075 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1076           if(!bVR)goto step_contr_end;
         ;    1077 lbl_0003:
         ;    1078           cnt_del=50;
         ;    1079 		step=s3;
         ;    1080 		}
         ;    1081 
         ;    1082 
         ;    1083 	else	if(step==s3)
         ;    1084 		{
         ;    1085 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1086 		cnt_del--;
         ;    1087 		if(cnt_del==0)
         ;    1088 			{
         ;    1089 			cnt_del=ee_delay[prog,0]*10U;
         ;    1090 			step=s4;
         ;    1091 			}
         ;    1092           }
         ;    1093 	else if(step==s4)
         ;    1094 		{
         ;    1095 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1096 		cnt_del--;
         ;    1097  		if(cnt_del==0)
         ;    1098 			{
         ;    1099 			cnt_del=ee_delay[prog,1]*10U;
         ;    1100 			step=s5;
         ;    1101 			}
         ;    1102 		}
         ;    1103 
         ;    1104 	else if(step==s5)
         ;    1105 		{
         ;    1106 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1107 		cnt_del--;
         ;    1108 		if(cnt_del==0)
         ;    1109 			{
         ;    1110 			step=s6;
         ;    1111 			cnt_del=20;
         ;    1112 			}
         ;    1113 		}
         ;    1114 
         ;    1115 	else if(step==s6)
         ;    1116 		{
         ;    1117 		temp|=(1<<PP1);
         ;    1118   		cnt_del--;
         ;    1119 		if(cnt_del==0)
         ;    1120 			{
         ;    1121 			step=sOFF;
         ;    1122 			}
         ;    1123 		}
         ;    1124 
         ;    1125 	}
         ;    1126 
         ;    1127 else if(prog==p4)      //замок
         ;    1128 	{
         ;    1129 	if(step==s1)
         ;    1130 		{
         ;    1131 		temp|=(1<<PP1);
         ;    1132           if(!bMD1)goto step_contr_end;
         ;    1133 
         ;    1134 			if(ee_vacuum_mode==evmOFF)
         ;    1135 				{
         ;    1136 				goto lbl_0004;
         ;    1137 				}
         ;    1138 			else step=s2;
         ;    1139           //step=s2;
         ;    1140 		}
         ;    1141 
         ;    1142 	else if(step==s2)
         ;    1143 		{
         ;    1144 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1145           if(!bVR)goto step_contr_end;
         ;    1146 lbl_0004:
         ;    1147           step=s3;
         ;    1148 		cnt_del=50;
         ;    1149           }
         ;    1150 
         ;    1151 	else if(step==s3)
         ;    1152 		{
         ;    1153 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1154           cnt_del--;
         ;    1155           if(cnt_del==0)
         ;    1156 			{
         ;    1157           	step=s4;
         ;    1158 			cnt_del=ee_delay[prog,0]*10U;
         ;    1159 			}
         ;    1160           }
         ;    1161 
         ;    1162    	else if(step==s4)
         ;    1163 		{
         ;    1164 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1165 		cnt_del--;
         ;    1166 		if(cnt_del==0)
         ;    1167 			{
         ;    1168 			step=s5;
         ;    1169 			cnt_del=30;
         ;    1170 			}
         ;    1171 		}
         ;    1172 
         ;    1173 	else if(step==s5)
         ;    1174 		{
         ;    1175 		temp|=(1<<PP1)|(1<<PP4);
         ;    1176 		cnt_del--;
         ;    1177 		if(cnt_del==0)
         ;    1178 			{
         ;    1179 			step=s6;
         ;    1180 			cnt_del=ee_delay[prog,1]*10U;
         ;    1181 			}
         ;    1182 		}
         ;    1183 
         ;    1184 	else if(step==s6)
         ;    1185 		{
         ;    1186 		temp|=(1<<PP4);
         ;    1187 		cnt_del--;
         ;    1188 		if(cnt_del==0)
         ;    1189 			{
         ;    1190 			step=sOFF;
         ;    1191 			}
         ;    1192 		}
         ;    1193 
         ;    1194 	}
         ;    1195 	
         ;    1196 step_contr_end:
         ;    1197 
         ;    1198 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1199 
         ;    1200 PORTB=~temp;
         ;    1201 //PORTB=0x55;
         ;    1202 }
         ;    1203 #endif
         ;    1204 
         ;    1205 #ifdef I220_WI
         ;    1206 //-----------------------------------------------
         ;    1207 void step_contr(void)
         ;    1208 {
         ;    1209 char temp=0;
         ;    1210 DDRB=0xFF;
         ;    1211 
         ;    1212 if(step==sOFF)goto step_contr_end;
         ;    1213 
         ;    1214 else if(prog==p3)   //твист
         ;    1215 	{
         ;    1216 	if(step==s1)
         ;    1217 		{
         ;    1218 		temp|=(1<<PP1);
         ;    1219           if(!bMD1)goto step_contr_end;
         ;    1220 
         ;    1221 			if(ee_vacuum_mode==evmOFF)
         ;    1222 				{
         ;    1223 				goto lbl_0003;
         ;    1224 				}
         ;    1225 			else step=s2;
         ;    1226 
         ;    1227           //step=s2;
         ;    1228 		}
         ;    1229 
         ;    1230 	else if(step==s2)
         ;    1231 		{
         ;    1232 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1233           if(!bVR)goto step_contr_end;
         ;    1234 lbl_0003:
         ;    1235           cnt_del=50;
         ;    1236 		step=s3;
         ;    1237 		}
         ;    1238 
         ;    1239 
         ;    1240 	else	if(step==s3)
         ;    1241 		{
         ;    1242 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1243 		cnt_del--;
         ;    1244 		if(cnt_del==0)
         ;    1245 			{
         ;    1246 			cnt_del=90;
         ;    1247 			step=s4;
         ;    1248 			}
         ;    1249           }
         ;    1250 	else if(step==s4)
         ;    1251 		{
         ;    1252 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1253 		cnt_del--;
         ;    1254  		if(cnt_del==0)
         ;    1255 			{
         ;    1256 			cnt_del=130;
         ;    1257 			step=s5;
         ;    1258 			}
         ;    1259 		}
         ;    1260 
         ;    1261 	else if(step==s5)
         ;    1262 		{
         ;    1263 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1264 		cnt_del--;
         ;    1265 		if(cnt_del==0)
         ;    1266 			{
         ;    1267 			step=s6;
         ;    1268 			cnt_del=20;
         ;    1269 			}
         ;    1270 		}
         ;    1271 
         ;    1272 	else if(step==s6)
         ;    1273 		{
         ;    1274 		temp|=(1<<PP1);
         ;    1275   		cnt_del--;
         ;    1276 		if(cnt_del==0)
         ;    1277 			{
         ;    1278 			step=sOFF;
         ;    1279 			}
         ;    1280 		}
         ;    1281 
         ;    1282 	}
         ;    1283 
         ;    1284 else if(prog==p4)      //замок
         ;    1285 	{
         ;    1286 	if(step==s1)
         ;    1287 		{
         ;    1288 		temp|=(1<<PP1);
         ;    1289           if(!bMD1)goto step_contr_end;
         ;    1290 
         ;    1291 			if(ee_vacuum_mode==evmOFF)
         ;    1292 				{
         ;    1293 				goto lbl_0004;
         ;    1294 				}
         ;    1295 			else step=s2;
         ;    1296           //step=s2;
         ;    1297 		}
         ;    1298 
         ;    1299 	else if(step==s2)
         ;    1300 		{
         ;    1301 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1302           if(!bVR)goto step_contr_end;
         ;    1303 lbl_0004:
         ;    1304           step=s3;
         ;    1305 		cnt_del=50;
         ;    1306           }
         ;    1307 
         ;    1308 	else if(step==s3)
         ;    1309 		{
         ;    1310 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1311           cnt_del--;
         ;    1312           if(cnt_del==0)
         ;    1313 			{
         ;    1314           	step=s4;
         ;    1315 			cnt_del=120;
         ;    1316 			}
         ;    1317           }
         ;    1318 
         ;    1319    	else if(step==s4)
         ;    1320 		{
         ;    1321 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1322 		cnt_del--;
         ;    1323 		if(cnt_del==0)
         ;    1324 			{
         ;    1325 			step=s5;
         ;    1326 			cnt_del=30;
         ;    1327 			}
         ;    1328 		}
         ;    1329 
         ;    1330 	else if(step==s5)
         ;    1331 		{
         ;    1332 		temp|=(1<<PP1)|(1<<PP4);
         ;    1333 		cnt_del--;
         ;    1334 		if(cnt_del==0)
         ;    1335 			{
         ;    1336 			step=s6;
         ;    1337 			cnt_del=120;
         ;    1338 			}
         ;    1339 		}
         ;    1340 
         ;    1341 	else if(step==s6)
         ;    1342 		{
         ;    1343 		temp|=(1<<PP4);
         ;    1344 		cnt_del--;
         ;    1345 		if(cnt_del==0)
         ;    1346 			{
         ;    1347 			step=sOFF;
         ;    1348 			}
         ;    1349 		}
         ;    1350 
         ;    1351 	}
         ;    1352 	
         ;    1353 step_contr_end:
         ;    1354 
         ;    1355 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1356 
         ;    1357 PORTB=~temp;
         ;    1358 //PORTB=0x55;
         ;    1359 }
         ;    1360 #endif 
         ;    1361 
         ;    1362 #ifdef I380_WI
         ;    1363 //-----------------------------------------------
         ;    1364 void step_contr(void)
         ;    1365 {
         ;    1366 char temp=0;
         ;    1367 DDRB=0xFF;
         ;    1368 
         ;    1369 if(step==sOFF)goto step_contr_end;
         ;    1370 
         ;    1371 else if(prog==p1)
         ;    1372 	{
         ;    1373 	if(step==s1)    //жесть
         ;    1374 		{
         ;    1375 		temp|=(1<<PP1);
         ;    1376           if(!bMD1)goto step_contr_end;
         ;    1377 
         ;    1378 			if(ee_vacuum_mode==evmOFF)
         ;    1379 				{
         ;    1380 				goto lbl_0001;
         ;    1381 				}
         ;    1382 			else step=s2;
         ;    1383 		}
         ;    1384 
         ;    1385 	else if(step==s2)
         ;    1386 		{
         ;    1387 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1388           if(!bVR)goto step_contr_end;
         ;    1389 lbl_0001:
         ;    1390 
         ;    1391           step=s100;
         ;    1392 		cnt_del=40;
         ;    1393           }
         ;    1394 	else if(step==s100)
         ;    1395 		{
         ;    1396 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1397           cnt_del--;
         ;    1398           if(cnt_del==0)
         ;    1399 			{
         ;    1400           	step=s3;
         ;    1401           	cnt_del=50;
         ;    1402 			}
         ;    1403 		}
         ;    1404 
         ;    1405 	else if(step==s3)
         ;    1406 		{
         ;    1407 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1408           cnt_del--;
         ;    1409           if(cnt_del==0)
         ;    1410 			{
         ;    1411           	step=s4;
         ;    1412 			}
         ;    1413 		}
         ;    1414 	else if(step==s4)
         ;    1415 		{
         ;    1416 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1417           if(!bMD2)goto step_contr_end;
         ;    1418           step=s54;
         ;    1419           cnt_del=20;
         ;    1420 		}
         ;    1421 	else if(step==s54)
         ;    1422 		{
         ;    1423 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1424           cnt_del--;
         ;    1425           if(cnt_del==0)
         ;    1426 			{
         ;    1427           	step=s5;
         ;    1428           	cnt_del=20;
         ;    1429 			}
         ;    1430           }
         ;    1431 
         ;    1432 	else if(step==s5)
         ;    1433 		{
         ;    1434 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1435           cnt_del--;
         ;    1436           if(cnt_del==0)
         ;    1437 			{
         ;    1438           	step=s6;
         ;    1439 			}
         ;    1440           }
         ;    1441 	else if(step==s6)
         ;    1442 		{
         ;    1443 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1444           if(!bMD3)goto step_contr_end;
         ;    1445           step=s55;
         ;    1446           cnt_del=40;
         ;    1447 		}
         ;    1448 	else if(step==s55)
         ;    1449 		{
         ;    1450 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1451           cnt_del--;
         ;    1452           if(cnt_del==0)
         ;    1453 			{
         ;    1454           	step=s7;
         ;    1455           	cnt_del=20;
         ;    1456 			}
         ;    1457           }
         ;    1458 	else if(step==s7)
         ;    1459 		{
         ;    1460 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1461           cnt_del--;
         ;    1462           if(cnt_del==0)
         ;    1463 			{
         ;    1464           	step=s8;
         ;    1465           	cnt_del=130;
         ;    1466 			}
         ;    1467           }
         ;    1468 	else if(step==s8)
         ;    1469 		{
         ;    1470 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1471           cnt_del--;
         ;    1472           if(cnt_del==0)
         ;    1473 			{
         ;    1474           	step=s9;
         ;    1475           	cnt_del=20;
         ;    1476 			}
         ;    1477           }
         ;    1478 	else if(step==s9)
         ;    1479 		{
         ;    1480 		temp|=(1<<PP1);
         ;    1481           cnt_del--;
         ;    1482           if(cnt_del==0)
         ;    1483 			{
         ;    1484           	step=sOFF;
         ;    1485           	}
         ;    1486           }
         ;    1487 	}
         ;    1488 
         ;    1489 else if(prog==p2)  //ско
         ;    1490 	{
         ;    1491 	if(step==s1)
         ;    1492 		{
         ;    1493 		temp|=(1<<PP1);
         ;    1494           if(!bMD1)goto step_contr_end;
         ;    1495 
         ;    1496 			if(ee_vacuum_mode==evmOFF)
         ;    1497 				{
         ;    1498 				goto lbl_0002;
         ;    1499 				}
         ;    1500 			else step=s2;
         ;    1501 
         ;    1502           //step=s2;
         ;    1503 		}
         ;    1504 
         ;    1505 	else if(step==s2)
         ;    1506 		{
         ;    1507 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1508           if(!bVR)goto step_contr_end;
         ;    1509 
         ;    1510 lbl_0002:
         ;    1511           step=s100;
         ;    1512 		cnt_del=40;
         ;    1513           }
         ;    1514 	else if(step==s100)
         ;    1515 		{
         ;    1516 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1517           cnt_del--;
         ;    1518           if(cnt_del==0)
         ;    1519 			{
         ;    1520           	step=s3;
         ;    1521           	cnt_del=50;
         ;    1522 			}
         ;    1523 		}
         ;    1524 	else if(step==s3)
         ;    1525 		{
         ;    1526 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1527           cnt_del--;
         ;    1528           if(cnt_del==0)
         ;    1529 			{
         ;    1530           	step=s4;
         ;    1531 			}
         ;    1532 		}
         ;    1533 	else if(step==s4)
         ;    1534 		{
         ;    1535 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1536           if(!bMD2)goto step_contr_end;
         ;    1537           step=s5;
         ;    1538           cnt_del=20;
         ;    1539 		}
         ;    1540 	else if(step==s5)
         ;    1541 		{
         ;    1542 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1543           cnt_del--;
         ;    1544           if(cnt_del==0)
         ;    1545 			{
         ;    1546           	step=s6;
         ;    1547           	cnt_del=130;
         ;    1548 			}
         ;    1549           }
         ;    1550 	else if(step==s6)
         ;    1551 		{
         ;    1552 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1553           cnt_del--;
         ;    1554           if(cnt_del==0)
         ;    1555 			{
         ;    1556           	step=s7;
         ;    1557           	cnt_del=20;
         ;    1558 			}
         ;    1559           }
         ;    1560 	else if(step==s7)
         ;    1561 		{
         ;    1562 		temp|=(1<<PP1);
         ;    1563           cnt_del--;
         ;    1564           if(cnt_del==0)
         ;    1565 			{
         ;    1566           	step=sOFF;
         ;    1567           	}
         ;    1568           }
         ;    1569 	}
         ;    1570 
         ;    1571 else if(prog==p3)   //твист
         ;    1572 	{
         ;    1573 	if(step==s1)
         ;    1574 		{
         ;    1575 		temp|=(1<<PP1);
         ;    1576           if(!bMD1)goto step_contr_end;
         ;    1577 
         ;    1578 			if(ee_vacuum_mode==evmOFF)
         ;    1579 				{
         ;    1580 				goto lbl_0003;
         ;    1581 				}
         ;    1582 			else step=s2;
         ;    1583 
         ;    1584           //step=s2;
         ;    1585 		}
         ;    1586 
         ;    1587 	else if(step==s2)
         ;    1588 		{
         ;    1589 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1590           if(!bVR)goto step_contr_end;
         ;    1591 lbl_0003:
         ;    1592           cnt_del=50;
         ;    1593 		step=s3;
         ;    1594 		}
         ;    1595 
         ;    1596 
         ;    1597 	else	if(step==s3)
         ;    1598 		{
         ;    1599 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1600 		cnt_del--;
         ;    1601 		if(cnt_del==0)
         ;    1602 			{
         ;    1603 			cnt_del=90;
         ;    1604 			step=s4;
         ;    1605 			}
         ;    1606           }
         ;    1607 	else if(step==s4)
         ;    1608 		{
         ;    1609 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1610 		cnt_del--;
         ;    1611  		if(cnt_del==0)
         ;    1612 			{
         ;    1613 			cnt_del=130;
         ;    1614 			step=s5;
         ;    1615 			}
         ;    1616 		}
         ;    1617 
         ;    1618 	else if(step==s5)
         ;    1619 		{
         ;    1620 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1621 		cnt_del--;
         ;    1622 		if(cnt_del==0)
         ;    1623 			{
         ;    1624 			step=s6;
         ;    1625 			cnt_del=20;
         ;    1626 			}
         ;    1627 		}
         ;    1628 
         ;    1629 	else if(step==s6)
         ;    1630 		{
         ;    1631 		temp|=(1<<PP1);
         ;    1632   		cnt_del--;
         ;    1633 		if(cnt_del==0)
         ;    1634 			{
         ;    1635 			step=sOFF;
         ;    1636 			}
         ;    1637 		}
         ;    1638 
         ;    1639 	}
         ;    1640 
         ;    1641 else if(prog==p4)      //замок
         ;    1642 	{
         ;    1643 	if(step==s1)
         ;    1644 		{
         ;    1645 		temp|=(1<<PP1);
         ;    1646           if(!bMD1)goto step_contr_end;
         ;    1647 
         ;    1648 			if(ee_vacuum_mode==evmOFF)
         ;    1649 				{
         ;    1650 				goto lbl_0004;
         ;    1651 				}
         ;    1652 			else step=s2;
         ;    1653           //step=s2;
         ;    1654 		}
         ;    1655 
         ;    1656 	else if(step==s2)
         ;    1657 		{
         ;    1658 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1659           if(!bVR)goto step_contr_end;
         ;    1660 lbl_0004:
         ;    1661           step=s3;
         ;    1662 		cnt_del=50;
         ;    1663           }
         ;    1664 
         ;    1665 	else if(step==s3)
         ;    1666 		{
         ;    1667 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1668           cnt_del--;
         ;    1669           if(cnt_del==0)
         ;    1670 			{
         ;    1671           	step=s4;
         ;    1672 			cnt_del=120U;
         ;    1673 			}
         ;    1674           }
         ;    1675 
         ;    1676    	else if(step==s4)
         ;    1677 		{
         ;    1678 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1679 		cnt_del--;
         ;    1680 		if(cnt_del==0)
         ;    1681 			{
         ;    1682 			step=s5;
         ;    1683 			cnt_del=30;
         ;    1684 			}
         ;    1685 		}
         ;    1686 
         ;    1687 	else if(step==s5)
         ;    1688 		{
         ;    1689 		temp|=(1<<PP1)|(1<<PP4);
         ;    1690 		cnt_del--;
         ;    1691 		if(cnt_del==0)
         ;    1692 			{
         ;    1693 			step=s6;
         ;    1694 			cnt_del=120U;
         ;    1695 			}
         ;    1696 		}
         ;    1697 
         ;    1698 	else if(step==s6)
         ;    1699 		{
         ;    1700 		temp|=(1<<PP4);
         ;    1701 		cnt_del--;
         ;    1702 		if(cnt_del==0)
         ;    1703 			{
         ;    1704 			step=sOFF;
         ;    1705 			}
         ;    1706 		}
         ;    1707 
         ;    1708 	}
         ;    1709 	
         ;    1710 step_contr_end:
         ;    1711 
         ;    1712 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1713 
         ;    1714 PORTB=~temp;
         ;    1715 //PORTB=0x55;
         ;    1716 }
         ;    1717 #endif
         ;    1718 
         ;    1719 #ifdef I220
         ;    1720 //-----------------------------------------------
         ;    1721 void step_contr(void)
         ;    1722 {
         ;    1723 char temp=0;
         ;    1724 DDRB=0xFF;
         ;    1725 
         ;    1726 if(step==sOFF)goto step_contr_end;
         ;    1727 
         ;    1728 else if(prog==p3)   //твист
         ;    1729 	{
         ;    1730 	if(step==s1)
         ;    1731 		{
         ;    1732 		temp|=(1<<PP1);
         ;    1733           if(!bMD1)goto step_contr_end;
         ;    1734 
         ;    1735 			if(ee_vacuum_mode==evmOFF)
         ;    1736 				{
         ;    1737 				goto lbl_0003;
         ;    1738 				}
         ;    1739 			else step=s2;
         ;    1740 
         ;    1741           //step=s2;
         ;    1742 		}
         ;    1743 
         ;    1744 	else if(step==s2)
         ;    1745 		{
         ;    1746 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1747           if(!bVR)goto step_contr_end;
         ;    1748 lbl_0003:
         ;    1749           cnt_del=50;
         ;    1750 		step=s3;
         ;    1751 		}
         ;    1752 
         ;    1753 
         ;    1754 	else	if(step==s3)
         ;    1755 		{
         ;    1756 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1757 		cnt_del--;
         ;    1758 		if(cnt_del==0)
         ;    1759 			{
         ;    1760 			cnt_del=ee_delay[prog,0]*10U;
         ;    1761 			step=s4;
         ;    1762 			}
         ;    1763           }
         ;    1764 	else if(step==s4)
         ;    1765 		{
         ;    1766 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1767 		cnt_del--;
         ;    1768  		if(cnt_del==0)
         ;    1769 			{
         ;    1770 			cnt_del=ee_delay[prog,1]*10U;
         ;    1771 			step=s5;
         ;    1772 			}
         ;    1773 		}
         ;    1774 
         ;    1775 	else if(step==s5)
         ;    1776 		{
         ;    1777 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1778 		cnt_del--;
         ;    1779 		if(cnt_del==0)
         ;    1780 			{
         ;    1781 			step=s6;
         ;    1782 			cnt_del=20;
         ;    1783 			}
         ;    1784 		}
         ;    1785 
         ;    1786 	else if(step==s6)
         ;    1787 		{
         ;    1788 		temp|=(1<<PP1);
         ;    1789   		cnt_del--;
         ;    1790 		if(cnt_del==0)
         ;    1791 			{
         ;    1792 			step=sOFF;
         ;    1793 			}
         ;    1794 		}
         ;    1795 
         ;    1796 	}
         ;    1797 
         ;    1798 else if(prog==p4)      //замок
         ;    1799 	{
         ;    1800 	if(step==s1)
         ;    1801 		{
         ;    1802 		temp|=(1<<PP1);
         ;    1803           if(!bMD1)goto step_contr_end;
         ;    1804 
         ;    1805 			if(ee_vacuum_mode==evmOFF)
         ;    1806 				{
         ;    1807 				goto lbl_0004;
         ;    1808 				}
         ;    1809 			else step=s2;
         ;    1810           //step=s2;
         ;    1811 		}
         ;    1812 
         ;    1813 	else if(step==s2)
         ;    1814 		{
         ;    1815 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1816           if(!bVR)goto step_contr_end;
         ;    1817 lbl_0004:
         ;    1818           step=s3;
         ;    1819 		cnt_del=50;
         ;    1820           }
         ;    1821 
         ;    1822 	else if(step==s3)
         ;    1823 		{
         ;    1824 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1825           cnt_del--;
         ;    1826           if(cnt_del==0)
         ;    1827 			{
         ;    1828           	step=s4;
         ;    1829 			cnt_del=ee_delay[prog,0]*10U;
         ;    1830 			}
         ;    1831           }
         ;    1832 
         ;    1833    	else if(step==s4)
         ;    1834 		{
         ;    1835 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1836 		cnt_del--;
         ;    1837 		if(cnt_del==0)
         ;    1838 			{
         ;    1839 			step=s5;
         ;    1840 			cnt_del=30;
         ;    1841 			}
         ;    1842 		}
         ;    1843 
         ;    1844 	else if(step==s5)
         ;    1845 		{
         ;    1846 		temp|=(1<<PP1)|(1<<PP4);
         ;    1847 		cnt_del--;
         ;    1848 		if(cnt_del==0)
         ;    1849 			{
         ;    1850 			step=s6;
         ;    1851 			cnt_del=ee_delay[prog,1]*10U;
         ;    1852 			}
         ;    1853 		}
         ;    1854 
         ;    1855 	else if(step==s6)
         ;    1856 		{
         ;    1857 		temp|=(1<<PP4);
         ;    1858 		cnt_del--;
         ;    1859 		if(cnt_del==0)
         ;    1860 			{
         ;    1861 			step=sOFF;
         ;    1862 			}
         ;    1863 		}
         ;    1864 
         ;    1865 	}
         ;    1866 	
         ;    1867 step_contr_end:
         ;    1868 
         ;    1869 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1870 
         ;    1871 PORTB=~temp;
         ;    1872 //PORTB=0x55;
         ;    1873 }
         ;    1874 #endif 
         ;    1875 
         ;    1876 #ifdef TVIST_SKO
         ;    1877 //-----------------------------------------------
         ;    1878 void step_contr(void)
         ;    1879 {
         ;    1880 char temp=0;
         ;    1881 DDRB=0xFF;
         ;    1882 
         ;    1883 if(step==sOFF)
         ;    1884 	{
         ;    1885 	temp=0;
         ;    1886 	}
         ;    1887 
         ;    1888 if(prog==p2) //СКО
         ;    1889 	{
         ;    1890 	if(step==s1)
         ;    1891 		{
         ;    1892 		temp|=(1<<PP1);
         ;    1893 
         ;    1894 		cnt_del--;
         ;    1895 		if(cnt_del==0)
         ;    1896 			{
         ;    1897 			step=s2;
         ;    1898 			cnt_del=30;
         ;    1899 			}
         ;    1900 		}
         ;    1901 
         ;    1902 	else if(step==s2)
         ;    1903 		{
         ;    1904 		temp|=(1<<PP1)|(1<<DV);
         ;    1905 
         ;    1906 		cnt_del--;
         ;    1907 		if(cnt_del==0)
         ;    1908 			{
         ;    1909 			step=s3;
         ;    1910 			}
         ;    1911 		}
         ;    1912 
         ;    1913 
         ;    1914 	else if(step==s3)
         ;    1915 		{
         ;    1916 		temp|=(1<<PP1)|(1<<DV)|(1<<PP2);
         ;    1917 
         ;    1918                	if(bMD1)//goto step_contr_end;
         ;    1919                		{  
         ;    1920                		cnt_del=100;
         ;    1921 	       		step=s4;
         ;    1922 	       		}
         ;    1923 	       	}
         ;    1924 
         ;    1925 	else if(step==s4)
         ;    1926 		{
         ;    1927 		temp|=(1<<PP1);
         ;    1928 		cnt_del--;
         ;    1929 		if(cnt_del==0)
         ;    1930 			{
         ;    1931 			step=sOFF;
         ;    1932 			}
         ;    1933 		}
         ;    1934 
         ;    1935 	}
         ;    1936 
         ;    1937 if(prog==p3)
         ;    1938 	{
         ;    1939 	if(step==s1)
         ;    1940 		{
         ;    1941 		temp|=(1<<PP1);
         ;    1942 
         ;    1943 		cnt_del--;
         ;    1944 		if(cnt_del==0)
         ;    1945 			{
         ;    1946 			step=s2;
         ;    1947 			cnt_del=100;
         ;    1948 			}
         ;    1949 		}
         ;    1950 
         ;    1951 	else if(step==s2)
         ;    1952 		{
         ;    1953 		temp|=(1<<PP1)|(1<<PP2);
         ;    1954 
         ;    1955 		cnt_del--;
         ;    1956 		if(cnt_del==0)
         ;    1957 			{
         ;    1958 			step=s3;
         ;    1959 			cnt_del=50;
         ;    1960 			}
         ;    1961 		}
         ;    1962 
         ;    1963 
         ;    1964 	else if(step==s3)
         ;    1965 		{
         ;    1966 		temp|=(1<<PP2);
         ;    1967 	
         ;    1968 		cnt_del--;
         ;    1969 		if(cnt_del==0)
         ;    1970 			{
         ;    1971 			step=sOFF;
         ;    1972 			}
         ;    1973                	}
         ;    1974 	}
         ;    1975 step_contr_end:
         ;    1976 
         ;    1977 PORTB=~temp;
         ;    1978 }
         ;    1979 #endif
         ;    1980 
         ;    1981 #ifdef I380_WI_GAZ
         ;    1982 //-----------------------------------------------
         ;    1983 void step_contr(void)
         ;    1984 {
          _step_contr:
         ;    1985 short temp=0;
         ;    1986 DDRB=0xFF;
00019f 931a      	ST   -Y,R17
0001a0 930a      	ST   -Y,R16
         ;	temp -> R16,R17
0001a1 e000      	LDI  R16,0
0001a2 e010      	LDI  R17,0
0001a3 efef      	LDI  R30,LOW(255)
0001a4 bbe7      	OUT  0x17,R30
         ;    1987 
         ;    1988 if(step==sOFF)goto step_contr_end;
0001a5 20bb      	TST  R11
0001a6 f409      	BRNE _0x45
0001a7 c1b7      	RJMP _0x46
         ;    1989 
         ;    1990 else if(prog==p1)
          _0x45:
0001a8 e0e1      	LDI  R30,LOW(1)
0001a9 15ea      	CP   R30,R10
0001aa f011      	BREQ PC+3
0001ab 940c 0252 	JMP _0x48
         ;    1991 	{
         ;    1992 	if(step==s1)    //жесть
0001ad 15eb      	CP   R30,R11
0001ae f479      	BRNE _0x49
         ;    1993 		{
         ;    1994 		temp|=(1<<PP1);
0001af 6400      	ORI  R16,LOW(64)
         ;    1995           if(!bMD1)goto step_contr_end;
0001b0 91e0 0274 	LDS  R30,_bMD1
0001b2 30e0      	CPI  R30,0
0001b3 f409      	BRNE _0x4A
0001b4 c1aa      	RJMP _0x46
         ;    1996 
         ;    1997 			if(ee_vacuum_mode==evmOFF)
          _0x4A:
0001b5 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0001b6 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0001b7 940e 0742 	CALL __EEPROMRDB
0001b9 3aea      	CPI  R30,LOW(0xAA)
0001ba f061      	BREQ _0x4C
         ;    1998 				{
         ;    1999 				goto lbl_0001;
         ;    2000 				}
         ;    2001 			else step=s2;
0001bb e0e2      	LDI  R30,LOW(2)
0001bc 2ebe      	MOV  R11,R30
         ;    2002 		}
         ;    2003 
         ;    2004 	else if(step==s2)
0001bd c093      	RJMP _0x4E
          _0x49:
0001be e0e2      	LDI  R30,LOW(2)
0001bf 15eb      	CP   R30,R11
0001c0 f479      	BRNE _0x4F
         ;    2005 		{
         ;    2006 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP7);
0001c1 6e02      	ORI  R16,LOW(226)
         ;    2007           if(!bVR)goto step_contr_end;
0001c2 91e0 0273 	LDS  R30,_bVR
0001c4 30e0      	CPI  R30,0
0001c5 f409      	BRNE _0x50
0001c6 c198      	RJMP _0x46
         ;    2008 lbl_0001:
          _0x50:
          _0x4C:
         ;    2009 
         ;    2010           step=s3;
0001c7 e0e3      	LDI  R30,LOW(3)
0001c8 2ebe      	MOV  R11,R30
         ;    2011 		cnt_del=10;
0001c9 e0ea      	LDI  R30,LOW(10)
0001ca e0f0      	LDI  R31,HIGH(10)
0001cb 93e0 0271 	STS  _cnt_del,R30
0001cd 93f0 0272 	STS  _cnt_del+1,R31
         ;    2012           }
         ;    2013 	else if(step==s3)
0001cf c081      	RJMP _0x51
          _0x4F:
0001d0 e0e3      	LDI  R30,LOW(3)
0001d1 15eb      	CP   R30,R11
0001d2 f439      	BRNE _0x52
         ;    2014 		{
         ;    2015 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
0001d3 6e00      	ORI  R16,LOW(224)
         ;    2016           cnt_del--;
0001d4 940e 069e 	CALL SUBOPT_0x1
         ;    2017           if(cnt_del==0)
0001d6 f411      	BRNE _0x53
         ;    2018 			{
         ;    2019           	step=s4;
0001d7 e0e4      	LDI  R30,LOW(4)
0001d8 2ebe      	MOV  R11,R30
         ;    2020 			}
         ;    2021 		}
          _0x53:
         ;    2022 	
         ;    2023 	else if(step==s4)
0001d9 c077      	RJMP _0x54
          _0x52:
0001da e0e4      	LDI  R30,LOW(4)
0001db 15eb      	CP   R30,R11
0001dc f439      	BRNE _0x55
         ;    2024 		{
         ;    2025 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP8);
0001dd 6c01      	ORI  R16,LOW(193)
         ;    2026           if(bVR2)goto step_contr_end;
0001de fc34      	SBRC R3,4
0001df c17f      	RJMP _0x46
         ;    2027           step=s5;
0001e0 e0e5      	LDI  R30,LOW(5)
0001e1 940e 06a9 	CALL SUBOPT_0x2
         ;    2028           cnt_del=40;
         ;    2029 		}
         ;    2030 		
         ;    2031 	else if(step==s5)
0001e3 c06d      	RJMP _0x57
          _0x55:
0001e4 e0e5      	LDI  R30,LOW(5)
0001e5 15eb      	CP   R30,R11
0001e6 f441      	BRNE _0x58
         ;    2032 		{
         ;    2033 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
0001e7 6d00      	ORI  R16,LOW(208)
         ;    2034           cnt_del--;
0001e8 940e 069e 	CALL SUBOPT_0x1
         ;    2035           if(cnt_del==0)
0001ea f419      	BRNE _0x59
         ;    2036 			{
         ;    2037           	step=s6;
0001eb e0e6      	LDI  R30,LOW(6)
0001ec 940e 06b1 	CALL SUBOPT_0x3
         ;    2038           	cnt_del=50;
         ;    2039 			}
         ;    2040 		}  
          _0x59:
         ;    2041 	else if(step==s6)
0001ee c062      	RJMP _0x5A
          _0x58:
0001ef e0e6      	LDI  R30,LOW(6)
0001f0 15eb      	CP   R30,R11
0001f1 f441      	BRNE _0x5B
         ;    2042 		{
         ;    2043 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<DV);
0001f2   +  	__ORWRN 16,17,464
         ;    2044           cnt_del--;
0001f4 940e 069e 	CALL SUBOPT_0x1
         ;    2045           if(cnt_del==0)
0001f6 f411      	BRNE _0x5C
         ;    2046 			{
         ;    2047           	step=s7;
0001f7 e0e7      	LDI  R30,LOW(7)
0001f8 2ebe      	MOV  R11,R30
         ;    2048 			}
         ;    2049 		}		
          _0x5C:
         ;    2050 	else if(step==s7)
0001f9 c057      	RJMP _0x5D
          _0x5B:
0001fa e0e7      	LDI  R30,LOW(7)
0001fb 15eb      	CP   R30,R11
0001fc f441      	BRNE _0x5E
         ;    2051 		{
         ;    2052 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<PP5)|(1<<DV);
0001fd   +  	__ORWRN 16,17,472
         ;    2053           if(!bMD2)goto step_contr_end;
0001ff fe32      	SBRS R3,2
000200 c15e      	RJMP _0x46
         ;    2054           step=s8;
000201 e0e8      	LDI  R30,LOW(8)
000202 940e 06b9 	CALL SUBOPT_0x4
         ;    2055           cnt_del=30;
         ;    2056 		}
         ;    2057 	else if(step==s8)
000204 c04c      	RJMP _0x60
          _0x5E:
000205 e0e8      	LDI  R30,LOW(8)
000206 15eb      	CP   R30,R11
000207 f449      	BRNE _0x61
         ;    2058 		{
         ;    2059 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<PP5)|(1<<DV);
000208   +  	__ORWRN 16,17,472
         ;    2060           cnt_del--;
00020a 940e 069e 	CALL SUBOPT_0x1
         ;    2061           if(cnt_del==0)
00020c f419      	BRNE _0x62
         ;    2062 			{
         ;    2063           	step=s9;
00020d e0e9      	LDI  R30,LOW(9)
00020e 940e 06c1 	CALL SUBOPT_0x5
         ;    2064           	cnt_del=20;
         ;    2065 			}
         ;    2066           }
          _0x62:
         ;    2067 
         ;    2068 	else if(step==s9)
000210 c040      	RJMP _0x63
          _0x61:
000211 e0e9      	LDI  R30,LOW(9)
000212 15eb      	CP   R30,R11
000213 f441      	BRNE _0x64
         ;    2069 		{
         ;    2070 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<DV);
000214   +  	__ORWRN 16,17,464
         ;    2071           cnt_del--;
000216 940e 069e 	CALL SUBOPT_0x1
         ;    2072           if(cnt_del==0)
000218 f411      	BRNE _0x65
         ;    2073 			{
         ;    2074           	step=s10;
000219 e0ea      	LDI  R30,LOW(10)
00021a 2ebe      	MOV  R11,R30
         ;    2075 			}
         ;    2076           }
          _0x65:
         ;    2077 	else if(step==s10)
00021b c035      	RJMP _0x66
          _0x64:
00021c e0ea      	LDI  R30,LOW(10)
00021d 15eb      	CP   R30,R11
00021e f441      	BRNE _0x67
         ;    2078 		{
         ;    2079 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<DV)|(1<<PP6);
00021f   +  	__ORWRN 16,17,468
         ;    2080           if(!bMD3)goto step_contr_end;
000221 fe33      	SBRS R3,3
000222 c13c      	RJMP _0x46
         ;    2081           step=s11;
000223 e0eb      	LDI  R30,LOW(11)
000224 940e 06a9 	CALL SUBOPT_0x2
         ;    2082           cnt_del=40;
         ;    2083 		}
         ;    2084 	else if(step==s11)
000226 c02a      	RJMP _0x69
          _0x67:
000227 e0eb      	LDI  R30,LOW(11)
000228 15eb      	CP   R30,R11
000229 f449      	BRNE _0x6A
         ;    2085 		{
         ;    2086 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<DV)|(1<<PP6);
00022a   +  	__ORWRN 16,17,468
         ;    2087           cnt_del--;
00022c 940e 069e 	CALL SUBOPT_0x1
         ;    2088           if(cnt_del==0)
00022e f419      	BRNE _0x6B
         ;    2089 			{
         ;    2090           	step=s12;
00022f e0ec      	LDI  R30,LOW(12)
000230 940e 06c1 	CALL SUBOPT_0x5
         ;    2091           	cnt_del=20;
         ;    2092 			}
         ;    2093           }
          _0x6B:
         ;    2094 	else if(step==s12)
000232 c01e      	RJMP _0x6C
          _0x6A:
000233 e0ec      	LDI  R30,LOW(12)
000234 15eb      	CP   R30,R11
000235 f441      	BRNE _0x6D
         ;    2095 		{
         ;    2096 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP7);
000236 6c02      	ORI  R16,LOW(194)
         ;    2097           cnt_del--;
000237 940e 069e 	CALL SUBOPT_0x1
         ;    2098           if(cnt_del==0)
000239 f419      	BRNE _0x6E
         ;    2099 			{
         ;    2100           	step=s13;
00023a e0ed      	LDI  R30,LOW(13)
00023b 940e 06c9 	CALL SUBOPT_0x6
         ;    2101           	cnt_del=130;
         ;    2102 			}
         ;    2103           }
          _0x6E:
         ;    2104 	else if(step==s13)
00023d c013      	RJMP _0x6F
          _0x6D:
00023e e0ed      	LDI  R30,LOW(13)
00023f 15eb      	CP   R30,R11
000240 f441      	BRNE _0x70
         ;    2105 		{
         ;    2106 		temp|=(1<<PP1)|(1<<PP2);
000241 6c00      	ORI  R16,LOW(192)
         ;    2107           cnt_del--;
000242 940e 069e 	CALL SUBOPT_0x1
         ;    2108           if(cnt_del==0)
000244 f419      	BRNE _0x71
         ;    2109 			{
         ;    2110           	step=s14;
000245 e0ee      	LDI  R30,LOW(14)
000246 940e 06c1 	CALL SUBOPT_0x5
         ;    2111           	cnt_del=20;
         ;    2112 			}
         ;    2113           }
          _0x71:
         ;    2114 	else if(step==s14)
000248 c008      	RJMP _0x72
          _0x70:
000249 e0ee      	LDI  R30,LOW(14)
00024a 15eb      	CP   R30,R11
00024b f429      	BRNE _0x73
         ;    2115 		{
         ;    2116 		temp|=(1<<PP1);
00024c 6400      	ORI  R16,LOW(64)
         ;    2117           cnt_del--;
00024d 940e 069e 	CALL SUBOPT_0x1
         ;    2118           if(cnt_del==0)
00024f f409      	BRNE _0x74
         ;    2119 			{
         ;    2120           	step=sOFF;
000250 24bb      	CLR  R11
         ;    2121           	}
         ;    2122           }
          _0x74:
         ;    2123 	}
          _0x73:
          _0x72:
          _0x6F:
          _0x6C:
          _0x69:
          _0x66:
          _0x63:
          _0x60:
          _0x5D:
          _0x5A:
          _0x57:
          _0x54:
          _0x51:
          _0x4E:
         ;    2124 
         ;    2125 else if(prog==p2)  //ско
000251 c10d      	RJMP _0x75
          _0x48:
000252 e0e2      	LDI  R30,LOW(2)
000253 15ea      	CP   R30,R10
000254 f011      	BREQ PC+3
000255 940c 02b7 	JMP _0x76
         ;    2126 	{
         ;    2127 	if(step==s1)
000257 e0e1      	LDI  R30,LOW(1)
000258 15eb      	CP   R30,R11
000259 f479      	BRNE _0x77
         ;    2128 		{
         ;    2129 		temp|=(1<<PP1);
00025a 6400      	ORI  R16,LOW(64)
         ;    2130           if(!bMD1)goto step_contr_end;
00025b 91e0 0274 	LDS  R30,_bMD1
00025d 30e0      	CPI  R30,0
00025e f409      	BRNE _0x78
00025f c0ff      	RJMP _0x46
         ;    2131 
         ;    2132 			if(ee_vacuum_mode==evmOFF)
          _0x78:
000260 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000261 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000262 940e 0742 	CALL __EEPROMRDB
000264 3aea      	CPI  R30,LOW(0xAA)
000265 f061      	BREQ _0x7A
         ;    2133 				{
         ;    2134 				goto lbl_0002;
         ;    2135 				}
         ;    2136 			else step=s2;
000266 e0e2      	LDI  R30,LOW(2)
000267 2ebe      	MOV  R11,R30
         ;    2137 
         ;    2138           //step=s2;
         ;    2139 		}
         ;    2140 
         ;    2141 	else if(step==s2)
000268 c04d      	RJMP _0x7C
          _0x77:
000269 e0e2      	LDI  R30,LOW(2)
00026a 15eb      	CP   R30,R11
00026b f451      	BRNE _0x7D
         ;    2142 		{
         ;    2143 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
00026c 6e00      	ORI  R16,LOW(224)
         ;    2144           if(!bVR)goto step_contr_end;
00026d 91e0 0273 	LDS  R30,_bVR
00026f 30e0      	CPI  R30,0
000270 f409      	BRNE _0x7E
000271 c0ed      	RJMP _0x46
         ;    2145 
         ;    2146 lbl_0002:
          _0x7E:
          _0x7A:
         ;    2147           step=s100;
000272 e1e3      	LDI  R30,LOW(19)
000273 940e 06a9 	CALL SUBOPT_0x2
         ;    2148 		cnt_del=40;
         ;    2149           }
         ;    2150 	else if(step==s100)
000275 c040      	RJMP _0x7F
          _0x7D:
000276 e1e3      	LDI  R30,LOW(19)
000277 15eb      	CP   R30,R11
000278 f441      	BRNE _0x80
         ;    2151 		{
         ;    2152 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
000279 6f00      	ORI  R16,LOW(240)
         ;    2153           cnt_del--;
00027a 940e 069e 	CALL SUBOPT_0x1
         ;    2154           if(cnt_del==0)
00027c f419      	BRNE _0x81
         ;    2155 			{
         ;    2156           	step=s3;
00027d e0e3      	LDI  R30,LOW(3)
00027e 940e 06b1 	CALL SUBOPT_0x3
         ;    2157           	cnt_del=50;
         ;    2158 			}
         ;    2159 		}
          _0x81:
         ;    2160 	else if(step==s3)
000280 c035      	RJMP _0x82
          _0x80:
000281 e0e3      	LDI  R30,LOW(3)
000282 15eb      	CP   R30,R11
000283 f441      	BRNE _0x83
         ;    2161 		{
         ;    2162 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
000284   +  	__ORWRN 16,17,496
         ;    2163           cnt_del--;
000286 940e 069e 	CALL SUBOPT_0x1
         ;    2164           if(cnt_del==0)
000288 f411      	BRNE _0x84
         ;    2165 			{
         ;    2166           	step=s4;
000289 e0e4      	LDI  R30,LOW(4)
00028a 2ebe      	MOV  R11,R30
         ;    2167 			}
         ;    2168 		}
          _0x84:
         ;    2169 	else if(step==s4)
00028b c02a      	RJMP _0x85
          _0x83:
00028c e0e4      	LDI  R30,LOW(4)
00028d 15eb      	CP   R30,R11
00028e f441      	BRNE _0x86
         ;    2170 		{
         ;    2171 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
00028f   +  	__ORWRN 16,17,504
         ;    2172           if(!bMD2)goto step_contr_end;
000291 fe32      	SBRS R3,2
000292 c0cc      	RJMP _0x46
         ;    2173           step=s5;
000293 e0e5      	LDI  R30,LOW(5)
000294 940e 06c1 	CALL SUBOPT_0x5
         ;    2174           cnt_del=20;
         ;    2175 		}
         ;    2176 	else if(step==s5)
000296 c01f      	RJMP _0x88
          _0x86:
000297 e0e5      	LDI  R30,LOW(5)
000298 15eb      	CP   R30,R11
000299 f449      	BRNE _0x89
         ;    2177 		{
         ;    2178 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
00029a   +  	__ORWRN 16,17,496
         ;    2179           cnt_del--;
00029c 940e 069e 	CALL SUBOPT_0x1
         ;    2180           if(cnt_del==0)
00029e f419      	BRNE _0x8A
         ;    2181 			{
         ;    2182           	step=s6;
00029f e0e6      	LDI  R30,LOW(6)
0002a0 940e 06c9 	CALL SUBOPT_0x6
         ;    2183           	cnt_del=130;
         ;    2184 			}
         ;    2185           }
          _0x8A:
         ;    2186 	else if(step==s6)
0002a2 c013      	RJMP _0x8B
          _0x89:
0002a3 e0e6      	LDI  R30,LOW(6)
0002a4 15eb      	CP   R30,R11
0002a5 f441      	BRNE _0x8C
         ;    2187 		{
         ;    2188 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
0002a6 6d00      	ORI  R16,LOW(208)
         ;    2189           cnt_del--;
0002a7 940e 069e 	CALL SUBOPT_0x1
         ;    2190           if(cnt_del==0)
0002a9 f419      	BRNE _0x8D
         ;    2191 			{
         ;    2192           	step=s7;
0002aa e0e7      	LDI  R30,LOW(7)
0002ab 940e 06c1 	CALL SUBOPT_0x5
         ;    2193           	cnt_del=20;
         ;    2194 			}
         ;    2195           }
          _0x8D:
         ;    2196 	else if(step==s7)
0002ad c008      	RJMP _0x8E
          _0x8C:
0002ae e0e7      	LDI  R30,LOW(7)
0002af 15eb      	CP   R30,R11
0002b0 f429      	BRNE _0x8F
         ;    2197 		{
         ;    2198 		temp|=(1<<PP1);
0002b1 6400      	ORI  R16,LOW(64)
         ;    2199           cnt_del--;
0002b2 940e 069e 	CALL SUBOPT_0x1
         ;    2200           if(cnt_del==0)
0002b4 f409      	BRNE _0x90
         ;    2201 			{
         ;    2202           	step=sOFF;
0002b5 24bb      	CLR  R11
         ;    2203           	}
         ;    2204           }
          _0x90:
         ;    2205 	}
          _0x8F:
          _0x8E:
          _0x8B:
          _0x88:
          _0x85:
          _0x82:
          _0x7F:
          _0x7C:
         ;    2206 
         ;    2207 else if(prog==p3)   //твист
0002b6 c0a8      	RJMP _0x91
          _0x76:
0002b7 e0e3      	LDI  R30,LOW(3)
0002b8 15ea      	CP   R30,R10
0002b9 f011      	BREQ PC+3
0002ba 940c 0314 	JMP _0x92
         ;    2208 	{
         ;    2209 	if(step==s1)
0002bc e0e1      	LDI  R30,LOW(1)
0002bd 15eb      	CP   R30,R11
0002be f479      	BRNE _0x93
         ;    2210 		{
         ;    2211 		temp|=(1<<PP1);
0002bf 6400      	ORI  R16,LOW(64)
         ;    2212           if(!bMD1)goto step_contr_end;
0002c0 91e0 0274 	LDS  R30,_bMD1
0002c2 30e0      	CPI  R30,0
0002c3 f409      	BRNE _0x94
0002c4 c09a      	RJMP _0x46
         ;    2213 
         ;    2214 			if(ee_vacuum_mode==evmOFF)
          _0x94:
0002c5 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0002c6 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0002c7 940e 0742 	CALL __EEPROMRDB
0002c9 3aea      	CPI  R30,LOW(0xAA)
0002ca f061      	BREQ _0x96
         ;    2215 				{
         ;    2216 				goto lbl_0003;
         ;    2217 				}
         ;    2218 			else step=s2;
0002cb e0e2      	LDI  R30,LOW(2)
0002cc 2ebe      	MOV  R11,R30
         ;    2219 
         ;    2220           //step=s2;
         ;    2221 		}
         ;    2222 
         ;    2223 	else if(step==s2)
0002cd c045      	RJMP _0x98
          _0x93:
0002ce e0e2      	LDI  R30,LOW(2)
0002cf 15eb      	CP   R30,R11
0002d0 f479      	BRNE _0x99
         ;    2224 		{
         ;    2225 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
0002d1 6e00      	ORI  R16,LOW(224)
         ;    2226           if(!bVR)goto step_contr_end;
0002d2 91e0 0273 	LDS  R30,_bVR
0002d4 30e0      	CPI  R30,0
0002d5 f409      	BRNE _0x9A
0002d6 c088      	RJMP _0x46
         ;    2227 lbl_0003:
          _0x9A:
          _0x96:
         ;    2228           cnt_del=50;
0002d7 e3e2      	LDI  R30,LOW(50)
0002d8 e0f0      	LDI  R31,HIGH(50)
0002d9 93e0 0271 	STS  _cnt_del,R30
0002db 93f0 0272 	STS  _cnt_del+1,R31
         ;    2229 		step=s3;
0002dd e0e3      	LDI  R30,LOW(3)
0002de 2ebe      	MOV  R11,R30
         ;    2230 		}
         ;    2231 
         ;    2232 
         ;    2233 	else	if(step==s3)
0002df c033      	RJMP _0x9B
          _0x99:
0002e0 e0e3      	LDI  R30,LOW(3)
0002e1 15eb      	CP   R30,R11
0002e2 f469      	BRNE _0x9C
         ;    2234 		{
         ;    2235 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
0002e3 6f00      	ORI  R16,LOW(240)
         ;    2236 		cnt_del--;
0002e4 940e 069e 	CALL SUBOPT_0x1
         ;    2237 		if(cnt_del==0)
0002e6 f441      	BRNE _0x9D
         ;    2238 			{
         ;    2239 			cnt_del=90;
0002e7 e5ea      	LDI  R30,LOW(90)
0002e8 e0f0      	LDI  R31,HIGH(90)
0002e9 93e0 0271 	STS  _cnt_del,R30
0002eb 93f0 0272 	STS  _cnt_del+1,R31
         ;    2240 			step=s4;
0002ed e0e4      	LDI  R30,LOW(4)
0002ee 2ebe      	MOV  R11,R30
         ;    2241 			}
         ;    2242           }
          _0x9D:
         ;    2243 	else if(step==s4)
0002ef c023      	RJMP _0x9E
          _0x9C:
0002f0 e0e4      	LDI  R30,LOW(4)
0002f1 15eb      	CP   R30,R11
0002f2 f469      	BRNE _0x9F
         ;    2244 		{
         ;    2245 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
0002f3 6f0a      	ORI  R16,LOW(250)
         ;    2246 		cnt_del--;
0002f4 940e 069e 	CALL SUBOPT_0x1
         ;    2247  		if(cnt_del==0)
0002f6 f441      	BRNE _0xA0
         ;    2248 			{
         ;    2249 			cnt_del=130;
0002f7 e8e2      	LDI  R30,LOW(130)
0002f8 e0f0      	LDI  R31,HIGH(130)
0002f9 93e0 0271 	STS  _cnt_del,R30
0002fb 93f0 0272 	STS  _cnt_del+1,R31
         ;    2250 			step=s5;
0002fd e0e5      	LDI  R30,LOW(5)
0002fe 2ebe      	MOV  R11,R30
         ;    2251 			}
         ;    2252 		}
          _0xA0:
         ;    2253 
         ;    2254 	else if(step==s5)
0002ff c013      	RJMP _0xA1
          _0x9F:
000300 e0e5      	LDI  R30,LOW(5)
000301 15eb      	CP   R30,R11
000302 f441      	BRNE _0xA2
         ;    2255 		{
         ;    2256 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
000303 6c0a      	ORI  R16,LOW(202)
         ;    2257 		cnt_del--;
000304 940e 069e 	CALL SUBOPT_0x1
         ;    2258 		if(cnt_del==0)
000306 f419      	BRNE _0xA3
         ;    2259 			{
         ;    2260 			step=s6;
000307 e0e6      	LDI  R30,LOW(6)
000308 940e 06c1 	CALL SUBOPT_0x5
         ;    2261 			cnt_del=20;
         ;    2262 			}
         ;    2263 		}
          _0xA3:
         ;    2264 
         ;    2265 	else if(step==s6)
00030a c008      	RJMP _0xA4
          _0xA2:
00030b e0e6      	LDI  R30,LOW(6)
00030c 15eb      	CP   R30,R11
00030d f429      	BRNE _0xA5
         ;    2266 		{
         ;    2267 		temp|=(1<<PP1);
00030e 6400      	ORI  R16,LOW(64)
         ;    2268   		cnt_del--;
00030f 940e 069e 	CALL SUBOPT_0x1
         ;    2269 		if(cnt_del==0)
000311 f409      	BRNE _0xA6
         ;    2270 			{
         ;    2271 			step=sOFF;
000312 24bb      	CLR  R11
         ;    2272 			}
         ;    2273 		}
          _0xA6:
         ;    2274 
         ;    2275 	}
          _0xA5:
          _0xA4:
          _0xA1:
          _0x9E:
          _0x9B:
          _0x98:
         ;    2276 
         ;    2277 else if(prog==p4)      //замок
000313 c04b      	RJMP _0xA7
          _0x92:
000314 e0e4      	LDI  R30,LOW(4)
000315 15ea      	CP   R30,R10
000316 f011      	BREQ PC+3
000317 940c 035f 	JMP _0xA8
         ;    2278 	{
         ;    2279 	if(step==s1)
000319 e0e1      	LDI  R30,LOW(1)
00031a 15eb      	CP   R30,R11
00031b f471      	BRNE _0xA9
         ;    2280 		{
         ;    2281 		temp|=(1<<PP1);
00031c 6400      	ORI  R16,LOW(64)
         ;    2282           if(!bMD1)goto step_contr_end;
00031d 91e0 0274 	LDS  R30,_bMD1
00031f 30e0      	CPI  R30,0
000320 f1f1      	BREQ _0x46
         ;    2283 
         ;    2284 			if(ee_vacuum_mode==evmOFF)
000321 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000322 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000323 940e 0742 	CALL __EEPROMRDB
000325 3aea      	CPI  R30,LOW(0xAA)
000326 f059      	BREQ _0xAC
         ;    2285 				{
         ;    2286 				goto lbl_0004;
         ;    2287 				}
         ;    2288 			else step=s2;
000327 e0e2      	LDI  R30,LOW(2)
000328 2ebe      	MOV  R11,R30
         ;    2289           //step=s2;
         ;    2290 		}
         ;    2291 
         ;    2292 	else if(step==s2)
000329 c035      	RJMP _0xAE
          _0xA9:
00032a e0e2      	LDI  R30,LOW(2)
00032b 15eb      	CP   R30,R11
00032c f449      	BRNE _0xAF
         ;    2293 		{
         ;    2294 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
00032d 6e00      	ORI  R16,LOW(224)
         ;    2295           if(!bVR)goto step_contr_end;
00032e 91e0 0273 	LDS  R30,_bVR
000330 30e0      	CPI  R30,0
000331 f169      	BREQ _0x46
         ;    2296 lbl_0004:
          _0xAC:
         ;    2297           step=s3;
000332 e0e3      	LDI  R30,LOW(3)
000333 940e 06b1 	CALL SUBOPT_0x3
         ;    2298 		cnt_del=50;
         ;    2299           }
         ;    2300 
         ;    2301 	else if(step==s3)
000335 c029      	RJMP _0xB1
          _0xAF:
000336 e0e3      	LDI  R30,LOW(3)
000337 15eb      	CP   R30,R11
000338 f441      	BRNE _0xB2
         ;    2302 		{
         ;    2303 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
000339 6f00      	ORI  R16,LOW(240)
         ;    2304           cnt_del--;
00033a 940e 069e 	CALL SUBOPT_0x1
         ;    2305           if(cnt_del==0)
00033c f419      	BRNE _0xB3
         ;    2306 			{
         ;    2307           	step=s4;
00033d e0e4      	LDI  R30,LOW(4)
00033e 940e 06d1 	CALL SUBOPT_0x7
         ;    2308 			cnt_del=120U;
         ;    2309 			}
         ;    2310           }
          _0xB3:
         ;    2311 
         ;    2312    	else if(step==s4)
000340 c01e      	RJMP _0xB4
          _0xB2:
000341 e0e4      	LDI  R30,LOW(4)
000342 15eb      	CP   R30,R11
000343 f441      	BRNE _0xB5
         ;    2313 		{
         ;    2314 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
000344 6d00      	ORI  R16,LOW(208)
         ;    2315 		cnt_del--;
000345 940e 069e 	CALL SUBOPT_0x1
         ;    2316 		if(cnt_del==0)
000347 f419      	BRNE _0xB6
         ;    2317 			{
         ;    2318 			step=s5;
000348 e0e5      	LDI  R30,LOW(5)
000349 940e 06b9 	CALL SUBOPT_0x4
         ;    2319 			cnt_del=30;
         ;    2320 			}
         ;    2321 		}
          _0xB6:
         ;    2322 
         ;    2323 	else if(step==s5)
00034b c013      	RJMP _0xB7
          _0xB5:
00034c e0e5      	LDI  R30,LOW(5)
00034d 15eb      	CP   R30,R11
00034e f441      	BRNE _0xB8
         ;    2324 		{
         ;    2325 		temp|=(1<<PP1)|(1<<PP4);
00034f 6500      	ORI  R16,LOW(80)
         ;    2326 		cnt_del--;
000350 940e 069e 	CALL SUBOPT_0x1
         ;    2327 		if(cnt_del==0)
000352 f419      	BRNE _0xB9
         ;    2328 			{
         ;    2329 			step=s6;
000353 e0e6      	LDI  R30,LOW(6)
000354 940e 06d1 	CALL SUBOPT_0x7
         ;    2330 			cnt_del=120U;
         ;    2331 			}
         ;    2332 		}
          _0xB9:
         ;    2333 
         ;    2334 	else if(step==s6)
000356 c008      	RJMP _0xBA
          _0xB8:
000357 e0e6      	LDI  R30,LOW(6)
000358 15eb      	CP   R30,R11
000359 f429      	BRNE _0xBB
         ;    2335 		{
         ;    2336 		temp|=(1<<PP4);
00035a 6100      	ORI  R16,LOW(16)
         ;    2337 		cnt_del--;
00035b 940e 069e 	CALL SUBOPT_0x1
         ;    2338 		if(cnt_del==0)
00035d f409      	BRNE _0xBC
         ;    2339 			{
         ;    2340 			step=sOFF;
00035e 24bb      	CLR  R11
         ;    2341 			}
         ;    2342 		}
          _0xBC:
         ;    2343 
         ;    2344 	}
          _0xBB:
          _0xBA:
          _0xB7:
          _0xB4:
          _0xB1:
          _0xAE:
         ;    2345 	
         ;    2346 step_contr_end:
          _0xA8:
          _0xA7:
          _0x91:
          _0x75:
          _0x46:
         ;    2347 
         ;    2348 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
00035f e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000360 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000361 940e 0742 	CALL __EEPROMRDB
000363 3aea      	CPI  R30,LOW(0xAA)
000364 f409      	BRNE _0xBD
000365 7d0f      	ANDI R16,LOW(65503)
         ;    2349 
         ;    2350 //temp=0;
         ;    2351 //temp|=(1<<DV);
         ;    2352 
         ;    2353 PORTB=~((char)temp);
          _0xBD:
000366 2fe0      	MOV  R30,R16
000367 95e0      	COM  R30
000368 bbe8      	OUT  0x18,R30
         ;    2354 //PORTB=0x55;
         ;    2355 
         ;    2356 DDRD.1=1;
000369 9a89      	SBI  0x11,1
         ;    2357 if(temp&(1<<DV))PORTD.1=0;
00036a ff10      	SBRS R17,0
00036b c002      	RJMP _0xBE
00036c 9891      	CBI  0x12,1
         ;    2358 else PORTD.1=1;
00036d c001      	RJMP _0xBF
          _0xBE:
00036e 9a91      	SBI  0x12,1
          _0xBF:
         ;    2359 }
00036f 9109      	LD   R16,Y+
000370 9119      	LD   R17,Y+
000371 9508      	RET
         ;    2360 #endif
         ;    2361 
         ;    2362 
         ;    2363 //-----------------------------------------------
         ;    2364 void bin2bcd_int(unsigned int in)
         ;    2365 {
          _bin2bcd_int:
         ;    2366 char i;
         ;    2367 for(i=3;i>0;i--)
000372 930a      	ST   -Y,R16
         ;	in -> Y+1
         ;	i -> R16
000373 e003      	LDI  R16,LOW(3)
          _0xC1:
000374 e0e0      	LDI  R30,LOW(0)
000375 17e0      	CP   R30,R16
000376 f4c8      	BRSH _0xC2
         ;    2368 	{
         ;    2369 	dig[i]=in%10;
000377 2fe0      	MOV  R30,R16
000378 e0f0      	LDI  R31,0
000379 59eb      	SUBI R30,LOW(-_dig)
00037a 4ffd      	SBCI R31,HIGH(-_dig)
00037b 93ff      	PUSH R31
00037c 93ef      	PUSH R30
00037d 81a9      	LDD  R26,Y+1
00037e 81ba      	LDD  R27,Y+1+1
00037f e0ea      	LDI  R30,LOW(10)
000380 e0f0      	LDI  R31,HIGH(10)
000381 940e 073b 	CALL __MODW21U
000383 91af      	POP  R26
000384 91bf      	POP  R27
000385 93ec      	ST   X,R30
         ;    2370 	in/=10;
000386 81a9      	LDD  R26,Y+1
000387 81ba      	LDD  R27,Y+1+1
000388 e0ea      	LDI  R30,LOW(10)
000389 e0f0      	LDI  R31,HIGH(10)
00038a 940e 0728 	CALL __DIVW21U
00038c 83e9      	STD  Y+1,R30
00038d 83fa      	STD  Y+1+1,R31
         ;    2371 	}   
00038e 5001      	SUBI R16,1
00038f cfe4      	RJMP _0xC1
          _0xC2:
         ;    2372 }
000390 8108      	LDD  R16,Y+0
000391 c06a      	RJMP _0x12D
         ;    2373 
         ;    2374 //-----------------------------------------------
         ;    2375 void bcd2ind(char s)
         ;    2376 {
          _bcd2ind:
         ;    2377 char i;
         ;    2378 bZ=1;
000392 930a      	ST   -Y,R16
         ;	s -> Y+1
         ;	i -> R16
000393 9468      	SET
000394 f823      	BLD  R2,3
         ;    2379 for (i=0;i<5;i++)
000395 e000      	LDI  R16,LOW(0)
          _0xC4:
000396 3005      	CPI  R16,5
000397 f010      	BRLO PC+3
000398 940c 03ef 	JMP _0xC5
         ;    2380 	{
         ;    2381 	if(bZ&&(!dig[i-1])&&(i<4))
00039a fe23      	SBRS R2,3
00039b c009      	RJMP _0xC7
00039c 940e 06d9 	CALL SUBOPT_0x8
00039e 59eb      	SUBI R30,LOW(-_dig)
00039f 4ffd      	SBCI R31,HIGH(-_dig)
0003a0 81e0      	LD   R30,Z
0003a1 30e0      	CPI  R30,0
0003a2 f411      	BRNE _0xC7
0003a3 3004      	CPI  R16,4
0003a4 f008      	BRLO _0xC8
          _0xC7:
0003a5 c01f      	RJMP _0xC6
          _0xC8:
         ;    2382 		{
         ;    2383 		if((4-i)>s)
0003a6 e0e4      	LDI  R30,LOW(4)
0003a7 1be0      	SUB  R30,R16
0003a8 2fae      	MOV  R26,R30
0003a9 81e9      	LDD  R30,Y+1
0003aa 17ea      	CP   R30,R26
0003ab f460      	BRSH _0xC9
         ;    2384 			{
         ;    2385 			ind_out[i-1]=DIGISYM[10];
0003ac 940e 06d9 	CALL SUBOPT_0x8
0003ae 5ae0      	SUBI R30,LOW(-_ind_out)
0003af 4ffd      	SBCI R31,HIGH(-_ind_out)
0003b0 93ff      	PUSH R31
0003b1 93ef      	PUSH R30
0003b2   +  	__POINTW1FN _DIGISYM,10
0003b4 91e4      	LPM  R30,Z
0003b5 91af      	POP  R26
0003b6 91bf      	POP  R27
0003b7 c00b      	RJMP _0x12E
         ;    2386 			}
         ;    2387 		else ind_out[i-1]=DIGISYM[0];	
          _0xC9:
0003b8 940e 06d9 	CALL SUBOPT_0x8
0003ba 5ae0      	SUBI R30,LOW(-_ind_out)
0003bb 4ffd      	SBCI R31,HIGH(-_ind_out)
0003bc 93ff      	PUSH R31
0003bd 93ef      	PUSH R30
0003be e5ea      	LDI  R30,LOW(_DIGISYM*2)
0003bf e0f0      	LDI  R31,HIGH(_DIGISYM*2)
0003c0 91e4      	LPM  R30,Z
0003c1 91af      	POP  R26
0003c2 91bf      	POP  R27
          _0x12E:
0003c3 93ec      	ST   X,R30
         ;    2388 		}
         ;    2389 	else
0003c4 c018      	RJMP _0xCB
          _0xC6:
         ;    2390 		{
         ;    2391 		ind_out[i-1]=DIGISYM[dig[i-1]];
0003c5 940e 06d9 	CALL SUBOPT_0x8
0003c7 5ae0      	SUBI R30,LOW(-_ind_out)
0003c8 4ffd      	SBCI R31,HIGH(-_ind_out)
0003c9 93ff      	PUSH R31
0003ca 93ef      	PUSH R30
0003cb e5ea      	LDI  R30,LOW(_DIGISYM*2)
0003cc e0f0      	LDI  R31,HIGH(_DIGISYM*2)
0003cd 93ff      	PUSH R31
0003ce 93ef      	PUSH R30
0003cf 940e 06d9 	CALL SUBOPT_0x8
0003d1 59eb      	SUBI R30,LOW(-_dig)
0003d2 4ffd      	SBCI R31,HIGH(-_dig)
0003d3 81e0      	LD   R30,Z
0003d4 91af      	POP  R26
0003d5 91bf      	POP  R27
0003d6 940e 06dd 	CALL SUBOPT_0x9
0003d8 91af      	POP  R26
0003d9 91bf      	POP  R27
0003da 93ec      	ST   X,R30
         ;    2392 		bZ=0;
0003db 94e8      	CLT
0003dc f823      	BLD  R2,3
         ;    2393 		}                   
          _0xCB:
         ;    2394 
         ;    2395 	if(s)
0003dd 81e9      	LDD  R30,Y+1
0003de 30e0      	CPI  R30,0
0003df f069      	BREQ _0xCC
         ;    2396 		{
         ;    2397 		ind_out[3-s]&=0b01111111;
0003e0 81a9      	LDD  R26,Y+1
0003e1 e0e3      	LDI  R30,LOW(3)
0003e2 1bea      	SUB  R30,R26
0003e3 e0f0      	LDI  R31,0
0003e4 5ae0      	SUBI R30,LOW(-_ind_out)
0003e5 4ffd      	SBCI R31,HIGH(-_ind_out)
0003e6 93ff      	PUSH R31
0003e7 93ef      	PUSH R30
0003e8 81e0      	LD   R30,Z
0003e9 77ef      	ANDI R30,0x7F
0003ea 91af      	POP  R26
0003eb 91bf      	POP  R27
0003ec 93ec      	ST   X,R30
         ;    2398 		}	
         ;    2399  
         ;    2400 	}
          _0xCC:
0003ed 5f0f      	SUBI R16,-1
0003ee cfa7      	RJMP _0xC4
          _0xC5:
         ;    2401 }            
0003ef 8108      	LDD  R16,Y+0
0003f0 9622      	ADIW R28,2
0003f1 9508      	RET
         ;    2402 //-----------------------------------------------
         ;    2403 void int2ind(unsigned int in,char s)
         ;    2404 {
          _int2ind:
         ;    2405 bin2bcd_int(in);
0003f2 81e9      	LDD  R30,Y+1
0003f3 81fa      	LDD  R31,Y+1+1
0003f4 93fa      	ST   -Y,R31
0003f5 93ea      	ST   -Y,R30
0003f6 940e 0372 	CALL _bin2bcd_int
         ;    2406 bcd2ind(s);
0003f8 81e8      	LD   R30,Y
0003f9 93ea      	ST   -Y,R30
0003fa 940e 0392 	CALL _bcd2ind
         ;    2407 
         ;    2408 } 
          _0x12D:
0003fc 9623      	ADIW R28,3
0003fd 9508      	RET
         ;    2409 
         ;    2410 //-----------------------------------------------
         ;    2411 void ind_hndl(void)
         ;    2412 {
          _ind_hndl:
         ;    2413 int2ind(ee_delay[prog,sub_ind],1);  
0003fe 940e 06e2 	CALL SUBOPT_0xA
000400 93fa      	ST   -Y,R31
000401 93ea      	ST   -Y,R30
000402 e0e1      	LDI  R30,LOW(1)
000403 93ea      	ST   -Y,R30
000404 940e 03f2 	CALL _int2ind
         ;    2414 //ind_out[0]=0xff;//DIGISYM[0];
         ;    2415 //ind_out[1]=0xff;//DIGISYM[1];
         ;    2416 //ind_out[2]=DIGISYM[2];//0xff;
         ;    2417 //ind_out[0]=DIGISYM[7]; 
         ;    2418 
         ;    2419 ind_out[0]=DIGISYM[sub_ind+1];
000406 e5ea      	LDI  R30,LOW(_DIGISYM*2)
000407 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
000408 93ff      	PUSH R31
000409 93ef      	PUSH R30
00040a 2ded      	MOV  R30,R13
00040b 5fef      	SUBI R30,-LOW(1)
00040c 91af      	POP  R26
00040d 91bf      	POP  R27
00040e 940e 06dd 	CALL SUBOPT_0x9
000410 93e0 0260 	STS  _ind_out,R30
         ;    2420 }
000412 9508      	RET
         ;    2421 
         ;    2422 //-----------------------------------------------
         ;    2423 void led_hndl(void)
         ;    2424 {
          _led_hndl:
         ;    2425 ind_out[4]=DIGISYM[10]; 
000413   +  	__POINTW1FN _DIGISYM,10
000415 91e4      	LPM  R30,Z
000416   +  	__PUTB1MN _ind_out,4
         ;    2426 
         ;    2427 ind_out[4]&=~(1<<LED_POW_ON); 
000418   +  	__POINTW1MN _ind_out,4
00041a 93ff      	PUSH R31
00041b 93ef      	PUSH R30
00041c 81e0      	LD   R30,Z
00041d 7def      	ANDI R30,0xDF
00041e 91af      	POP  R26
00041f 91bf      	POP  R27
000420 93ec      	ST   X,R30
         ;    2428 
         ;    2429 if(step!=sOFF)
000421 20bb      	TST  R11
000422 f049      	BREQ _0xCD
         ;    2430 	{
         ;    2431 	ind_out[4]&=~(1<<LED_WRK);
000423   +  	__POINTW1MN _ind_out,4
000425 93ff      	PUSH R31
000426 93ef      	PUSH R30
000427 81e0      	LD   R30,Z
000428 7bef      	ANDI R30,0xBF
000429 91af      	POP  R26
00042a 91bf      	POP  R27
00042b c008      	RJMP _0x12F
         ;    2432 	}
         ;    2433 else ind_out[4]|=(1<<LED_WRK);
          _0xCD:
00042c   +  	__POINTW1MN _ind_out,4
00042e 93ff      	PUSH R31
00042f 93ef      	PUSH R30
000430 81e0      	LD   R30,Z
000431 64e0      	ORI  R30,0x40
000432 91af      	POP  R26
000433 91bf      	POP  R27
          _0x12F:
000434 93ec      	ST   X,R30
         ;    2434 
         ;    2435 
         ;    2436 if(step==sOFF)
000435 20bb      	TST  R11
000436 f4a9      	BRNE _0xCF
         ;    2437 	{
         ;    2438  	if(bERR)
000437 fe31      	SBRS R3,1
000438 c009      	RJMP _0xD0
         ;    2439 		{
         ;    2440 		ind_out[4]&=~(1<<LED_ERROR);
000439   +  	__POINTW1MN _ind_out,4
00043b 93ff      	PUSH R31
00043c 93ef      	PUSH R30
00043d 81e0      	LD   R30,Z
00043e 7fee      	ANDI R30,0xFE
00043f 91af      	POP  R26
000440 91bf      	POP  R27
000441 c008      	RJMP _0x130
         ;    2441 		}
         ;    2442 	else
          _0xD0:
         ;    2443 		{
         ;    2444 		ind_out[4]|=(1<<LED_ERROR);
000442   +  	__POINTW1MN _ind_out,4
000444 93ff      	PUSH R31
000445 93ef      	PUSH R30
000446 81e0      	LD   R30,Z
000447 60e1      	ORI  R30,1
000448 91af      	POP  R26
000449 91bf      	POP  R27
          _0x130:
00044a 93ec      	ST   X,R30
         ;    2445 		}
         ;    2446      }
         ;    2447 else ind_out[4]|=(1<<LED_ERROR);
00044b c009      	RJMP _0xD2
          _0xCF:
00044c   +  	__POINTW1MN _ind_out,4
00044e 93ff      	PUSH R31
00044f 93ef      	PUSH R30
000450 81e0      	LD   R30,Z
000451 60e1      	ORI  R30,1
000452 91af      	POP  R26
000453 91bf      	POP  R27
000454 93ec      	ST   X,R30
          _0xD2:
         ;    2448 
         ;    2449 /* 	if(bMD1)
         ;    2450 		{
         ;    2451 		ind_out[4]&=~(1<<LED_ERROR);
         ;    2452 		}
         ;    2453 	else
         ;    2454 		{
         ;    2455 		ind_out[4]|=(1<<LED_ERROR);
         ;    2456 		} */
         ;    2457 
         ;    2458 //if(bERR)ind_out[4]&=~(1<<LED_ERROR);
         ;    2459 if(ee_vacuum_mode==evmON)ind_out[4]&=~(1<<LED_VACUUM);
000455 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000456 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000457 940e 0742 	CALL __EEPROMRDB
000459 35e5      	CPI  R30,LOW(0x55)
00045a f449      	BRNE _0xD3
00045b   +  	__POINTW1MN _ind_out,4
00045d 93ff      	PUSH R31
00045e 93ef      	PUSH R30
00045f 81e0      	LD   R30,Z
000460 77ef      	ANDI R30,0x7F
000461 91af      	POP  R26
000462 91bf      	POP  R27
000463 c008      	RJMP _0x131
         ;    2460 else ind_out[4]|=(1<<LED_VACUUM);
          _0xD3:
000464   +  	__POINTW1MN _ind_out,4
000466 93ff      	PUSH R31
000467 93ef      	PUSH R30
000468 81e0      	LD   R30,Z
000469 68e0      	ORI  R30,0x80
00046a 91af      	POP  R26
00046b 91bf      	POP  R27
          _0x131:
00046c 93ec      	ST   X,R30
         ;    2461 
         ;    2462 if(prog==p1) ind_out[4]&=~(1<<LED_PROG1);
00046d e0e1      	LDI  R30,LOW(1)
00046e 15ea      	CP   R30,R10
00046f f451      	BRNE _0xD5
000470   +  	__POINTW1MN _ind_out,4
000472 93ff      	PUSH R31
000473 93ef      	PUSH R30
000474 81e0      	LD   R30,Z
000475 7eef      	ANDI R30,0xEF
000476 91af      	POP  R26
000477 91bf      	POP  R27
000478 93ec      	ST   X,R30
         ;    2463 else if(prog==p2) ind_out[4]&=~(1<<LED_PROG2);
000479 c026      	RJMP _0xD6
          _0xD5:
00047a e0e2      	LDI  R30,LOW(2)
00047b 15ea      	CP   R30,R10
00047c f451      	BRNE _0xD7
00047d   +  	__POINTW1MN _ind_out,4
00047f 93ff      	PUSH R31
000480 93ef      	PUSH R30
000481 81e0      	LD   R30,Z
000482 7feb      	ANDI R30,0xFB
000483 91af      	POP  R26
000484 91bf      	POP  R27
000485 93ec      	ST   X,R30
         ;    2464 else if(prog==p3) ind_out[4]&=~(1<<LED_PROG3);
000486 c019      	RJMP _0xD8
          _0xD7:
000487 e0e3      	LDI  R30,LOW(3)
000488 15ea      	CP   R30,R10
000489 f451      	BRNE _0xD9
00048a   +  	__POINTW1MN _ind_out,4
00048c 93ff      	PUSH R31
00048d 93ef      	PUSH R30
00048e 81e0      	LD   R30,Z
00048f 7fe7      	ANDI R30,0XF7
000490 91af      	POP  R26
000491 91bf      	POP  R27
000492 93ec      	ST   X,R30
         ;    2465 else if(prog==p4) ind_out[4]&=~(1<<LED_PROG4);
000493 c00c      	RJMP _0xDA
          _0xD9:
000494 e0e4      	LDI  R30,LOW(4)
000495 15ea      	CP   R30,R10
000496 f449      	BRNE _0xDB
000497   +  	__POINTW1MN _ind_out,4
000499 93ff      	PUSH R31
00049a 93ef      	PUSH R30
00049b 81e0      	LD   R30,Z
00049c 7fed      	ANDI R30,0xFD
00049d 91af      	POP  R26
00049e 91bf      	POP  R27
00049f 93ec      	ST   X,R30
         ;    2466 
         ;    2467 if(ind==iPr_sel)
          _0xDB:
          _0xDA:
          _0xD8:
          _0xD6:
0004a0 e0e1      	LDI  R30,LOW(1)
0004a1 15ec      	CP   R30,R12
0004a2 f459      	BRNE _0xDC
         ;    2468 	{
         ;    2469 	if(bFL5)ind_out[4]|=(1<<LED_PROG1)|(1<<LED_PROG2)|(1<<LED_PROG3)|(1<<LED_PROG4);
0004a3 fe30      	SBRS R3,0
0004a4 c009      	RJMP _0xDD
0004a5   +  	__POINTW1MN _ind_out,4
0004a7 93ff      	PUSH R31
0004a8 93ef      	PUSH R30
0004a9 81e0      	LD   R30,Z
0004aa 61ee      	ORI  R30,LOW(0x1E)
0004ab 91af      	POP  R26
0004ac 91bf      	POP  R27
0004ad 93ec      	ST   X,R30
         ;    2470 	} 
          _0xDD:
         ;    2471 	 
         ;    2472 if(ind==iVr)
          _0xDC:
0004ae e0e2      	LDI  R30,LOW(2)
0004af 15ec      	CP   R30,R12
0004b0 f459      	BRNE _0xDE
         ;    2473 	{
         ;    2474 	if(bFL5)ind_out[4]|=(1<<LED_POW_ON);
0004b1 fe30      	SBRS R3,0
0004b2 c009      	RJMP _0xDF
0004b3   +  	__POINTW1MN _ind_out,4
0004b5 93ff      	PUSH R31
0004b6 93ef      	PUSH R30
0004b7 81e0      	LD   R30,Z
0004b8 62e0      	ORI  R30,0x20
0004b9 91af      	POP  R26
0004ba 91bf      	POP  R27
0004bb 93ec      	ST   X,R30
         ;    2475 	}	
          _0xDF:
         ;    2476 }
          _0xDE:
0004bc 9508      	RET
         ;    2477 
         ;    2478 //-----------------------------------------------
         ;    2479 // Подпрограмма драйва до 7 кнопок одного порта, 
         ;    2480 // различает короткое и длинное нажатие,
         ;    2481 // срабатывает на отпускание кнопки, возможность
         ;    2482 // ускорения перебора при длинном нажатии...
         ;    2483 #define but_port PORTC
         ;    2484 #define but_dir  DDRC
         ;    2485 #define but_pin  PINC
         ;    2486 #define but_mask 0b01101010
         ;    2487 #define no_but   0b11111111
         ;    2488 #define but_on   5
         ;    2489 #define but_onL  20
         ;    2490 
         ;    2491 
         ;    2492 
         ;    2493 
         ;    2494 void but_drv(void)
         ;    2495 { 
          _but_drv:
         ;    2496 DDRD&=0b00000111;
0004bd b3e1      	IN   R30,0x11
0004be 70e7      	ANDI R30,LOW(0x7)
0004bf 940e 06f5 	CALL SUBOPT_0xB
         ;    2497 PORTD|=0b11111000;
         ;    2498 
         ;    2499 but_port|=(but_mask^0xff);
0004c1 940e 06fa 	CALL SUBOPT_0xC
         ;    2500 but_dir&=but_mask;
         ;    2501 #asm
         ;    2502 nop
0004c3 0000      nop
         ;    2503 nop
0004c4 0000      nop
         ;    2504 nop
0004c5 0000      nop
         ;    2505 nop
0004c6 0000      nop
         ;    2506 #endasm
         
         ;    2507 
         ;    2508 but_n=but_pin|but_mask; 
0004c7 b3e3      	IN   R30,0x13
0004c8 66ea      	ORI  R30,LOW(0x6A)
0004c9 93e0 0269 	STS  _but_n_G1,R30
         ;    2509 
         ;    2510 if((but_n==no_but)||(but_n!=but_s))
0004cb 91a0 0269 	LDS  R26,_but_n_G1
0004cd 3faf      	CPI  R26,LOW(0xFF)
0004ce f011      	BREQ _0xE1
0004cf d231      	RCALL SUBOPT_0xD
0004d0 f109      	BREQ _0xE0
          _0xE1:
         ;    2511  	{
         ;    2512  	speed=0;
0004d1 94e8      	CLT
0004d2 f826      	BLD  R2,6
         ;    2513    	if (((but0_cnt>=but_on)||(but1_cnt!=0))&&(!l_but))
0004d3 91a0 026b 	LDS  R26,_but0_cnt_G1
0004d5 30a5      	CPI  R26,LOW(0x5)
0004d6 f420      	BRSH _0xE4
0004d7 91a0 026c 	LDS  R26,_but1_cnt_G1
0004d9 30a0      	CPI  R26,LOW(0x0)
0004da f011      	BREQ _0xE6
          _0xE4:
0004db fe24      	SBRS R2,4
0004dc c001      	RJMP _0xE7
          _0xE6:
0004dd c004      	RJMP _0xE3
          _0xE7:
         ;    2514   		{
         ;    2515    	     n_but=1;
0004de 9468      	SET
0004df f825      	BLD  R2,5
         ;    2516           but=but_s;
0004e0 9090 026a 	LDS  R9,_but_s_G1
         ;    2517           }
         ;    2518    	if (but1_cnt>=but_onL_temp)
          _0xE3:
0004e2 d224      	RCALL SUBOPT_0xE
0004e3 f018      	BRLO _0xE8
         ;    2519   		{
         ;    2520    	     n_but=1;
0004e4 9468      	SET
0004e5 f825      	BLD  R2,5
         ;    2521           but=but_s&0b11111101;
0004e6 d226      	RCALL SUBOPT_0xF
         ;    2522           }
         ;    2523     	l_but=0;
          _0xE8:
0004e7 94e8      	CLT
0004e8 f824      	BLD  R2,4
         ;    2524    	but_onL_temp=but_onL;
0004e9 e1e4      	LDI  R30,LOW(20)
0004ea 93e0 026d 	STS  _but_onL_temp_G1,R30
         ;    2525     	but0_cnt=0;
0004ec e0e0      	LDI  R30,LOW(0)
0004ed 93e0 026b 	STS  _but0_cnt_G1,R30
         ;    2526   	but1_cnt=0;          
0004ef 93e0 026c 	STS  _but1_cnt_G1,R30
         ;    2527      goto but_drv_out;
0004f1 c02b      	RJMP _0xE9
         ;    2528   	}  
         ;    2529   	
         ;    2530 if(but_n==but_s)
          _0xE0:
0004f2 d20e      	RCALL SUBOPT_0xD
0004f3 f549      	BRNE _0xEA
         ;    2531  	{
         ;    2532   	but0_cnt++;
0004f4 91e0 026b 	LDS  R30,_but0_cnt_G1
0004f6 5fef      	SUBI R30,-LOW(1)
0004f7 93e0 026b 	STS  _but0_cnt_G1,R30
         ;    2533   	if(but0_cnt>=but_on)
0004f9 91a0 026b 	LDS  R26,_but0_cnt_G1
0004fb 30a5      	CPI  R26,LOW(0x5)
0004fc f100      	BRLO _0xEB
         ;    2534   		{
         ;    2535    		but0_cnt=0;
0004fd e0e0      	LDI  R30,LOW(0)
0004fe 93e0 026b 	STS  _but0_cnt_G1,R30
         ;    2536    		but1_cnt++;
000500 91e0 026c 	LDS  R30,_but1_cnt_G1
000502 5fef      	SUBI R30,-LOW(1)
000503 93e0 026c 	STS  _but1_cnt_G1,R30
         ;    2537    		if(but1_cnt>=but_onL_temp)
000505 d201      	RCALL SUBOPT_0xE
000506 f0b0      	BRLO _0xEC
         ;    2538    			{              
         ;    2539     			but=but_s&0b11111101;
000507 d205      	RCALL SUBOPT_0xF
         ;    2540     			but1_cnt=0;
000508 e0e0      	LDI  R30,LOW(0)
000509 93e0 026c 	STS  _but1_cnt_G1,R30
         ;    2541     			n_but=1;
00050b 9468      	SET
00050c f825      	BLD  R2,5
         ;    2542     			l_but=1;
00050d 9468      	SET
00050e f824      	BLD  R2,4
         ;    2543 			if(speed)
00050f fe26      	SBRS R2,6
000510 c00c      	RJMP _0xED
         ;    2544 				{
         ;    2545     				but_onL_temp=but_onL_temp>>1;
000511 91e0 026d 	LDS  R30,_but_onL_temp_G1
000513 95e6      	LSR  R30
000514 93e0 026d 	STS  _but_onL_temp_G1,R30
         ;    2546         			if(but_onL_temp<=2) but_onL_temp=2;
000516 91a0 026d 	LDS  R26,_but_onL_temp_G1
000518 e0e2      	LDI  R30,LOW(2)
000519 17ea      	CP   R30,R26
00051a f010      	BRLO _0xEE
00051b 93e0 026d 	STS  _but_onL_temp_G1,R30
         ;    2547 				}    
          _0xEE:
         ;    2548    			}
          _0xED:
         ;    2549   		} 
          _0xEC:
         ;    2550  	}
          _0xEB:
         ;    2551 but_drv_out:
          _0xEA:
          _0xE9:
         ;    2552 but_s=but_n;
00051d 91e0 0269 	LDS  R30,_but_n_G1
00051f 93e0 026a 	STS  _but_s_G1,R30
         ;    2553 but_port|=(but_mask^0xff);
000521 d1d8      	RCALL SUBOPT_0xC
         ;    2554 but_dir&=but_mask;
         ;    2555 }    
000522 9508      	RET
         ;    2556 
         ;    2557 #define butV	239
         ;    2558 #define butV_	237
         ;    2559 #define butP	251
         ;    2560 #define butP_	249
         ;    2561 #define butR	127
         ;    2562 #define butR_	125
         ;    2563 #define butL	254
         ;    2564 #define butL_	252
         ;    2565 #define butLR	126
         ;    2566 #define butLR_	124 
         ;    2567 #define butVP_ 233
         ;    2568 //-----------------------------------------------
         ;    2569 void but_an(void)
         ;    2570 {
          _but_an:
         ;    2571 
         ;    2572 if(!(in_word&0x01))
000523 fce0      	SBRC R14,0
000524 c024      	RJMP _0xEF
         ;    2573 	{
         ;    2574 	#ifdef TVIST_SKO
         ;    2575 	if((step==sOFF)&&(!bERR))
         ;    2576 		{
         ;    2577 		step=s1;
         ;    2578 		if(prog==p2) cnt_del=70;
         ;    2579 		else if(prog==p3) cnt_del=100;
         ;    2580 		}
         ;    2581 	#endif
         ;    2582 	#ifdef DV3KL2MD
         ;    2583 	if((step==sOFF)&&(!bERR))
         ;    2584 		{
         ;    2585 		step=s1;
         ;    2586 		cnt_del=70;
         ;    2587 		}
         ;    2588 	#endif	
         ;    2589 	#ifndef TVIST_SKO
         ;    2590 	if((step==sOFF)&&(!bERR))
000525 e0e0      	LDI  R30,LOW(0)
000526 15eb      	CP   R30,R11
000527 f411      	BRNE _0xF1
000528 fe31      	SBRS R3,1
000529 c001      	RJMP _0xF2
          _0xF1:
00052a c01e      	RJMP _0xF0
          _0xF2:
         ;    2591 		{
         ;    2592 		step=s1;
00052b e0e1      	LDI  R30,LOW(1)
00052c 2ebe      	MOV  R11,R30
         ;    2593 		if(prog==p1) cnt_del=50;
00052d 15ea      	CP   R30,R10
00052e f439      	BRNE _0xF3
00052f e3e2      	LDI  R30,LOW(50)
000530 e0f0      	LDI  R31,HIGH(50)
000531 93e0 0271 	STS  _cnt_del,R30
000533 93f0 0272 	STS  _cnt_del+1,R31
         ;    2594 		else if(prog==p2) cnt_del=50;
000535 c013      	RJMP _0xF4
          _0xF3:
000536 e0e2      	LDI  R30,LOW(2)
000537 15ea      	CP   R30,R10
000538 f439      	BRNE _0xF5
000539 e3e2      	LDI  R30,LOW(50)
00053a e0f0      	LDI  R31,HIGH(50)
00053b 93e0 0271 	STS  _cnt_del,R30
00053d 93f0 0272 	STS  _cnt_del+1,R31
         ;    2595 		else if(prog==p3) cnt_del=50;
00053f c009      	RJMP _0xF6
          _0xF5:
000540 e0e3      	LDI  R30,LOW(3)
000541 15ea      	CP   R30,R10
000542 f431      	BRNE _0xF7
000543 e3e2      	LDI  R30,LOW(50)
000544 e0f0      	LDI  R31,HIGH(50)
000545 93e0 0271 	STS  _cnt_del,R30
000547 93f0 0272 	STS  _cnt_del+1,R31
         ;    2596           #ifdef P380_MINI
         ;    2597   		cnt_del=100;
         ;    2598   		#endif
         ;    2599 		}
          _0xF7:
          _0xF6:
          _0xF4:
         ;    2600 	#endif
         ;    2601 	}
          _0xF0:
         ;    2602 if(!(in_word&0x02))
          _0xEF:
000549 fce1      	SBRC R14,1
00054a c001      	RJMP _0xF8
         ;    2603 	{
         ;    2604 	step=sOFF;
00054b 24bb      	CLR  R11
         ;    2605 
         ;    2606 	}
         ;    2607 
         ;    2608 if (!n_but) goto but_an_end;
          _0xF8:
00054c fe25      	SBRS R2,5
00054d c0a0      	RJMP _0xFA
         ;    2609 
         ;    2610 if(but==butV_)
00054e eeed      	LDI  R30,LOW(237)
00054f 15e9      	CP   R30,R9
000550 f469      	BRNE _0xFB
         ;    2611 	{
         ;    2612 	if(ee_vacuum_mode==evmON)ee_vacuum_mode=evmOFF;
000551 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000552 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000553 940e 0742 	CALL __EEPROMRDB
000555 35e5      	CPI  R30,LOW(0x55)
000556 f411      	BRNE _0xFC
000557 eaea      	LDI  R30,LOW(170)
000558 c001      	RJMP _0x132
         ;    2613 	else ee_vacuum_mode=evmON;
          _0xFC:
000559 e5e5      	LDI  R30,LOW(85)
          _0x132:
00055a e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
00055b e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
00055c 940e 0756 	CALL __EEPROMWRB
         ;    2614 	}
         ;    2615 
         ;    2616 if(but==butVP_)
          _0xFB:
00055e eee9      	LDI  R30,LOW(233)
00055f 15e9      	CP   R30,R9
000560 f431      	BRNE _0xFE
         ;    2617 	{
         ;    2618 	if(ind!=iVr)ind=iVr;
000561 e0e2      	LDI  R30,LOW(2)
000562 15ec      	CP   R30,R12
000563 f011      	BREQ _0xFF
000564 2ece      	MOV  R12,R30
         ;    2619 	else ind=iMn;
000565 c001      	RJMP _0x100
          _0xFF:
000566 24cc      	CLR  R12
          _0x100:
         ;    2620 	}
         ;    2621 
         ;    2622 	
         ;    2623 if(ind==iMn)
          _0xFE:
000567 20cc      	TST  R12
000568 f591      	BRNE _0x101
         ;    2624 	{
         ;    2625 	if(but==butP_)ind=iPr_sel;
000569 efe9      	LDI  R30,LOW(249)
00056a 15e9      	CP   R30,R9
00056b f411      	BRNE _0x102
00056c e0e1      	LDI  R30,LOW(1)
00056d 2ece      	MOV  R12,R30
         ;    2626 	if(but==butLR)	
          _0x102:
00056e e7ee      	LDI  R30,LOW(126)
00056f 15e9      	CP   R30,R9
000570 f471      	BRNE _0x103
         ;    2627 		{
         ;    2628 		if((prog==p3)||(prog==p4))
000571 e0e3      	LDI  R30,LOW(3)
000572 15ea      	CP   R30,R10
000573 f019      	BREQ _0x105
000574 e0e4      	LDI  R30,LOW(4)
000575 15ea      	CP   R30,R10
000576 f439      	BRNE _0x104
          _0x105:
         ;    2629 			{ 
         ;    2630 			if(sub_ind==0)sub_ind=1;
000577 20dd      	TST  R13
000578 f419      	BRNE _0x107
000579 e0e1      	LDI  R30,LOW(1)
00057a 2ede      	MOV  R13,R30
         ;    2631 			else sub_ind=0;
00057b c001      	RJMP _0x108
          _0x107:
00057c 24dd      	CLR  R13
          _0x108:
         ;    2632 			}
         ;    2633     		else sub_ind=0;
00057d c001      	RJMP _0x109
          _0x104:
00057e 24dd      	CLR  R13
          _0x109:
         ;    2634 		}	 
         ;    2635 	if((but==butR)||(but==butR_))	
          _0x103:
00057f e7ef      	LDI  R30,LOW(127)
000580 15e9      	CP   R30,R9
000581 f019      	BREQ _0x10B
000582 e7ed      	LDI  R30,LOW(125)
000583 15e9      	CP   R30,R9
000584 f441      	BRNE _0x10A
          _0x10B:
         ;    2636 		{  
         ;    2637 		speed=1;
000585 9468      	SET
000586 f826      	BLD  R2,6
         ;    2638 		ee_delay[prog,sub_ind]++;
000587 d15a      	RCALL SUBOPT_0xA
000588 9631      	ADIW R30,1
000589 940e 074e 	CALL __EEPROMWRW
00058b 9731      	SBIW R30,1
         ;    2639 		}   
         ;    2640 	
         ;    2641 	else if((but==butL)||(but==butL_))	
00058c c00d      	RJMP _0x10D
          _0x10A:
00058d efee      	LDI  R30,LOW(254)
00058e 15e9      	CP   R30,R9
00058f f019      	BREQ _0x10F
000590 efec      	LDI  R30,LOW(252)
000591 15e9      	CP   R30,R9
000592 f439      	BRNE _0x10E
          _0x10F:
         ;    2642 		{  
         ;    2643     		speed=1;
000593 9468      	SET
000594 f826      	BLD  R2,6
         ;    2644     		ee_delay[prog,sub_ind]--;
000595 d14c      	RCALL SUBOPT_0xA
000596 9731      	SBIW R30,1
000597 940e 074e 	CALL __EEPROMWRW
000599 9631      	ADIW R30,1
         ;    2645     		}		
         ;    2646 	} 
          _0x10E:
          _0x10D:
         ;    2647 	
         ;    2648 else if(ind==iPr_sel)
00059a c053      	RJMP _0x111
          _0x101:
00059b e0e1      	LDI  R30,LOW(1)
00059c 15ec      	CP   R30,R12
00059d f5e9      	BRNE _0x112
         ;    2649 	{
         ;    2650 	if(but==butP_)ind=iMn;
00059e efe9      	LDI  R30,LOW(249)
00059f 15e9      	CP   R30,R9
0005a0 f409      	BRNE _0x113
0005a1 24cc      	CLR  R12
         ;    2651 	if(but==butP)
          _0x113:
0005a2 efeb      	LDI  R30,LOW(251)
0005a3 15e9      	CP   R30,R9
0005a4 f479      	BRNE _0x114
         ;    2652 		{
         ;    2653 		prog++;
0005a5 d16c      	RCALL SUBOPT_0x10
         ;    2654 		if(prog>MAXPROG)prog=MINPROG;
0005a6 f414      	BRGE _0x115
0005a7 e0e1      	LDI  R30,LOW(1)
0005a8 2eae      	MOV  R10,R30
         ;    2655 		ee_program[0]=prog;
          _0x115:
0005a9 d16c      	RCALL SUBOPT_0x11
         ;    2656 		ee_program[1]=prog;
0005aa   +  	__POINTW2MN _ee_program,1
0005ac 2dea      	MOV  R30,R10
0005ad 940e 0756 	CALL __EEPROMWRB
         ;    2657 		ee_program[2]=prog;
0005af   +  	__POINTW2MN _ee_program,2
0005b1 2dea      	MOV  R30,R10
0005b2 940e 0756 	CALL __EEPROMWRB
         ;    2658 		}
         ;    2659 	
         ;    2660 	if(but==butR)
          _0x114:
0005b4 e7ef      	LDI  R30,LOW(127)
0005b5 15e9      	CP   R30,R9
0005b6 f479      	BRNE _0x116
         ;    2661 		{
         ;    2662 		prog++;
0005b7 d15a      	RCALL SUBOPT_0x10
         ;    2663 		if(prog>MAXPROG)prog=MINPROG;
0005b8 f414      	BRGE _0x117
0005b9 e0e1      	LDI  R30,LOW(1)
0005ba 2eae      	MOV  R10,R30
         ;    2664 		ee_program[0]=prog;
          _0x117:
0005bb d15a      	RCALL SUBOPT_0x11
         ;    2665 		ee_program[1]=prog;
0005bc   +  	__POINTW2MN _ee_program,1
0005be 2dea      	MOV  R30,R10
0005bf 940e 0756 	CALL __EEPROMWRB
         ;    2666 		ee_program[2]=prog;
0005c1   +  	__POINTW2MN _ee_program,2
0005c3 2dea      	MOV  R30,R10
0005c4 940e 0756 	CALL __EEPROMWRB
         ;    2667 		}
         ;    2668 
         ;    2669 	if(but==butL)
          _0x116:
0005c6 efee      	LDI  R30,LOW(254)
0005c7 15e9      	CP   R30,R9
0005c8 f489      	BRNE _0x118
         ;    2670 		{
         ;    2671 		prog--;
0005c9 94aa      	DEC  R10
         ;    2672 		if(prog>MAXPROG)prog=MINPROG;
0005ca e0e4      	LDI  R30,LOW(4)
0005cb 15ea      	CP   R30,R10
0005cc f414      	BRGE _0x119
0005cd e0e1      	LDI  R30,LOW(1)
0005ce 2eae      	MOV  R10,R30
         ;    2673 		ee_program[0]=prog;
          _0x119:
0005cf d146      	RCALL SUBOPT_0x11
         ;    2674 		ee_program[1]=prog;
0005d0   +  	__POINTW2MN _ee_program,1
0005d2 2dea      	MOV  R30,R10
0005d3 940e 0756 	CALL __EEPROMWRB
         ;    2675 		ee_program[2]=prog;
0005d5   +  	__POINTW2MN _ee_program,2
0005d7 2dea      	MOV  R30,R10
0005d8 940e 0756 	CALL __EEPROMWRB
         ;    2676 		}	
         ;    2677 	} 
          _0x118:
         ;    2678 
         ;    2679 else if(ind==iVr)
0005da c013      	RJMP _0x11A
          _0x112:
0005db e0e2      	LDI  R30,LOW(2)
0005dc 15ec      	CP   R30,R12
0005dd f481      	BRNE _0x11B
         ;    2680 	{
         ;    2681 	if(but==butP_)
0005de efe9      	LDI  R30,LOW(249)
0005df 15e9      	CP   R30,R9
0005e0 f469      	BRNE _0x11C
         ;    2682 		{
         ;    2683 		if(ee_vr_log)ee_vr_log=0;
0005e1 e1a3      	LDI  R26,LOW(_ee_vr_log)
0005e2 e0b0      	LDI  R27,HIGH(_ee_vr_log)
0005e3 940e 0742 	CALL __EEPROMRDB
0005e5 30e0      	CPI  R30,0
0005e6 f011      	BREQ _0x11D
0005e7 e0e0      	LDI  R30,LOW(0)
0005e8 c001      	RJMP _0x133
         ;    2684 		else ee_vr_log=1;
          _0x11D:
0005e9 e0e1      	LDI  R30,LOW(1)
          _0x133:
0005ea e1a3      	LDI  R26,LOW(_ee_vr_log)
0005eb e0b0      	LDI  R27,HIGH(_ee_vr_log)
0005ec 940e 0756 	CALL __EEPROMWRB
         ;    2685 		}	
         ;    2686 	} 	
          _0x11C:
         ;    2687 
         ;    2688 but_an_end:
          _0x11B:
          _0x11A:
          _0x111:
          _0xFA:
         ;    2689 n_but=0;
0005ee 94e8      	CLT
0005ef f825      	BLD  R2,5
         ;    2690 }
0005f0 9508      	RET
         ;    2691 
         ;    2692 //-----------------------------------------------
         ;    2693 void ind_drv(void)
         ;    2694 {
          _ind_drv:
         ;    2695 if(++ind_cnt>=6)ind_cnt=0;
0005f1 9483      	INC  R8
0005f2 e0e6      	LDI  R30,LOW(6)
0005f3 168e      	CP   R8,R30
0005f4 f008      	BRLO _0x11F
0005f5 2488      	CLR  R8
         ;    2696 
         ;    2697 if(ind_cnt<5)
          _0x11F:
0005f6 e0e5      	LDI  R30,LOW(5)
0005f7 168e      	CP   R8,R30
0005f8 f4c8      	BRSH _0x120
         ;    2698 	{
         ;    2699 	DDRC=0xFF;
0005f9 efef      	LDI  R30,LOW(255)
0005fa bbe4      	OUT  0x14,R30
         ;    2700 	PORTC=0xFF;
0005fb bbe5      	OUT  0x15,R30
         ;    2701 	DDRD|=0b11111000;
0005fc b3e1      	IN   R30,0x11
0005fd 6fe8      	ORI  R30,LOW(0xF8)
0005fe d0f6      	RCALL SUBOPT_0xB
         ;    2702 	PORTD|=0b11111000;
         ;    2703 	PORTD&=IND_STROB[ind_cnt];
0005ff b3e2      	IN   R30,0x12
000600 93ef      	PUSH R30
000601 e5a4      	LDI  R26,LOW(_IND_STROB*2)
000602 e0b0      	LDI  R27,HIGH(_IND_STROB*2)
000603 2de8      	MOV  R30,R8
000604 e0f0      	LDI  R31,0
000605 0fea      	ADD  R30,R26
000606 1ffb      	ADC  R31,R27
000607 91e4      	LPM  R30,Z
000608 91af      	POP  R26
000609 23ea      	AND  R30,R26
00060a bbe2      	OUT  0x12,R30
         ;    2704 	PORTC=ind_out[ind_cnt];
00060b 2de8      	MOV  R30,R8
00060c e0f0      	LDI  R31,0
00060d 5ae0      	SUBI R30,LOW(-_ind_out)
00060e 4ffd      	SBCI R31,HIGH(-_ind_out)
00060f 81e0      	LD   R30,Z
000610 bbe5      	OUT  0x15,R30
         ;    2705 	}
         ;    2706 else but_drv();
000611 c002      	RJMP _0x121
          _0x120:
000612 940e 04bd 	CALL _but_drv
          _0x121:
         ;    2707 }
000614 9508      	RET
         ;    2708 
         ;    2709 //***********************************************
         ;    2710 //***********************************************
         ;    2711 //***********************************************
         ;    2712 //***********************************************
         ;    2713 interrupt [TIM0_OVF] void timer0_ovf_isr(void)
         ;    2714 {
          _timer0_ovf_isr:
000615 920a      	ST   -Y,R0
000616 921a      	ST   -Y,R1
000617 92fa      	ST   -Y,R15
000618 936a      	ST   -Y,R22
000619 937a      	ST   -Y,R23
00061a 938a      	ST   -Y,R24
00061b 939a      	ST   -Y,R25
00061c 93aa      	ST   -Y,R26
00061d 93ba      	ST   -Y,R27
00061e 93ea      	ST   -Y,R30
00061f 93fa      	ST   -Y,R31
000620 b7ef      	IN   R30,SREG
000621 93ea      	ST   -Y,R30
         ;    2715 TCCR0=0x02;
000622 d0f9      	RCALL SUBOPT_0x12
         ;    2716 TCNT0=-208;
         ;    2717 OCR0=0x00; 
         ;    2718 
         ;    2719 
         ;    2720 b600Hz=1;
000623 9468      	SET
000624 f820      	BLD  R2,0
         ;    2721 ind_drv();
000625 dfcb      	RCALL _ind_drv
         ;    2722 if(++t0_cnt0>=6)
000626 9443      	INC  R4
000627 e0e6      	LDI  R30,LOW(6)
000628 164e      	CP   R4,R30
000629 f018      	BRLO _0x122
         ;    2723 	{
         ;    2724 	t0_cnt0=0;
00062a 2444      	CLR  R4
         ;    2725 	b100Hz=1;
00062b 9468      	SET
00062c f821      	BLD  R2,1
         ;    2726 	}
         ;    2727 
         ;    2728 if(++t0_cnt1>=60)
          _0x122:
00062d 9453      	INC  R5
00062e e3ec      	LDI  R30,LOW(60)
00062f 165e      	CP   R5,R30
000630 f088      	BRLO _0x123
         ;    2729 	{
         ;    2730 	t0_cnt1=0;
000631 2455      	CLR  R5
         ;    2731 	b10Hz=1;
000632 9468      	SET
000633 f822      	BLD  R2,2
         ;    2732 	
         ;    2733 	if(++t0_cnt2>=2)
000634 9463      	INC  R6
000635 e0e2      	LDI  R30,LOW(2)
000636 166e      	CP   R6,R30
000637 f018      	BRLO _0x124
         ;    2734 		{
         ;    2735 		t0_cnt2=0;
000638 2466      	CLR  R6
         ;    2736 		bFL5=!bFL5;
000639 e0e1      	LDI  R30,LOW(1)
00063a 263e      	EOR  R3,R30
         ;    2737 		}
         ;    2738 		
         ;    2739 	if(++t0_cnt3>=5)
          _0x124:
00063b 9473      	INC  R7
00063c e0e5      	LDI  R30,LOW(5)
00063d 167e      	CP   R7,R30
00063e f018      	BRLO _0x125
         ;    2740 		{
         ;    2741 		t0_cnt3=0;
00063f 2477      	CLR  R7
         ;    2742 		bFL2=!bFL2;
000640 e8e0      	LDI  R30,LOW(128)
000641 262e      	EOR  R2,R30
         ;    2743 		}		
         ;    2744 	}
          _0x125:
         ;    2745 }
          _0x123:
000642 91e9      	LD   R30,Y+
000643 bfef      	OUT  SREG,R30
000644 91f9      	LD   R31,Y+
000645 91e9      	LD   R30,Y+
000646 91b9      	LD   R27,Y+
000647 91a9      	LD   R26,Y+
000648 9199      	LD   R25,Y+
000649 9189      	LD   R24,Y+
00064a 9179      	LD   R23,Y+
00064b 9169      	LD   R22,Y+
00064c 90f9      	LD   R15,Y+
00064d 9019      	LD   R1,Y+
00064e 9009      	LD   R0,Y+
00064f 9518      	RETI
         ;    2746 
         ;    2747 //===============================================
         ;    2748 //===============================================
         ;    2749 //===============================================
         ;    2750 //===============================================
         ;    2751 
         ;    2752 void main(void)
         ;    2753 {
          _main:
         ;    2754 
         ;    2755 PORTA=0xff;
000650 efef      	LDI  R30,LOW(255)
000651 bbeb      	OUT  0x1B,R30
         ;    2756 DDRA=0x00;
000652 d047      	RCALL SUBOPT_0x0
         ;    2757 
         ;    2758 PORTB=0xff;
000653 d0d0      	RCALL SUBOPT_0x13
         ;    2759 DDRB=0xFF;
         ;    2760 
         ;    2761 PORTC=0x00;
000654 e0e0      	LDI  R30,LOW(0)
000655 bbe5      	OUT  0x15,R30
         ;    2762 DDRC=0x00;
000656 bbe4      	OUT  0x14,R30
         ;    2763 
         ;    2764 
         ;    2765 PORTD=0x00;
000657 bbe2      	OUT  0x12,R30
         ;    2766 DDRD=0x00;
000658 bbe1      	OUT  0x11,R30
         ;    2767 
         ;    2768 
         ;    2769 TCCR0=0x02;
000659 d0c2      	RCALL SUBOPT_0x12
         ;    2770 TCNT0=-208;
         ;    2771 OCR0=0x00;
         ;    2772 
         ;    2773 TCCR1A=0x00;
00065a e0e0      	LDI  R30,LOW(0)
00065b bdef      	OUT  0x2F,R30
         ;    2774 TCCR1B=0x00;
00065c bdee      	OUT  0x2E,R30
         ;    2775 TCNT1H=0x00;
00065d bded      	OUT  0x2D,R30
         ;    2776 TCNT1L=0x00;
00065e bdec      	OUT  0x2C,R30
         ;    2777 ICR1H=0x00;
00065f bde7      	OUT  0x27,R30
         ;    2778 ICR1L=0x00;
000660 bde6      	OUT  0x26,R30
         ;    2779 OCR1AH=0x00;
000661 bdeb      	OUT  0x2B,R30
         ;    2780 OCR1AL=0x00;
000662 bdea      	OUT  0x2A,R30
         ;    2781 OCR1BH=0x00;
000663 bde9      	OUT  0x29,R30
         ;    2782 OCR1BL=0x00;
000664 bde8      	OUT  0x28,R30
         ;    2783 
         ;    2784 
         ;    2785 ASSR=0x00;
000665 bde2      	OUT  0x22,R30
         ;    2786 TCCR2=0x00;
000666 bde5      	OUT  0x25,R30
         ;    2787 TCNT2=0x00;
000667 bde4      	OUT  0x24,R30
         ;    2788 OCR2=0x00;
000668 bde3      	OUT  0x23,R30
         ;    2789 
         ;    2790 MCUCR=0x00;
000669 bfe5      	OUT  0x35,R30
         ;    2791 MCUCSR=0x00;
00066a bfe4      	OUT  0x34,R30
         ;    2792 
         ;    2793 TIMSK=0x01;
00066b e0e1      	LDI  R30,LOW(1)
00066c bfe9      	OUT  0x39,R30
         ;    2794 
         ;    2795 ACSR=0x80;
00066d e8e0      	LDI  R30,LOW(128)
00066e b9e8      	OUT  0x8,R30
         ;    2796 SFIOR=0x00;
00066f e0e0      	LDI  R30,LOW(0)
000670 bfe0      	OUT  0x30,R30
         ;    2797 
         ;    2798 #asm("sei") 
000671 9478      	sei
         ;    2799 PORTB=0xFF;
000672 efef      	LDI  R30,LOW(255)
000673 d0b0      	RCALL SUBOPT_0x13
         ;    2800 DDRB=0xFF;
         ;    2801 DDRD.1=1;
000674 9a89      	SBI  0x11,1
         ;    2802 PORTD.1=1;  
000675 9a91      	SBI  0x12,1
         ;    2803 
         ;    2804 ind=iMn;
000676 24cc      	CLR  R12
         ;    2805 prog_drv();
000677 940e 006a 	CALL _prog_drv
         ;    2806 ind_hndl();
000679 940e 03fe 	CALL _ind_hndl
         ;    2807 led_hndl();
00067b 940e 0413 	CALL _led_hndl
         ;    2808 while (1)
          _0x126:
         ;    2809       {
         ;    2810       if(b600Hz)
00067d fe20      	SBRS R2,0
00067e c002      	RJMP _0x129
         ;    2811 		{
         ;    2812 		b600Hz=0; 
00067f 94e8      	CLT
000680 f820      	BLD  R2,0
         ;    2813           
         ;    2814 		}         
         ;    2815       if(b100Hz)
          _0x129:
000681 fe21      	SBRS R2,1
000682 c009      	RJMP _0x12A
         ;    2816 		{        
         ;    2817 		b100Hz=0; 
000683 94e8      	CLT
000684 f821      	BLD  R2,1
         ;    2818 		but_an();
000685 de9d      	RCALL _but_an
         ;    2819 	    	in_drv();
000686 940e 00c9 	CALL _in_drv
         ;    2820           mdvr_drv();
000688 940e 0109 	CALL _mdvr_drv
         ;    2821           step_contr();
00068a 940e 019f 	CALL _step_contr
         ;    2822 		}   
         ;    2823 	if(b10Hz)
          _0x12A:
00068c fe22      	SBRS R2,2
00068d c00a      	RJMP _0x12B
         ;    2824 		{
         ;    2825 		b10Hz=0;
00068e 94e8      	CLT
00068f f822      	BLD  R2,2
         ;    2826 		prog_drv();
000690 940e 006a 	CALL _prog_drv
         ;    2827 		err_drv();
000692 940e 00f0 	CALL _err_drv
         ;    2828 		
         ;    2829     	     ind_hndl();
000694 940e 03fe 	CALL _ind_hndl
         ;    2830           led_hndl();
000696 940e 0413 	CALL _led_hndl
         ;    2831           
         ;    2832           }
         ;    2833 
         ;    2834       };
          _0x12B:
000698 cfe4      	RJMP _0x126
         ;    2835 }
          _0x12C:
000699 cfff      	RJMP _0x12C
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x0:
00069a e0e0      	LDI  R30,LOW(0)
00069b bbea      	OUT  0x1A,R30
00069c efef      	LDI  R30,LOW(255)
00069d 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 22 TIMES
          SUBOPT_0x1:
00069e 91e0 0271 	LDS  R30,_cnt_del
0006a0 91f0 0272 	LDS  R31,_cnt_del+1
0006a2 9731      	SBIW R30,1
0006a3 93e0 0271 	STS  _cnt_del,R30
0006a5 93f0 0272 	STS  _cnt_del+1,R31
0006a7 9730      	SBIW R30,0
0006a8 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x2:
0006a9 2ebe      	MOV  R11,R30
0006aa e2e8      	LDI  R30,LOW(40)
0006ab e0f0      	LDI  R31,HIGH(40)
0006ac 93e0 0271 	STS  _cnt_del,R30
0006ae 93f0 0272 	STS  _cnt_del+1,R31
0006b0 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x3:
0006b1 2ebe      	MOV  R11,R30
0006b2 e3e2      	LDI  R30,LOW(50)
0006b3 e0f0      	LDI  R31,HIGH(50)
0006b4 93e0 0271 	STS  _cnt_del,R30
0006b6 93f0 0272 	STS  _cnt_del+1,R31
0006b8 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x4:
0006b9 2ebe      	MOV  R11,R30
0006ba e1ee      	LDI  R30,LOW(30)
0006bb e0f0      	LDI  R31,HIGH(30)
0006bc 93e0 0271 	STS  _cnt_del,R30
0006be 93f0 0272 	STS  _cnt_del+1,R31
0006c0 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES
          SUBOPT_0x5:
0006c1 2ebe      	MOV  R11,R30
0006c2 e1e4      	LDI  R30,LOW(20)
0006c3 e0f0      	LDI  R31,HIGH(20)
0006c4 93e0 0271 	STS  _cnt_del,R30
0006c6 93f0 0272 	STS  _cnt_del+1,R31
0006c8 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x6:
0006c9 2ebe      	MOV  R11,R30
0006ca e8e2      	LDI  R30,LOW(130)
0006cb e0f0      	LDI  R31,HIGH(130)
0006cc 93e0 0271 	STS  _cnt_del,R30
0006ce 93f0 0272 	STS  _cnt_del+1,R31
0006d0 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x7:
0006d1 2ebe      	MOV  R11,R30
0006d2 e7e8      	LDI  R30,LOW(120)
0006d3 e0f0      	LDI  R31,HIGH(120)
0006d4 93e0 0271 	STS  _cnt_del,R30
0006d6 93f0 0272 	STS  _cnt_del+1,R31
0006d8 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES
          SUBOPT_0x8:
0006d9 2fe0      	MOV  R30,R16
0006da 50e1      	SUBI R30,LOW(1)
0006db e0f0      	LDI  R31,0
0006dc 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x9:
0006dd e0f0      	LDI  R31,0
0006de 0fea      	ADD  R30,R26
0006df 1ffb      	ADC  R31,R27
0006e0 91e4      	LPM  R30,Z
0006e1 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0xA:
0006e2 2dea      	MOV  R30,R10
0006e3 e0a3      	LDI  R26,LOW(_ee_delay)
0006e4 e0b0      	LDI  R27,HIGH(_ee_delay)
0006e5 e0f0      	LDI  R31,0
0006e6 0fee      	LSL  R30
0006e7 1fff      	ROL  R31
0006e8 0fee      	LSL  R30
0006e9 1fff      	ROL  R31
0006ea 0fae      	ADD  R26,R30
0006eb 1fbf      	ADC  R27,R31
0006ec 2ded      	MOV  R30,R13
0006ed e0f0      	LDI  R31,0
0006ee 0fee      	LSL  R30
0006ef 1fff      	ROL  R31
0006f0 0fae      	ADD  R26,R30
0006f1 1fbf      	ADC  R27,R31
0006f2 940e 073e 	CALL __EEPROMRDW
0006f4 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xB:
0006f5 bbe1      	OUT  0x11,R30
0006f6 b3e2      	IN   R30,0x12
0006f7 6fe8      	ORI  R30,LOW(0xF8)
0006f8 bbe2      	OUT  0x12,R30
0006f9 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xC:
0006fa b3e5      	IN   R30,0x15
0006fb 69e5      	ORI  R30,LOW(0x95)
0006fc bbe5      	OUT  0x15,R30
0006fd b3e4      	IN   R30,0x14
0006fe 76ea      	ANDI R30,LOW(0x6A)
0006ff bbe4      	OUT  0x14,R30
000700 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xD:
000701 91e0 026a 	LDS  R30,_but_s_G1
000703 91a0 0269 	LDS  R26,_but_n_G1
000705 17ea      	CP   R30,R26
000706 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xE:
000707 91e0 026d 	LDS  R30,_but_onL_temp_G1
000709 91a0 026c 	LDS  R26,_but1_cnt_G1
00070b 17ae      	CP   R26,R30
00070c 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xF:
00070d 91e0 026a 	LDS  R30,_but_s_G1
00070f 7fed      	ANDI R30,0xFD
000710 2e9e      	MOV  R9,R30
000711 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x10:
000712 94a3      	INC  R10
000713 e0e4      	LDI  R30,LOW(4)
000714 15ea      	CP   R30,R10
000715 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x11:
000716 2dea      	MOV  R30,R10
000717 e0a1      	LDI  R26,LOW(_ee_program)
000718 e0b0      	LDI  R27,HIGH(_ee_program)
000719 940e 0756 	CALL __EEPROMWRB
00071b 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x12:
00071c e0e2      	LDI  R30,LOW(2)
00071d bfe3      	OUT  0x33,R30
00071e e3e0      	LDI  R30,LOW(65328)
00071f efff      	LDI  R31,HIGH(65328)
000720 bfe2      	OUT  0x32,R30
000721 e0e0      	LDI  R30,LOW(0)
000722 bfec      	OUT  0x3C,R30
000723 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x13:
000724 bbe8      	OUT  0x18,R30
000725 efef      	LDI  R30,LOW(255)
000726 bbe7      	OUT  0x17,R30
000727 9508      	RET
         
          __DIVW21U:
000728 2400      	CLR  R0
000729 2411      	CLR  R1
00072a e190      	LDI  R25,16
          __DIVW21U1:
00072b 0faa      	LSL  R26
00072c 1fbb      	ROL  R27
00072d 1c00      	ROL  R0
00072e 1c11      	ROL  R1
00072f 1a0e      	SUB  R0,R30
000730 0a1f      	SBC  R1,R31
000731 f418      	BRCC __DIVW21U2
000732 0e0e      	ADD  R0,R30
000733 1e1f      	ADC  R1,R31
000734 c001      	RJMP __DIVW21U3
          __DIVW21U2:
000735 60a1      	SBR  R26,1
          __DIVW21U3:
000736 959a      	DEC  R25
000737 f799      	BRNE __DIVW21U1
000738 01fd      	MOVW R30,R26
000739 01d0      	MOVW R26,R0
00073a 9508      	RET
         
          __MODW21U:
00073b dfec      	RCALL __DIVW21U
00073c 01fd      	MOVW R30,R26
00073d 9508      	RET
         
          __EEPROMRDW:
00073e 9611      	ADIW R26,1
00073f d002      	RCALL __EEPROMRDB
000740 2ffe      	MOV  R31,R30
000741 9711      	SBIW R26,1
         
          __EEPROMRDB:
000742 99e1      	SBIC EECR,EEWE
000743 cffe      	RJMP __EEPROMRDB
000744 93ff      	PUSH R31
000745 b7ff      	IN   R31,SREG
000746 94f8      	CLI
000747 bbae      	OUT  EEARL,R26
000748 bbbf      	OUT  EEARH,R27
000749 9ae0      	SBI  EECR,EERE
00074a b3ed      	IN   R30,EEDR
00074b bfff      	OUT  SREG,R31
00074c 91ff      	POP  R31
00074d 9508      	RET
         
          __EEPROMWRW:
00074e d007      	RCALL __EEPROMWRB
00074f 9611      	ADIW R26,1
000750 93ef      	PUSH R30
000751 2fef      	MOV  R30,R31
000752 d003      	RCALL __EEPROMWRB
000753 91ef      	POP  R30
000754 9711      	SBIW R26,1
000755 9508      	RET
         
          __EEPROMWRB:
000756 99e1      	SBIC EECR,EEWE
000757 cffe      	RJMP __EEPROMWRB
000758 b79f      	IN   R25,SREG
000759 94f8      	CLI
00075a bbae      	OUT  EEARL,R26
00075b bbbf      	OUT  EEARH,R27
00075c 9ae0      	SBI  EECR,EERE
00075d b38d      	IN   R24,EEDR
00075e 17e8      	CP   R30,R24
00075f f019      	BREQ __EEPROMWRB0
000760 bbed      	OUT  EEDR,R30
000761 9ae2      	SBI  EECR,EEMWE
000762 9ae1      	SBI  EECR,EEWE
          __EEPROMWRB0:
000763 bf9f      	OUT  SREG,R25
000764 9508      	RET
         
          __SAVELOCR4:
000765 933a      	ST   -Y,R19
          __SAVELOCR3:
000766 932a      	ST   -Y,R18
          __SAVELOCR2:
000767 931a      	ST   -Y,R17
000768 930a      	ST   -Y,R16
000769 9508      	RET
         
          __LOADLOCR4:
00076a 813b      	LDD  R19,Y+3
          __LOADLOCR3:
00076b 812a      	LDD  R18,Y+2
          __LOADLOCR2:
00076c 8119      	LDD  R17,Y+1
00076d 8108      	LD   R16,Y
00076e 9508      	RET
         

Assembly complete with no errors.
