
AVRASM ver. 1.52  GAVT.asm Mon Oct 07 22:55:04 2013


         ;CodeVisionAVR C Compiler V1.24.1d Standard
         ;(C) Copyright 1998-2004 Pavel Haiduc, HP InfoTech s.r.l.
         ;http://www.hpinfotech.ro
         ;e-mail:office@hpinfotech.ro
         
         ;Chip type           : ATmega16
         ;Program type        : Application
         ;Clock frequency     : 1,000000 MHz
         ;Memory model        : Small
         ;Optimize for        : Size
         ;(s)printf features  : int, width
         ;(s)scanf features   : long, width
         ;External SRAM size  : 0
         ;Data Stack size     : 256 byte(s)
         ;Heap size           : 0 byte(s)
         ;Promote char to int : No
         ;char is unsigned    : Yes
         ;8 bit enums         : Yes
         ;Enhanced core instructions    : On
         ;Automatic register allocation : On
         
          	.EQU UDRE=0x5
          	.EQU RXC=0x7
          	.EQU USR=0xB
          	.EQU UDR=0xC
          	.EQU EERE=0x0
          	.EQU EEWE=0x1
          	.EQU EEMWE=0x2
          	.EQU SPSR=0xE
          	.EQU SPDR=0xF
          	.EQU EECR=0x1C
          	.EQU EEDR=0x1D
          	.EQU EEARL=0x1E
          	.EQU EEARH=0x1F
          	.EQU WDTCR=0x21
          	.EQU MCUCR=0x35
          	.EQU GICR=0x3B
          	.EQU SPL=0x3D
          	.EQU SPH=0x3E
          	.EQU SREG=0x3F
         
          	.DEF R0X0=R0
          	.DEF R0X1=R1
          	.DEF R0X2=R2
          	.DEF R0X3=R3
          	.DEF R0X4=R4
          	.DEF R0X5=R5
          	.DEF R0X6=R6
          	.DEF R0X7=R7
          	.DEF R0X8=R8
          	.DEF R0X9=R9
          	.DEF R0XA=R10
          	.DEF R0XB=R11
          	.DEF R0XC=R12
          	.DEF R0XD=R13
          	.DEF R0XE=R14
          	.DEF R0XF=R15
          	.DEF R0X10=R16
          	.DEF R0X11=R17
          	.DEF R0X12=R18
          	.DEF R0X13=R19
          	.DEF R0X14=R20
          	.DEF R0X15=R21
          	.DEF R0X16=R22
          	.DEF R0X17=R23
          	.DEF R0X18=R24
          	.DEF R0X19=R25
          	.DEF R0X1A=R26
          	.DEF R0X1B=R27
          	.DEF R0X1C=R28
          	.DEF R0X1D=R29
          	.DEF R0X1E=R30
          	.DEF R0X1F=R31
         
          	.EQU __se_bit=0x40
          	.EQU __sm_mask=0xB0
          	.EQU __sm_adc_noise_red=0x10
          	.EQU __sm_powerdown=0x20
          	.EQU __sm_powersave=0x30
          	.EQU __sm_standby=0xA0
          	.EQU __sm_ext_standby=0xB0
         
          	.MACRO __CPD1N
          	CPI  R30,LOW(@0)
          	LDI  R26,HIGH(@0)
          	CPC  R31,R26
          	LDI  R26,BYTE3(@0)
          	CPC  R22,R26
          	LDI  R26,BYTE4(@0)
          	CPC  R23,R26
          	.ENDM
         
          	.MACRO __CPD2N
          	CPI  R26,LOW(@0)
          	LDI  R30,HIGH(@0)
          	CPC  R27,R30
          	LDI  R30,BYTE3(@0)
          	CPC  R24,R30
          	LDI  R30,BYTE4(@0)
          	CPC  R25,R30
          	.ENDM
         
          	.MACRO __CPWRR
          	CP   R@0,R@2
          	CPC  R@1,R@3
          	.ENDM
         
          	.MACRO __CPWRN
          	CPI  R@0,LOW(@2)
          	LDI  R30,HIGH(@2)
          	CPC  R@1,R30
          	.ENDM
         
          	.MACRO __ADDD1N
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	SBCI R22,BYTE3(-@0)
          	SBCI R23,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __ADDD2N
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	SBCI R24,BYTE3(-@0)
          	SBCI R25,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __SUBD1N
          	SUBI R30,LOW(@0)
          	SBCI R31,HIGH(@0)
          	SBCI R22,BYTE3(@0)
          	SBCI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __SUBD2N
          	SUBI R26,LOW(@0)
          	SBCI R27,HIGH(@0)
          	SBCI R24,BYTE3(@0)
          	SBCI R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ANDD1N
          	ANDI R30,LOW(@0)
          	ANDI R31,HIGH(@0)
          	ANDI R22,BYTE3(@0)
          	ANDI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ORD1N
          	ORI  R30,LOW(@0)
          	ORI  R31,HIGH(@0)
          	ORI  R22,BYTE3(@0)
          	ORI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __DELAY_USB
          	LDI  R24,LOW(@0)
          __DELAY_USB_LOOP:
          	DEC  R24
          	BRNE __DELAY_USB_LOOP
          	.ENDM
         
          	.MACRO __DELAY_USW
          	LDI  R24,LOW(@0)
          	LDI  R25,HIGH(@0)
          __DELAY_USW_LOOP:
          	SBIW R24,1
          	BRNE __DELAY_USW_LOOP
          	.ENDM
         
          	.MACRO __CLRD1S
          	LDI  R30,0
          	STD  Y+@0,R30
          	STD  Y+@0+1,R30
          	STD  Y+@0+2,R30
          	STD  Y+@0+3,R30
          	.ENDM
         
          	.MACRO __GETD1S
          	LDD  R30,Y+@0
          	LDD  R31,Y+@0+1
          	LDD  R22,Y+@0+2
          	LDD  R23,Y+@0+3
          	.ENDM
         
          	.MACRO __PUTD1S
          	STD  Y+@0,R30
          	STD  Y+@0+1,R31
          	STD  Y+@0+2,R22
          	STD  Y+@0+3,R23
          	.ENDM
         
          	.MACRO __POINTB1MN
          	LDI  R30,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1MN
          	LDI  R30,LOW(@0+@1)
          	LDI  R31,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1FN
          	LDI  R30,LOW(2*@0+@1)
          	LDI  R31,HIGH(2*@0+@1)
          	.ENDM
         
          	.MACRO __POINTB2MN
          	LDI  R26,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW2MN
          	LDI  R26,LOW(@0+@1)
          	LDI  R27,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTBRM
          	LDI  R@0,LOW(@1)
          	.ENDM
         
          	.MACRO __POINTWRM
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __POINTBRMN
          	LDI  R@0,LOW(@1+@2)
          	.ENDM
         
          	.MACRO __POINTWRMN
          	LDI  R@0,LOW(@2+@3)
          	LDI  R@1,HIGH(@2+@3)
          	.ENDM
         
          	.MACRO __GETD1N
          	LDI  R30,LOW(@0)
          	LDI  R31,HIGH(@0)
          	LDI  R22,BYTE3(@0)
          	LDI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2N
          	LDI  R26,LOW(@0)
          	LDI  R27,HIGH(@0)
          	LDI  R24,BYTE3(@0)
          	LDI  R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2S
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	LDD  R24,Y+@0+2
          	LDD  R25,Y+@0+3
          	.ENDM
         
          	.MACRO __GETB1MN
          	LDS  R30,@0+@1
          	.ENDM
         
          	.MACRO __GETW1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	LDS  R22,@0+@1+2
          	LDS  R23,@0+@1+3
          	.ENDM
         
          	.MACRO __GETBRMN
          	LDS  R@2,@0+@1
          	.ENDM
         
          	.MACRO __GETWRMN
          	LDS  R@2,@0+@1
          	LDS  R@3,@0+@1+1
          	.ENDM
         
          	.MACRO __GETB2MN
          	LDS  R26,@0+@1
          	.ENDM
         
          	.MACRO __GETW2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	LDS  R24,@0+@1+2
          	LDS  R25,@0+@1+3
          	.ENDM
         
          	.MACRO __PUTB1MN
          	STS  @0+@1,R30
          	.ENDM
         
          	.MACRO __PUTW1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	.ENDM
         
          	.MACRO __PUTD1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	STS  @0+@1+2,R22
          	STS  @0+@1+3,R23
          	.ENDM
         
          	.MACRO __PUTBMRN
          	STS  @0+@1,R@2
          	.ENDM
         
          	.MACRO __PUTWMRN
          	STS  @0+@1,R@2
          	STS  @0+@1+1,R@3
          	.ENDM
         
          	.MACRO __GETW1R
          	MOV  R30,R@0
          	MOV  R31,R@1
          	.ENDM
         
          	.MACRO __GETW2R
          	MOV  R26,R@0
          	MOV  R27,R@1
          	.ENDM
         
          	.MACRO __GETWRN
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __PUTW1R
          	MOV  R@0,R30
          	MOV  R@1,R31
          	.ENDM
         
          	.MACRO __PUTW2R
          	MOV  R@0,R26
          	MOV  R@1,R27
          	.ENDM
         
          	.MACRO __ADDWRN
          	SUBI R@0,LOW(-@2)
          	SBCI R@1,HIGH(-@2)
          	.ENDM
         
          	.MACRO __ADDWRR
          	ADD  R@0,R@2
          	ADC  R@1,R@3
          	.ENDM
         
          	.MACRO __SUBWRN
          	SUBI R@0,LOW(@2)
          	SBCI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __SUBWRR
          	SUB  R@0,R@2
          	SBC  R@1,R@3
          	.ENDM
         
          	.MACRO __ANDWRN
          	ANDI R@0,LOW(@2)
          	ANDI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ANDWRR
          	AND  R@0,R@2
          	AND  R@1,R@3
          	.ENDM
         
          	.MACRO __ORWRN
          	ORI  R@0,LOW(@2)
          	ORI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ORWRR
          	OR   R@0,R@2
          	OR   R@1,R@3
          	.ENDM
         
          	.MACRO __EORWRR
          	EOR  R@0,R@2
          	EOR  R@1,R@3
          	.ENDM
         
          	.MACRO __GETWRS
          	LDD  R@0,Y+@2
          	LDD  R@1,Y+@2+1
          	.ENDM
         
          	.MACRO __PUTWSR
          	STD  Y+@2,R@0
          	STD  Y+@2+1,R@1
          	.ENDM
         
          	.MACRO __MOVEWRR
          	MOV  R@0,R@2
          	MOV  R@1,R@3
          	.ENDM
         
          	.MACRO __INWR
          	IN   R@0,@2
          	IN   R@1,@2+1
          	.ENDM
         
          	.MACRO __OUTWR
          	OUT  @2+1,R@1
          	OUT  @2,R@0
          	.ENDM
         
          	.MACRO __CALL1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	ICALL
          	.ENDM
         
          	.MACRO __NBST
          	BST  R@0,@1
          	IN   R30,SREG
          	LDI  R31,0x40
          	EOR  R30,R31
          	OUT  SREG,R30
          	.ENDM
         
         
          	.MACRO __PUTB1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	CALL __PUTDP1
          	.ENDM
         
         
          	.MACRO __GETB1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R30,Z
          	.ENDM
         
          	.MACRO __GETW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R31,Z
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __GETD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R1,Z+
          	LD   R22,Z+
          	LD   R23,Z
          	MOVW R30,R0
          	.ENDM
         
          	.MACRO __GETB2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R26,X
          	.ENDM
         
          	.MACRO __GETW2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	.ENDM
         
          	.MACRO __GETD2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R1,X+
          	LD   R24,X+
          	LD   R25,X
          	MOVW R26,R0
          	.ENDM
         
          	.MACRO __GETBRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@1)
          	SBCI R31,HIGH(-@1)
          	LD   R@0,Z
          	.ENDM
         
          	.MACRO __GETWRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	LD   R@0,Z+
          	LD   R@1,Z
          	.ENDM
         
          	.MACRO __LSLW8SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R31,Z
          	CLR  R30
          	.ENDM
         
          	.MACRO __PUTB1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __CLRW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __CLRD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __PUTB2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R26
          	.ENDM
         
          	.MACRO __PUTW2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z+,R26
          	ST   Z,R27
          	.ENDM
         
          	.MACRO __PUTBSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTWSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	ST   Z+,R@0
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTB1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __MULBRR
          	MULS R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __MULBRRU
          	MUL  R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.CSEG
          	.ORG 0
         
          	.INCLUDE "GAVT.vec"
         
         ;INTERRUPT VECTORS
000000 940c 003a 	JMP  __RESET
000002 940c 0000 	JMP  0
000004 940c 0000 	JMP  0
000006 940c 0000 	JMP  0
000008 940c 0000 	JMP  0
00000a 940c 0000 	JMP  0
00000c 940c 0000 	JMP  0
00000e 940c 0000 	JMP  0
000010 940c 0000 	JMP  0
000012 940c 0503 	JMP  _timer0_ovf_isr
000014 940c 0000 	JMP  0
000016 940c 0000 	JMP  0
000018 940c 0000 	JMP  0
00001a 940c 0000 	JMP  0
00001c 940c 0000 	JMP  0
00001e 940c 0000 	JMP  0
000020 940c 0000 	JMP  0
000022 940c 0000 	JMP  0
000024 940c 0000 	JMP  0
000026 940c 0000 	JMP  0
000028 940c 0000 	JMP  0
         
          	.INCLUDE "GAVT.inc"
          	.DEF _t0_cnt0=R4
          	.DEF _t0_cnt1=R5
          	.DEF _t0_cnt2=R6
          	.DEF _t0_cnt3=R7
          	.DEF _ind_cnt=R8
          _IND_STROB:
          	.DB  0xBF,0xDF,0xEF,0xF7,0x7F
00002a dfbf
00002b f7ef
00002c 007f
          _DIGISYM:
          	.DB  0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8
00002d f9c0
00002e b0a4
00002f 9299
000030 f882
          	.DB  0x80,0x90,0xFF
000031 9080
000032 00ff
          _3:
          	.DB  0x55,0x55,0x55,0x55,0x55
000033 5555
000034 5555
000035 0055
          	.DEF _but=R9
          	.DEF _prog=R10
          	.DEF _step=R11
          	.DEF _ind=R12
          	.DEF _sub_ind=R13
          	.DEF _in_word=R14
         
          __GLOBAL_INI_TBL:
          	.DW  0x05
000036 0005
          	.DW  _ind_out
000037 0160
          	.DW  _3*2
000038 0066
         
          	.DW  0
000039 0000
         
          __RESET:
00003a 94f8      	CLI
00003b 27ee      	CLR  R30
00003c bbec      	OUT  EECR,R30
         
         ;INTERRUPT VECTORS ARE PLACED
         ;AT THE START OF FLASH
00003d e0f1      	LDI  R31,1
00003e bffb      	OUT  GICR,R31
00003f bfeb      	OUT  GICR,R30
000040 bfe5      	OUT  MCUCR,R30
         
         ;DISABLE WATCHDOG
000041 e1f8      	LDI  R31,0x18
000042 bdf1      	OUT  WDTCR,R31
000043 bde1      	OUT  WDTCR,R30
         
         ;CLEAR R2-R14
000044 e08d      	LDI  R24,13
000045 e0a2      	LDI  R26,2
000046 27bb      	CLR  R27
          __CLEAR_REG:
000047 93ed      	ST   X+,R30
000048 958a      	DEC  R24
000049 f7e9      	BRNE __CLEAR_REG
         
         ;CLEAR SRAM
00004a e080      	LDI  R24,LOW(0x400)
00004b e094      	LDI  R25,HIGH(0x400)
00004c e6a0      	LDI  R26,0x60
          __CLEAR_SRAM:
00004d 93ed      	ST   X+,R30
00004e 9701      	SBIW R24,1
00004f f7e9      	BRNE __CLEAR_SRAM
         
         ;GLOBAL VARIABLES INITIALIZATION
000050 e6ec      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
000051 e0f0      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
          __GLOBAL_INI_NEXT:
000052 9185      	LPM  R24,Z+
000053 9195      	LPM  R25,Z+
000054 9700      	SBIW R24,0
000055 f061      	BREQ __GLOBAL_INI_END
000056 91a5      	LPM  R26,Z+
000057 91b5      	LPM  R27,Z+
000058 9005      	LPM  R0,Z+
000059 9015      	LPM  R1,Z+
00005a 01bf      	MOVW R22,R30
00005b 01f0      	MOVW R30,R0
          __GLOBAL_INI_LOOP:
00005c 9005      	LPM  R0,Z+
00005d 920d      	ST   X+,R0
00005e 9701      	SBIW R24,1
00005f f7e1      	BRNE __GLOBAL_INI_LOOP
000060 01fb      	MOVW R30,R22
000061 cff0      	RJMP __GLOBAL_INI_NEXT
          __GLOBAL_INI_END:
         
         ;STACK POINTER INITIALIZATION
000062 e5ef      	LDI  R30,LOW(0x45F)
000063 bfed      	OUT  SPL,R30
000064 e0e4      	LDI  R30,HIGH(0x45F)
000065 bfee      	OUT  SPH,R30
         
         ;DATA STACK POINTER INITIALIZATION
000066 e6c0      	LDI  R28,LOW(0x160)
000067 e0d1      	LDI  R29,HIGH(0x160)
         
000068 940c 053e 	JMP  _main
         
          	.ESEG
          	.ORG 0
         
          	.DSEG
          	.ORG 0x160
         ;       1 #define LED_POW_ON	5
         ;       2 #define LED_PROG4	1
         ;       3 #define LED_PROG2	2
         ;       4 #define LED_PROG3	3
         ;       5 #define LED_PROG1	4 
         ;       6 #define LED_ERROR	0 
         ;       7 #define LED_WRK	6
         ;       8 #define LED_VACUUM	7
         ;       9 
         ;      10 #define GAVT3
         ;      11 
         ;      12 //#define P380
         ;      13 //#define I380
         ;      14 #define I220
         ;      15 //#define P380_MINI
         ;      16 //#define TVIST_SKO
         ;      17 //#define I380_WI
         ;      18 //#define I220_WI
         ;      19 //#define DV3KL2MD
         ;      20 
         ;      21 #define MD1	2
         ;      22 #define MD2	3
         ;      23 #define VR	4
         ;      24 #define MD3	5
         ;      25 
         ;      26 #define PP1	6
         ;      27 #define PP2	7
         ;      28 #define PP3	5
         ;      29 #define PP4	4
         ;      30 #define PP5	3
         ;      31 #define DV	0 
         ;      32 
         ;      33 #define PP7	2
         ;      34 
         ;      35 #ifdef P380_MINI
         ;      36 #define MINPROG 1
         ;      37 #define MAXPROG 1 
         ;      38 #ifdef GAVT3
         ;      39 #define DV	2
         ;      40 #endif
         ;      41 #define PP3	3
         ;      42 #endif 
         ;      43 
         ;      44 #ifdef P380
         ;      45 #define MINPROG 1
         ;      46 #define MAXPROG 3 
         ;      47 #ifdef GAVT3
         ;      48 #define DV	2
         ;      49 #endif
         ;      50 #endif 
         ;      51 
         ;      52 #ifdef I380
         ;      53 #define MINPROG 1
         ;      54 #define MAXPROG 4
         ;      55 #endif
         ;      56 
         ;      57 #ifdef I380_WI
         ;      58 #define MINPROG 1
         ;      59 #define MAXPROG 4
         ;      60 #endif
         ;      61 
         ;      62 #ifdef I220
         ;      63 #define MINPROG 3
         ;      64 #define MAXPROG 4
         ;      65 #endif
         ;      66 
         ;      67 
         ;      68 #ifdef I220_WI
         ;      69 #define MINPROG 3
         ;      70 #define MAXPROG 4
         ;      71 #endif
         ;      72 
         ;      73 #ifdef TVIST_SKO
         ;      74 #define MINPROG 2
         ;      75 #define MAXPROG 3
         ;      76 #define DV	2
         ;      77 #endif
         ;      78 
         ;      79 #ifdef DV3KL2MD
         ;      80 
         ;      81 #define PP1	3
         ;      82 #define PP2	2
         ;      83 #define PP3	1
         ;      84 //#define PP4	4
         ;      85 //#define PP5	3
         ;      86 #define DV	0 
         ;      87 
         ;      88 #define MINPROG 2
         ;      89 #define MAXPROG 3
         ;      90 
         ;      91 #endif
         ;      92 
         ;      93 bit b600Hz;
         ;      94 
         ;      95 bit b100Hz;
         ;      96 bit b10Hz;
         ;      97 char t0_cnt0,t0_cnt1,t0_cnt2,t0_cnt3;
         ;      98 char ind_cnt;
         ;      99 flash char IND_STROB[]={0b10111111,0b11011111,0b11101111,0b11110111,0b01111111};
         
          	.CSEG
         ;     100 flash char DIGISYM[]={0b11000000,0b11111001,0b10100100,0b10110000,0b10011001,0b10010010,0b10000010,0b11111000,0b10000000,0b10010000,0b11111111};								
         ;     101 
         ;     102 char ind_out[5]={0x255,0x255,0x255,0x255,0x255};
         
          	.DSEG
          _ind_out:
000160      	.BYTE 0x5
         ;     103 char dig[4];
          _dig:
000165      	.BYTE 0x4
         ;     104 bit bZ;    
         ;     105 char but;
         ;     106 static char but_n;
          _but_n_G1:
000169      	.BYTE 0x1
         ;     107 static char but_s;
          _but_s_G1:
00016a      	.BYTE 0x1
         ;     108 static char but0_cnt;
          _but0_cnt_G1:
00016b      	.BYTE 0x1
         ;     109 static char but1_cnt;
          _but1_cnt_G1:
00016c      	.BYTE 0x1
         ;     110 static char but_onL_temp;
          _but_onL_temp_G1:
00016d      	.BYTE 0x1
         ;     111 bit l_but;		//идет длинное нажатие на кнопку
         ;     112 bit n_but;          //произошло нажатие
         ;     113 bit speed;		//разрешение ускорения перебора 
         ;     114 bit bFL2; 
         ;     115 bit bFL5;
         ;     116 eeprom enum{evmON=0x55,evmOFF=0xaa}ee_vacuum_mode;
         
          	.ESEG
          _ee_vacuum_mode:
          	.DB  0x0
000000 00
         ;     117 eeprom char ee_program[2];
          _ee_program:
          	.DB  0x0
000001 00
          	.DB  0x0
000002 00
         ;     118 enum {p1=1,p2=2,p3=3,p4=4}prog;
         ;     119 enum{sOFF=0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13,s14,s15,s16,s54,s55,s100}step=sOFF;
         ;     120 enum {iMn,iPr_sel,iVr} ind;
         ;     121 char sub_ind;
         ;     122 char in_word,in_word_old,in_word_new,in_word_cnt;
         
          	.DSEG
          _in_word_old:
00016e      	.BYTE 0x1
          _in_word_new:
00016f      	.BYTE 0x1
          _in_word_cnt:
000170      	.BYTE 0x1
         ;     123 bit bERR;
         ;     124 signed int cnt_del=0;
          _cnt_del:
000171      	.BYTE 0x2
         ;     125 
         ;     126 char bVR;
          _bVR:
000173      	.BYTE 0x1
         ;     127 char bMD1;
          _bMD1:
000174      	.BYTE 0x1
         ;     128 bit bMD2;
         ;     129 bit bMD3;
         ;     130 char cnt_md1,cnt_md2,cnt_vr,cnt_md3;
          _cnt_md1:
000175      	.BYTE 0x1
          _cnt_md2:
000176      	.BYTE 0x1
          _cnt_vr:
000177      	.BYTE 0x1
          _cnt_md3:
000178      	.BYTE 0x1
         ;     131 
         ;     132 eeprom unsigned ee_delay[4,2];
         
          	.ESEG
          _ee_delay:
          	.DW  0x0
000003 00 00
          	.DW  0x0
000005 00 00
          	.DW  0x0
000007 00 00
          	.DW  0x0
000009 00 00
          	.DW  0x0
00000b 00 00
          	.DW  0x0
00000d 00 00
          	.DW  0x0
00000f 00 00
          	.DW  0x0
000011 00 00
         ;     133 eeprom char ee_vr_log;
          _ee_vr_log:
          	.DB  0x0
000013 00
         ;     134 #include <mega16.h>
         ;     135 //#include <mega8535.h>
         ;     136 //-----------------------------------------------
         ;     137 void prog_drv(void)
         ;     138 {
         
          	.CSEG
          _prog_drv:
         ;     139 char temp,temp1,temp2;
         ;     140 
         ;     141 temp=ee_program[0];
00006a 940e 0647 	CALL __SAVELOCR3
         ;	temp -> R16
         ;	temp1 -> R17
         ;	temp2 -> R18
00006c e0a1      	LDI  R26,LOW(_ee_program)
00006d e0b0      	LDI  R27,HIGH(_ee_program)
00006e 940e 0623 	CALL __EEPROMRDB
000070 2f0e      	MOV  R16,R30
         ;     142 temp1=ee_program[1];
000071   +  	__POINTW2MN _ee_program,1
000073 940e 0623 	CALL __EEPROMRDB
000075 2f1e      	MOV  R17,R30
         ;     143 temp2=ee_program[2];
000076   +  	__POINTW2MN _ee_program,2
000078 940e 0623 	CALL __EEPROMRDB
00007a 2f2e      	MOV  R18,R30
         ;     144 
         ;     145 if((temp==temp1)&&(temp==temp2))
00007b 1710      	CP   R17,R16
00007c f411      	BRNE _0x5
00007d 1720      	CP   R18,R16
00007e f009      	BREQ _0x6
          _0x5:
00007f c001      	RJMP _0x4
          _0x6:
         ;     146 	{
         ;     147 	}
         ;     148 else if((temp==temp1)&&(temp!=temp2))
000080 c01d      	RJMP _0x7
          _0x4:
000081 1710      	CP   R17,R16
000082 f411      	BRNE _0x9
000083 1720      	CP   R18,R16
000084 f409      	BRNE _0xA
          _0x9:
000085 c002      	RJMP _0x8
          _0xA:
         ;     149 	{
         ;     150 	temp2=temp;
000086 2f20      	MOV  R18,R16
         ;     151 	}
         ;     152 else if((temp!=temp1)&&(temp==temp2))
000087 c016      	RJMP _0xB
          _0x8:
000088 1710      	CP   R17,R16
000089 f011      	BREQ _0xD
00008a 1720      	CP   R18,R16
00008b f009      	BREQ _0xE
          _0xD:
00008c c002      	RJMP _0xC
          _0xE:
         ;     153 	{
         ;     154 	temp1=temp;
00008d 2f10      	MOV  R17,R16
         ;     155 	}
         ;     156 else if((temp!=temp1)&&(temp1==temp2))
00008e c00f      	RJMP _0xF
          _0xC:
00008f 1710      	CP   R17,R16
000090 f011      	BREQ _0x11
000091 1721      	CP   R18,R17
000092 f009      	BREQ _0x12
          _0x11:
000093 c002      	RJMP _0x10
          _0x12:
         ;     157 	{
         ;     158 	temp=temp1;
000094 2f01      	MOV  R16,R17
         ;     159 	}
         ;     160 else if((temp!=temp1)&&(temp!=temp2))
000095 c008      	RJMP _0x13
          _0x10:
000096 1710      	CP   R17,R16
000097 f011      	BREQ _0x15
000098 1720      	CP   R18,R16
000099 f409      	BRNE _0x16
          _0x15:
00009a c003      	RJMP _0x14
          _0x16:
         ;     161 	{
         ;     162 	temp=MINPROG;
00009b e003      	LDI  R16,LOW(3)
         ;     163 	temp1=MINPROG;
00009c e013      	LDI  R17,LOW(3)
         ;     164 	temp2=MINPROG;
00009d e023      	LDI  R18,LOW(3)
         ;     165 	}
         ;     166 
         ;     167 if(!((temp<=MAXPROG)&&(temp>=MINPROG)))
          _0x14:
          _0x13:
          _0xF:
          _0xB:
          _0x7:
00009e e0e4      	LDI  R30,LOW(4)
00009f 17e0      	CP   R30,R16
0000a0 f010      	BRLO _0x18
0000a1 3003      	CPI  R16,3
0000a2 f408      	BRSH _0x17
          _0x18:
         ;     168 	{
         ;     169 	temp=MINPROG;
0000a3 e003      	LDI  R16,LOW(3)
         ;     170 	}
         ;     171 
         ;     172 if(temp!=ee_program[0])ee_program[0]=temp;
          _0x17:
0000a4 e0a1      	LDI  R26,LOW(_ee_program)
0000a5 e0b0      	LDI  R27,HIGH(_ee_program)
0000a6 940e 0623 	CALL __EEPROMRDB
0000a8 17e0      	CP   R30,R16
0000a9 f029      	BREQ _0x1A
0000aa 2fe0      	MOV  R30,R16
0000ab e0a1      	LDI  R26,LOW(_ee_program)
0000ac e0b0      	LDI  R27,HIGH(_ee_program)
0000ad 940e 0637 	CALL __EEPROMWRB
         ;     173 if(temp!=ee_program[1])ee_program[1]=temp;
          _0x1A:
0000af   +  	__POINTW2MN _ee_program,1
0000b1 940e 0623 	CALL __EEPROMRDB
0000b3 17e0      	CP   R30,R16
0000b4 f029      	BREQ _0x1B
0000b5   +  	__POINTW2MN _ee_program,1
0000b7 2fe0      	MOV  R30,R16
0000b8 940e 0637 	CALL __EEPROMWRB
         ;     174 if(temp!=ee_program[2])ee_program[2]=temp;
          _0x1B:
0000ba   +  	__POINTW2MN _ee_program,2
0000bc 940e 0623 	CALL __EEPROMRDB
0000be 17e0      	CP   R30,R16
0000bf f029      	BREQ _0x1C
0000c0   +  	__POINTW2MN _ee_program,2
0000c2 2fe0      	MOV  R30,R16
0000c3 940e 0637 	CALL __EEPROMWRB
         ;     175 
         ;     176 prog=temp;
          _0x1C:
0000c5 2ea0      	MOV  R10,R16
         ;     177 }
0000c6 940e 064c 	CALL __LOADLOCR3
0000c8 c21d      	RJMP _0xE1
         ;     178 
         ;     179 //-----------------------------------------------
         ;     180 void in_drv(void)
         ;     181 {
          _in_drv:
         ;     182 char i,temp;
         ;     183 unsigned int tempUI;
         ;     184 DDRA=0x00;
0000c9 940e 0646 	CALL __SAVELOCR4
         ;	i -> R16
         ;	temp -> R17
         ;	tempUI -> R18,R19
0000cb 940e 0586 	CALL SUBOPT_0x0
         ;     185 PORTA=0xff;
0000cd bbeb      	OUT  0x1B,R30
         ;     186 in_word_new=PINA;
0000ce b3e9      	IN   R30,0x19
0000cf 93e0 016f 	STS  _in_word_new,R30
         ;     187 if(in_word_old==in_word_new)
0000d1 91a0 016e 	LDS  R26,_in_word_old
0000d3 17ea      	CP   R30,R26
0000d4 f481      	BRNE _0x1D
         ;     188 	{
         ;     189 	if(in_word_cnt<10)
0000d5 91a0 0170 	LDS  R26,_in_word_cnt
0000d7 30aa      	CPI  R26,LOW(0xA)
0000d8 f458      	BRSH _0x1E
         ;     190 		{
         ;     191 		in_word_cnt++;
0000d9 91e0 0170 	LDS  R30,_in_word_cnt
0000db 5fef      	SUBI R30,-LOW(1)
0000dc 93e0 0170 	STS  _in_word_cnt,R30
         ;     192 		if(in_word_cnt>=10)
0000de 91a0 0170 	LDS  R26,_in_word_cnt
0000e0 30aa      	CPI  R26,LOW(0xA)
0000e1 f010      	BRLO _0x1F
         ;     193 			{
         ;     194 			in_word=in_word_old;
0000e2 90e0 016e 	LDS  R14,_in_word_old
         ;     195 			}
         ;     196 		}
          _0x1F:
         ;     197 	}
          _0x1E:
         ;     198 else in_word_cnt=0;
0000e4 c003      	RJMP _0x20
          _0x1D:
0000e5 e0e0      	LDI  R30,LOW(0)
0000e6 93e0 0170 	STS  _in_word_cnt,R30
          _0x20:
         ;     199 
         ;     200 
         ;     201 in_word_old=in_word_new;
0000e8 91e0 016f 	LDS  R30,_in_word_new
0000ea 93e0 016e 	STS  _in_word_old,R30
         ;     202 }   
0000ec 940e 064b 	CALL __LOADLOCR4
0000ee 9624      	ADIW R28,4
0000ef 9508      	RET
         ;     203 
         ;     204 #ifdef TVIST_SKO
         ;     205 //-----------------------------------------------
         ;     206 void err_drv(void)
         ;     207 {
         ;     208 if(step==sOFF)
         ;     209 	{
         ;     210     	if(prog==p2)	
         ;     211     		{
         ;     212        		if(bMD1) bERR=1;
         ;     213        		else bERR=0;
         ;     214 		}
         ;     215 	}
         ;     216 else bERR=0;
         ;     217 }
         ;     218 #endif  
         ;     219 
         ;     220 #ifndef TVIST_SKO
         ;     221 //-----------------------------------------------
         ;     222 void err_drv(void)
         ;     223 {
          _err_drv:
         ;     224 if(step==sOFF)
0000f0 20bb      	TST  R11
0000f1 f491      	BRNE _0x21
         ;     225 	{
         ;     226 	if((bMD1)||(bMD2)||(bVR)||(bMD3)) bERR=1;
0000f2 91e0 0174 	LDS  R30,_bMD1
0000f4 30e0      	CPI  R30,0
0000f5 f441      	BRNE _0x23
0000f6 fc32      	SBRC R3,2
0000f7 c006      	RJMP _0x23
0000f8 91e0 0173 	LDS  R30,_bVR
0000fa 30e0      	CPI  R30,0
0000fb f411      	BRNE _0x23
0000fc fe33      	SBRS R3,3
0000fd c003      	RJMP _0x22
          _0x23:
0000fe 9468      	SET
0000ff f831      	BLD  R3,1
         ;     227 	else bERR=0;
000100 c002      	RJMP _0x25
          _0x22:
000101 94e8      	CLT
000102 f831      	BLD  R3,1
          _0x25:
         ;     228 	}
         ;     229 else bERR=0;
000103 c002      	RJMP _0x26
          _0x21:
000104 94e8      	CLT
000105 f831      	BLD  R3,1
          _0x26:
         ;     230 }
000106 9508      	RET
         ;     231 #endif
         ;     232 //-----------------------------------------------
         ;     233 void mdvr_drv(void)
         ;     234 {
          _mdvr_drv:
         ;     235 if(!(in_word&(1<<MD1)))
000107 fce2      	SBRC R14,2
000108 c011      	RJMP _0x27
         ;     236 	{
         ;     237 	if(cnt_md1<10)
000109 91a0 0175 	LDS  R26,_cnt_md1
00010b 30aa      	CPI  R26,LOW(0xA)
00010c f460      	BRSH _0x28
         ;     238 		{
         ;     239 		cnt_md1++;
00010d 91e0 0175 	LDS  R30,_cnt_md1
00010f 5fef      	SUBI R30,-LOW(1)
000110 93e0 0175 	STS  _cnt_md1,R30
         ;     240 		if(cnt_md1==10) bMD1=1;
000112 91a0 0175 	LDS  R26,_cnt_md1
000114 30aa      	CPI  R26,LOW(0xA)
000115 f419      	BRNE _0x29
000116 e0e1      	LDI  R30,LOW(1)
000117 93e0 0174 	STS  _bMD1,R30
         ;     241 		}
          _0x29:
         ;     242 
         ;     243 	}
          _0x28:
         ;     244 else
000119 c00c      	RJMP _0x2A
          _0x27:
         ;     245 	{
         ;     246 	if(cnt_md1)
00011a 91e0 0175 	LDS  R30,_cnt_md1
00011c 30e0      	CPI  R30,0
00011d f041      	BREQ _0x2B
         ;     247 		{
         ;     248 		cnt_md1--;
00011e 50e1      	SUBI R30,LOW(1)
00011f 93e0 0175 	STS  _cnt_md1,R30
         ;     249 		if(cnt_md1==0) bMD1=0;
000121 30e0      	CPI  R30,0
000122 f419      	BRNE _0x2C
000123 e0e0      	LDI  R30,LOW(0)
000124 93e0 0174 	STS  _bMD1,R30
         ;     250 		}
          _0x2C:
         ;     251 
         ;     252 	}
          _0x2B:
          _0x2A:
         ;     253 
         ;     254 if(!(in_word&(1<<MD2)))
000126 fce3      	SBRC R14,3
000127 c010      	RJMP _0x2D
         ;     255 	{
         ;     256 	if(cnt_md2<10)
000128 91a0 0176 	LDS  R26,_cnt_md2
00012a 30aa      	CPI  R26,LOW(0xA)
00012b f458      	BRSH _0x2E
         ;     257 		{
         ;     258 		cnt_md2++;
00012c 91e0 0176 	LDS  R30,_cnt_md2
00012e 5fef      	SUBI R30,-LOW(1)
00012f 93e0 0176 	STS  _cnt_md2,R30
         ;     259 		if(cnt_md2==10) bMD2=1;
000131 91a0 0176 	LDS  R26,_cnt_md2
000133 30aa      	CPI  R26,LOW(0xA)
000134 f411      	BRNE _0x2F
000135 9468      	SET
000136 f832      	BLD  R3,2
         ;     260 		}
          _0x2F:
         ;     261 
         ;     262 	}
          _0x2E:
         ;     263 else
000137 c00b      	RJMP _0x30
          _0x2D:
         ;     264 	{
         ;     265 	if(cnt_md2)
000138 91e0 0176 	LDS  R30,_cnt_md2
00013a 30e0      	CPI  R30,0
00013b f039      	BREQ _0x31
         ;     266 		{
         ;     267 		cnt_md2--;
00013c 50e1      	SUBI R30,LOW(1)
00013d 93e0 0176 	STS  _cnt_md2,R30
         ;     268 		if(cnt_md2==0) bMD2=0;
00013f 30e0      	CPI  R30,0
000140 f411      	BRNE _0x32
000141 94e8      	CLT
000142 f832      	BLD  R3,2
         ;     269 		}
          _0x32:
         ;     270 
         ;     271 	}
          _0x31:
          _0x30:
         ;     272 
         ;     273 if(!(in_word&(1<<MD3)))
000143 fce5      	SBRC R14,5
000144 c010      	RJMP _0x33
         ;     274 	{
         ;     275 	if(cnt_md3<10)
000145 91a0 0178 	LDS  R26,_cnt_md3
000147 30aa      	CPI  R26,LOW(0xA)
000148 f458      	BRSH _0x34
         ;     276 		{
         ;     277 		cnt_md3++;
000149 91e0 0178 	LDS  R30,_cnt_md3
00014b 5fef      	SUBI R30,-LOW(1)
00014c 93e0 0178 	STS  _cnt_md3,R30
         ;     278 		if(cnt_md3==10) bMD3=1;
00014e 91a0 0178 	LDS  R26,_cnt_md3
000150 30aa      	CPI  R26,LOW(0xA)
000151 f411      	BRNE _0x35
000152 9468      	SET
000153 f833      	BLD  R3,3
         ;     279 		}
          _0x35:
         ;     280 
         ;     281 	}
          _0x34:
         ;     282 else
000154 c00b      	RJMP _0x36
          _0x33:
         ;     283 	{
         ;     284 	if(cnt_md3)
000155 91e0 0178 	LDS  R30,_cnt_md3
000157 30e0      	CPI  R30,0
000158 f039      	BREQ _0x37
         ;     285 		{
         ;     286 		cnt_md3--;
000159 50e1      	SUBI R30,LOW(1)
00015a 93e0 0178 	STS  _cnt_md3,R30
         ;     287 		if(cnt_md3==0) bMD3=0;
00015c 30e0      	CPI  R30,0
00015d f411      	BRNE _0x38
00015e 94e8      	CLT
00015f f833      	BLD  R3,3
         ;     288 		}
          _0x38:
         ;     289 
         ;     290 	}
          _0x37:
          _0x36:
         ;     291 
         ;     292 if(((!(in_word&(1<<VR)))&&(ee_vr_log)) || (((in_word&(1<<VR)))&&(!ee_vr_log)))
000160 fce4      	SBRC R14,4
000161 c006      	RJMP _0x3A
000162 e1a3      	LDI  R26,LOW(_ee_vr_log)
000163 e0b0      	LDI  R27,HIGH(_ee_vr_log)
000164 940e 0623 	CALL __EEPROMRDB
000166 30e0      	CPI  R30,0
000167 f449      	BRNE _0x3C
          _0x3A:
000168 fee4      	SBRS R14,4
000169 c006      	RJMP _0x3D
00016a e1a3      	LDI  R26,LOW(_ee_vr_log)
00016b e0b0      	LDI  R27,HIGH(_ee_vr_log)
00016c 940e 0623 	CALL __EEPROMRDB
00016e 30e0      	CPI  R30,0
00016f f009      	BREQ _0x3C
          _0x3D:
000170 c011      	RJMP _0x39
          _0x3C:
         ;     293 	{
         ;     294 	if(cnt_vr<10)
000171 91a0 0177 	LDS  R26,_cnt_vr
000173 30aa      	CPI  R26,LOW(0xA)
000174 f460      	BRSH _0x40
         ;     295 		{
         ;     296 		cnt_vr++;
000175 91e0 0177 	LDS  R30,_cnt_vr
000177 5fef      	SUBI R30,-LOW(1)
000178 93e0 0177 	STS  _cnt_vr,R30
         ;     297 		if(cnt_vr==10) bVR=1;
00017a 91a0 0177 	LDS  R26,_cnt_vr
00017c 30aa      	CPI  R26,LOW(0xA)
00017d f419      	BRNE _0x41
00017e e0e1      	LDI  R30,LOW(1)
00017f 93e0 0173 	STS  _bVR,R30
         ;     298 		}
          _0x41:
         ;     299 
         ;     300 	}
          _0x40:
         ;     301 else
000181 c00c      	RJMP _0x42
          _0x39:
         ;     302 	{
         ;     303 	if(cnt_vr)
000182 91e0 0177 	LDS  R30,_cnt_vr
000184 30e0      	CPI  R30,0
000185 f041      	BREQ _0x43
         ;     304 		{
         ;     305 		cnt_vr--;
000186 50e1      	SUBI R30,LOW(1)
000187 93e0 0177 	STS  _cnt_vr,R30
         ;     306 		if(cnt_vr==0) bVR=0;
000189 30e0      	CPI  R30,0
00018a f419      	BRNE _0x44
00018b e0e0      	LDI  R30,LOW(0)
00018c 93e0 0173 	STS  _bVR,R30
         ;     307 		}
          _0x44:
         ;     308 
         ;     309 	}
          _0x43:
          _0x42:
         ;     310 } 
00018e 9508      	RET
         ;     311 
         ;     312 #ifdef DV3KL2MD
         ;     313 //-----------------------------------------------
         ;     314 void step_contr(void)
         ;     315 {
         ;     316 char temp=0;
         ;     317 DDRB=0xFF;
         ;     318 
         ;     319 if(step==sOFF)
         ;     320 	{
         ;     321 	temp=0;
         ;     322 	}
         ;     323 
         ;     324 else if(step==s1)
         ;     325 	{
         ;     326 	temp|=(1<<PP1);
         ;     327 
         ;     328 	cnt_del--;
         ;     329 	if(cnt_del==0)
         ;     330 		{
         ;     331 		step=s2;
         ;     332 		cnt_del=20;
         ;     333 		}
         ;     334 	}
         ;     335 
         ;     336 
         ;     337 else if(step==s2)
         ;     338 	{
         ;     339 	temp|=(1<<PP1)|(1<<DV);
         ;     340 
         ;     341 	cnt_del--;
         ;     342 	if(cnt_del==0)
         ;     343 		{
         ;     344 		step=s3;
         ;     345 		}
         ;     346 	}
         ;     347 	
         ;     348 else if(step==s3)
         ;     349 	{
         ;     350 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
         ;     351      if(!bMD1)goto step_contr_end;
         ;     352      step=s4;
         ;     353      }     
         ;     354 else if(step==s4)
         ;     355 	{          
         ;     356      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     357      if(!bMD2)goto step_contr_end;
         ;     358      step=s5;
         ;     359      cnt_del=30;
         ;     360      } 
         ;     361      
         ;     362 else if(step==s5)
         ;     363 	{
         ;     364 	temp|=(1<<PP1)|(1<<DV);
         ;     365 
         ;     366 	cnt_del--;
         ;     367 	if(cnt_del==0)
         ;     368 		{
         ;     369 		step=s6;
         ;     370 		cnt_del=70;
         ;     371 		}
         ;     372 	}     
         ;     373 else if(step==s6)
         ;     374 		{
         ;     375 	temp|=(1<<PP1);
         ;     376 	cnt_del--;
         ;     377 	if(cnt_del==0)
         ;     378 		{
         ;     379 		step=sOFF;
         ;     380           }     
         ;     381      }     
         ;     382 
         ;     383 step_contr_end:
         ;     384 
         ;     385 PORTB=~temp;
         ;     386 }
         ;     387 #endif
         ;     388 
         ;     389 #ifdef P380_MINI
         ;     390 //-----------------------------------------------
         ;     391 void step_contr(void)
         ;     392 {
         ;     393 char temp=0;
         ;     394 DDRB=0xFF;
         ;     395 
         ;     396 if(step==sOFF)
         ;     397 	{
         ;     398 	temp=0;
         ;     399 	}
         ;     400 
         ;     401 else if(step==s1)
         ;     402 	{
         ;     403 	temp|=(1<<PP1);
         ;     404 
         ;     405 	cnt_del--;
         ;     406 	if(cnt_del==0)
         ;     407 		{
         ;     408 		step=s2;
         ;     409 		}
         ;     410 	}
         ;     411 
         ;     412 else if(step==s2)
         ;     413 	{
         ;     414 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
         ;     415      if(!bMD1)goto step_contr_end;
         ;     416      step=s3;
         ;     417      }     
         ;     418 else if(step==s3)
         ;     419 	{          
         ;     420      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     421      if(!bMD2)goto step_contr_end;
         ;     422      step=s4;
         ;     423      cnt_del=50;
         ;     424      }
         ;     425 else if(step==s4)
         ;     426 		{
         ;     427 	temp|=(1<<PP1);
         ;     428 	cnt_del--;
         ;     429 	if(cnt_del==0)
         ;     430 		{
         ;     431 		step=sOFF;
         ;     432           }     
         ;     433      }     
         ;     434 
         ;     435 step_contr_end:
         ;     436 
         ;     437 PORTB=~temp;
         ;     438 }
         ;     439 #endif
         ;     440 
         ;     441 #ifdef P380
         ;     442 //-----------------------------------------------
         ;     443 void step_contr(void)
         ;     444 {
         ;     445 char temp=0;
         ;     446 DDRB=0xFF;
         ;     447 
         ;     448 if(step==sOFF)
         ;     449 	{
         ;     450 	temp=0;
         ;     451 	}
         ;     452 
         ;     453 else if(prog==p1)
         ;     454 	{
         ;     455 	if(step==s1)
         ;     456 		{
         ;     457 		temp|=(1<<PP1)|(1<<PP2);
         ;     458 
         ;     459 		cnt_del--;
         ;     460 		if(cnt_del==0)
         ;     461 			{
         ;     462 			if(ee_vacuum_mode==evmOFF)
         ;     463 				{
         ;     464 				goto lbl_0001;
         ;     465 				}
         ;     466 			else step=s2;
         ;     467 			}
         ;     468 		}
         ;     469 
         ;     470 	else if(step==s2)
         ;     471 		{
         ;     472 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     473 
         ;     474           if(!bVR)goto step_contr_end;
         ;     475 lbl_0001:
         ;     476 #ifndef BIG_CAM
         ;     477 		cnt_del=30;
         ;     478 #endif
         ;     479 
         ;     480 #ifdef BIG_CAM
         ;     481 		cnt_del=100;
         ;     482 #endif
         ;     483 		step=s3;
         ;     484 		}
         ;     485 
         ;     486 	else if(step==s3)
         ;     487 		{
         ;     488 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     489 		cnt_del--;
         ;     490 		if(cnt_del==0)
         ;     491 			{
         ;     492 			step=s4;
         ;     493 			}
         ;     494           }
         ;     495 	else if(step==s4)
         ;     496 		{
         ;     497 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     498 
         ;     499           if(!bMD1)goto step_contr_end;
         ;     500 
         ;     501 		cnt_del=40;
         ;     502 		step=s5;
         ;     503 		}
         ;     504 	else if(step==s5)
         ;     505 		{
         ;     506 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     507 
         ;     508 		cnt_del--;
         ;     509 		if(cnt_del==0)
         ;     510 			{
         ;     511 			step=s6;
         ;     512 			}
         ;     513 		}
         ;     514 	else if(step==s6)
         ;     515 		{
         ;     516 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     517 
         ;     518          	if(!bMD2)goto step_contr_end;
         ;     519           cnt_del=40;
         ;     520 		//step=s7;
         ;     521 		
         ;     522           step=s55;
         ;     523           cnt_del=40;
         ;     524 		}
         ;     525 	else if(step==s55)
         ;     526 		{
         ;     527 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     528           cnt_del--;
         ;     529           if(cnt_del==0)
         ;     530 			{
         ;     531           	step=s7;
         ;     532           	cnt_del=20;
         ;     533 			}
         ;     534          		
         ;     535 		}
         ;     536 	else if(step==s7)
         ;     537 		{
         ;     538 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     539 
         ;     540 		cnt_del--;
         ;     541 		if(cnt_del==0)
         ;     542 			{
         ;     543 			step=s8;
         ;     544 			cnt_del=30;
         ;     545 			}
         ;     546 		}
         ;     547 	else if(step==s8)
         ;     548 		{
         ;     549 		temp|=(1<<PP1)|(1<<PP3);
         ;     550 
         ;     551 		cnt_del--;
         ;     552 		if(cnt_del==0)
         ;     553 			{
         ;     554 			step=s9;
         ;     555 #ifndef BIG_CAM
         ;     556 		cnt_del=150;
         ;     557 #endif
         ;     558 
         ;     559 #ifdef BIG_CAM
         ;     560 		cnt_del=200;
         ;     561 #endif
         ;     562 			}
         ;     563 		}
         ;     564 	else if(step==s9)
         ;     565 		{
         ;     566 		temp|=(1<<PP1)|(1<<PP2);
         ;     567 
         ;     568 		cnt_del--;
         ;     569 		if(cnt_del==0)
         ;     570 			{
         ;     571 			step=s10;
         ;     572 			cnt_del=30;
         ;     573 			}
         ;     574 		}
         ;     575 	else if(step==s10)
         ;     576 		{
         ;     577 		temp|=(1<<PP2);
         ;     578 		cnt_del--;
         ;     579 		if(cnt_del==0)
         ;     580 			{
         ;     581 			step=sOFF;
         ;     582 			}
         ;     583 		}
         ;     584 	}
         ;     585 
         ;     586 if(prog==p2)
         ;     587 	{
         ;     588 
         ;     589 	if(step==s1)
         ;     590 		{
         ;     591 		temp|=(1<<PP1)|(1<<PP2);
         ;     592 
         ;     593 		cnt_del--;
         ;     594 		if(cnt_del==0)
         ;     595 			{
         ;     596 			if(ee_vacuum_mode==evmOFF)
         ;     597 				{
         ;     598 				goto lbl_0002;
         ;     599 				}
         ;     600 			else step=s2;
         ;     601 			}
         ;     602 		}
         ;     603 
         ;     604 	else if(step==s2)
         ;     605 		{
         ;     606 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     607 
         ;     608           if(!bVR)goto step_contr_end;
         ;     609 lbl_0002:
         ;     610 #ifndef BIG_CAM
         ;     611 		cnt_del=30;
         ;     612 #endif
         ;     613 
         ;     614 #ifdef BIG_CAM
         ;     615 		cnt_del=100;
         ;     616 #endif
         ;     617 		step=s3;
         ;     618 		}
         ;     619 
         ;     620 	else if(step==s3)
         ;     621 		{
         ;     622 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     623 
         ;     624 		cnt_del--;
         ;     625 		if(cnt_del==0)
         ;     626 			{
         ;     627 			step=s4;
         ;     628 			}
         ;     629 		}
         ;     630 
         ;     631 	else if(step==s4)
         ;     632 		{
         ;     633 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     634 
         ;     635           if(!bMD1)goto step_contr_end;
         ;     636          	cnt_del=30;
         ;     637 		step=s5;
         ;     638 		}
         ;     639 
         ;     640 	else if(step==s5)
         ;     641 		{
         ;     642 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     643 
         ;     644 		cnt_del--;
         ;     645 		if(cnt_del==0)
         ;     646 			{
         ;     647 			step=s6;
         ;     648 			cnt_del=30;
         ;     649 			}
         ;     650 		}
         ;     651 
         ;     652 	else if(step==s6)
         ;     653 		{
         ;     654 		temp|=(1<<PP1)|(1<<PP3);
         ;     655 
         ;     656 		cnt_del--;
         ;     657 		if(cnt_del==0)
         ;     658 			{
         ;     659 			step=s7;
         ;     660 #ifndef BIG_CAM
         ;     661 		cnt_del=150;
         ;     662 #endif
         ;     663 
         ;     664 #ifdef BIG_CAM
         ;     665 		cnt_del=200;
         ;     666 #endif
         ;     667 			}
         ;     668 		}
         ;     669 
         ;     670 	else if(step==s7)
         ;     671 		{
         ;     672 		temp|=(1<<PP1)|(1<<PP2);
         ;     673 
         ;     674 		cnt_del--;
         ;     675 		if(cnt_del==0)
         ;     676 			{
         ;     677 			step=s8;
         ;     678 			cnt_del=30;
         ;     679 			}
         ;     680 		}
         ;     681 	else if(step==s8)
         ;     682 		{
         ;     683 		temp|=(1<<PP2);
         ;     684 
         ;     685 		cnt_del--;
         ;     686 		if(cnt_del==0)
         ;     687 			{
         ;     688 			step=sOFF;
         ;     689 			}
         ;     690 		}
         ;     691 	}
         ;     692 
         ;     693 if(prog==p3)
         ;     694 	{
         ;     695 
         ;     696 	if(step==s1)
         ;     697 		{
         ;     698 		temp|=(1<<PP1)|(1<<PP2);
         ;     699 
         ;     700 		cnt_del--;
         ;     701 		if(cnt_del==0)
         ;     702 			{
         ;     703 			if(ee_vacuum_mode==evmOFF)
         ;     704 				{
         ;     705 				goto lbl_0003;
         ;     706 				}
         ;     707 			else step=s2;
         ;     708 			}
         ;     709 		}
         ;     710 
         ;     711 	else if(step==s2)
         ;     712 		{
         ;     713 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     714 
         ;     715           if(!bVR)goto step_contr_end;
         ;     716 lbl_0003:
         ;     717 #ifndef BIG_CAM
         ;     718 		cnt_del=80;
         ;     719 #endif
         ;     720 
         ;     721 #ifdef BIG_CAM
         ;     722 		cnt_del=100;
         ;     723 #endif
         ;     724 		step=s3;
         ;     725 		}
         ;     726 
         ;     727 	else if(step==s3)
         ;     728 		{
         ;     729 		temp|=(1<<PP1)|(1<<PP3);
         ;     730 
         ;     731 		cnt_del--;
         ;     732 		if(cnt_del==0)
         ;     733 			{
         ;     734 			step=s4;
         ;     735 			cnt_del=120;
         ;     736 			}
         ;     737 		}
         ;     738 
         ;     739 	else if(step==s4)
         ;     740 		{
         ;     741 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<PP5);
         ;     742 
         ;     743 		cnt_del--;
         ;     744 		if(cnt_del==0)
         ;     745 			{
         ;     746 			step=s5;
         ;     747 
         ;     748 		
         ;     749 #ifndef BIG_CAM
         ;     750 		cnt_del=150;
         ;     751 #endif
         ;     752 
         ;     753 #ifdef BIG_CAM
         ;     754 		cnt_del=200;
         ;     755 #endif
         ;     756 	//	step=s5;
         ;     757 	}
         ;     758 		}
         ;     759 
         ;     760 	else if(step==s5)
         ;     761 		{
         ;     762 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<PP5);
         ;     763 
         ;     764 		cnt_del--;
         ;     765 		if(cnt_del==0)
         ;     766 			{
         ;     767 			step=s6;
         ;     768 			cnt_del=30;
         ;     769 			}
         ;     770 		}
         ;     771 
         ;     772 	else if(step==s6)
         ;     773 		{
         ;     774 		temp|=(1<<PP2)|(1<<PP4)|(1<<PP5);
         ;     775 
         ;     776 		cnt_del--;
         ;     777 		if(cnt_del==0)
         ;     778 			{
         ;     779 			step=s7;
         ;     780 			cnt_del=30;
         ;     781 			}
         ;     782 		}
         ;     783 
         ;     784 	else if(step==s7)
         ;     785 		{
         ;     786 		temp|=(1<<PP2);
         ;     787 
         ;     788 		cnt_del--;
         ;     789 		if(cnt_del==0)
         ;     790 			{
         ;     791 			step=sOFF;
         ;     792 			}
         ;     793 		}
         ;     794 
         ;     795 	}
         ;     796 step_contr_end:
         ;     797 
         ;     798 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;     799 
         ;     800 PORTB=~temp;
         ;     801 }
         ;     802 #endif
         ;     803 #ifdef I380
         ;     804 //-----------------------------------------------
         ;     805 void step_contr(void)
         ;     806 {
         ;     807 char temp=0;
         ;     808 DDRB=0xFF;
         ;     809 
         ;     810 if(step==sOFF)goto step_contr_end;
         ;     811 
         ;     812 else if(prog==p1)
         ;     813 	{
         ;     814 	if(step==s1)    //жесть
         ;     815 		{
         ;     816 		temp|=(1<<PP1);
         ;     817           if(!bMD1)goto step_contr_end;
         ;     818 
         ;     819 			if(ee_vacuum_mode==evmOFF)
         ;     820 				{
         ;     821 				goto lbl_0001;
         ;     822 				}
         ;     823 			else step=s2;
         ;     824 		}
         ;     825 
         ;     826 	else if(step==s2)
         ;     827 		{
         ;     828 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     829           if(!bVR)goto step_contr_end;
         ;     830 lbl_0001:
         ;     831 
         ;     832           step=s100;
         ;     833 		cnt_del=40;
         ;     834           }
         ;     835 	else if(step==s100)
         ;     836 		{
         ;     837 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;     838           cnt_del--;
         ;     839           if(cnt_del==0)
         ;     840 			{
         ;     841           	step=s3;
         ;     842           	cnt_del=50;
         ;     843 			}
         ;     844 		}
         ;     845 
         ;     846 	else if(step==s3)
         ;     847 		{
         ;     848 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     849           cnt_del--;
         ;     850           if(cnt_del==0)
         ;     851 			{
         ;     852           	step=s4;
         ;     853 			}
         ;     854 		}
         ;     855 	else if(step==s4)
         ;     856 		{
         ;     857 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;     858           if(!bMD2)goto step_contr_end;
         ;     859           step=s5;
         ;     860           cnt_del=20;
         ;     861 		}
         ;     862 	else if(step==s5)
         ;     863 		{
         ;     864 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     865           cnt_del--;
         ;     866           if(cnt_del==0)
         ;     867 			{
         ;     868           	step=s6;
         ;     869 			}
         ;     870           }
         ;     871 	else if(step==s6)
         ;     872 		{
         ;     873 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;     874           if(!bMD3)goto step_contr_end;
         ;     875           step=s7;
         ;     876           cnt_del=20;
         ;     877 		}
         ;     878 
         ;     879 	else if(step==s7)
         ;     880 		{
         ;     881 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     882           cnt_del--;
         ;     883           if(cnt_del==0)
         ;     884 			{
         ;     885           	step=s8;
         ;     886           	cnt_del=ee_delay[prog,0]*10U;;
         ;     887 			}
         ;     888           }
         ;     889 	else if(step==s8)
         ;     890 		{
         ;     891 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;     892           cnt_del--;
         ;     893           if(cnt_del==0)
         ;     894 			{
         ;     895           	step=s9;
         ;     896           	cnt_del=20;
         ;     897 			}
         ;     898           }
         ;     899 	else if(step==s9)
         ;     900 		{
         ;     901 		temp|=(1<<PP1);
         ;     902           cnt_del--;
         ;     903           if(cnt_del==0)
         ;     904 			{
         ;     905           	step=sOFF;
         ;     906           	}
         ;     907           }
         ;     908 	}
         ;     909 
         ;     910 else if(prog==p2)  //ско
         ;     911 	{
         ;     912 	if(step==s1)
         ;     913 		{
         ;     914 		temp|=(1<<PP1);
         ;     915           if(!bMD1)goto step_contr_end;
         ;     916 
         ;     917 			if(ee_vacuum_mode==evmOFF)
         ;     918 				{
         ;     919 				goto lbl_0002;
         ;     920 				}
         ;     921 			else step=s2;
         ;     922 
         ;     923           //step=s2;
         ;     924 		}
         ;     925 
         ;     926 	else if(step==s2)
         ;     927 		{
         ;     928 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     929           if(!bVR)goto step_contr_end;
         ;     930 
         ;     931 lbl_0002:
         ;     932           step=s100;
         ;     933 		cnt_del=40;
         ;     934           }
         ;     935 	else if(step==s100)
         ;     936 		{
         ;     937 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;     938           cnt_del--;
         ;     939           if(cnt_del==0)
         ;     940 			{
         ;     941           	step=s3;
         ;     942           	cnt_del=50;
         ;     943 			}
         ;     944 		}
         ;     945 	else if(step==s3)
         ;     946 		{
         ;     947 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     948           cnt_del--;
         ;     949           if(cnt_del==0)
         ;     950 			{
         ;     951           	step=s4;
         ;     952 			}
         ;     953 		}
         ;     954 	else if(step==s4)
         ;     955 		{
         ;     956 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;     957           if(!bMD2)goto step_contr_end;
         ;     958           step=s5;
         ;     959           cnt_del=20;
         ;     960 		}
         ;     961 	else if(step==s5)
         ;     962 		{
         ;     963 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     964           cnt_del--;
         ;     965           if(cnt_del==0)
         ;     966 			{
         ;     967           	step=s6;
         ;     968           	cnt_del=ee_delay[prog,0]*10U;
         ;     969 			}
         ;     970           }
         ;     971 	else if(step==s6)
         ;     972 		{
         ;     973 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;     974           cnt_del--;
         ;     975           if(cnt_del==0)
         ;     976 			{
         ;     977           	step=s7;
         ;     978           	cnt_del=20;
         ;     979 			}
         ;     980           }
         ;     981 	else if(step==s7)
         ;     982 		{
         ;     983 		temp|=(1<<PP1);
         ;     984           cnt_del--;
         ;     985           if(cnt_del==0)
         ;     986 			{
         ;     987           	step=sOFF;
         ;     988           	}
         ;     989           }
         ;     990 	}
         ;     991 
         ;     992 else if(prog==p3)   //твист
         ;     993 	{
         ;     994 	if(step==s1)
         ;     995 		{
         ;     996 		temp|=(1<<PP1);
         ;     997           if(!bMD1)goto step_contr_end;
         ;     998 
         ;     999 			if(ee_vacuum_mode==evmOFF)
         ;    1000 				{
         ;    1001 				goto lbl_0003;
         ;    1002 				}
         ;    1003 			else step=s2;
         ;    1004 
         ;    1005           //step=s2;
         ;    1006 		}
         ;    1007 
         ;    1008 	else if(step==s2)
         ;    1009 		{
         ;    1010 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1011           if(!bVR)goto step_contr_end;
         ;    1012 lbl_0003:
         ;    1013           cnt_del=50;
         ;    1014 		step=s3;
         ;    1015 		}
         ;    1016 
         ;    1017 
         ;    1018 	else	if(step==s3)
         ;    1019 		{
         ;    1020 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1021 		cnt_del--;
         ;    1022 		if(cnt_del==0)
         ;    1023 			{
         ;    1024 			cnt_del=ee_delay[prog,0]*10U;
         ;    1025 			step=s4;
         ;    1026 			}
         ;    1027           }
         ;    1028 	else if(step==s4)
         ;    1029 		{
         ;    1030 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1031 		cnt_del--;
         ;    1032  		if(cnt_del==0)
         ;    1033 			{
         ;    1034 			cnt_del=ee_delay[prog,1]*10U;
         ;    1035 			step=s5;
         ;    1036 			}
         ;    1037 		}
         ;    1038 
         ;    1039 	else if(step==s5)
         ;    1040 		{
         ;    1041 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1042 		cnt_del--;
         ;    1043 		if(cnt_del==0)
         ;    1044 			{
         ;    1045 			step=s6;
         ;    1046 			cnt_del=20;
         ;    1047 			}
         ;    1048 		}
         ;    1049 
         ;    1050 	else if(step==s6)
         ;    1051 		{
         ;    1052 		temp|=(1<<PP1);
         ;    1053   		cnt_del--;
         ;    1054 		if(cnt_del==0)
         ;    1055 			{
         ;    1056 			step=sOFF;
         ;    1057 			}
         ;    1058 		}
         ;    1059 
         ;    1060 	}
         ;    1061 
         ;    1062 else if(prog==p4)      //замок
         ;    1063 	{
         ;    1064 	if(step==s1)
         ;    1065 		{
         ;    1066 		temp|=(1<<PP1);
         ;    1067           if(!bMD1)goto step_contr_end;
         ;    1068 
         ;    1069 			if(ee_vacuum_mode==evmOFF)
         ;    1070 				{
         ;    1071 				goto lbl_0004;
         ;    1072 				}
         ;    1073 			else step=s2;
         ;    1074           //step=s2;
         ;    1075 		}
         ;    1076 
         ;    1077 	else if(step==s2)
         ;    1078 		{
         ;    1079 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1080           if(!bVR)goto step_contr_end;
         ;    1081 lbl_0004:
         ;    1082           step=s3;
         ;    1083 		cnt_del=50;
         ;    1084           }
         ;    1085 
         ;    1086 	else if(step==s3)
         ;    1087 		{
         ;    1088 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1089           cnt_del--;
         ;    1090           if(cnt_del==0)
         ;    1091 			{
         ;    1092           	step=s4;
         ;    1093 			cnt_del=ee_delay[prog,0]*10U;
         ;    1094 			}
         ;    1095           }
         ;    1096 
         ;    1097    	else if(step==s4)
         ;    1098 		{
         ;    1099 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1100 		cnt_del--;
         ;    1101 		if(cnt_del==0)
         ;    1102 			{
         ;    1103 			step=s5;
         ;    1104 			cnt_del=30;
         ;    1105 			}
         ;    1106 		}
         ;    1107 
         ;    1108 	else if(step==s5)
         ;    1109 		{
         ;    1110 		temp|=(1<<PP1)|(1<<PP4);
         ;    1111 		cnt_del--;
         ;    1112 		if(cnt_del==0)
         ;    1113 			{
         ;    1114 			step=s6;
         ;    1115 			cnt_del=ee_delay[prog,1]*10U;
         ;    1116 			}
         ;    1117 		}
         ;    1118 
         ;    1119 	else if(step==s6)
         ;    1120 		{
         ;    1121 		temp|=(1<<PP4);
         ;    1122 		cnt_del--;
         ;    1123 		if(cnt_del==0)
         ;    1124 			{
         ;    1125 			step=sOFF;
         ;    1126 			}
         ;    1127 		}
         ;    1128 
         ;    1129 	}
         ;    1130 	
         ;    1131 step_contr_end:
         ;    1132 
         ;    1133 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1134 
         ;    1135 PORTB=~temp;
         ;    1136 //PORTB=0x55;
         ;    1137 }
         ;    1138 #endif
         ;    1139 
         ;    1140 #ifdef I220_WI
         ;    1141 //-----------------------------------------------
         ;    1142 void step_contr(void)
         ;    1143 {
         ;    1144 char temp=0;
         ;    1145 DDRB=0xFF;
         ;    1146 
         ;    1147 if(step==sOFF)goto step_contr_end;
         ;    1148 
         ;    1149 else if(prog==p3)   //твист
         ;    1150 	{
         ;    1151 	if(step==s1)
         ;    1152 		{
         ;    1153 		temp|=(1<<PP1);
         ;    1154           if(!bMD1)goto step_contr_end;
         ;    1155 
         ;    1156 			if(ee_vacuum_mode==evmOFF)
         ;    1157 				{
         ;    1158 				goto lbl_0003;
         ;    1159 				}
         ;    1160 			else step=s2;
         ;    1161 
         ;    1162           //step=s2;
         ;    1163 		}
         ;    1164 
         ;    1165 	else if(step==s2)
         ;    1166 		{
         ;    1167 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1168           if(!bVR)goto step_contr_end;
         ;    1169 lbl_0003:
         ;    1170           cnt_del=50;
         ;    1171 		step=s3;
         ;    1172 		}
         ;    1173 
         ;    1174 
         ;    1175 	else	if(step==s3)
         ;    1176 		{
         ;    1177 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1178 		cnt_del--;
         ;    1179 		if(cnt_del==0)
         ;    1180 			{
         ;    1181 			cnt_del=90;
         ;    1182 			step=s4;
         ;    1183 			}
         ;    1184           }
         ;    1185 	else if(step==s4)
         ;    1186 		{
         ;    1187 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1188 		cnt_del--;
         ;    1189  		if(cnt_del==0)
         ;    1190 			{
         ;    1191 			cnt_del=130;
         ;    1192 			step=s5;
         ;    1193 			}
         ;    1194 		}
         ;    1195 
         ;    1196 	else if(step==s5)
         ;    1197 		{
         ;    1198 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1199 		cnt_del--;
         ;    1200 		if(cnt_del==0)
         ;    1201 			{
         ;    1202 			step=s6;
         ;    1203 			cnt_del=20;
         ;    1204 			}
         ;    1205 		}
         ;    1206 
         ;    1207 	else if(step==s6)
         ;    1208 		{
         ;    1209 		temp|=(1<<PP1);
         ;    1210   		cnt_del--;
         ;    1211 		if(cnt_del==0)
         ;    1212 			{
         ;    1213 			step=sOFF;
         ;    1214 			}
         ;    1215 		}
         ;    1216 
         ;    1217 	}
         ;    1218 
         ;    1219 else if(prog==p4)      //замок
         ;    1220 	{
         ;    1221 	if(step==s1)
         ;    1222 		{
         ;    1223 		temp|=(1<<PP1);
         ;    1224           if(!bMD1)goto step_contr_end;
         ;    1225 
         ;    1226 			if(ee_vacuum_mode==evmOFF)
         ;    1227 				{
         ;    1228 				goto lbl_0004;
         ;    1229 				}
         ;    1230 			else step=s2;
         ;    1231           //step=s2;
         ;    1232 		}
         ;    1233 
         ;    1234 	else if(step==s2)
         ;    1235 		{
         ;    1236 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1237           if(!bVR)goto step_contr_end;
         ;    1238 lbl_0004:
         ;    1239           step=s3;
         ;    1240 		cnt_del=50;
         ;    1241           }
         ;    1242 
         ;    1243 	else if(step==s3)
         ;    1244 		{
         ;    1245 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1246           cnt_del--;
         ;    1247           if(cnt_del==0)
         ;    1248 			{
         ;    1249           	step=s4;
         ;    1250 			cnt_del=120;
         ;    1251 			}
         ;    1252           }
         ;    1253 
         ;    1254    	else if(step==s4)
         ;    1255 		{
         ;    1256 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1257 		cnt_del--;
         ;    1258 		if(cnt_del==0)
         ;    1259 			{
         ;    1260 			step=s5;
         ;    1261 			cnt_del=30;
         ;    1262 			}
         ;    1263 		}
         ;    1264 
         ;    1265 	else if(step==s5)
         ;    1266 		{
         ;    1267 		temp|=(1<<PP1)|(1<<PP4);
         ;    1268 		cnt_del--;
         ;    1269 		if(cnt_del==0)
         ;    1270 			{
         ;    1271 			step=s6;
         ;    1272 			cnt_del=120;
         ;    1273 			}
         ;    1274 		}
         ;    1275 
         ;    1276 	else if(step==s6)
         ;    1277 		{
         ;    1278 		temp|=(1<<PP4);
         ;    1279 		cnt_del--;
         ;    1280 		if(cnt_del==0)
         ;    1281 			{
         ;    1282 			step=sOFF;
         ;    1283 			}
         ;    1284 		}
         ;    1285 
         ;    1286 	}
         ;    1287 	
         ;    1288 step_contr_end:
         ;    1289 
         ;    1290 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1291 
         ;    1292 PORTB=~temp;
         ;    1293 //PORTB=0x55;
         ;    1294 }
         ;    1295 #endif 
         ;    1296 
         ;    1297 #ifdef I380_WI
         ;    1298 //-----------------------------------------------
         ;    1299 void step_contr(void)
         ;    1300 {
         ;    1301 char temp=0;
         ;    1302 DDRB=0xFF;
         ;    1303 
         ;    1304 if(step==sOFF)goto step_contr_end;
         ;    1305 
         ;    1306 else if(prog==p1)
         ;    1307 	{
         ;    1308 	if(step==s1)    //жесть
         ;    1309 		{
         ;    1310 		temp|=(1<<PP1);
         ;    1311           if(!bMD1)goto step_contr_end;
         ;    1312 
         ;    1313 			if(ee_vacuum_mode==evmOFF)
         ;    1314 				{
         ;    1315 				goto lbl_0001;
         ;    1316 				}
         ;    1317 			else step=s2;
         ;    1318 		}
         ;    1319 
         ;    1320 	else if(step==s2)
         ;    1321 		{
         ;    1322 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1323           if(!bVR)goto step_contr_end;
         ;    1324 lbl_0001:
         ;    1325 
         ;    1326           step=s100;
         ;    1327 		cnt_del=40;
         ;    1328           }
         ;    1329 	else if(step==s100)
         ;    1330 		{
         ;    1331 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1332           cnt_del--;
         ;    1333           if(cnt_del==0)
         ;    1334 			{
         ;    1335           	step=s3;
         ;    1336           	cnt_del=50;
         ;    1337 			}
         ;    1338 		}
         ;    1339 
         ;    1340 	else if(step==s3)
         ;    1341 		{
         ;    1342 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1343           cnt_del--;
         ;    1344           if(cnt_del==0)
         ;    1345 			{
         ;    1346           	step=s4;
         ;    1347 			}
         ;    1348 		}
         ;    1349 	else if(step==s4)
         ;    1350 		{
         ;    1351 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1352           if(!bMD2)goto step_contr_end;
         ;    1353           step=s54;
         ;    1354           cnt_del=20;
         ;    1355 		}
         ;    1356 	else if(step==s54)
         ;    1357 		{
         ;    1358 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1359           cnt_del--;
         ;    1360           if(cnt_del==0)
         ;    1361 			{
         ;    1362           	step=s5;
         ;    1363           	cnt_del=20;
         ;    1364 			}
         ;    1365           }
         ;    1366 
         ;    1367 	else if(step==s5)
         ;    1368 		{
         ;    1369 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1370           cnt_del--;
         ;    1371           if(cnt_del==0)
         ;    1372 			{
         ;    1373           	step=s6;
         ;    1374 			}
         ;    1375           }
         ;    1376 	else if(step==s6)
         ;    1377 		{
         ;    1378 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1379           if(!bMD3)goto step_contr_end;
         ;    1380           step=s55;
         ;    1381           cnt_del=40;
         ;    1382 		}
         ;    1383 	else if(step==s55)
         ;    1384 		{
         ;    1385 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1386           cnt_del--;
         ;    1387           if(cnt_del==0)
         ;    1388 			{
         ;    1389           	step=s7;
         ;    1390           	cnt_del=20;
         ;    1391 			}
         ;    1392           }
         ;    1393 	else if(step==s7)
         ;    1394 		{
         ;    1395 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1396           cnt_del--;
         ;    1397           if(cnt_del==0)
         ;    1398 			{
         ;    1399           	step=s8;
         ;    1400           	cnt_del=130;
         ;    1401 			}
         ;    1402           }
         ;    1403 	else if(step==s8)
         ;    1404 		{
         ;    1405 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1406           cnt_del--;
         ;    1407           if(cnt_del==0)
         ;    1408 			{
         ;    1409           	step=s9;
         ;    1410           	cnt_del=20;
         ;    1411 			}
         ;    1412           }
         ;    1413 	else if(step==s9)
         ;    1414 		{
         ;    1415 		temp|=(1<<PP1);
         ;    1416           cnt_del--;
         ;    1417           if(cnt_del==0)
         ;    1418 			{
         ;    1419           	step=sOFF;
         ;    1420           	}
         ;    1421           }
         ;    1422 	}
         ;    1423 
         ;    1424 else if(prog==p2)  //ско
         ;    1425 	{
         ;    1426 	if(step==s1)
         ;    1427 		{
         ;    1428 		temp|=(1<<PP1);
         ;    1429           if(!bMD1)goto step_contr_end;
         ;    1430 
         ;    1431 			if(ee_vacuum_mode==evmOFF)
         ;    1432 				{
         ;    1433 				goto lbl_0002;
         ;    1434 				}
         ;    1435 			else step=s2;
         ;    1436 
         ;    1437           //step=s2;
         ;    1438 		}
         ;    1439 
         ;    1440 	else if(step==s2)
         ;    1441 		{
         ;    1442 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1443           if(!bVR)goto step_contr_end;
         ;    1444 
         ;    1445 lbl_0002:
         ;    1446           step=s100;
         ;    1447 		cnt_del=40;
         ;    1448           }
         ;    1449 	else if(step==s100)
         ;    1450 		{
         ;    1451 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1452           cnt_del--;
         ;    1453           if(cnt_del==0)
         ;    1454 			{
         ;    1455           	step=s3;
         ;    1456           	cnt_del=50;
         ;    1457 			}
         ;    1458 		}
         ;    1459 	else if(step==s3)
         ;    1460 		{
         ;    1461 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1462           cnt_del--;
         ;    1463           if(cnt_del==0)
         ;    1464 			{
         ;    1465           	step=s4;
         ;    1466 			}
         ;    1467 		}
         ;    1468 	else if(step==s4)
         ;    1469 		{
         ;    1470 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1471           if(!bMD2)goto step_contr_end;
         ;    1472           step=s5;
         ;    1473           cnt_del=20;
         ;    1474 		}
         ;    1475 	else if(step==s5)
         ;    1476 		{
         ;    1477 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1478           cnt_del--;
         ;    1479           if(cnt_del==0)
         ;    1480 			{
         ;    1481           	step=s6;
         ;    1482           	cnt_del=130;
         ;    1483 			}
         ;    1484           }
         ;    1485 	else if(step==s6)
         ;    1486 		{
         ;    1487 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1488           cnt_del--;
         ;    1489           if(cnt_del==0)
         ;    1490 			{
         ;    1491           	step=s7;
         ;    1492           	cnt_del=20;
         ;    1493 			}
         ;    1494           }
         ;    1495 	else if(step==s7)
         ;    1496 		{
         ;    1497 		temp|=(1<<PP1);
         ;    1498           cnt_del--;
         ;    1499           if(cnt_del==0)
         ;    1500 			{
         ;    1501           	step=sOFF;
         ;    1502           	}
         ;    1503           }
         ;    1504 	}
         ;    1505 
         ;    1506 else if(prog==p3)   //твист
         ;    1507 	{
         ;    1508 	if(step==s1)
         ;    1509 		{
         ;    1510 		temp|=(1<<PP1);
         ;    1511           if(!bMD1)goto step_contr_end;
         ;    1512 
         ;    1513 			if(ee_vacuum_mode==evmOFF)
         ;    1514 				{
         ;    1515 				goto lbl_0003;
         ;    1516 				}
         ;    1517 			else step=s2;
         ;    1518 
         ;    1519           //step=s2;
         ;    1520 		}
         ;    1521 
         ;    1522 	else if(step==s2)
         ;    1523 		{
         ;    1524 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1525           if(!bVR)goto step_contr_end;
         ;    1526 lbl_0003:
         ;    1527           cnt_del=50;
         ;    1528 		step=s3;
         ;    1529 		}
         ;    1530 
         ;    1531 
         ;    1532 	else	if(step==s3)
         ;    1533 		{
         ;    1534 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1535 		cnt_del--;
         ;    1536 		if(cnt_del==0)
         ;    1537 			{
         ;    1538 			cnt_del=90;
         ;    1539 			step=s4;
         ;    1540 			}
         ;    1541           }
         ;    1542 	else if(step==s4)
         ;    1543 		{
         ;    1544 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1545 		cnt_del--;
         ;    1546  		if(cnt_del==0)
         ;    1547 			{
         ;    1548 			cnt_del=130;
         ;    1549 			step=s5;
         ;    1550 			}
         ;    1551 		}
         ;    1552 
         ;    1553 	else if(step==s5)
         ;    1554 		{
         ;    1555 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1556 		cnt_del--;
         ;    1557 		if(cnt_del==0)
         ;    1558 			{
         ;    1559 			step=s6;
         ;    1560 			cnt_del=20;
         ;    1561 			}
         ;    1562 		}
         ;    1563 
         ;    1564 	else if(step==s6)
         ;    1565 		{
         ;    1566 		temp|=(1<<PP1);
         ;    1567   		cnt_del--;
         ;    1568 		if(cnt_del==0)
         ;    1569 			{
         ;    1570 			step=sOFF;
         ;    1571 			}
         ;    1572 		}
         ;    1573 
         ;    1574 	}
         ;    1575 
         ;    1576 else if(prog==p4)      //замок
         ;    1577 	{
         ;    1578 	if(step==s1)
         ;    1579 		{
         ;    1580 		temp|=(1<<PP1);
         ;    1581           if(!bMD1)goto step_contr_end;
         ;    1582 
         ;    1583 			if(ee_vacuum_mode==evmOFF)
         ;    1584 				{
         ;    1585 				goto lbl_0004;
         ;    1586 				}
         ;    1587 			else step=s2;
         ;    1588           //step=s2;
         ;    1589 		}
         ;    1590 
         ;    1591 	else if(step==s2)
         ;    1592 		{
         ;    1593 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1594           if(!bVR)goto step_contr_end;
         ;    1595 lbl_0004:
         ;    1596           step=s3;
         ;    1597 		cnt_del=50;
         ;    1598           }
         ;    1599 
         ;    1600 	else if(step==s3)
         ;    1601 		{
         ;    1602 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1603           cnt_del--;
         ;    1604           if(cnt_del==0)
         ;    1605 			{
         ;    1606           	step=s4;
         ;    1607 			cnt_del=120U;
         ;    1608 			}
         ;    1609           }
         ;    1610 
         ;    1611    	else if(step==s4)
         ;    1612 		{
         ;    1613 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1614 		cnt_del--;
         ;    1615 		if(cnt_del==0)
         ;    1616 			{
         ;    1617 			step=s5;
         ;    1618 			cnt_del=30;
         ;    1619 			}
         ;    1620 		}
         ;    1621 
         ;    1622 	else if(step==s5)
         ;    1623 		{
         ;    1624 		temp|=(1<<PP1)|(1<<PP4);
         ;    1625 		cnt_del--;
         ;    1626 		if(cnt_del==0)
         ;    1627 			{
         ;    1628 			step=s6;
         ;    1629 			cnt_del=120U;
         ;    1630 			}
         ;    1631 		}
         ;    1632 
         ;    1633 	else if(step==s6)
         ;    1634 		{
         ;    1635 		temp|=(1<<PP4);
         ;    1636 		cnt_del--;
         ;    1637 		if(cnt_del==0)
         ;    1638 			{
         ;    1639 			step=sOFF;
         ;    1640 			}
         ;    1641 		}
         ;    1642 
         ;    1643 	}
         ;    1644 	
         ;    1645 step_contr_end:
         ;    1646 
         ;    1647 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1648 
         ;    1649 PORTB=~temp;
         ;    1650 //PORTB=0x55;
         ;    1651 }
         ;    1652 #endif
         ;    1653 
         ;    1654 #ifdef I220
         ;    1655 //-----------------------------------------------
         ;    1656 void step_contr(void)
         ;    1657 {
          _step_contr:
         ;    1658 char temp=0;
         ;    1659 DDRB=0xFF;
00018f 930a      	ST   -Y,R16
         ;	temp -> R16
000190 e000      	LDI  R16,0
000191 efef      	LDI  R30,LOW(255)
000192 bbe7      	OUT  0x17,R30
         ;    1660 
         ;    1661 if(step==sOFF)goto step_contr_end;
000193 20bb      	TST  R11
000194 f409      	BRNE _0x45
000195 c0ba      	RJMP _0x46
         ;    1662 
         ;    1663 else if(prog==p3)   //твист
          _0x45:
000196 e0e3      	LDI  R30,LOW(3)
000197 15ea      	CP   R30,R10
000198 f011      	BREQ PC+3
000199 940c 01f4 	JMP _0x48
         ;    1664 	{
         ;    1665 	if(step==s1)
00019b e0e1      	LDI  R30,LOW(1)
00019c 15eb      	CP   R30,R11
00019d f479      	BRNE _0x49
         ;    1666 		{
         ;    1667 		temp|=(1<<PP1);
00019e 6400      	ORI  R16,LOW(64)
         ;    1668           if(!bMD1)goto step_contr_end;
00019f 91e0 0174 	LDS  R30,_bMD1
0001a1 30e0      	CPI  R30,0
0001a2 f409      	BRNE _0x4A
0001a3 c0ac      	RJMP _0x46
         ;    1669 
         ;    1670 			if(ee_vacuum_mode==evmOFF)
          _0x4A:
0001a4 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0001a5 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0001a6 940e 0623 	CALL __EEPROMRDB
0001a8 3aea      	CPI  R30,LOW(0xAA)
0001a9 f061      	BREQ _0x4C
         ;    1671 				{
         ;    1672 				goto lbl_0003;
         ;    1673 				}
         ;    1674 			else step=s2;
0001aa e0e2      	LDI  R30,LOW(2)
0001ab 2ebe      	MOV  R11,R30
         ;    1675 
         ;    1676           //step=s2;
         ;    1677 		}
         ;    1678 
         ;    1679 	else if(step==s2)
0001ac c046      	RJMP _0x4E
          _0x49:
0001ad e0e2      	LDI  R30,LOW(2)
0001ae 15eb      	CP   R30,R11
0001af f479      	BRNE _0x4F
         ;    1680 		{
         ;    1681 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
0001b0 6e00      	ORI  R16,LOW(224)
         ;    1682           if(!bVR)goto step_contr_end;
0001b1 91e0 0173 	LDS  R30,_bVR
0001b3 30e0      	CPI  R30,0
0001b4 f409      	BRNE _0x50
0001b5 c09a      	RJMP _0x46
         ;    1683 lbl_0003:
          _0x50:
          _0x4C:
         ;    1684           cnt_del=50;
0001b6 e3e2      	LDI  R30,LOW(50)
0001b7 e0f0      	LDI  R31,HIGH(50)
0001b8 93e0 0171 	STS  _cnt_del,R30
0001ba 93f0 0172 	STS  _cnt_del+1,R31
         ;    1685 		step=s3;
0001bc e0e3      	LDI  R30,LOW(3)
0001bd 2ebe      	MOV  R11,R30
         ;    1686 		}
         ;    1687 
         ;    1688 
         ;    1689 	else	if(step==s3)
0001be c034      	RJMP _0x51
          _0x4F:
0001bf e0e3      	LDI  R30,LOW(3)
0001c0 15eb      	CP   R30,R11
0001c1 f459      	BRNE _0x52
         ;    1690 		{
         ;    1691 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
0001c2 6f00      	ORI  R16,LOW(240)
         ;    1692 		cnt_del--;
0001c3 940e 058a 	CALL SUBOPT_0x1
         ;    1693 		if(cnt_del==0)
0001c5 f431      	BRNE _0x53
         ;    1694 			{
         ;    1695 			cnt_del=ee_delay[prog,0]*10U;
0001c6 940e 0595 	CALL SUBOPT_0x2
0001c8 940e 059e 	CALL SUBOPT_0x3
         ;    1696 			step=s4;
0001ca e0e4      	LDI  R30,LOW(4)
0001cb 2ebe      	MOV  R11,R30
         ;    1697 			}
         ;    1698           }
          _0x53:
         ;    1699 	else if(step==s4)
0001cc c026      	RJMP _0x54
          _0x52:
0001cd e0e4      	LDI  R30,LOW(4)
0001ce 15eb      	CP   R30,R11
0001cf f459      	BRNE _0x55
         ;    1700 		{
         ;    1701 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
0001d0 6f0c      	ORI  R16,LOW(252)
         ;    1702 		cnt_del--;
0001d1 940e 058a 	CALL SUBOPT_0x1
         ;    1703  		if(cnt_del==0)
0001d3 f431      	BRNE _0x56
         ;    1704 			{
         ;    1705 			cnt_del=ee_delay[prog,1]*10U;
0001d4 940e 0595 	CALL SUBOPT_0x2
0001d6 940e 05ab 	CALL SUBOPT_0x4
         ;    1706 			step=s5;
0001d8 e0e5      	LDI  R30,LOW(5)
0001d9 2ebe      	MOV  R11,R30
         ;    1707 			}
         ;    1708 		}
          _0x56:
         ;    1709 
         ;    1710 	else if(step==s5)
0001da c018      	RJMP _0x57
          _0x55:
0001db e0e5      	LDI  R30,LOW(5)
0001dc 15eb      	CP   R30,R11
0001dd f469      	BRNE _0x58
         ;    1711 		{
         ;    1712 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
0001de 6c0c      	ORI  R16,LOW(204)
         ;    1713 		cnt_del--;
0001df 940e 058a 	CALL SUBOPT_0x1
         ;    1714 		if(cnt_del==0)
0001e1 f441      	BRNE _0x59
         ;    1715 			{
         ;    1716 			step=s6;
0001e2 e0e6      	LDI  R30,LOW(6)
0001e3 2ebe      	MOV  R11,R30
         ;    1717 			cnt_del=20;
0001e4 e1e4      	LDI  R30,LOW(20)
0001e5 e0f0      	LDI  R31,HIGH(20)
0001e6 93e0 0171 	STS  _cnt_del,R30
0001e8 93f0 0172 	STS  _cnt_del+1,R31
         ;    1718 			}
         ;    1719 		}
          _0x59:
         ;    1720 
         ;    1721 	else if(step==s6)
0001ea c008      	RJMP _0x5A
          _0x58:
0001eb e0e6      	LDI  R30,LOW(6)
0001ec 15eb      	CP   R30,R11
0001ed f429      	BRNE _0x5B
         ;    1722 		{
         ;    1723 		temp|=(1<<PP1);
0001ee 6400      	ORI  R16,LOW(64)
         ;    1724   		cnt_del--;
0001ef 940e 058a 	CALL SUBOPT_0x1
         ;    1725 		if(cnt_del==0)
0001f1 f409      	BRNE _0x5C
         ;    1726 			{
         ;    1727 			step=sOFF;
0001f2 24bb      	CLR  R11
         ;    1728 			}
         ;    1729 		}
          _0x5C:
         ;    1730 
         ;    1731 	}
          _0x5B:
          _0x5A:
          _0x57:
          _0x54:
          _0x51:
          _0x4E:
         ;    1732 
         ;    1733 else if(prog==p4)      //замок
0001f3 c05c      	RJMP _0x5D
          _0x48:
0001f4 e0e4      	LDI  R30,LOW(4)
0001f5 15ea      	CP   R30,R10
0001f6 f011      	BREQ PC+3
0001f7 940c 0250 	JMP _0x5E
         ;    1734 	{
         ;    1735 	if(step==s1)
0001f9 e0e1      	LDI  R30,LOW(1)
0001fa 15eb      	CP   R30,R11
0001fb f479      	BRNE _0x5F
         ;    1736 		{
         ;    1737 		temp|=(1<<PP1);
0001fc 6400      	ORI  R16,LOW(64)
         ;    1738           if(!bMD1)goto step_contr_end;
0001fd 91e0 0174 	LDS  R30,_bMD1
0001ff 30e0      	CPI  R30,0
000200 f409      	BRNE _0x60
000201 c04e      	RJMP _0x46
         ;    1739 
         ;    1740 			if(ee_vacuum_mode==evmOFF)
          _0x60:
000202 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000203 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000204 940e 0623 	CALL __EEPROMRDB
000206 3aea      	CPI  R30,LOW(0xAA)
000207 f059      	BREQ _0x62
         ;    1741 				{
         ;    1742 				goto lbl_0004;
         ;    1743 				}
         ;    1744 			else step=s2;
000208 e0e2      	LDI  R30,LOW(2)
000209 2ebe      	MOV  R11,R30
         ;    1745           //step=s2;
         ;    1746 		}
         ;    1747 
         ;    1748 	else if(step==s2)
00020a c045      	RJMP _0x64
          _0x5F:
00020b e0e2      	LDI  R30,LOW(2)
00020c 15eb      	CP   R30,R11
00020d f471      	BRNE _0x65
         ;    1749 		{
         ;    1750 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
00020e 6e00      	ORI  R16,LOW(224)
         ;    1751           if(!bVR)goto step_contr_end;
00020f 91e0 0173 	LDS  R30,_bVR
000211 30e0      	CPI  R30,0
000212 f1e9      	BREQ _0x46
         ;    1752 lbl_0004:
          _0x62:
         ;    1753           step=s3;
000213 e0e3      	LDI  R30,LOW(3)
000214 2ebe      	MOV  R11,R30
         ;    1754 		cnt_del=50;
000215 e3e2      	LDI  R30,LOW(50)
000216 e0f0      	LDI  R31,HIGH(50)
000217 93e0 0171 	STS  _cnt_del,R30
000219 93f0 0172 	STS  _cnt_del+1,R31
         ;    1755           }
         ;    1756 
         ;    1757 	else if(step==s3)
00021b c034      	RJMP _0x67
          _0x65:
00021c e0e3      	LDI  R30,LOW(3)
00021d 15eb      	CP   R30,R11
00021e f459      	BRNE _0x68
         ;    1758 		{
         ;    1759 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
00021f 6f00      	ORI  R16,LOW(240)
         ;    1760           cnt_del--;
000220 940e 058a 	CALL SUBOPT_0x1
         ;    1761           if(cnt_del==0)
000222 f431      	BRNE _0x69
         ;    1762 			{
         ;    1763           	step=s4;
000223 e0e4      	LDI  R30,LOW(4)
000224 2ebe      	MOV  R11,R30
         ;    1764 			cnt_del=ee_delay[prog,0]*10U;
000225 940e 0595 	CALL SUBOPT_0x2
000227 940e 059e 	CALL SUBOPT_0x3
         ;    1765 			}
         ;    1766           }
          _0x69:
         ;    1767 
         ;    1768    	else if(step==s4)
000229 c026      	RJMP _0x6A
          _0x68:
00022a e0e4      	LDI  R30,LOW(4)
00022b 15eb      	CP   R30,R11
00022c f469      	BRNE _0x6B
         ;    1769 		{
         ;    1770 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
00022d 6d00      	ORI  R16,LOW(208)
         ;    1771 		cnt_del--;
00022e 940e 058a 	CALL SUBOPT_0x1
         ;    1772 		if(cnt_del==0)
000230 f441      	BRNE _0x6C
         ;    1773 			{
         ;    1774 			step=s5;
000231 e0e5      	LDI  R30,LOW(5)
000232 2ebe      	MOV  R11,R30
         ;    1775 			cnt_del=30;
000233 e1ee      	LDI  R30,LOW(30)
000234 e0f0      	LDI  R31,HIGH(30)
000235 93e0 0171 	STS  _cnt_del,R30
000237 93f0 0172 	STS  _cnt_del+1,R31
         ;    1776 			}
         ;    1777 		}
          _0x6C:
         ;    1778 
         ;    1779 	else if(step==s5)
000239 c016      	RJMP _0x6D
          _0x6B:
00023a e0e5      	LDI  R30,LOW(5)
00023b 15eb      	CP   R30,R11
00023c f459      	BRNE _0x6E
         ;    1780 		{
         ;    1781 		temp|=(1<<PP1)|(1<<PP4);
00023d 6500      	ORI  R16,LOW(80)
         ;    1782 		cnt_del--;
00023e 940e 058a 	CALL SUBOPT_0x1
         ;    1783 		if(cnt_del==0)
000240 f431      	BRNE _0x6F
         ;    1784 			{
         ;    1785 			step=s6;
000241 e0e6      	LDI  R30,LOW(6)
000242 2ebe      	MOV  R11,R30
         ;    1786 			cnt_del=ee_delay[prog,1]*10U;
000243 940e 0595 	CALL SUBOPT_0x2
000245 940e 05ab 	CALL SUBOPT_0x4
         ;    1787 			}
         ;    1788 		}
          _0x6F:
         ;    1789 
         ;    1790 	else if(step==s6)
000247 c008      	RJMP _0x70
          _0x6E:
000248 e0e6      	LDI  R30,LOW(6)
000249 15eb      	CP   R30,R11
00024a f429      	BRNE _0x71
         ;    1791 		{
         ;    1792 		temp|=(1<<PP4);
00024b 6100      	ORI  R16,LOW(16)
         ;    1793 		cnt_del--;
00024c 940e 058a 	CALL SUBOPT_0x1
         ;    1794 		if(cnt_del==0)
00024e f409      	BRNE _0x72
         ;    1795 			{
         ;    1796 			step=sOFF;
00024f 24bb      	CLR  R11
         ;    1797 			}
         ;    1798 		}
          _0x72:
         ;    1799 
         ;    1800 	}
          _0x71:
          _0x70:
          _0x6D:
          _0x6A:
          _0x67:
          _0x64:
         ;    1801 	
         ;    1802 step_contr_end:
          _0x5E:
          _0x5D:
          _0x46:
         ;    1803 
         ;    1804 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
000250 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000251 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000252 940e 0623 	CALL __EEPROMRDB
000254 3aea      	CPI  R30,LOW(0xAA)
000255 f409      	BRNE _0x73
000256 7d0f      	ANDI R16,LOW(223)
         ;    1805 
         ;    1806 PORTB=~temp;
          _0x73:
000257 2fe0      	MOV  R30,R16
000258 95e0      	COM  R30
000259 bbe8      	OUT  0x18,R30
         ;    1807 //PORTB=0x55;
         ;    1808 }
00025a 9109      	LD   R16,Y+
00025b 9508      	RET
         ;    1809 #endif 
         ;    1810 
         ;    1811 #ifdef TVIST_SKO
         ;    1812 //-----------------------------------------------
         ;    1813 void step_contr(void)
         ;    1814 {
         ;    1815 char temp=0;
         ;    1816 DDRB=0xFF;
         ;    1817 
         ;    1818 if(step==sOFF)
         ;    1819 	{
         ;    1820 	temp=0;
         ;    1821 	}
         ;    1822 
         ;    1823 if(prog==p2) //СКО
         ;    1824 	{
         ;    1825 	if(step==s1)
         ;    1826 		{
         ;    1827 		temp|=(1<<PP1);
         ;    1828 
         ;    1829 		cnt_del--;
         ;    1830 		if(cnt_del==0)
         ;    1831 			{
         ;    1832 			step=s2;
         ;    1833 			cnt_del=30;
         ;    1834 			}
         ;    1835 		}
         ;    1836 
         ;    1837 	else if(step==s2)
         ;    1838 		{
         ;    1839 		temp|=(1<<PP1)|(1<<DV);
         ;    1840 
         ;    1841 		cnt_del--;
         ;    1842 		if(cnt_del==0)
         ;    1843 			{
         ;    1844 			step=s3;
         ;    1845 			}
         ;    1846 		}
         ;    1847 
         ;    1848 
         ;    1849 	else if(step==s3)
         ;    1850 		{
         ;    1851 		temp|=(1<<PP1)|(1<<DV)|(1<<PP2);
         ;    1852 
         ;    1853                	if(bMD1)//goto step_contr_end;
         ;    1854                		{  
         ;    1855                		cnt_del=100;
         ;    1856 	       		step=s4;
         ;    1857 	       		}
         ;    1858 	       	}
         ;    1859 
         ;    1860 	else if(step==s4)
         ;    1861 		{
         ;    1862 		temp|=(1<<PP1);
         ;    1863 		cnt_del--;
         ;    1864 		if(cnt_del==0)
         ;    1865 			{
         ;    1866 			step=sOFF;
         ;    1867 			}
         ;    1868 		}
         ;    1869 
         ;    1870 	}
         ;    1871 
         ;    1872 if(prog==p3)
         ;    1873 	{
         ;    1874 	if(step==s1)
         ;    1875 		{
         ;    1876 		temp|=(1<<PP1);
         ;    1877 
         ;    1878 		cnt_del--;
         ;    1879 		if(cnt_del==0)
         ;    1880 			{
         ;    1881 			step=s2;
         ;    1882 			cnt_del=100;
         ;    1883 			}
         ;    1884 		}
         ;    1885 
         ;    1886 	else if(step==s2)
         ;    1887 		{
         ;    1888 		temp|=(1<<PP1)|(1<<PP2);
         ;    1889 
         ;    1890 		cnt_del--;
         ;    1891 		if(cnt_del==0)
         ;    1892 			{
         ;    1893 			step=s3;
         ;    1894 			cnt_del=50;
         ;    1895 			}
         ;    1896 		}
         ;    1897 
         ;    1898 
         ;    1899 	else if(step==s3)
         ;    1900 		{
         ;    1901 		temp|=(1<<PP2);
         ;    1902 	
         ;    1903 		cnt_del--;
         ;    1904 		if(cnt_del==0)
         ;    1905 			{
         ;    1906 			step=sOFF;
         ;    1907 			}
         ;    1908                	}
         ;    1909 	}
         ;    1910 step_contr_end:
         ;    1911 
         ;    1912 PORTB=~temp;
         ;    1913 }
         ;    1914 #endif
         ;    1915 //-----------------------------------------------
         ;    1916 void bin2bcd_int(unsigned int in)
         ;    1917 {
          _bin2bcd_int:
         ;    1918 char i;
         ;    1919 for(i=3;i>0;i--)
00025c 930a      	ST   -Y,R16
         ;	in -> Y+1
         ;	i -> R16
00025d e003      	LDI  R16,LOW(3)
          _0x75:
00025e e0e0      	LDI  R30,LOW(0)
00025f 17e0      	CP   R30,R16
000260 f4c8      	BRSH _0x76
         ;    1920 	{
         ;    1921 	dig[i]=in%10;
000261 2fe0      	MOV  R30,R16
000262 e0f0      	LDI  R31,0
000263 59eb      	SUBI R30,LOW(-_dig)
000264 4ffe      	SBCI R31,HIGH(-_dig)
000265 93ff      	PUSH R31
000266 93ef      	PUSH R30
000267 81a9      	LDD  R26,Y+1
000268 81ba      	LDD  R27,Y+1+1
000269 e0ea      	LDI  R30,LOW(10)
00026a e0f0      	LDI  R31,HIGH(10)
00026b 940e 061c 	CALL __MODW21U
00026d 91af      	POP  R26
00026e 91bf      	POP  R27
00026f 93ec      	ST   X,R30
         ;    1922 	in/=10;
000270 81a9      	LDD  R26,Y+1
000271 81ba      	LDD  R27,Y+1+1
000272 e0ea      	LDI  R30,LOW(10)
000273 e0f0      	LDI  R31,HIGH(10)
000274 940e 0609 	CALL __DIVW21U
000276 83e9      	STD  Y+1,R30
000277 83fa      	STD  Y+1+1,R31
         ;    1923 	}   
000278 5001      	SUBI R16,1
000279 cfe4      	RJMP _0x75
          _0x76:
         ;    1924 }
00027a 8108      	LDD  R16,Y+0
00027b c06a      	RJMP _0xE1
         ;    1925 
         ;    1926 //-----------------------------------------------
         ;    1927 void bcd2ind(char s)
         ;    1928 {
          _bcd2ind:
         ;    1929 char i;
         ;    1930 bZ=1;
00027c 930a      	ST   -Y,R16
         ;	s -> Y+1
         ;	i -> R16
00027d 9468      	SET
00027e f823      	BLD  R2,3
         ;    1931 for (i=0;i<5;i++)
00027f e000      	LDI  R16,LOW(0)
          _0x78:
000280 3005      	CPI  R16,5
000281 f010      	BRLO PC+3
000282 940c 02d9 	JMP _0x79
         ;    1932 	{
         ;    1933 	if(bZ&&(!dig[i-1])&&(i<4))
000284 fe23      	SBRS R2,3
000285 c009      	RJMP _0x7B
000286 940e 05ba 	CALL SUBOPT_0x5
000288 59eb      	SUBI R30,LOW(-_dig)
000289 4ffe      	SBCI R31,HIGH(-_dig)
00028a 81e0      	LD   R30,Z
00028b 30e0      	CPI  R30,0
00028c f411      	BRNE _0x7B
00028d 3004      	CPI  R16,4
00028e f008      	BRLO _0x7C
          _0x7B:
00028f c01f      	RJMP _0x7A
          _0x7C:
         ;    1934 		{
         ;    1935 		if((4-i)>s)
000290 e0e4      	LDI  R30,LOW(4)
000291 1be0      	SUB  R30,R16
000292 2fae      	MOV  R26,R30
000293 81e9      	LDD  R30,Y+1
000294 17ea      	CP   R30,R26
000295 f460      	BRSH _0x7D
         ;    1936 			{
         ;    1937 			ind_out[i-1]=DIGISYM[10];
000296 940e 05ba 	CALL SUBOPT_0x5
000298 5ae0      	SUBI R30,LOW(-_ind_out)
000299 4ffe      	SBCI R31,HIGH(-_ind_out)
00029a 93ff      	PUSH R31
00029b 93ef      	PUSH R30
00029c   +  	__POINTW1FN _DIGISYM,10
00029e 91e4      	LPM  R30,Z
00029f 91af      	POP  R26
0002a0 91bf      	POP  R27
0002a1 c00b      	RJMP _0xE2
         ;    1938 			}
         ;    1939 		else ind_out[i-1]=DIGISYM[0];	
          _0x7D:
0002a2 940e 05ba 	CALL SUBOPT_0x5
0002a4 5ae0      	SUBI R30,LOW(-_ind_out)
0002a5 4ffe      	SBCI R31,HIGH(-_ind_out)
0002a6 93ff      	PUSH R31
0002a7 93ef      	PUSH R30
0002a8 e5ea      	LDI  R30,LOW(_DIGISYM*2)
0002a9 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
0002aa 91e4      	LPM  R30,Z
0002ab 91af      	POP  R26
0002ac 91bf      	POP  R27
          _0xE2:
0002ad 93ec      	ST   X,R30
         ;    1940 		}
         ;    1941 	else
0002ae c018      	RJMP _0x7F
          _0x7A:
         ;    1942 		{
         ;    1943 		ind_out[i-1]=DIGISYM[dig[i-1]];
0002af 940e 05ba 	CALL SUBOPT_0x5
0002b1 5ae0      	SUBI R30,LOW(-_ind_out)
0002b2 4ffe      	SBCI R31,HIGH(-_ind_out)
0002b3 93ff      	PUSH R31
0002b4 93ef      	PUSH R30
0002b5 e5ea      	LDI  R30,LOW(_DIGISYM*2)
0002b6 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
0002b7 93ff      	PUSH R31
0002b8 93ef      	PUSH R30
0002b9 940e 05ba 	CALL SUBOPT_0x5
0002bb 59eb      	SUBI R30,LOW(-_dig)
0002bc 4ffe      	SBCI R31,HIGH(-_dig)
0002bd 81e0      	LD   R30,Z
0002be 91af      	POP  R26
0002bf 91bf      	POP  R27
0002c0 940e 05be 	CALL SUBOPT_0x6
0002c2 91af      	POP  R26
0002c3 91bf      	POP  R27
0002c4 93ec      	ST   X,R30
         ;    1944 		bZ=0;
0002c5 94e8      	CLT
0002c6 f823      	BLD  R2,3
         ;    1945 		}                   
          _0x7F:
         ;    1946 
         ;    1947 	if(s)
0002c7 81e9      	LDD  R30,Y+1
0002c8 30e0      	CPI  R30,0
0002c9 f069      	BREQ _0x80
         ;    1948 		{
         ;    1949 		ind_out[3-s]&=0b01111111;
0002ca 81a9      	LDD  R26,Y+1
0002cb e0e3      	LDI  R30,LOW(3)
0002cc 1bea      	SUB  R30,R26
0002cd e0f0      	LDI  R31,0
0002ce 5ae0      	SUBI R30,LOW(-_ind_out)
0002cf 4ffe      	SBCI R31,HIGH(-_ind_out)
0002d0 93ff      	PUSH R31
0002d1 93ef      	PUSH R30
0002d2 81e0      	LD   R30,Z
0002d3 77ef      	ANDI R30,0x7F
0002d4 91af      	POP  R26
0002d5 91bf      	POP  R27
0002d6 93ec      	ST   X,R30
         ;    1950 		}	
         ;    1951  
         ;    1952 	}
          _0x80:
0002d7 5f0f      	SUBI R16,-1
0002d8 cfa7      	RJMP _0x78
          _0x79:
         ;    1953 }            
0002d9 8108      	LDD  R16,Y+0
0002da 9622      	ADIW R28,2
0002db 9508      	RET
         ;    1954 //-----------------------------------------------
         ;    1955 void int2ind(unsigned int in,char s)
         ;    1956 {
          _int2ind:
         ;    1957 bin2bcd_int(in);
0002dc 81e9      	LDD  R30,Y+1
0002dd 81fa      	LDD  R31,Y+1+1
0002de 93fa      	ST   -Y,R31
0002df 93ea      	ST   -Y,R30
0002e0 940e 025c 	CALL _bin2bcd_int
         ;    1958 bcd2ind(s);
0002e2 81e8      	LD   R30,Y
0002e3 93ea      	ST   -Y,R30
0002e4 940e 027c 	CALL _bcd2ind
         ;    1959 
         ;    1960 } 
          _0xE1:
0002e6 9623      	ADIW R28,3
0002e7 9508      	RET
         ;    1961 
         ;    1962 //-----------------------------------------------
         ;    1963 void ind_hndl(void)
         ;    1964 {
          _ind_hndl:
         ;    1965 int2ind(ee_delay[prog,sub_ind],1);  
0002e8 940e 0595 	CALL SUBOPT_0x2
0002ea 940e 05c3 	CALL SUBOPT_0x7
0002ec 93fa      	ST   -Y,R31
0002ed 93ea      	ST   -Y,R30
0002ee e0e1      	LDI  R30,LOW(1)
0002ef 93ea      	ST   -Y,R30
0002f0 940e 02dc 	CALL _int2ind
         ;    1966 //ind_out[0]=0xff;//DIGISYM[0];
         ;    1967 //ind_out[1]=0xff;//DIGISYM[1];
         ;    1968 //ind_out[2]=DIGISYM[2];//0xff;
         ;    1969 //ind_out[0]=DIGISYM[7]; 
         ;    1970 
         ;    1971 ind_out[0]=DIGISYM[sub_ind+1];
0002f2 e5ea      	LDI  R30,LOW(_DIGISYM*2)
0002f3 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
0002f4 93ff      	PUSH R31
0002f5 93ef      	PUSH R30
0002f6 2ded      	MOV  R30,R13
0002f7 5fef      	SUBI R30,-LOW(1)
0002f8 91af      	POP  R26
0002f9 91bf      	POP  R27
0002fa 940e 05be 	CALL SUBOPT_0x6
0002fc 93e0 0160 	STS  _ind_out,R30
         ;    1972 }
0002fe 9508      	RET
         ;    1973 
         ;    1974 //-----------------------------------------------
         ;    1975 void led_hndl(void)
         ;    1976 {
          _led_hndl:
         ;    1977 ind_out[4]=DIGISYM[10]; 
0002ff   +  	__POINTW1FN _DIGISYM,10
000301 91e4      	LPM  R30,Z
000302   +  	__PUTB1MN _ind_out,4
         ;    1978 
         ;    1979 ind_out[4]&=~(1<<LED_POW_ON); 
000304   +  	__POINTW1MN _ind_out,4
000306 93ff      	PUSH R31
000307 93ef      	PUSH R30
000308 81e0      	LD   R30,Z
000309 7def      	ANDI R30,0xDF
00030a 91af      	POP  R26
00030b 91bf      	POP  R27
00030c 93ec      	ST   X,R30
         ;    1980 
         ;    1981 if(step!=sOFF)
00030d 20bb      	TST  R11
00030e f049      	BREQ _0x81
         ;    1982 	{
         ;    1983 	ind_out[4]&=~(1<<LED_WRK);
00030f   +  	__POINTW1MN _ind_out,4
000311 93ff      	PUSH R31
000312 93ef      	PUSH R30
000313 81e0      	LD   R30,Z
000314 7bef      	ANDI R30,0xBF
000315 91af      	POP  R26
000316 91bf      	POP  R27
000317 c008      	RJMP _0xE3
         ;    1984 	}
         ;    1985 else ind_out[4]|=(1<<LED_WRK);
          _0x81:
000318   +  	__POINTW1MN _ind_out,4
00031a 93ff      	PUSH R31
00031b 93ef      	PUSH R30
00031c 81e0      	LD   R30,Z
00031d 64e0      	ORI  R30,0x40
00031e 91af      	POP  R26
00031f 91bf      	POP  R27
          _0xE3:
000320 93ec      	ST   X,R30
         ;    1986 
         ;    1987 
         ;    1988 if(step==sOFF)
000321 20bb      	TST  R11
000322 f4a9      	BRNE _0x83
         ;    1989 	{
         ;    1990  	if(bERR)
000323 fe31      	SBRS R3,1
000324 c009      	RJMP _0x84
         ;    1991 		{
         ;    1992 		ind_out[4]&=~(1<<LED_ERROR);
000325   +  	__POINTW1MN _ind_out,4
000327 93ff      	PUSH R31
000328 93ef      	PUSH R30
000329 81e0      	LD   R30,Z
00032a 7fee      	ANDI R30,0xFE
00032b 91af      	POP  R26
00032c 91bf      	POP  R27
00032d c008      	RJMP _0xE4
         ;    1993 		}
         ;    1994 	else
          _0x84:
         ;    1995 		{
         ;    1996 		ind_out[4]|=(1<<LED_ERROR);
00032e   +  	__POINTW1MN _ind_out,4
000330 93ff      	PUSH R31
000331 93ef      	PUSH R30
000332 81e0      	LD   R30,Z
000333 60e1      	ORI  R30,1
000334 91af      	POP  R26
000335 91bf      	POP  R27
          _0xE4:
000336 93ec      	ST   X,R30
         ;    1997 		}
         ;    1998      }
         ;    1999 else ind_out[4]|=(1<<LED_ERROR);
000337 c009      	RJMP _0x86
          _0x83:
000338   +  	__POINTW1MN _ind_out,4
00033a 93ff      	PUSH R31
00033b 93ef      	PUSH R30
00033c 81e0      	LD   R30,Z
00033d 60e1      	ORI  R30,1
00033e 91af      	POP  R26
00033f 91bf      	POP  R27
000340 93ec      	ST   X,R30
          _0x86:
         ;    2000 
         ;    2001 /* 	if(bMD1)
         ;    2002 		{
         ;    2003 		ind_out[4]&=~(1<<LED_ERROR);
         ;    2004 		}
         ;    2005 	else
         ;    2006 		{
         ;    2007 		ind_out[4]|=(1<<LED_ERROR);
         ;    2008 		} */
         ;    2009 
         ;    2010 //if(bERR)ind_out[4]&=~(1<<LED_ERROR);
         ;    2011 if(ee_vacuum_mode==evmON)ind_out[4]&=~(1<<LED_VACUUM);
000341 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000342 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000343 940e 0623 	CALL __EEPROMRDB
000345 35e5      	CPI  R30,LOW(0x55)
000346 f449      	BRNE _0x87
000347   +  	__POINTW1MN _ind_out,4
000349 93ff      	PUSH R31
00034a 93ef      	PUSH R30
00034b 81e0      	LD   R30,Z
00034c 77ef      	ANDI R30,0x7F
00034d 91af      	POP  R26
00034e 91bf      	POP  R27
00034f c008      	RJMP _0xE5
         ;    2012 else ind_out[4]|=(1<<LED_VACUUM);
          _0x87:
000350   +  	__POINTW1MN _ind_out,4
000352 93ff      	PUSH R31
000353 93ef      	PUSH R30
000354 81e0      	LD   R30,Z
000355 68e0      	ORI  R30,0x80
000356 91af      	POP  R26
000357 91bf      	POP  R27
          _0xE5:
000358 93ec      	ST   X,R30
         ;    2013 
         ;    2014 if(prog==p1) ind_out[4]&=~(1<<LED_PROG1);
000359 e0e1      	LDI  R30,LOW(1)
00035a 15ea      	CP   R30,R10
00035b f451      	BRNE _0x89
00035c   +  	__POINTW1MN _ind_out,4
00035e 93ff      	PUSH R31
00035f 93ef      	PUSH R30
000360 81e0      	LD   R30,Z
000361 7eef      	ANDI R30,0xEF
000362 91af      	POP  R26
000363 91bf      	POP  R27
000364 93ec      	ST   X,R30
         ;    2015 else if(prog==p2) ind_out[4]&=~(1<<LED_PROG2);
000365 c026      	RJMP _0x8A
          _0x89:
000366 e0e2      	LDI  R30,LOW(2)
000367 15ea      	CP   R30,R10
000368 f451      	BRNE _0x8B
000369   +  	__POINTW1MN _ind_out,4
00036b 93ff      	PUSH R31
00036c 93ef      	PUSH R30
00036d 81e0      	LD   R30,Z
00036e 7feb      	ANDI R30,0xFB
00036f 91af      	POP  R26
000370 91bf      	POP  R27
000371 93ec      	ST   X,R30
         ;    2016 else if(prog==p3) ind_out[4]&=~(1<<LED_PROG3);
000372 c019      	RJMP _0x8C
          _0x8B:
000373 e0e3      	LDI  R30,LOW(3)
000374 15ea      	CP   R30,R10
000375 f451      	BRNE _0x8D
000376   +  	__POINTW1MN _ind_out,4
000378 93ff      	PUSH R31
000379 93ef      	PUSH R30
00037a 81e0      	LD   R30,Z
00037b 7fe7      	ANDI R30,0XF7
00037c 91af      	POP  R26
00037d 91bf      	POP  R27
00037e 93ec      	ST   X,R30
         ;    2017 else if(prog==p4) ind_out[4]&=~(1<<LED_PROG4);
00037f c00c      	RJMP _0x8E
          _0x8D:
000380 e0e4      	LDI  R30,LOW(4)
000381 15ea      	CP   R30,R10
000382 f449      	BRNE _0x8F
000383   +  	__POINTW1MN _ind_out,4
000385 93ff      	PUSH R31
000386 93ef      	PUSH R30
000387 81e0      	LD   R30,Z
000388 7fed      	ANDI R30,0xFD
000389 91af      	POP  R26
00038a 91bf      	POP  R27
00038b 93ec      	ST   X,R30
         ;    2018 
         ;    2019 if(ind==iPr_sel)
          _0x8F:
          _0x8E:
          _0x8C:
          _0x8A:
00038c e0e1      	LDI  R30,LOW(1)
00038d 15ec      	CP   R30,R12
00038e f459      	BRNE _0x90
         ;    2020 	{
         ;    2021 	if(bFL5)ind_out[4]|=(1<<LED_PROG1)|(1<<LED_PROG2)|(1<<LED_PROG3)|(1<<LED_PROG4);
00038f fe30      	SBRS R3,0
000390 c009      	RJMP _0x91
000391   +  	__POINTW1MN _ind_out,4
000393 93ff      	PUSH R31
000394 93ef      	PUSH R30
000395 81e0      	LD   R30,Z
000396 61ee      	ORI  R30,LOW(0x1E)
000397 91af      	POP  R26
000398 91bf      	POP  R27
000399 93ec      	ST   X,R30
         ;    2022 	} 
          _0x91:
         ;    2023 	 
         ;    2024 if(ind==iVr)
          _0x90:
00039a e0e2      	LDI  R30,LOW(2)
00039b 15ec      	CP   R30,R12
00039c f459      	BRNE _0x92
         ;    2025 	{
         ;    2026 	if(bFL5)ind_out[4]|=(1<<LED_POW_ON);
00039d fe30      	SBRS R3,0
00039e c009      	RJMP _0x93
00039f   +  	__POINTW1MN _ind_out,4
0003a1 93ff      	PUSH R31
0003a2 93ef      	PUSH R30
0003a3 81e0      	LD   R30,Z
0003a4 62e0      	ORI  R30,0x20
0003a5 91af      	POP  R26
0003a6 91bf      	POP  R27
0003a7 93ec      	ST   X,R30
         ;    2027 	}	
          _0x93:
         ;    2028 }
          _0x92:
0003a8 9508      	RET
         ;    2029 
         ;    2030 //-----------------------------------------------
         ;    2031 // Подпрограмма драйва до 7 кнопок одного порта, 
         ;    2032 // различает короткое и длинное нажатие,
         ;    2033 // срабатывает на отпускание кнопки, возможность
         ;    2034 // ускорения перебора при длинном нажатии...
         ;    2035 #define but_port PORTC
         ;    2036 #define but_dir  DDRC
         ;    2037 #define but_pin  PINC
         ;    2038 #define but_mask 0b01101010
         ;    2039 #define no_but   0b11111111
         ;    2040 #define but_on   5
         ;    2041 #define but_onL  20
         ;    2042 
         ;    2043 
         ;    2044 
         ;    2045 
         ;    2046 void but_drv(void)
         ;    2047 { 
          _but_drv:
         ;    2048 DDRD&=0b00000111;
0003a9 b3e1      	IN   R30,0x11
0003aa 70e7      	ANDI R30,LOW(0x7)
0003ab 940e 05ce 	CALL SUBOPT_0x8
         ;    2049 PORTD|=0b11111000;
         ;    2050 
         ;    2051 but_port|=(but_mask^0xff);
0003ad 940e 05d3 	CALL SUBOPT_0x9
         ;    2052 but_dir&=but_mask;
         ;    2053 #asm
         ;    2054 nop
0003af 0000      nop
         ;    2055 nop
0003b0 0000      nop
         ;    2056 nop
0003b1 0000      nop
         ;    2057 nop
0003b2 0000      nop
         ;    2058 #endasm
         
         ;    2059 
         ;    2060 but_n=but_pin|but_mask; 
0003b3 b3e3      	IN   R30,0x13
0003b4 66ea      	ORI  R30,LOW(0x6A)
0003b5 93e0 0169 	STS  _but_n_G1,R30
         ;    2061 
         ;    2062 if((but_n==no_but)||(but_n!=but_s))
0003b7 91a0 0169 	LDS  R26,_but_n_G1
0003b9 3faf      	CPI  R26,LOW(0xFF)
0003ba f011      	BREQ _0x95
0003bb d21e      	RCALL SUBOPT_0xA
0003bc f109      	BREQ _0x94
          _0x95:
         ;    2063  	{
         ;    2064  	speed=0;
0003bd 94e8      	CLT
0003be f826      	BLD  R2,6
         ;    2065    	if (((but0_cnt>=but_on)||(but1_cnt!=0))&&(!l_but))
0003bf 91a0 016b 	LDS  R26,_but0_cnt_G1
0003c1 30a5      	CPI  R26,LOW(0x5)
0003c2 f420      	BRSH _0x98
0003c3 91a0 016c 	LDS  R26,_but1_cnt_G1
0003c5 30a0      	CPI  R26,LOW(0x0)
0003c6 f011      	BREQ _0x9A
          _0x98:
0003c7 fe24      	SBRS R2,4
0003c8 c001      	RJMP _0x9B
          _0x9A:
0003c9 c004      	RJMP _0x97
          _0x9B:
         ;    2066   		{
         ;    2067    	     n_but=1;
0003ca 9468      	SET
0003cb f825      	BLD  R2,5
         ;    2068           but=but_s;
0003cc 9090 016a 	LDS  R9,_but_s_G1
         ;    2069           }
         ;    2070    	if (but1_cnt>=but_onL_temp)
          _0x97:
0003ce d211      	RCALL SUBOPT_0xB
0003cf f018      	BRLO _0x9C
         ;    2071   		{
         ;    2072    	     n_but=1;
0003d0 9468      	SET
0003d1 f825      	BLD  R2,5
         ;    2073           but=but_s&0b11111101;
0003d2 d213      	RCALL SUBOPT_0xC
         ;    2074           }
         ;    2075     	l_but=0;
          _0x9C:
0003d3 94e8      	CLT
0003d4 f824      	BLD  R2,4
         ;    2076    	but_onL_temp=but_onL;
0003d5 e1e4      	LDI  R30,LOW(20)
0003d6 93e0 016d 	STS  _but_onL_temp_G1,R30
         ;    2077     	but0_cnt=0;
0003d8 e0e0      	LDI  R30,LOW(0)
0003d9 93e0 016b 	STS  _but0_cnt_G1,R30
         ;    2078   	but1_cnt=0;          
0003db 93e0 016c 	STS  _but1_cnt_G1,R30
         ;    2079      goto but_drv_out;
0003dd c02b      	RJMP _0x9D
         ;    2080   	}  
         ;    2081   	
         ;    2082 if(but_n==but_s)
          _0x94:
0003de d1fb      	RCALL SUBOPT_0xA
0003df f549      	BRNE _0x9E
         ;    2083  	{
         ;    2084   	but0_cnt++;
0003e0 91e0 016b 	LDS  R30,_but0_cnt_G1
0003e2 5fef      	SUBI R30,-LOW(1)
0003e3 93e0 016b 	STS  _but0_cnt_G1,R30
         ;    2085   	if(but0_cnt>=but_on)
0003e5 91a0 016b 	LDS  R26,_but0_cnt_G1
0003e7 30a5      	CPI  R26,LOW(0x5)
0003e8 f100      	BRLO _0x9F
         ;    2086   		{
         ;    2087    		but0_cnt=0;
0003e9 e0e0      	LDI  R30,LOW(0)
0003ea 93e0 016b 	STS  _but0_cnt_G1,R30
         ;    2088    		but1_cnt++;
0003ec 91e0 016c 	LDS  R30,_but1_cnt_G1
0003ee 5fef      	SUBI R30,-LOW(1)
0003ef 93e0 016c 	STS  _but1_cnt_G1,R30
         ;    2089    		if(but1_cnt>=but_onL_temp)
0003f1 d1ee      	RCALL SUBOPT_0xB
0003f2 f0b0      	BRLO _0xA0
         ;    2090    			{              
         ;    2091     			but=but_s&0b11111101;
0003f3 d1f2      	RCALL SUBOPT_0xC
         ;    2092     			but1_cnt=0;
0003f4 e0e0      	LDI  R30,LOW(0)
0003f5 93e0 016c 	STS  _but1_cnt_G1,R30
         ;    2093     			n_but=1;
0003f7 9468      	SET
0003f8 f825      	BLD  R2,5
         ;    2094     			l_but=1;
0003f9 9468      	SET
0003fa f824      	BLD  R2,4
         ;    2095 			if(speed)
0003fb fe26      	SBRS R2,6
0003fc c00c      	RJMP _0xA1
         ;    2096 				{
         ;    2097     				but_onL_temp=but_onL_temp>>1;
0003fd 91e0 016d 	LDS  R30,_but_onL_temp_G1
0003ff 95e6      	LSR  R30
000400 93e0 016d 	STS  _but_onL_temp_G1,R30
         ;    2098         			if(but_onL_temp<=2) but_onL_temp=2;
000402 91a0 016d 	LDS  R26,_but_onL_temp_G1
000404 e0e2      	LDI  R30,LOW(2)
000405 17ea      	CP   R30,R26
000406 f010      	BRLO _0xA2
000407 93e0 016d 	STS  _but_onL_temp_G1,R30
         ;    2099 				}    
          _0xA2:
         ;    2100    			}
          _0xA1:
         ;    2101   		} 
          _0xA0:
         ;    2102  	}
          _0x9F:
         ;    2103 but_drv_out:
          _0x9E:
          _0x9D:
         ;    2104 but_s=but_n;
000409 91e0 0169 	LDS  R30,_but_n_G1
00040b 93e0 016a 	STS  _but_s_G1,R30
         ;    2105 but_port|=(but_mask^0xff);
00040d d1c5      	RCALL SUBOPT_0x9
         ;    2106 but_dir&=but_mask;
         ;    2107 }    
00040e 9508      	RET
         ;    2108 
         ;    2109 #define butV	239
         ;    2110 #define butV_	237
         ;    2111 #define butP	251
         ;    2112 #define butP_	249
         ;    2113 #define butR	127
         ;    2114 #define butR_	125
         ;    2115 #define butL	254
         ;    2116 #define butL_	252
         ;    2117 #define butLR	126
         ;    2118 #define butLR_	124 
         ;    2119 #define butVP_ 233
         ;    2120 //-----------------------------------------------
         ;    2121 void but_an(void)
         ;    2122 {
          _but_an:
         ;    2123 
         ;    2124 if(!(in_word&0x01))
00040f fce0      	SBRC R14,0
000410 c024      	RJMP _0xA3
         ;    2125 	{
         ;    2126 	#ifdef TVIST_SKO
         ;    2127 	if((step==sOFF)&&(!bERR))
         ;    2128 		{
         ;    2129 		step=s1;
         ;    2130 		if(prog==p2) cnt_del=70;
         ;    2131 		else if(prog==p3) cnt_del=100;
         ;    2132 		}
         ;    2133 	#endif
         ;    2134 	#ifdef DV3KL2MD
         ;    2135 	if((step==sOFF)&&(!bERR))
         ;    2136 		{
         ;    2137 		step=s1;
         ;    2138 		cnt_del=70;
         ;    2139 		}
         ;    2140 	#endif	
         ;    2141 	#ifndef TVIST_SKO
         ;    2142 	if((step==sOFF)&&(!bERR))
000411 e0e0      	LDI  R30,LOW(0)
000412 15eb      	CP   R30,R11
000413 f411      	BRNE _0xA5
000414 fe31      	SBRS R3,1
000415 c001      	RJMP _0xA6
          _0xA5:
000416 c01e      	RJMP _0xA4
          _0xA6:
         ;    2143 		{
         ;    2144 		step=s1;
000417 e0e1      	LDI  R30,LOW(1)
000418 2ebe      	MOV  R11,R30
         ;    2145 		if(prog==p1) cnt_del=50;
000419 15ea      	CP   R30,R10
00041a f439      	BRNE _0xA7
00041b e3e2      	LDI  R30,LOW(50)
00041c e0f0      	LDI  R31,HIGH(50)
00041d 93e0 0171 	STS  _cnt_del,R30
00041f 93f0 0172 	STS  _cnt_del+1,R31
         ;    2146 		else if(prog==p2) cnt_del=50;
000421 c013      	RJMP _0xA8
          _0xA7:
000422 e0e2      	LDI  R30,LOW(2)
000423 15ea      	CP   R30,R10
000424 f439      	BRNE _0xA9
000425 e3e2      	LDI  R30,LOW(50)
000426 e0f0      	LDI  R31,HIGH(50)
000427 93e0 0171 	STS  _cnt_del,R30
000429 93f0 0172 	STS  _cnt_del+1,R31
         ;    2147 		else if(prog==p3) cnt_del=50;
00042b c009      	RJMP _0xAA
          _0xA9:
00042c e0e3      	LDI  R30,LOW(3)
00042d 15ea      	CP   R30,R10
00042e f431      	BRNE _0xAB
00042f e3e2      	LDI  R30,LOW(50)
000430 e0f0      	LDI  R31,HIGH(50)
000431 93e0 0171 	STS  _cnt_del,R30
000433 93f0 0172 	STS  _cnt_del+1,R31
         ;    2148           #ifdef P380_MINI
         ;    2149   		cnt_del=100;
         ;    2150   		#endif
         ;    2151 		}
          _0xAB:
          _0xAA:
          _0xA8:
         ;    2152 	#endif
         ;    2153 	}
          _0xA4:
         ;    2154 if(!(in_word&0x02))
          _0xA3:
000435 fce1      	SBRC R14,1
000436 c001      	RJMP _0xAC
         ;    2155 	{
         ;    2156 	step=sOFF;
000437 24bb      	CLR  R11
         ;    2157 
         ;    2158 	}
         ;    2159 
         ;    2160 if (!n_but) goto but_an_end;
          _0xAC:
000438 fe25      	SBRS R2,5
000439 c0a2      	RJMP _0xAE
         ;    2161 
         ;    2162 if(but==butV_)
00043a eeed      	LDI  R30,LOW(237)
00043b 15e9      	CP   R30,R9
00043c f469      	BRNE _0xAF
         ;    2163 	{
         ;    2164 	if(ee_vacuum_mode==evmON)ee_vacuum_mode=evmOFF;
00043d e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
00043e e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
00043f 940e 0623 	CALL __EEPROMRDB
000441 35e5      	CPI  R30,LOW(0x55)
000442 f411      	BRNE _0xB0
000443 eaea      	LDI  R30,LOW(170)
000444 c001      	RJMP _0xE6
         ;    2165 	else ee_vacuum_mode=evmON;
          _0xB0:
000445 e5e5      	LDI  R30,LOW(85)
          _0xE6:
000446 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
000447 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
000448 940e 0637 	CALL __EEPROMWRB
         ;    2166 	}
         ;    2167 
         ;    2168 if(but==butVP_)
          _0xAF:
00044a eee9      	LDI  R30,LOW(233)
00044b 15e9      	CP   R30,R9
00044c f431      	BRNE _0xB2
         ;    2169 	{
         ;    2170 	if(ind!=iVr)ind=iVr;
00044d e0e2      	LDI  R30,LOW(2)
00044e 15ec      	CP   R30,R12
00044f f011      	BREQ _0xB3
000450 2ece      	MOV  R12,R30
         ;    2171 	else ind=iMn;
000451 c001      	RJMP _0xB4
          _0xB3:
000452 24cc      	CLR  R12
          _0xB4:
         ;    2172 	}
         ;    2173 
         ;    2174 	
         ;    2175 if(ind==iMn)
          _0xB2:
000453 20cc      	TST  R12
000454 f5a1      	BRNE _0xB5
         ;    2176 	{
         ;    2177 	if(but==butP_)ind=iPr_sel;
000455 efe9      	LDI  R30,LOW(249)
000456 15e9      	CP   R30,R9
000457 f411      	BRNE _0xB6
000458 e0e1      	LDI  R30,LOW(1)
000459 2ece      	MOV  R12,R30
         ;    2178 	if(but==butLR)	
          _0xB6:
00045a e7ee      	LDI  R30,LOW(126)
00045b 15e9      	CP   R30,R9
00045c f471      	BRNE _0xB7
         ;    2179 		{
         ;    2180 		if((prog==p3)||(prog==p4))
00045d e0e3      	LDI  R30,LOW(3)
00045e 15ea      	CP   R30,R10
00045f f019      	BREQ _0xB9
000460 e0e4      	LDI  R30,LOW(4)
000461 15ea      	CP   R30,R10
000462 f439      	BRNE _0xB8
          _0xB9:
         ;    2181 			{ 
         ;    2182 			if(sub_ind==0)sub_ind=1;
000463 20dd      	TST  R13
000464 f419      	BRNE _0xBB
000465 e0e1      	LDI  R30,LOW(1)
000466 2ede      	MOV  R13,R30
         ;    2183 			else sub_ind=0;
000467 c001      	RJMP _0xBC
          _0xBB:
000468 24dd      	CLR  R13
          _0xBC:
         ;    2184 			}
         ;    2185     		else sub_ind=0;
000469 c001      	RJMP _0xBD
          _0xB8:
00046a 24dd      	CLR  R13
          _0xBD:
         ;    2186 		}	 
         ;    2187 	if((but==butR)||(but==butR_))	
          _0xB7:
00046b e7ef      	LDI  R30,LOW(127)
00046c 15e9      	CP   R30,R9
00046d f019      	BREQ _0xBF
00046e e7ed      	LDI  R30,LOW(125)
00046f 15e9      	CP   R30,R9
000470 f449      	BRNE _0xBE
          _0xBF:
         ;    2188 		{  
         ;    2189 		speed=1;
000471 9468      	SET
000472 f826      	BLD  R2,6
         ;    2190 		ee_delay[prog,sub_ind]++;
000473 d121      	RCALL SUBOPT_0x2
000474 d14e      	RCALL SUBOPT_0x7
000475 9631      	ADIW R30,1
000476 940e 062f 	CALL __EEPROMWRW
000478 9731      	SBIW R30,1
         ;    2191 		}   
         ;    2192 	
         ;    2193 	else if((but==butL)||(but==butL_))	
000479 c00e      	RJMP _0xC1
          _0xBE:
00047a efee      	LDI  R30,LOW(254)
00047b 15e9      	CP   R30,R9
00047c f019      	BREQ _0xC3
00047d efec      	LDI  R30,LOW(252)
00047e 15e9      	CP   R30,R9
00047f f441      	BRNE _0xC2
          _0xC3:
         ;    2194 		{  
         ;    2195     		speed=1;
000480 9468      	SET
000481 f826      	BLD  R2,6
         ;    2196     		ee_delay[prog,sub_ind]--;
000482 d112      	RCALL SUBOPT_0x2
000483 d13f      	RCALL SUBOPT_0x7
000484 9731      	SBIW R30,1
000485 940e 062f 	CALL __EEPROMWRW
000487 9631      	ADIW R30,1
         ;    2197     		}		
         ;    2198 	} 
          _0xC2:
          _0xC1:
         ;    2199 	
         ;    2200 else if(ind==iPr_sel)
000488 c053      	RJMP _0xC5
          _0xB5:
000489 e0e1      	LDI  R30,LOW(1)
00048a 15ec      	CP   R30,R12
00048b f5e9      	BRNE _0xC6
         ;    2201 	{
         ;    2202 	if(but==butP_)ind=iMn;
00048c efe9      	LDI  R30,LOW(249)
00048d 15e9      	CP   R30,R9
00048e f409      	BRNE _0xC7
00048f 24cc      	CLR  R12
         ;    2203 	if(but==butP)
          _0xC7:
000490 efeb      	LDI  R30,LOW(251)
000491 15e9      	CP   R30,R9
000492 f479      	BRNE _0xC8
         ;    2204 		{
         ;    2205 		prog++;
000493 d157      	RCALL SUBOPT_0xD
         ;    2206 		if(prog>MAXPROG)prog=MINPROG;
000494 f414      	BRGE _0xC9
000495 e0e3      	LDI  R30,LOW(3)
000496 2eae      	MOV  R10,R30
         ;    2207 		ee_program[0]=prog;
          _0xC9:
000497 d157      	RCALL SUBOPT_0xE
         ;    2208 		ee_program[1]=prog;
000498   +  	__POINTW2MN _ee_program,1
00049a 2dea      	MOV  R30,R10
00049b 940e 0637 	CALL __EEPROMWRB
         ;    2209 		ee_program[2]=prog;
00049d   +  	__POINTW2MN _ee_program,2
00049f 2dea      	MOV  R30,R10
0004a0 940e 0637 	CALL __EEPROMWRB
         ;    2210 		}
         ;    2211 	
         ;    2212 	if(but==butR)
          _0xC8:
0004a2 e7ef      	LDI  R30,LOW(127)
0004a3 15e9      	CP   R30,R9
0004a4 f479      	BRNE _0xCA
         ;    2213 		{
         ;    2214 		prog++;
0004a5 d145      	RCALL SUBOPT_0xD
         ;    2215 		if(prog>MAXPROG)prog=MINPROG;
0004a6 f414      	BRGE _0xCB
0004a7 e0e3      	LDI  R30,LOW(3)
0004a8 2eae      	MOV  R10,R30
         ;    2216 		ee_program[0]=prog;
          _0xCB:
0004a9 d145      	RCALL SUBOPT_0xE
         ;    2217 		ee_program[1]=prog;
0004aa   +  	__POINTW2MN _ee_program,1
0004ac 2dea      	MOV  R30,R10
0004ad 940e 0637 	CALL __EEPROMWRB
         ;    2218 		ee_program[2]=prog;
0004af   +  	__POINTW2MN _ee_program,2
0004b1 2dea      	MOV  R30,R10
0004b2 940e 0637 	CALL __EEPROMWRB
         ;    2219 		}
         ;    2220 
         ;    2221 	if(but==butL)
          _0xCA:
0004b4 efee      	LDI  R30,LOW(254)
0004b5 15e9      	CP   R30,R9
0004b6 f489      	BRNE _0xCC
         ;    2222 		{
         ;    2223 		prog--;
0004b7 94aa      	DEC  R10
         ;    2224 		if(prog>MAXPROG)prog=MINPROG;
0004b8 e0e4      	LDI  R30,LOW(4)
0004b9 15ea      	CP   R30,R10
0004ba f414      	BRGE _0xCD
0004bb e0e3      	LDI  R30,LOW(3)
0004bc 2eae      	MOV  R10,R30
         ;    2225 		ee_program[0]=prog;
          _0xCD:
0004bd d131      	RCALL SUBOPT_0xE
         ;    2226 		ee_program[1]=prog;
0004be   +  	__POINTW2MN _ee_program,1
0004c0 2dea      	MOV  R30,R10
0004c1 940e 0637 	CALL __EEPROMWRB
         ;    2227 		ee_program[2]=prog;
0004c3   +  	__POINTW2MN _ee_program,2
0004c5 2dea      	MOV  R30,R10
0004c6 940e 0637 	CALL __EEPROMWRB
         ;    2228 		}	
         ;    2229 	} 
          _0xCC:
         ;    2230 
         ;    2231 else if(ind==iVr)
0004c8 c013      	RJMP _0xCE
          _0xC6:
0004c9 e0e2      	LDI  R30,LOW(2)
0004ca 15ec      	CP   R30,R12
0004cb f481      	BRNE _0xCF
         ;    2232 	{
         ;    2233 	if(but==butP_)
0004cc efe9      	LDI  R30,LOW(249)
0004cd 15e9      	CP   R30,R9
0004ce f469      	BRNE _0xD0
         ;    2234 		{
         ;    2235 		if(ee_vr_log)ee_vr_log=0;
0004cf e1a3      	LDI  R26,LOW(_ee_vr_log)
0004d0 e0b0      	LDI  R27,HIGH(_ee_vr_log)
0004d1 940e 0623 	CALL __EEPROMRDB
0004d3 30e0      	CPI  R30,0
0004d4 f011      	BREQ _0xD1
0004d5 e0e0      	LDI  R30,LOW(0)
0004d6 c001      	RJMP _0xE7
         ;    2236 		else ee_vr_log=1;
          _0xD1:
0004d7 e0e1      	LDI  R30,LOW(1)
          _0xE7:
0004d8 e1a3      	LDI  R26,LOW(_ee_vr_log)
0004d9 e0b0      	LDI  R27,HIGH(_ee_vr_log)
0004da 940e 0637 	CALL __EEPROMWRB
         ;    2237 		}	
         ;    2238 	} 	
          _0xD0:
         ;    2239 
         ;    2240 but_an_end:
          _0xCF:
          _0xCE:
          _0xC5:
          _0xAE:
         ;    2241 n_but=0;
0004dc 94e8      	CLT
0004dd f825      	BLD  R2,5
         ;    2242 }
0004de 9508      	RET
         ;    2243 
         ;    2244 //-----------------------------------------------
         ;    2245 void ind_drv(void)
         ;    2246 {
          _ind_drv:
         ;    2247 if(++ind_cnt>=6)ind_cnt=0;
0004df 9483      	INC  R8
0004e0 e0e6      	LDI  R30,LOW(6)
0004e1 168e      	CP   R8,R30
0004e2 f008      	BRLO _0xD3
0004e3 2488      	CLR  R8
         ;    2248 
         ;    2249 if(ind_cnt<5)
          _0xD3:
0004e4 e0e5      	LDI  R30,LOW(5)
0004e5 168e      	CP   R8,R30
0004e6 f4c8      	BRSH _0xD4
         ;    2250 	{
         ;    2251 	DDRC=0xFF;
0004e7 efef      	LDI  R30,LOW(255)
0004e8 bbe4      	OUT  0x14,R30
         ;    2252 	PORTC=0xFF;
0004e9 bbe5      	OUT  0x15,R30
         ;    2253 	DDRD|=0b11111000;
0004ea b3e1      	IN   R30,0x11
0004eb 6fe8      	ORI  R30,LOW(0xF8)
0004ec d0e1      	RCALL SUBOPT_0x8
         ;    2254 	PORTD|=0b11111000;
         ;    2255 	PORTD&=IND_STROB[ind_cnt];
0004ed b3e2      	IN   R30,0x12
0004ee 93ef      	PUSH R30
0004ef e5a4      	LDI  R26,LOW(_IND_STROB*2)
0004f0 e0b0      	LDI  R27,HIGH(_IND_STROB*2)
0004f1 2de8      	MOV  R30,R8
0004f2 e0f0      	LDI  R31,0
0004f3 0fea      	ADD  R30,R26
0004f4 1ffb      	ADC  R31,R27
0004f5 91e4      	LPM  R30,Z
0004f6 91af      	POP  R26
0004f7 23ea      	AND  R30,R26
0004f8 bbe2      	OUT  0x12,R30
         ;    2256 	PORTC=ind_out[ind_cnt];
0004f9 2de8      	MOV  R30,R8
0004fa e0f0      	LDI  R31,0
0004fb 5ae0      	SUBI R30,LOW(-_ind_out)
0004fc 4ffe      	SBCI R31,HIGH(-_ind_out)
0004fd 81e0      	LD   R30,Z
0004fe bbe5      	OUT  0x15,R30
         ;    2257 	}
         ;    2258 else but_drv();
0004ff c002      	RJMP _0xD5
          _0xD4:
000500 940e 03a9 	CALL _but_drv
          _0xD5:
         ;    2259 }
000502 9508      	RET
         ;    2260 
         ;    2261 //***********************************************
         ;    2262 //***********************************************
         ;    2263 //***********************************************
         ;    2264 //***********************************************
         ;    2265 interrupt [TIM0_OVF] void timer0_ovf_isr(void)
         ;    2266 {
          _timer0_ovf_isr:
000503 920a      	ST   -Y,R0
000504 921a      	ST   -Y,R1
000505 92fa      	ST   -Y,R15
000506 936a      	ST   -Y,R22
000507 937a      	ST   -Y,R23
000508 938a      	ST   -Y,R24
000509 939a      	ST   -Y,R25
00050a 93aa      	ST   -Y,R26
00050b 93ba      	ST   -Y,R27
00050c 93ea      	ST   -Y,R30
00050d 93fa      	ST   -Y,R31
00050e b7ef      	IN   R30,SREG
00050f 93ea      	ST   -Y,R30
         ;    2267 TCCR0=0x02;
000510 d0e4      	RCALL SUBOPT_0xF
         ;    2268 TCNT0=-208;
         ;    2269 OCR0=0x00; 
         ;    2270 
         ;    2271 
         ;    2272 b600Hz=1;
000511 9468      	SET
000512 f820      	BLD  R2,0
         ;    2273 ind_drv();
000513 dfcb      	RCALL _ind_drv
         ;    2274 if(++t0_cnt0>=6)
000514 9443      	INC  R4
000515 e0e6      	LDI  R30,LOW(6)
000516 164e      	CP   R4,R30
000517 f018      	BRLO _0xD6
         ;    2275 	{
         ;    2276 	t0_cnt0=0;
000518 2444      	CLR  R4
         ;    2277 	b100Hz=1;
000519 9468      	SET
00051a f821      	BLD  R2,1
         ;    2278 	}
         ;    2279 
         ;    2280 if(++t0_cnt1>=60)
          _0xD6:
00051b 9453      	INC  R5
00051c e3ec      	LDI  R30,LOW(60)
00051d 165e      	CP   R5,R30
00051e f088      	BRLO _0xD7
         ;    2281 	{
         ;    2282 	t0_cnt1=0;
00051f 2455      	CLR  R5
         ;    2283 	b10Hz=1;
000520 9468      	SET
000521 f822      	BLD  R2,2
         ;    2284 	
         ;    2285 	if(++t0_cnt2>=2)
000522 9463      	INC  R6
000523 e0e2      	LDI  R30,LOW(2)
000524 166e      	CP   R6,R30
000525 f018      	BRLO _0xD8
         ;    2286 		{
         ;    2287 		t0_cnt2=0;
000526 2466      	CLR  R6
         ;    2288 		bFL5=!bFL5;
000527 e0e1      	LDI  R30,LOW(1)
000528 263e      	EOR  R3,R30
         ;    2289 		}
         ;    2290 		
         ;    2291 	if(++t0_cnt3>=5)
          _0xD8:
000529 9473      	INC  R7
00052a e0e5      	LDI  R30,LOW(5)
00052b 167e      	CP   R7,R30
00052c f018      	BRLO _0xD9
         ;    2292 		{
         ;    2293 		t0_cnt3=0;
00052d 2477      	CLR  R7
         ;    2294 		bFL2=!bFL2;
00052e e8e0      	LDI  R30,LOW(128)
00052f 262e      	EOR  R2,R30
         ;    2295 		}		
         ;    2296 	}
          _0xD9:
         ;    2297 }
          _0xD7:
000530 91e9      	LD   R30,Y+
000531 bfef      	OUT  SREG,R30
000532 91f9      	LD   R31,Y+
000533 91e9      	LD   R30,Y+
000534 91b9      	LD   R27,Y+
000535 91a9      	LD   R26,Y+
000536 9199      	LD   R25,Y+
000537 9189      	LD   R24,Y+
000538 9179      	LD   R23,Y+
000539 9169      	LD   R22,Y+
00053a 90f9      	LD   R15,Y+
00053b 9019      	LD   R1,Y+
00053c 9009      	LD   R0,Y+
00053d 9518      	RETI
         ;    2298 
         ;    2299 //===============================================
         ;    2300 //===============================================
         ;    2301 //===============================================
         ;    2302 //===============================================
         ;    2303 
         ;    2304 void main(void)
         ;    2305 {
          _main:
         ;    2306 
         ;    2307 PORTA=0xff;
00053e efef      	LDI  R30,LOW(255)
00053f bbeb      	OUT  0x1B,R30
         ;    2308 DDRA=0x00;
000540 d045      	RCALL SUBOPT_0x0
         ;    2309 
         ;    2310 PORTB=0xff;
000541 d0bb      	RCALL SUBOPT_0x10
         ;    2311 DDRB=0xFF;
         ;    2312 
         ;    2313 PORTC=0x00;
000542 e0e0      	LDI  R30,LOW(0)
000543 bbe5      	OUT  0x15,R30
         ;    2314 DDRC=0x00;
000544 bbe4      	OUT  0x14,R30
         ;    2315 
         ;    2316 
         ;    2317 PORTD=0x00;
000545 bbe2      	OUT  0x12,R30
         ;    2318 DDRD=0x00;
000546 bbe1      	OUT  0x11,R30
         ;    2319 
         ;    2320 
         ;    2321 TCCR0=0x02;
000547 d0ad      	RCALL SUBOPT_0xF
         ;    2322 TCNT0=-208;
         ;    2323 OCR0=0x00;
         ;    2324 
         ;    2325 TCCR1A=0x00;
000548 e0e0      	LDI  R30,LOW(0)
000549 bdef      	OUT  0x2F,R30
         ;    2326 TCCR1B=0x00;
00054a bdee      	OUT  0x2E,R30
         ;    2327 TCNT1H=0x00;
00054b bded      	OUT  0x2D,R30
         ;    2328 TCNT1L=0x00;
00054c bdec      	OUT  0x2C,R30
         ;    2329 ICR1H=0x00;
00054d bde7      	OUT  0x27,R30
         ;    2330 ICR1L=0x00;
00054e bde6      	OUT  0x26,R30
         ;    2331 OCR1AH=0x00;
00054f bdeb      	OUT  0x2B,R30
         ;    2332 OCR1AL=0x00;
000550 bdea      	OUT  0x2A,R30
         ;    2333 OCR1BH=0x00;
000551 bde9      	OUT  0x29,R30
         ;    2334 OCR1BL=0x00;
000552 bde8      	OUT  0x28,R30
         ;    2335 
         ;    2336 
         ;    2337 ASSR=0x00;
000553 bde2      	OUT  0x22,R30
         ;    2338 TCCR2=0x00;
000554 bde5      	OUT  0x25,R30
         ;    2339 TCNT2=0x00;
000555 bde4      	OUT  0x24,R30
         ;    2340 OCR2=0x00;
000556 bde3      	OUT  0x23,R30
         ;    2341 
         ;    2342 MCUCR=0x00;
000557 bfe5      	OUT  0x35,R30
         ;    2343 MCUCSR=0x00;
000558 bfe4      	OUT  0x34,R30
         ;    2344 
         ;    2345 TIMSK=0x01;
000559 e0e1      	LDI  R30,LOW(1)
00055a bfe9      	OUT  0x39,R30
         ;    2346 
         ;    2347 ACSR=0x80;
00055b e8e0      	LDI  R30,LOW(128)
00055c b9e8      	OUT  0x8,R30
         ;    2348 SFIOR=0x00;
00055d e0e0      	LDI  R30,LOW(0)
00055e bfe0      	OUT  0x30,R30
         ;    2349 
         ;    2350 #asm("sei") 
00055f 9478      	sei
         ;    2351 PORTB=0xFF;
000560 efef      	LDI  R30,LOW(255)
000561 d09b      	RCALL SUBOPT_0x10
         ;    2352 DDRB=0xFF;
         ;    2353 ind=iMn;
000562 24cc      	CLR  R12
         ;    2354 prog_drv();
000563 940e 006a 	CALL _prog_drv
         ;    2355 ind_hndl();
000565 940e 02e8 	CALL _ind_hndl
         ;    2356 led_hndl();
000567 940e 02ff 	CALL _led_hndl
         ;    2357 while (1)
          _0xDA:
         ;    2358       {
         ;    2359       if(b600Hz)
000569 fe20      	SBRS R2,0
00056a c002      	RJMP _0xDD
         ;    2360 		{
         ;    2361 		b600Hz=0; 
00056b 94e8      	CLT
00056c f820      	BLD  R2,0
         ;    2362           
         ;    2363 		}         
         ;    2364       if(b100Hz)
          _0xDD:
00056d fe21      	SBRS R2,1
00056e c009      	RJMP _0xDE
         ;    2365 		{        
         ;    2366 		b100Hz=0; 
00056f 94e8      	CLT
000570 f821      	BLD  R2,1
         ;    2367 		but_an();
000571 de9d      	RCALL _but_an
         ;    2368 	    	in_drv();
000572 940e 00c9 	CALL _in_drv
         ;    2369           mdvr_drv();
000574 940e 0107 	CALL _mdvr_drv
         ;    2370           step_contr();
000576 940e 018f 	CALL _step_contr
         ;    2371 		}   
         ;    2372 	if(b10Hz)
          _0xDE:
000578 fe22      	SBRS R2,2
000579 c00a      	RJMP _0xDF
         ;    2373 		{
         ;    2374 		b10Hz=0;
00057a 94e8      	CLT
00057b f822      	BLD  R2,2
         ;    2375 		prog_drv();
00057c 940e 006a 	CALL _prog_drv
         ;    2376 		err_drv();
00057e 940e 00f0 	CALL _err_drv
         ;    2377 		
         ;    2378     	     ind_hndl();
000580 940e 02e8 	CALL _ind_hndl
         ;    2379           led_hndl();
000582 940e 02ff 	CALL _led_hndl
         ;    2380           
         ;    2381           }
         ;    2382 
         ;    2383       };
          _0xDF:
000584 cfe4      	RJMP _0xDA
         ;    2384 }
          _0xE0:
000585 cfff      	RJMP _0xE0
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x0:
000586 e0e0      	LDI  R30,LOW(0)
000587 bbea      	OUT  0x1A,R30
000588 efef      	LDI  R30,LOW(255)
000589 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 8 TIMES
          SUBOPT_0x1:
00058a 91e0 0171 	LDS  R30,_cnt_del
00058c 91f0 0172 	LDS  R31,_cnt_del+1
00058e 9731      	SBIW R30,1
00058f 93e0 0171 	STS  _cnt_del,R30
000591 93f0 0172 	STS  _cnt_del+1,R31
000593 9730      	SBIW R30,0
000594 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 7 TIMES
          SUBOPT_0x2:
000595 2dea      	MOV  R30,R10
000596 e0a3      	LDI  R26,LOW(_ee_delay)
000597 e0b0      	LDI  R27,HIGH(_ee_delay)
000598 e0f0      	LDI  R31,0
000599 0fee      	LSL  R30
00059a 1fff      	ROL  R31
00059b 0fee      	LSL  R30
00059c 1fff      	ROL  R31
00059d 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x3:
00059e 0fae      	ADD  R26,R30
00059f 1fbf      	ADC  R27,R31
0005a0 940e 061f 	CALL __EEPROMRDW
0005a2 e0aa      	LDI  R26,LOW(10)
0005a3 e0b0      	LDI  R27,HIGH(10)
0005a4 940e 0601 	CALL __MULW12U
0005a6 93e0 0171 	STS  _cnt_del,R30
0005a8 93f0 0172 	STS  _cnt_del+1,R31
0005aa 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x4:
0005ab 0fea      	ADD  R30,R26
0005ac 1ffb      	ADC  R31,R27
0005ad 9632      	ADIW R30,2
0005ae 01df      	MOVW R26,R30
0005af 940e 061f 	CALL __EEPROMRDW
0005b1 e0aa      	LDI  R26,LOW(10)
0005b2 e0b0      	LDI  R27,HIGH(10)
0005b3 940e 0601 	CALL __MULW12U
0005b5 93e0 0171 	STS  _cnt_del,R30
0005b7 93f0 0172 	STS  _cnt_del+1,R31
0005b9 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES
          SUBOPT_0x5:
0005ba 2fe0      	MOV  R30,R16
0005bb 50e1      	SUBI R30,LOW(1)
0005bc e0f0      	LDI  R31,0
0005bd 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x6:
0005be e0f0      	LDI  R31,0
0005bf 0fea      	ADD  R30,R26
0005c0 1ffb      	ADC  R31,R27
0005c1 91e4      	LPM  R30,Z
0005c2 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0x7:
0005c3 0fae      	ADD  R26,R30
0005c4 1fbf      	ADC  R27,R31
0005c5 2ded      	MOV  R30,R13
0005c6 e0f0      	LDI  R31,0
0005c7 0fee      	LSL  R30
0005c8 1fff      	ROL  R31
0005c9 0fae      	ADD  R26,R30
0005ca 1fbf      	ADC  R27,R31
0005cb 940e 061f 	CALL __EEPROMRDW
0005cd 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x8:
0005ce bbe1      	OUT  0x11,R30
0005cf b3e2      	IN   R30,0x12
0005d0 6fe8      	ORI  R30,LOW(0xF8)
0005d1 bbe2      	OUT  0x12,R30
0005d2 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x9:
0005d3 b3e5      	IN   R30,0x15
0005d4 69e5      	ORI  R30,LOW(0x95)
0005d5 bbe5      	OUT  0x15,R30
0005d6 b3e4      	IN   R30,0x14
0005d7 76ea      	ANDI R30,LOW(0x6A)
0005d8 bbe4      	OUT  0x14,R30
0005d9 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xA:
0005da 91e0 016a 	LDS  R30,_but_s_G1
0005dc 91a0 0169 	LDS  R26,_but_n_G1
0005de 17ea      	CP   R30,R26
0005df 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xB:
0005e0 91e0 016d 	LDS  R30,_but_onL_temp_G1
0005e2 91a0 016c 	LDS  R26,_but1_cnt_G1
0005e4 17ae      	CP   R26,R30
0005e5 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xC:
0005e6 91e0 016a 	LDS  R30,_but_s_G1
0005e8 7fed      	ANDI R30,0xFD
0005e9 2e9e      	MOV  R9,R30
0005ea 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xD:
0005eb 94a3      	INC  R10
0005ec e0e4      	LDI  R30,LOW(4)
0005ed 15ea      	CP   R30,R10
0005ee 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0xE:
0005ef 2dea      	MOV  R30,R10
0005f0 e0a1      	LDI  R26,LOW(_ee_program)
0005f1 e0b0      	LDI  R27,HIGH(_ee_program)
0005f2 940e 0637 	CALL __EEPROMWRB
0005f4 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xF:
0005f5 e0e2      	LDI  R30,LOW(2)
0005f6 bfe3      	OUT  0x33,R30
0005f7 e3e0      	LDI  R30,LOW(65328)
0005f8 efff      	LDI  R31,HIGH(65328)
0005f9 bfe2      	OUT  0x32,R30
0005fa e0e0      	LDI  R30,LOW(0)
0005fb bfec      	OUT  0x3C,R30
0005fc 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x10:
0005fd bbe8      	OUT  0x18,R30
0005fe efef      	LDI  R30,LOW(255)
0005ff bbe7      	OUT  0x17,R30
000600 9508      	RET
         
          __MULW12U:
000601 9ffa      	MUL  R31,R26
000602 2df0      	MOV  R31,R0
000603 9feb      	MUL  R30,R27
000604 0df0      	ADD  R31,R0
000605 9fea      	MUL  R30,R26
000606 2de0      	MOV  R30,R0
000607 0df1      	ADD  R31,R1
000608 9508      	RET
         
          __DIVW21U:
000609 2400      	CLR  R0
00060a 2411      	CLR  R1
00060b e190      	LDI  R25,16
          __DIVW21U1:
00060c 0faa      	LSL  R26
00060d 1fbb      	ROL  R27
00060e 1c00      	ROL  R0
00060f 1c11      	ROL  R1
000610 1a0e      	SUB  R0,R30
000611 0a1f      	SBC  R1,R31
000612 f418      	BRCC __DIVW21U2
000613 0e0e      	ADD  R0,R30
000614 1e1f      	ADC  R1,R31
000615 c001      	RJMP __DIVW21U3
          __DIVW21U2:
000616 60a1      	SBR  R26,1
          __DIVW21U3:
000617 959a      	DEC  R25
000618 f799      	BRNE __DIVW21U1
000619 01fd      	MOVW R30,R26
00061a 01d0      	MOVW R26,R0
00061b 9508      	RET
         
          __MODW21U:
00061c dfec      	RCALL __DIVW21U
00061d 01fd      	MOVW R30,R26
00061e 9508      	RET
         
          __EEPROMRDW:
00061f 9611      	ADIW R26,1
000620 d002      	RCALL __EEPROMRDB
000621 2ffe      	MOV  R31,R30
000622 9711      	SBIW R26,1
         
          __EEPROMRDB:
000623 99e1      	SBIC EECR,EEWE
000624 cffe      	RJMP __EEPROMRDB
000625 93ff      	PUSH R31
000626 b7ff      	IN   R31,SREG
000627 94f8      	CLI
000628 bbae      	OUT  EEARL,R26
000629 bbbf      	OUT  EEARH,R27
00062a 9ae0      	SBI  EECR,EERE
00062b b3ed      	IN   R30,EEDR
00062c bfff      	OUT  SREG,R31
00062d 91ff      	POP  R31
00062e 9508      	RET
         
          __EEPROMWRW:
00062f d007      	RCALL __EEPROMWRB
000630 9611      	ADIW R26,1
000631 93ef      	PUSH R30
000632 2fef      	MOV  R30,R31
000633 d003      	RCALL __EEPROMWRB
000634 91ef      	POP  R30
000635 9711      	SBIW R26,1
000636 9508      	RET
         
          __EEPROMWRB:
000637 99e1      	SBIC EECR,EEWE
000638 cffe      	RJMP __EEPROMWRB
000639 b79f      	IN   R25,SREG
00063a 94f8      	CLI
00063b bbae      	OUT  EEARL,R26
00063c bbbf      	OUT  EEARH,R27
00063d 9ae0      	SBI  EECR,EERE
00063e b38d      	IN   R24,EEDR
00063f 17e8      	CP   R30,R24
000640 f019      	BREQ __EEPROMWRB0
000641 bbed      	OUT  EEDR,R30
000642 9ae2      	SBI  EECR,EEMWE
000643 9ae1      	SBI  EECR,EEWE
          __EEPROMWRB0:
000644 bf9f      	OUT  SREG,R25
000645 9508      	RET
         
          __SAVELOCR4:
000646 933a      	ST   -Y,R19
          __SAVELOCR3:
000647 932a      	ST   -Y,R18
          __SAVELOCR2:
000648 931a      	ST   -Y,R17
000649 930a      	ST   -Y,R16
00064a 9508      	RET
         
          __LOADLOCR4:
00064b 813b      	LDD  R19,Y+3
          __LOADLOCR3:
00064c 812a      	LDD  R18,Y+2
          __LOADLOCR2:
00064d 8119      	LDD  R17,Y+1
00064e 8108      	LD   R16,Y
00064f 9508      	RET
         

Assembly complete with no errors.
