
AVRASM ver. 1.52  GAVT.asm Wed Aug 12 07:18:34 2015


         ;CodeVisionAVR C Compiler V1.24.1d Standard
         ;(C) Copyright 1998-2004 Pavel Haiduc, HP InfoTech s.r.l.
         ;http://www.hpinfotech.ro
         ;e-mail:office@hpinfotech.ro
         
         ;Chip type           : ATmega16
         ;Program type        : Application
         ;Clock frequency     : 1,000000 MHz
         ;Memory model        : Small
         ;Optimize for        : Size
         ;(s)printf features  : int, width
         ;(s)scanf features   : long, width
         ;External SRAM size  : 0
         ;Data Stack size     : 256 byte(s)
         ;Heap size           : 0 byte(s)
         ;Promote char to int : No
         ;char is unsigned    : Yes
         ;8 bit enums         : Yes
         ;Enhanced core instructions    : On
         ;Automatic register allocation : On
         
          	.EQU UDRE=0x5
          	.EQU RXC=0x7
          	.EQU USR=0xB
          	.EQU UDR=0xC
          	.EQU EERE=0x0
          	.EQU EEWE=0x1
          	.EQU EEMWE=0x2
          	.EQU SPSR=0xE
          	.EQU SPDR=0xF
          	.EQU EECR=0x1C
          	.EQU EEDR=0x1D
          	.EQU EEARL=0x1E
          	.EQU EEARH=0x1F
          	.EQU WDTCR=0x21
          	.EQU MCUCR=0x35
          	.EQU GICR=0x3B
          	.EQU SPL=0x3D
          	.EQU SPH=0x3E
          	.EQU SREG=0x3F
         
          	.DEF R0X0=R0
          	.DEF R0X1=R1
          	.DEF R0X2=R2
          	.DEF R0X3=R3
          	.DEF R0X4=R4
          	.DEF R0X5=R5
          	.DEF R0X6=R6
          	.DEF R0X7=R7
          	.DEF R0X8=R8
          	.DEF R0X9=R9
          	.DEF R0XA=R10
          	.DEF R0XB=R11
          	.DEF R0XC=R12
          	.DEF R0XD=R13
          	.DEF R0XE=R14
          	.DEF R0XF=R15
          	.DEF R0X10=R16
          	.DEF R0X11=R17
          	.DEF R0X12=R18
          	.DEF R0X13=R19
          	.DEF R0X14=R20
          	.DEF R0X15=R21
          	.DEF R0X16=R22
          	.DEF R0X17=R23
          	.DEF R0X18=R24
          	.DEF R0X19=R25
          	.DEF R0X1A=R26
          	.DEF R0X1B=R27
          	.DEF R0X1C=R28
          	.DEF R0X1D=R29
          	.DEF R0X1E=R30
          	.DEF R0X1F=R31
         
          	.EQU __se_bit=0x40
          	.EQU __sm_mask=0xB0
          	.EQU __sm_adc_noise_red=0x10
          	.EQU __sm_powerdown=0x20
          	.EQU __sm_powersave=0x30
          	.EQU __sm_standby=0xA0
          	.EQU __sm_ext_standby=0xB0
         
          	.MACRO __CPD1N
          	CPI  R30,LOW(@0)
          	LDI  R26,HIGH(@0)
          	CPC  R31,R26
          	LDI  R26,BYTE3(@0)
          	CPC  R22,R26
          	LDI  R26,BYTE4(@0)
          	CPC  R23,R26
          	.ENDM
         
          	.MACRO __CPD2N
          	CPI  R26,LOW(@0)
          	LDI  R30,HIGH(@0)
          	CPC  R27,R30
          	LDI  R30,BYTE3(@0)
          	CPC  R24,R30
          	LDI  R30,BYTE4(@0)
          	CPC  R25,R30
          	.ENDM
         
          	.MACRO __CPWRR
          	CP   R@0,R@2
          	CPC  R@1,R@3
          	.ENDM
         
          	.MACRO __CPWRN
          	CPI  R@0,LOW(@2)
          	LDI  R30,HIGH(@2)
          	CPC  R@1,R30
          	.ENDM
         
          	.MACRO __ADDD1N
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	SBCI R22,BYTE3(-@0)
          	SBCI R23,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __ADDD2N
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	SBCI R24,BYTE3(-@0)
          	SBCI R25,BYTE4(-@0)
          	.ENDM
         
          	.MACRO __SUBD1N
          	SUBI R30,LOW(@0)
          	SBCI R31,HIGH(@0)
          	SBCI R22,BYTE3(@0)
          	SBCI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __SUBD2N
          	SUBI R26,LOW(@0)
          	SBCI R27,HIGH(@0)
          	SBCI R24,BYTE3(@0)
          	SBCI R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ANDD1N
          	ANDI R30,LOW(@0)
          	ANDI R31,HIGH(@0)
          	ANDI R22,BYTE3(@0)
          	ANDI R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __ORD1N
          	ORI  R30,LOW(@0)
          	ORI  R31,HIGH(@0)
          	ORI  R22,BYTE3(@0)
          	ORI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __DELAY_USB
          	LDI  R24,LOW(@0)
          __DELAY_USB_LOOP:
          	DEC  R24
          	BRNE __DELAY_USB_LOOP
          	.ENDM
         
          	.MACRO __DELAY_USW
          	LDI  R24,LOW(@0)
          	LDI  R25,HIGH(@0)
          __DELAY_USW_LOOP:
          	SBIW R24,1
          	BRNE __DELAY_USW_LOOP
          	.ENDM
         
          	.MACRO __CLRD1S
          	LDI  R30,0
          	STD  Y+@0,R30
          	STD  Y+@0+1,R30
          	STD  Y+@0+2,R30
          	STD  Y+@0+3,R30
          	.ENDM
         
          	.MACRO __GETD1S
          	LDD  R30,Y+@0
          	LDD  R31,Y+@0+1
          	LDD  R22,Y+@0+2
          	LDD  R23,Y+@0+3
          	.ENDM
         
          	.MACRO __PUTD1S
          	STD  Y+@0,R30
          	STD  Y+@0+1,R31
          	STD  Y+@0+2,R22
          	STD  Y+@0+3,R23
          	.ENDM
         
          	.MACRO __POINTB1MN
          	LDI  R30,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1MN
          	LDI  R30,LOW(@0+@1)
          	LDI  R31,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW1FN
          	LDI  R30,LOW(2*@0+@1)
          	LDI  R31,HIGH(2*@0+@1)
          	.ENDM
         
          	.MACRO __POINTB2MN
          	LDI  R26,LOW(@0+@1)
          	.ENDM
         
          	.MACRO __POINTW2MN
          	LDI  R26,LOW(@0+@1)
          	LDI  R27,HIGH(@0+@1)
          	.ENDM
         
          	.MACRO __POINTBRM
          	LDI  R@0,LOW(@1)
          	.ENDM
         
          	.MACRO __POINTWRM
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __POINTBRMN
          	LDI  R@0,LOW(@1+@2)
          	.ENDM
         
          	.MACRO __POINTWRMN
          	LDI  R@0,LOW(@2+@3)
          	LDI  R@1,HIGH(@2+@3)
          	.ENDM
         
          	.MACRO __GETD1N
          	LDI  R30,LOW(@0)
          	LDI  R31,HIGH(@0)
          	LDI  R22,BYTE3(@0)
          	LDI  R23,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2N
          	LDI  R26,LOW(@0)
          	LDI  R27,HIGH(@0)
          	LDI  R24,BYTE3(@0)
          	LDI  R25,BYTE4(@0)
          	.ENDM
         
          	.MACRO __GETD2S
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	LDD  R24,Y+@0+2
          	LDD  R25,Y+@0+3
          	.ENDM
         
          	.MACRO __GETB1MN
          	LDS  R30,@0+@1
          	.ENDM
         
          	.MACRO __GETW1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	LDS  R22,@0+@1+2
          	LDS  R23,@0+@1+3
          	.ENDM
         
          	.MACRO __GETBRMN
          	LDS  R@2,@0+@1
          	.ENDM
         
          	.MACRO __GETWRMN
          	LDS  R@2,@0+@1
          	LDS  R@3,@0+@1+1
          	.ENDM
         
          	.MACRO __GETB2MN
          	LDS  R26,@0+@1
          	.ENDM
         
          	.MACRO __GETW2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	.ENDM
         
          	.MACRO __GETD2MN
          	LDS  R26,@0+@1
          	LDS  R27,@0+@1+1
          	LDS  R24,@0+@1+2
          	LDS  R25,@0+@1+3
          	.ENDM
         
          	.MACRO __PUTB1MN
          	STS  @0+@1,R30
          	.ENDM
         
          	.MACRO __PUTW1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	.ENDM
         
          	.MACRO __PUTD1MN
          	STS  @0+@1,R30
          	STS  @0+@1+1,R31
          	STS  @0+@1+2,R22
          	STS  @0+@1+3,R23
          	.ENDM
         
          	.MACRO __PUTBMRN
          	STS  @0+@1,R@2
          	.ENDM
         
          	.MACRO __PUTWMRN
          	STS  @0+@1,R@2
          	STS  @0+@1+1,R@3
          	.ENDM
         
          	.MACRO __GETW1R
          	MOV  R30,R@0
          	MOV  R31,R@1
          	.ENDM
         
          	.MACRO __GETW2R
          	MOV  R26,R@0
          	MOV  R27,R@1
          	.ENDM
         
          	.MACRO __GETWRN
          	LDI  R@0,LOW(@2)
          	LDI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __PUTW1R
          	MOV  R@0,R30
          	MOV  R@1,R31
          	.ENDM
         
          	.MACRO __PUTW2R
          	MOV  R@0,R26
          	MOV  R@1,R27
          	.ENDM
         
          	.MACRO __ADDWRN
          	SUBI R@0,LOW(-@2)
          	SBCI R@1,HIGH(-@2)
          	.ENDM
         
          	.MACRO __ADDWRR
          	ADD  R@0,R@2
          	ADC  R@1,R@3
          	.ENDM
         
          	.MACRO __SUBWRN
          	SUBI R@0,LOW(@2)
          	SBCI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __SUBWRR
          	SUB  R@0,R@2
          	SBC  R@1,R@3
          	.ENDM
         
          	.MACRO __ANDWRN
          	ANDI R@0,LOW(@2)
          	ANDI R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ANDWRR
          	AND  R@0,R@2
          	AND  R@1,R@3
          	.ENDM
         
          	.MACRO __ORWRN
          	ORI  R@0,LOW(@2)
          	ORI  R@1,HIGH(@2)
          	.ENDM
         
          	.MACRO __ORWRR
          	OR   R@0,R@2
          	OR   R@1,R@3
          	.ENDM
         
          	.MACRO __EORWRR
          	EOR  R@0,R@2
          	EOR  R@1,R@3
          	.ENDM
         
          	.MACRO __GETWRS
          	LDD  R@0,Y+@2
          	LDD  R@1,Y+@2+1
          	.ENDM
         
          	.MACRO __PUTWSR
          	STD  Y+@2,R@0
          	STD  Y+@2+1,R@1
          	.ENDM
         
          	.MACRO __MOVEWRR
          	MOV  R@0,R@2
          	MOV  R@1,R@3
          	.ENDM
         
          	.MACRO __INWR
          	IN   R@0,@2
          	IN   R@1,@2+1
          	.ENDM
         
          	.MACRO __OUTWR
          	OUT  @2+1,R@1
          	OUT  @2,R@0
          	.ENDM
         
          	.MACRO __CALL1MN
          	LDS  R30,@0+@1
          	LDS  R31,@0+@1+1
          	ICALL
          	.ENDM
         
          	.MACRO __NBST
          	BST  R@0,@1
          	IN   R30,SREG
          	LDI  R31,0x40
          	EOR  R30,R31
          	OUT  SREG,R30
          	.ENDM
         
         
          	.MACRO __PUTB1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SN
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNS
          	LDD  R26,Y+@0
          	LDD  R27,Y+@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMN
          	LDS  R26,@0
          	LDS  R27,@0+1
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1PMNS
          	LDS  R26,@0
          	LDS  R27,@0+1
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RN
          	MOVW R26,R@0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RNS
          	MOVW R26,R@0
          	ADIW R26,@1
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RON
          	MOV  R26,R@0
          	MOV  R27,R@1
          	SUBI R26,LOW(-@2)
          	SBCI R27,HIGH(-@2)
          	CALL __PUTDP1
          	.ENDM
         
          	.MACRO __PUTB1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1RONS
          	MOV  R26,R@0
          	MOV  R27,R@1
          	ADIW R26,@2
          	CALL __PUTDP1
          	.ENDM
         
         
          	.MACRO __GETB1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R30,Z
          	.ENDM
         
          	.MACRO __GETW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R31,Z
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __GETD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R0,Z+
          	LD   R1,Z+
          	LD   R22,Z+
          	LD   R23,Z
          	MOVW R30,R0
          	.ENDM
         
          	.MACRO __GETB2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R26,X
          	.ENDM
         
          	.MACRO __GETW2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	.ENDM
         
          	.MACRO __GETD2SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R1,X+
          	LD   R24,X+
          	LD   R25,X
          	MOVW R26,R0
          	.ENDM
         
          	.MACRO __GETBRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@1)
          	SBCI R31,HIGH(-@1)
          	LD   R@0,Z
          	.ENDM
         
          	.MACRO __GETWRSX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	LD   R@0,Z+
          	LD   R@1,Z
          	.ENDM
         
          	.MACRO __LSLW8SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	LD   R31,Z
          	CLR  R30
          	.ENDM
         
          	.MACRO __PUTB1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __CLRW1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __CLRD1SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	CLR  R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z+,R0
          	ST   Z,R0
          	.ENDM
         
          	.MACRO __PUTB2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R26
          	.ENDM
         
          	.MACRO __PUTW2SX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z+,R26
          	ST   Z,R27
          	.ENDM
         
          	.MACRO __PUTBSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@0)
          	SBCI R31,HIGH(-@0)
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTWSRX
          	MOVW R30,R28
          	SUBI R30,LOW(-@2)
          	SBCI R31,HIGH(-@2)
          	ST   Z+,R@0
          	ST   Z,R@1
          	.ENDM
         
          	.MACRO __PUTB1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X,R30
          	.ENDM
         
          	.MACRO __PUTW1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X,R31
          	.ENDM
         
          	.MACRO __PUTD1SNX
          	MOVW R26,R28
          	SUBI R26,LOW(-@0)
          	SBCI R27,HIGH(-@0)
          	LD   R0,X+
          	LD   R27,X
          	MOV  R26,R0
          	SUBI R26,LOW(-@1)
          	SBCI R27,HIGH(-@1)
          	ST   X+,R30
          	ST   X+,R31
          	ST   X+,R22
          	ST   X,R23
          	.ENDM
         
          	.MACRO __MULBRR
          	MULS R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.MACRO __MULBRRU
          	MUL  R@0,R@1
          	MOV  R30,R0
          	.ENDM
         
          	.CSEG
          	.ORG 0
         
          	.INCLUDE "GAVT.vec"
         
         ;INTERRUPT VECTORS
000000 940c 003a 	JMP  __RESET
000002 940c 0000 	JMP  0
000004 940c 0000 	JMP  0
000006 940c 0000 	JMP  0
000008 940c 0000 	JMP  0
00000a 940c 0000 	JMP  0
00000c 940c 0000 	JMP  0
00000e 940c 0000 	JMP  0
000010 940c 0000 	JMP  0
000012 940c 048f 	JMP  _timer0_ovf_isr
000014 940c 0000 	JMP  0
000016 940c 0000 	JMP  0
000018 940c 0000 	JMP  0
00001a 940c 0000 	JMP  0
00001c 940c 0000 	JMP  0
00001e 940c 0000 	JMP  0
000020 940c 0000 	JMP  0
000022 940c 0000 	JMP  0
000024 940c 0000 	JMP  0
000026 940c 0000 	JMP  0
000028 940c 0000 	JMP  0
         
          	.INCLUDE "GAVT.inc"
          	.DEF _t0_cnt0=R4
          	.DEF _t0_cnt1=R5
          	.DEF _t0_cnt2=R6
          	.DEF _t0_cnt3=R7
          	.DEF _ind_cnt=R8
          _IND_STROB:
          	.DB  0xBF,0xDF,0xEF,0xF7,0x7F
00002a dfbf
00002b f7ef
00002c 007f
          _DIGISYM:
          	.DB  0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8
00002d f9c0
00002e b0a4
00002f 9299
000030 f882
          	.DB  0x80,0x90,0xFF
000031 9080
000032 00ff
          _3:
          	.DB  0x55,0x55,0x55,0x55,0x55
000033 5555
000034 5555
000035 0055
          	.DEF _but=R9
          	.DEF _prog=R10
          	.DEF _step=R11
          	.DEF _ind=R12
          	.DEF _sub_ind=R13
          	.DEF _in_word=R14
         
          __GLOBAL_INI_TBL:
          	.DW  0x05
000036 0005
          	.DW  _ind_out
000037 0160
          	.DW  _3*2
000038 0066
         
          	.DW  0
000039 0000
         
          __RESET:
00003a 94f8      	CLI
00003b 27ee      	CLR  R30
00003c bbec      	OUT  EECR,R30
         
         ;INTERRUPT VECTORS ARE PLACED
         ;AT THE START OF FLASH
00003d e0f1      	LDI  R31,1
00003e bffb      	OUT  GICR,R31
00003f bfeb      	OUT  GICR,R30
000040 bfe5      	OUT  MCUCR,R30
         
         ;DISABLE WATCHDOG
000041 e1f8      	LDI  R31,0x18
000042 bdf1      	OUT  WDTCR,R31
000043 bde1      	OUT  WDTCR,R30
         
         ;CLEAR R2-R14
000044 e08d      	LDI  R24,13
000045 e0a2      	LDI  R26,2
000046 27bb      	CLR  R27
          __CLEAR_REG:
000047 93ed      	ST   X+,R30
000048 958a      	DEC  R24
000049 f7e9      	BRNE __CLEAR_REG
         
         ;CLEAR SRAM
00004a e080      	LDI  R24,LOW(0x400)
00004b e094      	LDI  R25,HIGH(0x400)
00004c e6a0      	LDI  R26,0x60
          __CLEAR_SRAM:
00004d 93ed      	ST   X+,R30
00004e 9701      	SBIW R24,1
00004f f7e9      	BRNE __CLEAR_SRAM
         
         ;GLOBAL VARIABLES INITIALIZATION
000050 e6ec      	LDI  R30,LOW(__GLOBAL_INI_TBL*2)
000051 e0f0      	LDI  R31,HIGH(__GLOBAL_INI_TBL*2)
          __GLOBAL_INI_NEXT:
000052 9185      	LPM  R24,Z+
000053 9195      	LPM  R25,Z+
000054 9700      	SBIW R24,0
000055 f061      	BREQ __GLOBAL_INI_END
000056 91a5      	LPM  R26,Z+
000057 91b5      	LPM  R27,Z+
000058 9005      	LPM  R0,Z+
000059 9015      	LPM  R1,Z+
00005a 01bf      	MOVW R22,R30
00005b 01f0      	MOVW R30,R0
          __GLOBAL_INI_LOOP:
00005c 9005      	LPM  R0,Z+
00005d 920d      	ST   X+,R0
00005e 9701      	SBIW R24,1
00005f f7e1      	BRNE __GLOBAL_INI_LOOP
000060 01fb      	MOVW R30,R22
000061 cff0      	RJMP __GLOBAL_INI_NEXT
          __GLOBAL_INI_END:
         
         ;STACK POINTER INITIALIZATION
000062 e5ef      	LDI  R30,LOW(0x45F)
000063 bfed      	OUT  SPL,R30
000064 e0e4      	LDI  R30,HIGH(0x45F)
000065 bfee      	OUT  SPH,R30
         
         ;DATA STACK POINTER INITIALIZATION
000066 e6c0      	LDI  R28,LOW(0x160)
000067 e0d1      	LDI  R29,HIGH(0x160)
         
000068 940c 04ca 	JMP  _main
         
          	.ESEG
          	.ORG 0
         
          	.DSEG
          	.ORG 0x160
         ;       1 #define LED_POW_ON	5
         ;       2 #define LED_PROG4	1
         ;       3 #define LED_PROG2	2
         ;       4 #define LED_PROG3	3
         ;       5 #define LED_PROG1	4 
         ;       6 #define LED_ERROR	0 
         ;       7 #define LED_WRK	6
         ;       8 #define LED_VACUUM	7
         ;       9 
         ;      10 #define GAVT3
         ;      11 
         ;      12 //#define P380
         ;      13 //#define I380
         ;      14 //#define I220
         ;      15 //#define P380_MINI
         ;      16 //#define TVIST_SKO
         ;      17 //#define I380_WI
         ;      18 //#define I220_WI
         ;      19 #define DV3KL2MD
         ;      20 
         ;      21 #define BD1	7
         ;      22 #define BD2	4
         ;      23 #define DM	1
         ;      24 #define START	0
         ;      25 #define STOP	2
         ;      26 #define MD1	3
         ;      27 #define MD2	5
         ;      28 
         ;      29 #define MD1	2
         ;      30 #define MD2	3
         ;      31 #define VR	4
         ;      32 #define MD3	5
         ;      33 
         ;      34 #define PP1	6
         ;      35 #define PP2	7
         ;      36 #define PP3	5
         ;      37 #define PP4	4
         ;      38 #define PP5	3
         ;      39 #define DV	0 
         ;      40 
         ;      41 #define PP7	2
         ;      42 
         ;      43 #ifdef P380_MINI
         ;      44 #define MINPROG 1
         ;      45 #define MAXPROG 1 
         ;      46 #ifdef GAVT3
         ;      47 #define DV	2
         ;      48 #endif
         ;      49 #define PP3	3
         ;      50 #endif 
         ;      51 
         ;      52 #ifdef P380
         ;      53 #define MINPROG 1
         ;      54 #define MAXPROG 3 
         ;      55 #ifdef GAVT3
         ;      56 #define DV	2
         ;      57 #endif
         ;      58 #endif 
         ;      59 
         ;      60 #ifdef I380
         ;      61 #define MINPROG 1
         ;      62 #define MAXPROG 4
         ;      63 #endif
         ;      64 
         ;      65 #ifdef I380_WI
         ;      66 #define MINPROG 1
         ;      67 #define MAXPROG 4
         ;      68 #endif
         ;      69 
         ;      70 #ifdef I220
         ;      71 #define MINPROG 3
         ;      72 #define MAXPROG 4
         ;      73 #endif
         ;      74 
         ;      75 
         ;      76 #ifdef I220_WI
         ;      77 #define MINPROG 3
         ;      78 #define MAXPROG 4
         ;      79 #endif
         ;      80 
         ;      81 #ifdef TVIST_SKO
         ;      82 #define MINPROG 2
         ;      83 #define MAXPROG 3
         ;      84 #define DV	2
         ;      85 #endif
         ;      86 
         ;      87 #ifdef DV3KL2MD
         ;      88 
         ;      89 #define PP1	6
         ;      90 #define PP2	7
         ;      91 #define PP3	3
         ;      92 //#define PP4	4
         ;      93 //#define PP5	3
         ;      94 #define DV	2 
         ;      95 
         ;      96 #define MINPROG 2
         ;      97 #define MAXPROG 3
         ;      98 
         ;      99 #endif
         ;     100 
         ;     101 bit b600Hz;
         ;     102 
         ;     103 bit b100Hz;
         ;     104 bit b10Hz;
         ;     105 char t0_cnt0,t0_cnt1,t0_cnt2,t0_cnt3;
         ;     106 char ind_cnt;
         ;     107 flash char IND_STROB[]={0b10111111,0b11011111,0b11101111,0b11110111,0b01111111};
         
          	.CSEG
         ;     108 flash char DIGISYM[]={0b11000000,0b11111001,0b10100100,0b10110000,0b10011001,0b10010010,0b10000010,0b11111000,0b10000000,0b10010000,0b11111111};								
         ;     109 
         ;     110 char ind_out[5]={0x255,0x255,0x255,0x255,0x255};
         
          	.DSEG
          _ind_out:
000160      	.BYTE 0x5
         ;     111 char dig[4];
          _dig:
000165      	.BYTE 0x4
         ;     112 bit bZ;    
         ;     113 char but;
         ;     114 static char but_n;
          _but_n_G1:
000169      	.BYTE 0x1
         ;     115 static char but_s;
          _but_s_G1:
00016a      	.BYTE 0x1
         ;     116 static char but0_cnt;
          _but0_cnt_G1:
00016b      	.BYTE 0x1
         ;     117 static char but1_cnt;
          _but1_cnt_G1:
00016c      	.BYTE 0x1
         ;     118 static char but_onL_temp;
          _but_onL_temp_G1:
00016d      	.BYTE 0x1
         ;     119 bit l_but;		//идет длинное нажатие на кнопку
         ;     120 bit n_but;          //произошло нажатие
         ;     121 bit speed;		//разрешение ускорения перебора 
         ;     122 bit bFL2; 
         ;     123 bit bFL5;
         ;     124 eeprom enum{evmON=0x55,evmOFF=0xaa}ee_vacuum_mode;
         
          	.ESEG
          _ee_vacuum_mode:
          	.DB  0x0
000000 00
         ;     125 eeprom char ee_program[2];
          _ee_program:
          	.DB  0x0
000001 00
          	.DB  0x0
000002 00
         ;     126 enum {p1=1,p2=2,p3=3,p4=4}prog;
         ;     127 enum{sOFF=0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13,s14,s15,s16,s54,s55,s100}step=sOFF;
         ;     128 enum {iMn,iPr_sel,iVr} ind;
         ;     129 char sub_ind;
         ;     130 char in_word,in_word_old,in_word_new,in_word_cnt;
         
          	.DSEG
          _in_word_old:
00016e      	.BYTE 0x1
          _in_word_new:
00016f      	.BYTE 0x1
          _in_word_cnt:
000170      	.BYTE 0x1
         ;     131 bit bERR;
         ;     132 signed int cnt_del=0;
          _cnt_del:
000171      	.BYTE 0x2
         ;     133 
         ;     134 char bVR;
          _bVR:
000173      	.BYTE 0x1
         ;     135 char bMD1;
          _bMD1:
000174      	.BYTE 0x1
         ;     136 bit bMD2;
         ;     137 bit bMD3;
         ;     138 char cnt_md1,cnt_md2,cnt_vr,cnt_md3;
          _cnt_md1:
000175      	.BYTE 0x1
          _cnt_md2:
000176      	.BYTE 0x1
          _cnt_vr:
000177      	.BYTE 0x1
          _cnt_md3:
000178      	.BYTE 0x1
         ;     139 
         ;     140 eeprom unsigned ee_delay[4,2];
         
          	.ESEG
          _ee_delay:
          	.DW  0x0
000003 00 00
          	.DW  0x0
000005 00 00
          	.DW  0x0
000007 00 00
          	.DW  0x0
000009 00 00
          	.DW  0x0
00000b 00 00
          	.DW  0x0
00000d 00 00
          	.DW  0x0
00000f 00 00
          	.DW  0x0
000011 00 00
         ;     141 eeprom char ee_vr_log;
          _ee_vr_log:
          	.DB  0x0
000013 00
         ;     142 #include <mega16.h>
         ;     143 //#include <mega8535.h>
         ;     144 //-----------------------------------------------
         ;     145 void prog_drv(void)
         ;     146 {
         
          	.CSEG
          _prog_drv:
         ;     147 char temp,temp1,temp2;
         ;     148 
         ;     149 temp=ee_program[0];
00006a 940e 05b6 	CALL __SAVELOCR3
         ;	temp -> R16
         ;	temp1 -> R17
         ;	temp2 -> R18
00006c e0a1      	LDI  R26,LOW(_ee_program)
00006d e0b0      	LDI  R27,HIGH(_ee_program)
00006e 940e 0592 	CALL __EEPROMRDB
000070 2f0e      	MOV  R16,R30
         ;     150 temp1=ee_program[1];
000071   +  	__POINTW2MN _ee_program,1
000073 940e 0592 	CALL __EEPROMRDB
000075 2f1e      	MOV  R17,R30
         ;     151 temp2=ee_program[2];
000076   +  	__POINTW2MN _ee_program,2
000078 940e 0592 	CALL __EEPROMRDB
00007a 2f2e      	MOV  R18,R30
         ;     152 
         ;     153 if((temp==temp1)&&(temp==temp2))
00007b 1710      	CP   R17,R16
00007c f411      	BRNE _0x5
00007d 1720      	CP   R18,R16
00007e f009      	BREQ _0x6
          _0x5:
00007f c001      	RJMP _0x4
          _0x6:
         ;     154 	{
         ;     155 	}
         ;     156 else if((temp==temp1)&&(temp!=temp2))
000080 c01d      	RJMP _0x7
          _0x4:
000081 1710      	CP   R17,R16
000082 f411      	BRNE _0x9
000083 1720      	CP   R18,R16
000084 f409      	BRNE _0xA
          _0x9:
000085 c002      	RJMP _0x8
          _0xA:
         ;     157 	{
         ;     158 	temp2=temp;
000086 2f20      	MOV  R18,R16
         ;     159 	}
         ;     160 else if((temp!=temp1)&&(temp==temp2))
000087 c016      	RJMP _0xB
          _0x8:
000088 1710      	CP   R17,R16
000089 f011      	BREQ _0xD
00008a 1720      	CP   R18,R16
00008b f009      	BREQ _0xE
          _0xD:
00008c c002      	RJMP _0xC
          _0xE:
         ;     161 	{
         ;     162 	temp1=temp;
00008d 2f10      	MOV  R17,R16
         ;     163 	}
         ;     164 else if((temp!=temp1)&&(temp1==temp2))
00008e c00f      	RJMP _0xF
          _0xC:
00008f 1710      	CP   R17,R16
000090 f011      	BREQ _0x11
000091 1721      	CP   R18,R17
000092 f009      	BREQ _0x12
          _0x11:
000093 c002      	RJMP _0x10
          _0x12:
         ;     165 	{
         ;     166 	temp=temp1;
000094 2f01      	MOV  R16,R17
         ;     167 	}
         ;     168 else if((temp!=temp1)&&(temp!=temp2))
000095 c008      	RJMP _0x13
          _0x10:
000096 1710      	CP   R17,R16
000097 f011      	BREQ _0x15
000098 1720      	CP   R18,R16
000099 f409      	BRNE _0x16
          _0x15:
00009a c003      	RJMP _0x14
          _0x16:
         ;     169 	{
         ;     170 	temp=MINPROG;
00009b e002      	LDI  R16,LOW(2)
         ;     171 	temp1=MINPROG;
00009c e012      	LDI  R17,LOW(2)
         ;     172 	temp2=MINPROG;
00009d e022      	LDI  R18,LOW(2)
         ;     173 	}
         ;     174 
         ;     175 if(!((temp<=MAXPROG)&&(temp>=MINPROG)))
          _0x14:
          _0x13:
          _0xF:
          _0xB:
          _0x7:
00009e e0e3      	LDI  R30,LOW(3)
00009f 17e0      	CP   R30,R16
0000a0 f010      	BRLO _0x18
0000a1 3002      	CPI  R16,2
0000a2 f408      	BRSH _0x17
          _0x18:
         ;     176 	{
         ;     177 	temp=MINPROG;
0000a3 e002      	LDI  R16,LOW(2)
         ;     178 	}
         ;     179 
         ;     180 if(temp!=ee_program[0])ee_program[0]=temp;
          _0x17:
0000a4 e0a1      	LDI  R26,LOW(_ee_program)
0000a5 e0b0      	LDI  R27,HIGH(_ee_program)
0000a6 940e 0592 	CALL __EEPROMRDB
0000a8 17e0      	CP   R30,R16
0000a9 f029      	BREQ _0x1A
0000aa 2fe0      	MOV  R30,R16
0000ab e0a1      	LDI  R26,LOW(_ee_program)
0000ac e0b0      	LDI  R27,HIGH(_ee_program)
0000ad 940e 05a6 	CALL __EEPROMWRB
         ;     181 if(temp!=ee_program[1])ee_program[1]=temp;
          _0x1A:
0000af   +  	__POINTW2MN _ee_program,1
0000b1 940e 0592 	CALL __EEPROMRDB
0000b3 17e0      	CP   R30,R16
0000b4 f029      	BREQ _0x1B
0000b5   +  	__POINTW2MN _ee_program,1
0000b7 2fe0      	MOV  R30,R16
0000b8 940e 05a6 	CALL __EEPROMWRB
         ;     182 if(temp!=ee_program[2])ee_program[2]=temp;
          _0x1B:
0000ba   +  	__POINTW2MN _ee_program,2
0000bc 940e 0592 	CALL __EEPROMRDB
0000be 17e0      	CP   R30,R16
0000bf f029      	BREQ _0x1C
0000c0   +  	__POINTW2MN _ee_program,2
0000c2 2fe0      	MOV  R30,R16
0000c3 940e 05a6 	CALL __EEPROMWRB
         ;     183 
         ;     184 prog=temp;
          _0x1C:
0000c5 2ea0      	MOV  R10,R16
         ;     185 }
0000c6 940e 05bb 	CALL __LOADLOCR3
0000c8 c19f      	RJMP _0xC9
         ;     186 
         ;     187 //-----------------------------------------------
         ;     188 void in_drv(void)
         ;     189 {
          _in_drv:
         ;     190 char i,temp;
         ;     191 unsigned int tempUI;
         ;     192 DDRA=0x00;
0000c9 940e 05b5 	CALL __SAVELOCR4
         ;	i -> R16
         ;	temp -> R17
         ;	tempUI -> R18,R19
0000cb 940e 0512 	CALL SUBOPT_0x0
         ;     193 PORTA=0xff;
0000cd bbeb      	OUT  0x1B,R30
         ;     194 in_word_new=PINA;
0000ce b3e9      	IN   R30,0x19
0000cf 93e0 016f 	STS  _in_word_new,R30
         ;     195 if(in_word_old==in_word_new)
0000d1 91a0 016e 	LDS  R26,_in_word_old
0000d3 17ea      	CP   R30,R26
0000d4 f481      	BRNE _0x1D
         ;     196 	{
         ;     197 	if(in_word_cnt<10)
0000d5 91a0 0170 	LDS  R26,_in_word_cnt
0000d7 30aa      	CPI  R26,LOW(0xA)
0000d8 f458      	BRSH _0x1E
         ;     198 		{
         ;     199 		in_word_cnt++;
0000d9 91e0 0170 	LDS  R30,_in_word_cnt
0000db 5fef      	SUBI R30,-LOW(1)
0000dc 93e0 0170 	STS  _in_word_cnt,R30
         ;     200 		if(in_word_cnt>=10)
0000de 91a0 0170 	LDS  R26,_in_word_cnt
0000e0 30aa      	CPI  R26,LOW(0xA)
0000e1 f010      	BRLO _0x1F
         ;     201 			{
         ;     202 			in_word=in_word_old;
0000e2 90e0 016e 	LDS  R14,_in_word_old
         ;     203 			}
         ;     204 		}
          _0x1F:
         ;     205 	}
          _0x1E:
         ;     206 else in_word_cnt=0;
0000e4 c003      	RJMP _0x20
          _0x1D:
0000e5 e0e0      	LDI  R30,LOW(0)
0000e6 93e0 0170 	STS  _in_word_cnt,R30
          _0x20:
         ;     207 
         ;     208 
         ;     209 in_word_old=in_word_new;
0000e8 91e0 016f 	LDS  R30,_in_word_new
0000ea 93e0 016e 	STS  _in_word_old,R30
         ;     210 }   
0000ec 940e 05ba 	CALL __LOADLOCR4
0000ee 9624      	ADIW R28,4
0000ef 9508      	RET
         ;     211 
         ;     212 #ifdef TVIST_SKO
         ;     213 //-----------------------------------------------
         ;     214 void err_drv(void)
         ;     215 {
         ;     216 if(step==sOFF)
         ;     217 	{
         ;     218     	if(prog==p2)	
         ;     219     		{
         ;     220        		if(bMD1) bERR=1;
         ;     221        		else bERR=0;
         ;     222 		}
         ;     223 	}
         ;     224 else bERR=0;
         ;     225 }
         ;     226 #endif  
         ;     227 
         ;     228 #ifndef TVIST_SKO
         ;     229 //-----------------------------------------------
         ;     230 void err_drv(void)
         ;     231 {
          _err_drv:
         ;     232 if(step==sOFF)
0000f0 20bb      	TST  R11
0000f1 f491      	BRNE _0x21
         ;     233 	{
         ;     234 	if((bMD1)||(bMD2)||(bVR)||(bMD3)) bERR=1;
0000f2 91e0 0174 	LDS  R30,_bMD1
0000f4 30e0      	CPI  R30,0
0000f5 f441      	BRNE _0x23
0000f6 fc32      	SBRC R3,2
0000f7 c006      	RJMP _0x23
0000f8 91e0 0173 	LDS  R30,_bVR
0000fa 30e0      	CPI  R30,0
0000fb f411      	BRNE _0x23
0000fc fe33      	SBRS R3,3
0000fd c003      	RJMP _0x22
          _0x23:
0000fe 9468      	SET
0000ff f831      	BLD  R3,1
         ;     235 	else bERR=0;
000100 c002      	RJMP _0x25
          _0x22:
000101 94e8      	CLT
000102 f831      	BLD  R3,1
          _0x25:
         ;     236 	}
         ;     237 else bERR=0;
000103 c002      	RJMP _0x26
          _0x21:
000104 94e8      	CLT
000105 f831      	BLD  R3,1
          _0x26:
         ;     238 }
000106 9508      	RET
         ;     239 #endif
         ;     240 //-----------------------------------------------
         ;     241 void mdvr_drv(void)
         ;     242 {
          _mdvr_drv:
         ;     243 if(!(in_word&(1<<MD1)))
000107 fce2      	SBRC R14,2
000108 c011      	RJMP _0x27
         ;     244 	{
         ;     245 	if(cnt_md1<10)
000109 91a0 0175 	LDS  R26,_cnt_md1
00010b 30aa      	CPI  R26,LOW(0xA)
00010c f460      	BRSH _0x28
         ;     246 		{
         ;     247 		cnt_md1++;
00010d 91e0 0175 	LDS  R30,_cnt_md1
00010f 5fef      	SUBI R30,-LOW(1)
000110 93e0 0175 	STS  _cnt_md1,R30
         ;     248 		if(cnt_md1==10) bMD1=1;
000112 91a0 0175 	LDS  R26,_cnt_md1
000114 30aa      	CPI  R26,LOW(0xA)
000115 f419      	BRNE _0x29
000116 e0e1      	LDI  R30,LOW(1)
000117 93e0 0174 	STS  _bMD1,R30
         ;     249 		}
          _0x29:
         ;     250 
         ;     251 	}
          _0x28:
         ;     252 else
000119 c00c      	RJMP _0x2A
          _0x27:
         ;     253 	{
         ;     254 	if(cnt_md1)
00011a 91e0 0175 	LDS  R30,_cnt_md1
00011c 30e0      	CPI  R30,0
00011d f041      	BREQ _0x2B
         ;     255 		{
         ;     256 		cnt_md1--;
00011e 50e1      	SUBI R30,LOW(1)
00011f 93e0 0175 	STS  _cnt_md1,R30
         ;     257 		if(cnt_md1==0) bMD1=0;
000121 30e0      	CPI  R30,0
000122 f419      	BRNE _0x2C
000123 e0e0      	LDI  R30,LOW(0)
000124 93e0 0174 	STS  _bMD1,R30
         ;     258 		}
          _0x2C:
         ;     259 
         ;     260 	}
          _0x2B:
          _0x2A:
         ;     261 
         ;     262 if(!(in_word&(1<<MD2)))
000126 fce3      	SBRC R14,3
000127 c010      	RJMP _0x2D
         ;     263 	{
         ;     264 	if(cnt_md2<10)
000128 91a0 0176 	LDS  R26,_cnt_md2
00012a 30aa      	CPI  R26,LOW(0xA)
00012b f458      	BRSH _0x2E
         ;     265 		{
         ;     266 		cnt_md2++;
00012c 91e0 0176 	LDS  R30,_cnt_md2
00012e 5fef      	SUBI R30,-LOW(1)
00012f 93e0 0176 	STS  _cnt_md2,R30
         ;     267 		if(cnt_md2==10) bMD2=1;
000131 91a0 0176 	LDS  R26,_cnt_md2
000133 30aa      	CPI  R26,LOW(0xA)
000134 f411      	BRNE _0x2F
000135 9468      	SET
000136 f832      	BLD  R3,2
         ;     268 		}
          _0x2F:
         ;     269 
         ;     270 	}
          _0x2E:
         ;     271 else
000137 c00b      	RJMP _0x30
          _0x2D:
         ;     272 	{
         ;     273 	if(cnt_md2)
000138 91e0 0176 	LDS  R30,_cnt_md2
00013a 30e0      	CPI  R30,0
00013b f039      	BREQ _0x31
         ;     274 		{
         ;     275 		cnt_md2--;
00013c 50e1      	SUBI R30,LOW(1)
00013d 93e0 0176 	STS  _cnt_md2,R30
         ;     276 		if(cnt_md2==0) bMD2=0;
00013f 30e0      	CPI  R30,0
000140 f411      	BRNE _0x32
000141 94e8      	CLT
000142 f832      	BLD  R3,2
         ;     277 		}
          _0x32:
         ;     278 
         ;     279 	}
          _0x31:
          _0x30:
         ;     280 
         ;     281 if(!(in_word&(1<<MD3)))
000143 fce5      	SBRC R14,5
000144 c010      	RJMP _0x33
         ;     282 	{
         ;     283 	if(cnt_md3<10)
000145 91a0 0178 	LDS  R26,_cnt_md3
000147 30aa      	CPI  R26,LOW(0xA)
000148 f458      	BRSH _0x34
         ;     284 		{
         ;     285 		cnt_md3++;
000149 91e0 0178 	LDS  R30,_cnt_md3
00014b 5fef      	SUBI R30,-LOW(1)
00014c 93e0 0178 	STS  _cnt_md3,R30
         ;     286 		if(cnt_md3==10) bMD3=1;
00014e 91a0 0178 	LDS  R26,_cnt_md3
000150 30aa      	CPI  R26,LOW(0xA)
000151 f411      	BRNE _0x35
000152 9468      	SET
000153 f833      	BLD  R3,3
         ;     287 		}
          _0x35:
         ;     288 
         ;     289 	}
          _0x34:
         ;     290 else
000154 c00b      	RJMP _0x36
          _0x33:
         ;     291 	{
         ;     292 	if(cnt_md3)
000155 91e0 0178 	LDS  R30,_cnt_md3
000157 30e0      	CPI  R30,0
000158 f039      	BREQ _0x37
         ;     293 		{
         ;     294 		cnt_md3--;
000159 50e1      	SUBI R30,LOW(1)
00015a 93e0 0178 	STS  _cnt_md3,R30
         ;     295 		if(cnt_md3==0) bMD3=0;
00015c 30e0      	CPI  R30,0
00015d f411      	BRNE _0x38
00015e 94e8      	CLT
00015f f833      	BLD  R3,3
         ;     296 		}
          _0x38:
         ;     297 
         ;     298 	}
          _0x37:
          _0x36:
         ;     299 
         ;     300 if(((!(in_word&(1<<VR)))&&(ee_vr_log)) || (((in_word&(1<<VR)))&&(!ee_vr_log)))
000160 fce4      	SBRC R14,4
000161 c006      	RJMP _0x3A
000162 e1a3      	LDI  R26,LOW(_ee_vr_log)
000163 e0b0      	LDI  R27,HIGH(_ee_vr_log)
000164 940e 0592 	CALL __EEPROMRDB
000166 30e0      	CPI  R30,0
000167 f449      	BRNE _0x3C
          _0x3A:
000168 fee4      	SBRS R14,4
000169 c006      	RJMP _0x3D
00016a e1a3      	LDI  R26,LOW(_ee_vr_log)
00016b e0b0      	LDI  R27,HIGH(_ee_vr_log)
00016c 940e 0592 	CALL __EEPROMRDB
00016e 30e0      	CPI  R30,0
00016f f009      	BREQ _0x3C
          _0x3D:
000170 c011      	RJMP _0x39
          _0x3C:
         ;     301 	{
         ;     302 	if(cnt_vr<10)
000171 91a0 0177 	LDS  R26,_cnt_vr
000173 30aa      	CPI  R26,LOW(0xA)
000174 f460      	BRSH _0x40
         ;     303 		{
         ;     304 		cnt_vr++;
000175 91e0 0177 	LDS  R30,_cnt_vr
000177 5fef      	SUBI R30,-LOW(1)
000178 93e0 0177 	STS  _cnt_vr,R30
         ;     305 		if(cnt_vr==10) bVR=1;
00017a 91a0 0177 	LDS  R26,_cnt_vr
00017c 30aa      	CPI  R26,LOW(0xA)
00017d f419      	BRNE _0x41
00017e e0e1      	LDI  R30,LOW(1)
00017f 93e0 0173 	STS  _bVR,R30
         ;     306 		}
          _0x41:
         ;     307 
         ;     308 	}
          _0x40:
         ;     309 else
000181 c00c      	RJMP _0x42
          _0x39:
         ;     310 	{
         ;     311 	if(cnt_vr)
000182 91e0 0177 	LDS  R30,_cnt_vr
000184 30e0      	CPI  R30,0
000185 f041      	BREQ _0x43
         ;     312 		{
         ;     313 		cnt_vr--;
000186 50e1      	SUBI R30,LOW(1)
000187 93e0 0177 	STS  _cnt_vr,R30
         ;     314 		if(cnt_vr==0) bVR=0;
000189 30e0      	CPI  R30,0
00018a f419      	BRNE _0x44
00018b e0e0      	LDI  R30,LOW(0)
00018c 93e0 0173 	STS  _bVR,R30
         ;     315 		}
          _0x44:
         ;     316 
         ;     317 	}
          _0x43:
          _0x42:
         ;     318 } 
00018e 9508      	RET
         ;     319 
         ;     320 #ifdef DV3KL2MD
         ;     321 //-----------------------------------------------
         ;     322 void step_contr(void)
         ;     323 {
          _step_contr:
         ;     324 char temp=0;
         ;     325 DDRB=0xFF;
00018f 930a      	ST   -Y,R16
         ;	temp -> R16
000190 e000      	LDI  R16,0
000191 efef      	LDI  R30,LOW(255)
000192 bbe7      	OUT  0x17,R30
         ;     326 
         ;     327 if(step==sOFF)
000193 20bb      	TST  R11
000194 f411      	BRNE _0x45
         ;     328 	{
         ;     329 	temp=0;
000195 e000      	LDI  R16,LOW(0)
         ;     330 	}
         ;     331 
         ;     332 else if(step==s1)
000196 c042      	RJMP _0x46
          _0x45:
000197 e0e1      	LDI  R30,LOW(1)
000198 15eb      	CP   R30,R11
000199 f469      	BRNE _0x47
         ;     333 	{
         ;     334 	temp|=(1<<PP1);
00019a 6400      	ORI  R16,LOW(64)
         ;     335 
         ;     336 	cnt_del--;
00019b 940e 0516 	CALL SUBOPT_0x1
         ;     337 	if(cnt_del==0)
00019d f441      	BRNE _0x48
         ;     338 		{
         ;     339 		step=s2;
00019e e0e2      	LDI  R30,LOW(2)
00019f 2ebe      	MOV  R11,R30
         ;     340 		cnt_del=20;
0001a0 e1e4      	LDI  R30,LOW(20)
0001a1 e0f0      	LDI  R31,HIGH(20)
0001a2 93e0 0171 	STS  _cnt_del,R30
0001a4 93f0 0172 	STS  _cnt_del+1,R31
         ;     341 		}
         ;     342 	}
          _0x48:
         ;     343 
         ;     344 
         ;     345 else if(step==s2)
0001a6 c032      	RJMP _0x49
          _0x47:
0001a7 e0e2      	LDI  R30,LOW(2)
0001a8 15eb      	CP   R30,R11
0001a9 f439      	BRNE _0x4A
         ;     346 	{
         ;     347 	temp|=(1<<PP1)|(1<<DV);
0001aa 6404      	ORI  R16,LOW(68)
         ;     348 
         ;     349 	cnt_del--;
0001ab 940e 0516 	CALL SUBOPT_0x1
         ;     350 	if(cnt_del==0)
0001ad f411      	BRNE _0x4B
         ;     351 		{
         ;     352 		step=s3;
0001ae e0e3      	LDI  R30,LOW(3)
0001af 2ebe      	MOV  R11,R30
         ;     353 		}
         ;     354 	}
          _0x4B:
         ;     355 	
         ;     356 else if(step==s3)
0001b0 c028      	RJMP _0x4C
          _0x4A:
0001b1 e0e3      	LDI  R30,LOW(3)
0001b2 15eb      	CP   R30,R11
0001b3 f441      	BRNE _0x4D
         ;     357 	{
         ;     358 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
0001b4 6c04      	ORI  R16,LOW(196)
         ;     359      if(!bMD1)goto step_contr_end;
0001b5 91e0 0174 	LDS  R30,_bMD1
0001b7 30e0      	CPI  R30,0
0001b8 f101      	BREQ _0x4F
         ;     360      step=s4;
0001b9 e0e4      	LDI  R30,LOW(4)
0001ba 2ebe      	MOV  R11,R30
         ;     361      }     
         ;     362 else if(step==s4)
0001bb c01d      	RJMP _0x50
          _0x4D:
0001bc e0e4      	LDI  R30,LOW(4)
0001bd 15eb      	CP   R30,R11
0001be f439      	BRNE _0x51
         ;     363 	{          
         ;     364      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
0001bf 640c      	ORI  R16,LOW(76)
         ;     365      if(!bMD2)goto step_contr_end;
0001c0 fe32      	SBRS R3,2
0001c1 c017      	RJMP _0x4F
         ;     366      step=s5;
0001c2 e0e5      	LDI  R30,LOW(5)
0001c3 940e 0521 	CALL SUBOPT_0x2
         ;     367      cnt_del=50;
         ;     368      } 
         ;     369 else if(step==s5)
0001c5 c013      	RJMP _0x53
          _0x51:
0001c6 e0e5      	LDI  R30,LOW(5)
0001c7 15eb      	CP   R30,R11
0001c8 f441      	BRNE _0x54
         ;     370 	{
         ;     371 	temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
0001c9 640c      	ORI  R16,LOW(76)
         ;     372 
         ;     373 	cnt_del--;
0001ca 940e 0516 	CALL SUBOPT_0x1
         ;     374 	if(cnt_del==0)
0001cc f419      	BRNE _0x55
         ;     375 		{
         ;     376 		step=s6;
0001cd e0e6      	LDI  R30,LOW(6)
0001ce 940e 0521 	CALL SUBOPT_0x2
         ;     377 		cnt_del=50;
         ;     378 		}
         ;     379 	}         
          _0x55:
         ;     380 /*else if(step==s6)
         ;     381 	{
         ;     382 	temp|=(1<<PP1)|(1<<DV);
         ;     383 
         ;     384 	cnt_del--;
         ;     385 	if(cnt_del==0)
         ;     386 		{
         ;     387 		step=s6;
         ;     388 		cnt_del=70;
         ;     389 		}
         ;     390 	}*/     
         ;     391 else if(step==s6)
0001d0 c008      	RJMP _0x56
          _0x54:
0001d1 e0e6      	LDI  R30,LOW(6)
0001d2 15eb      	CP   R30,R11
0001d3 f429      	BRNE _0x57
         ;     392 		{
         ;     393 	temp|=(1<<PP1);
0001d4 6400      	ORI  R16,LOW(64)
         ;     394 	cnt_del--;
0001d5 940e 0516 	CALL SUBOPT_0x1
         ;     395 	if(cnt_del==0)
0001d7 f409      	BRNE _0x58
         ;     396 		{
         ;     397 		step=sOFF;
0001d8 24bb      	CLR  R11
         ;     398           }     
         ;     399      }     
          _0x58:
         ;     400 
         ;     401 step_contr_end:
          _0x57:
          _0x56:
          _0x53:
          _0x50:
          _0x4C:
          _0x49:
          _0x46:
          _0x4F:
         ;     402 
         ;     403 PORTB=~temp;
0001d9 2fe0      	MOV  R30,R16
0001da 95e0      	COM  R30
0001db bbe8      	OUT  0x18,R30
         ;     404 }
0001dc 9109      	LD   R16,Y+
0001dd 9508      	RET
         ;     405 #endif
         ;     406 
         ;     407 #ifdef P380_MINI
         ;     408 //-----------------------------------------------
         ;     409 void step_contr(void)
         ;     410 {
         ;     411 char temp=0;
         ;     412 DDRB=0xFF;
         ;     413 
         ;     414 if(step==sOFF)
         ;     415 	{
         ;     416 	temp=0;
         ;     417 	}
         ;     418 
         ;     419 else if(step==s1)
         ;     420 	{
         ;     421 	temp|=(1<<PP1);
         ;     422 
         ;     423 	cnt_del--;
         ;     424 	if(cnt_del==0)
         ;     425 		{
         ;     426 		step=s2;
         ;     427 		}
         ;     428 	}
         ;     429 
         ;     430 else if(step==s2)
         ;     431 	{
         ;     432 	temp|=(1<<PP1)|(1<<PP2)|(1<<DV);
         ;     433      if(!bMD1)goto step_contr_end;
         ;     434      step=s3;
         ;     435      }     
         ;     436 else if(step==s3)
         ;     437 	{          
         ;     438      temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     439      if(!bMD2)goto step_contr_end;
         ;     440      step=s4;
         ;     441      cnt_del=50;
         ;     442      }
         ;     443 else if(step==s4)
         ;     444 		{
         ;     445 	temp|=(1<<PP1);
         ;     446 	cnt_del--;
         ;     447 	if(cnt_del==0)
         ;     448 		{
         ;     449 		step=sOFF;
         ;     450           }     
         ;     451      }     
         ;     452 
         ;     453 step_contr_end:
         ;     454 
         ;     455 PORTB=~temp;
         ;     456 }
         ;     457 #endif
         ;     458 
         ;     459 #ifdef P380
         ;     460 //-----------------------------------------------
         ;     461 void step_contr(void)
         ;     462 {
         ;     463 char temp=0;
         ;     464 DDRB=0xFF;
         ;     465 
         ;     466 if(step==sOFF)
         ;     467 	{
         ;     468 	temp=0;
         ;     469 	}
         ;     470 
         ;     471 else if(prog==p1)
         ;     472 	{
         ;     473 	if(step==s1)
         ;     474 		{
         ;     475 		temp|=(1<<PP1)|(1<<PP2);
         ;     476 
         ;     477 		cnt_del--;
         ;     478 		if(cnt_del==0)
         ;     479 			{
         ;     480 			if(ee_vacuum_mode==evmOFF)
         ;     481 				{
         ;     482 				goto lbl_0001;
         ;     483 				}
         ;     484 			else step=s2;
         ;     485 			}
         ;     486 		}
         ;     487 
         ;     488 	else if(step==s2)
         ;     489 		{
         ;     490 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     491 
         ;     492           if(!bVR)goto step_contr_end;
         ;     493 lbl_0001:
         ;     494 #ifndef BIG_CAM
         ;     495 		cnt_del=30;
         ;     496 #endif
         ;     497 
         ;     498 #ifdef BIG_CAM
         ;     499 		cnt_del=100;
         ;     500 #endif
         ;     501 		step=s3;
         ;     502 		}
         ;     503 
         ;     504 	else if(step==s3)
         ;     505 		{
         ;     506 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     507 		cnt_del--;
         ;     508 		if(cnt_del==0)
         ;     509 			{
         ;     510 			step=s4;
         ;     511 			}
         ;     512           }
         ;     513 	else if(step==s4)
         ;     514 		{
         ;     515 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     516 
         ;     517           if(!bMD1)goto step_contr_end;
         ;     518 
         ;     519 		cnt_del=40;
         ;     520 		step=s5;
         ;     521 		}
         ;     522 	else if(step==s5)
         ;     523 		{
         ;     524 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     525 
         ;     526 		cnt_del--;
         ;     527 		if(cnt_del==0)
         ;     528 			{
         ;     529 			step=s6;
         ;     530 			}
         ;     531 		}
         ;     532 	else if(step==s6)
         ;     533 		{
         ;     534 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     535 
         ;     536          	if(!bMD2)goto step_contr_end;
         ;     537           cnt_del=40;
         ;     538 		//step=s7;
         ;     539 		
         ;     540           step=s55;
         ;     541           cnt_del=40;
         ;     542 		}
         ;     543 	else if(step==s55)
         ;     544 		{
         ;     545 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     546           cnt_del--;
         ;     547           if(cnt_del==0)
         ;     548 			{
         ;     549           	step=s7;
         ;     550           	cnt_del=20;
         ;     551 			}
         ;     552          		
         ;     553 		}
         ;     554 	else if(step==s7)
         ;     555 		{
         ;     556 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP5)|(1<<DV);
         ;     557 
         ;     558 		cnt_del--;
         ;     559 		if(cnt_del==0)
         ;     560 			{
         ;     561 			step=s8;
         ;     562 			cnt_del=30;
         ;     563 			}
         ;     564 		}
         ;     565 	else if(step==s8)
         ;     566 		{
         ;     567 		temp|=(1<<PP1)|(1<<PP3);
         ;     568 
         ;     569 		cnt_del--;
         ;     570 		if(cnt_del==0)
         ;     571 			{
         ;     572 			step=s9;
         ;     573 #ifndef BIG_CAM
         ;     574 		cnt_del=150;
         ;     575 #endif
         ;     576 
         ;     577 #ifdef BIG_CAM
         ;     578 		cnt_del=200;
         ;     579 #endif
         ;     580 			}
         ;     581 		}
         ;     582 	else if(step==s9)
         ;     583 		{
         ;     584 		temp|=(1<<PP1)|(1<<PP2);
         ;     585 
         ;     586 		cnt_del--;
         ;     587 		if(cnt_del==0)
         ;     588 			{
         ;     589 			step=s10;
         ;     590 			cnt_del=30;
         ;     591 			}
         ;     592 		}
         ;     593 	else if(step==s10)
         ;     594 		{
         ;     595 		temp|=(1<<PP2);
         ;     596 		cnt_del--;
         ;     597 		if(cnt_del==0)
         ;     598 			{
         ;     599 			step=sOFF;
         ;     600 			}
         ;     601 		}
         ;     602 	}
         ;     603 
         ;     604 if(prog==p2)
         ;     605 	{
         ;     606 
         ;     607 	if(step==s1)
         ;     608 		{
         ;     609 		temp|=(1<<PP1)|(1<<PP2);
         ;     610 
         ;     611 		cnt_del--;
         ;     612 		if(cnt_del==0)
         ;     613 			{
         ;     614 			if(ee_vacuum_mode==evmOFF)
         ;     615 				{
         ;     616 				goto lbl_0002;
         ;     617 				}
         ;     618 			else step=s2;
         ;     619 			}
         ;     620 		}
         ;     621 
         ;     622 	else if(step==s2)
         ;     623 		{
         ;     624 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     625 
         ;     626           if(!bVR)goto step_contr_end;
         ;     627 lbl_0002:
         ;     628 #ifndef BIG_CAM
         ;     629 		cnt_del=30;
         ;     630 #endif
         ;     631 
         ;     632 #ifdef BIG_CAM
         ;     633 		cnt_del=100;
         ;     634 #endif
         ;     635 		step=s3;
         ;     636 		}
         ;     637 
         ;     638 	else if(step==s3)
         ;     639 		{
         ;     640 		temp|=(1<<PP1)|(1<<PP3)|(1<<DV);
         ;     641 
         ;     642 		cnt_del--;
         ;     643 		if(cnt_del==0)
         ;     644 			{
         ;     645 			step=s4;
         ;     646 			}
         ;     647 		}
         ;     648 
         ;     649 	else if(step==s4)
         ;     650 		{
         ;     651 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     652 
         ;     653           if(!bMD1)goto step_contr_end;
         ;     654          	cnt_del=30;
         ;     655 		step=s5;
         ;     656 		}
         ;     657 
         ;     658 	else if(step==s5)
         ;     659 		{
         ;     660 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     661 
         ;     662 		cnt_del--;
         ;     663 		if(cnt_del==0)
         ;     664 			{
         ;     665 			step=s6;
         ;     666 			cnt_del=30;
         ;     667 			}
         ;     668 		}
         ;     669 
         ;     670 	else if(step==s6)
         ;     671 		{
         ;     672 		temp|=(1<<PP1)|(1<<PP3);
         ;     673 
         ;     674 		cnt_del--;
         ;     675 		if(cnt_del==0)
         ;     676 			{
         ;     677 			step=s7;
         ;     678 #ifndef BIG_CAM
         ;     679 		cnt_del=150;
         ;     680 #endif
         ;     681 
         ;     682 #ifdef BIG_CAM
         ;     683 		cnt_del=200;
         ;     684 #endif
         ;     685 			}
         ;     686 		}
         ;     687 
         ;     688 	else if(step==s7)
         ;     689 		{
         ;     690 		temp|=(1<<PP1)|(1<<PP2);
         ;     691 
         ;     692 		cnt_del--;
         ;     693 		if(cnt_del==0)
         ;     694 			{
         ;     695 			step=s8;
         ;     696 			cnt_del=30;
         ;     697 			}
         ;     698 		}
         ;     699 	else if(step==s8)
         ;     700 		{
         ;     701 		temp|=(1<<PP2);
         ;     702 
         ;     703 		cnt_del--;
         ;     704 		if(cnt_del==0)
         ;     705 			{
         ;     706 			step=sOFF;
         ;     707 			}
         ;     708 		}
         ;     709 	}
         ;     710 
         ;     711 if(prog==p3)
         ;     712 	{
         ;     713 
         ;     714 	if(step==s1)
         ;     715 		{
         ;     716 		temp|=(1<<PP1)|(1<<PP2);
         ;     717 
         ;     718 		cnt_del--;
         ;     719 		if(cnt_del==0)
         ;     720 			{
         ;     721 			if(ee_vacuum_mode==evmOFF)
         ;     722 				{
         ;     723 				goto lbl_0003;
         ;     724 				}
         ;     725 			else step=s2;
         ;     726 			}
         ;     727 		}
         ;     728 
         ;     729 	else if(step==s2)
         ;     730 		{
         ;     731 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     732 
         ;     733           if(!bVR)goto step_contr_end;
         ;     734 lbl_0003:
         ;     735 #ifndef BIG_CAM
         ;     736 		cnt_del=80;
         ;     737 #endif
         ;     738 
         ;     739 #ifdef BIG_CAM
         ;     740 		cnt_del=100;
         ;     741 #endif
         ;     742 		step=s3;
         ;     743 		}
         ;     744 
         ;     745 	else if(step==s3)
         ;     746 		{
         ;     747 		temp|=(1<<PP1)|(1<<PP3);
         ;     748 
         ;     749 		cnt_del--;
         ;     750 		if(cnt_del==0)
         ;     751 			{
         ;     752 			step=s4;
         ;     753 			cnt_del=120;
         ;     754 			}
         ;     755 		}
         ;     756 
         ;     757 	else if(step==s4)
         ;     758 		{
         ;     759 		temp|=(1<<PP1)|(1<<PP3)|(1<<PP4)|(1<<PP5);
         ;     760 
         ;     761 		cnt_del--;
         ;     762 		if(cnt_del==0)
         ;     763 			{
         ;     764 			step=s5;
         ;     765 
         ;     766 		
         ;     767 #ifndef BIG_CAM
         ;     768 		cnt_del=150;
         ;     769 #endif
         ;     770 
         ;     771 #ifdef BIG_CAM
         ;     772 		cnt_del=200;
         ;     773 #endif
         ;     774 	//	step=s5;
         ;     775 	}
         ;     776 		}
         ;     777 
         ;     778 	else if(step==s5)
         ;     779 		{
         ;     780 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4)|(1<<PP5);
         ;     781 
         ;     782 		cnt_del--;
         ;     783 		if(cnt_del==0)
         ;     784 			{
         ;     785 			step=s6;
         ;     786 			cnt_del=30;
         ;     787 			}
         ;     788 		}
         ;     789 
         ;     790 	else if(step==s6)
         ;     791 		{
         ;     792 		temp|=(1<<PP2)|(1<<PP4)|(1<<PP5);
         ;     793 
         ;     794 		cnt_del--;
         ;     795 		if(cnt_del==0)
         ;     796 			{
         ;     797 			step=s7;
         ;     798 			cnt_del=30;
         ;     799 			}
         ;     800 		}
         ;     801 
         ;     802 	else if(step==s7)
         ;     803 		{
         ;     804 		temp|=(1<<PP2);
         ;     805 
         ;     806 		cnt_del--;
         ;     807 		if(cnt_del==0)
         ;     808 			{
         ;     809 			step=sOFF;
         ;     810 			}
         ;     811 		}
         ;     812 
         ;     813 	}
         ;     814 step_contr_end:
         ;     815 
         ;     816 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;     817 
         ;     818 PORTB=~temp;
         ;     819 }
         ;     820 #endif
         ;     821 #ifdef I380
         ;     822 //-----------------------------------------------
         ;     823 void step_contr(void)
         ;     824 {
         ;     825 char temp=0;
         ;     826 DDRB=0xFF;
         ;     827 
         ;     828 if(step==sOFF)goto step_contr_end;
         ;     829 
         ;     830 else if(prog==p1)
         ;     831 	{
         ;     832 	if(step==s1)    //жесть
         ;     833 		{
         ;     834 		temp|=(1<<PP1);
         ;     835           if(!bMD1)goto step_contr_end;
         ;     836 
         ;     837 			if(ee_vacuum_mode==evmOFF)
         ;     838 				{
         ;     839 				goto lbl_0001;
         ;     840 				}
         ;     841 			else step=s2;
         ;     842 		}
         ;     843 
         ;     844 	else if(step==s2)
         ;     845 		{
         ;     846 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     847           if(!bVR)goto step_contr_end;
         ;     848 lbl_0001:
         ;     849 
         ;     850           step=s100;
         ;     851 		cnt_del=40;
         ;     852           }
         ;     853 	else if(step==s100)
         ;     854 		{
         ;     855 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;     856           cnt_del--;
         ;     857           if(cnt_del==0)
         ;     858 			{
         ;     859           	step=s3;
         ;     860           	cnt_del=50;
         ;     861 			}
         ;     862 		}
         ;     863 
         ;     864 	else if(step==s3)
         ;     865 		{
         ;     866 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     867           cnt_del--;
         ;     868           if(cnt_del==0)
         ;     869 			{
         ;     870           	step=s4;
         ;     871 			}
         ;     872 		}
         ;     873 	else if(step==s4)
         ;     874 		{
         ;     875 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;     876           if(!bMD2)goto step_contr_end;
         ;     877           step=s5;
         ;     878           cnt_del=20;
         ;     879 		}
         ;     880 	else if(step==s5)
         ;     881 		{
         ;     882 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     883           cnt_del--;
         ;     884           if(cnt_del==0)
         ;     885 			{
         ;     886           	step=s6;
         ;     887 			}
         ;     888           }
         ;     889 	else if(step==s6)
         ;     890 		{
         ;     891 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;     892           if(!bMD3)goto step_contr_end;
         ;     893           step=s7;
         ;     894           cnt_del=20;
         ;     895 		}
         ;     896 
         ;     897 	else if(step==s7)
         ;     898 		{
         ;     899 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     900           cnt_del--;
         ;     901           if(cnt_del==0)
         ;     902 			{
         ;     903           	step=s8;
         ;     904           	cnt_del=ee_delay[prog,0]*10U;;
         ;     905 			}
         ;     906           }
         ;     907 	else if(step==s8)
         ;     908 		{
         ;     909 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;     910           cnt_del--;
         ;     911           if(cnt_del==0)
         ;     912 			{
         ;     913           	step=s9;
         ;     914           	cnt_del=20;
         ;     915 			}
         ;     916           }
         ;     917 	else if(step==s9)
         ;     918 		{
         ;     919 		temp|=(1<<PP1);
         ;     920           cnt_del--;
         ;     921           if(cnt_del==0)
         ;     922 			{
         ;     923           	step=sOFF;
         ;     924           	}
         ;     925           }
         ;     926 	}
         ;     927 
         ;     928 else if(prog==p2)  //ско
         ;     929 	{
         ;     930 	if(step==s1)
         ;     931 		{
         ;     932 		temp|=(1<<PP1);
         ;     933           if(!bMD1)goto step_contr_end;
         ;     934 
         ;     935 			if(ee_vacuum_mode==evmOFF)
         ;     936 				{
         ;     937 				goto lbl_0002;
         ;     938 				}
         ;     939 			else step=s2;
         ;     940 
         ;     941           //step=s2;
         ;     942 		}
         ;     943 
         ;     944 	else if(step==s2)
         ;     945 		{
         ;     946 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;     947           if(!bVR)goto step_contr_end;
         ;     948 
         ;     949 lbl_0002:
         ;     950           step=s100;
         ;     951 		cnt_del=40;
         ;     952           }
         ;     953 	else if(step==s100)
         ;     954 		{
         ;     955 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;     956           cnt_del--;
         ;     957           if(cnt_del==0)
         ;     958 			{
         ;     959           	step=s3;
         ;     960           	cnt_del=50;
         ;     961 			}
         ;     962 		}
         ;     963 	else if(step==s3)
         ;     964 		{
         ;     965 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     966           cnt_del--;
         ;     967           if(cnt_del==0)
         ;     968 			{
         ;     969           	step=s4;
         ;     970 			}
         ;     971 		}
         ;     972 	else if(step==s4)
         ;     973 		{
         ;     974 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;     975           if(!bMD2)goto step_contr_end;
         ;     976           step=s5;
         ;     977           cnt_del=20;
         ;     978 		}
         ;     979 	else if(step==s5)
         ;     980 		{
         ;     981 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;     982           cnt_del--;
         ;     983           if(cnt_del==0)
         ;     984 			{
         ;     985           	step=s6;
         ;     986           	cnt_del=ee_delay[prog,0]*10U;
         ;     987 			}
         ;     988           }
         ;     989 	else if(step==s6)
         ;     990 		{
         ;     991 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;     992           cnt_del--;
         ;     993           if(cnt_del==0)
         ;     994 			{
         ;     995           	step=s7;
         ;     996           	cnt_del=20;
         ;     997 			}
         ;     998           }
         ;     999 	else if(step==s7)
         ;    1000 		{
         ;    1001 		temp|=(1<<PP1);
         ;    1002           cnt_del--;
         ;    1003           if(cnt_del==0)
         ;    1004 			{
         ;    1005           	step=sOFF;
         ;    1006           	}
         ;    1007           }
         ;    1008 	}
         ;    1009 
         ;    1010 else if(prog==p3)   //твист
         ;    1011 	{
         ;    1012 	if(step==s1)
         ;    1013 		{
         ;    1014 		temp|=(1<<PP1);
         ;    1015           if(!bMD1)goto step_contr_end;
         ;    1016 
         ;    1017 			if(ee_vacuum_mode==evmOFF)
         ;    1018 				{
         ;    1019 				goto lbl_0003;
         ;    1020 				}
         ;    1021 			else step=s2;
         ;    1022 
         ;    1023           //step=s2;
         ;    1024 		}
         ;    1025 
         ;    1026 	else if(step==s2)
         ;    1027 		{
         ;    1028 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1029           if(!bVR)goto step_contr_end;
         ;    1030 lbl_0003:
         ;    1031           cnt_del=50;
         ;    1032 		step=s3;
         ;    1033 		}
         ;    1034 
         ;    1035 
         ;    1036 	else	if(step==s3)
         ;    1037 		{
         ;    1038 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1039 		cnt_del--;
         ;    1040 		if(cnt_del==0)
         ;    1041 			{
         ;    1042 			cnt_del=ee_delay[prog,0]*10U;
         ;    1043 			step=s4;
         ;    1044 			}
         ;    1045           }
         ;    1046 	else if(step==s4)
         ;    1047 		{
         ;    1048 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1049 		cnt_del--;
         ;    1050  		if(cnt_del==0)
         ;    1051 			{
         ;    1052 			cnt_del=ee_delay[prog,1]*10U;
         ;    1053 			step=s5;
         ;    1054 			}
         ;    1055 		}
         ;    1056 
         ;    1057 	else if(step==s5)
         ;    1058 		{
         ;    1059 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1060 		cnt_del--;
         ;    1061 		if(cnt_del==0)
         ;    1062 			{
         ;    1063 			step=s6;
         ;    1064 			cnt_del=20;
         ;    1065 			}
         ;    1066 		}
         ;    1067 
         ;    1068 	else if(step==s6)
         ;    1069 		{
         ;    1070 		temp|=(1<<PP1);
         ;    1071   		cnt_del--;
         ;    1072 		if(cnt_del==0)
         ;    1073 			{
         ;    1074 			step=sOFF;
         ;    1075 			}
         ;    1076 		}
         ;    1077 
         ;    1078 	}
         ;    1079 
         ;    1080 else if(prog==p4)      //замок
         ;    1081 	{
         ;    1082 	if(step==s1)
         ;    1083 		{
         ;    1084 		temp|=(1<<PP1);
         ;    1085           if(!bMD1)goto step_contr_end;
         ;    1086 
         ;    1087 			if(ee_vacuum_mode==evmOFF)
         ;    1088 				{
         ;    1089 				goto lbl_0004;
         ;    1090 				}
         ;    1091 			else step=s2;
         ;    1092           //step=s2;
         ;    1093 		}
         ;    1094 
         ;    1095 	else if(step==s2)
         ;    1096 		{
         ;    1097 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1098           if(!bVR)goto step_contr_end;
         ;    1099 lbl_0004:
         ;    1100           step=s3;
         ;    1101 		cnt_del=50;
         ;    1102           }
         ;    1103 
         ;    1104 	else if(step==s3)
         ;    1105 		{
         ;    1106 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1107           cnt_del--;
         ;    1108           if(cnt_del==0)
         ;    1109 			{
         ;    1110           	step=s4;
         ;    1111 			cnt_del=ee_delay[prog,0]*10U;
         ;    1112 			}
         ;    1113           }
         ;    1114 
         ;    1115    	else if(step==s4)
         ;    1116 		{
         ;    1117 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1118 		cnt_del--;
         ;    1119 		if(cnt_del==0)
         ;    1120 			{
         ;    1121 			step=s5;
         ;    1122 			cnt_del=30;
         ;    1123 			}
         ;    1124 		}
         ;    1125 
         ;    1126 	else if(step==s5)
         ;    1127 		{
         ;    1128 		temp|=(1<<PP1)|(1<<PP4);
         ;    1129 		cnt_del--;
         ;    1130 		if(cnt_del==0)
         ;    1131 			{
         ;    1132 			step=s6;
         ;    1133 			cnt_del=ee_delay[prog,1]*10U;
         ;    1134 			}
         ;    1135 		}
         ;    1136 
         ;    1137 	else if(step==s6)
         ;    1138 		{
         ;    1139 		temp|=(1<<PP4);
         ;    1140 		cnt_del--;
         ;    1141 		if(cnt_del==0)
         ;    1142 			{
         ;    1143 			step=sOFF;
         ;    1144 			}
         ;    1145 		}
         ;    1146 
         ;    1147 	}
         ;    1148 	
         ;    1149 step_contr_end:
         ;    1150 
         ;    1151 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1152 
         ;    1153 PORTB=~temp;
         ;    1154 //PORTB=0x55;
         ;    1155 }
         ;    1156 #endif
         ;    1157 
         ;    1158 #ifdef I220_WI
         ;    1159 //-----------------------------------------------
         ;    1160 void step_contr(void)
         ;    1161 {
         ;    1162 char temp=0;
         ;    1163 DDRB=0xFF;
         ;    1164 
         ;    1165 if(step==sOFF)goto step_contr_end;
         ;    1166 
         ;    1167 else if(prog==p3)   //твист
         ;    1168 	{
         ;    1169 	if(step==s1)
         ;    1170 		{
         ;    1171 		temp|=(1<<PP1);
         ;    1172           if(!bMD1)goto step_contr_end;
         ;    1173 
         ;    1174 			if(ee_vacuum_mode==evmOFF)
         ;    1175 				{
         ;    1176 				goto lbl_0003;
         ;    1177 				}
         ;    1178 			else step=s2;
         ;    1179 
         ;    1180           //step=s2;
         ;    1181 		}
         ;    1182 
         ;    1183 	else if(step==s2)
         ;    1184 		{
         ;    1185 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1186           if(!bVR)goto step_contr_end;
         ;    1187 lbl_0003:
         ;    1188           cnt_del=50;
         ;    1189 		step=s3;
         ;    1190 		}
         ;    1191 
         ;    1192 
         ;    1193 	else	if(step==s3)
         ;    1194 		{
         ;    1195 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1196 		cnt_del--;
         ;    1197 		if(cnt_del==0)
         ;    1198 			{
         ;    1199 			cnt_del=90;
         ;    1200 			step=s4;
         ;    1201 			}
         ;    1202           }
         ;    1203 	else if(step==s4)
         ;    1204 		{
         ;    1205 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1206 		cnt_del--;
         ;    1207  		if(cnt_del==0)
         ;    1208 			{
         ;    1209 			cnt_del=130;
         ;    1210 			step=s5;
         ;    1211 			}
         ;    1212 		}
         ;    1213 
         ;    1214 	else if(step==s5)
         ;    1215 		{
         ;    1216 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1217 		cnt_del--;
         ;    1218 		if(cnt_del==0)
         ;    1219 			{
         ;    1220 			step=s6;
         ;    1221 			cnt_del=20;
         ;    1222 			}
         ;    1223 		}
         ;    1224 
         ;    1225 	else if(step==s6)
         ;    1226 		{
         ;    1227 		temp|=(1<<PP1);
         ;    1228   		cnt_del--;
         ;    1229 		if(cnt_del==0)
         ;    1230 			{
         ;    1231 			step=sOFF;
         ;    1232 			}
         ;    1233 		}
         ;    1234 
         ;    1235 	}
         ;    1236 
         ;    1237 else if(prog==p4)      //замок
         ;    1238 	{
         ;    1239 	if(step==s1)
         ;    1240 		{
         ;    1241 		temp|=(1<<PP1);
         ;    1242           if(!bMD1)goto step_contr_end;
         ;    1243 
         ;    1244 			if(ee_vacuum_mode==evmOFF)
         ;    1245 				{
         ;    1246 				goto lbl_0004;
         ;    1247 				}
         ;    1248 			else step=s2;
         ;    1249           //step=s2;
         ;    1250 		}
         ;    1251 
         ;    1252 	else if(step==s2)
         ;    1253 		{
         ;    1254 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1255           if(!bVR)goto step_contr_end;
         ;    1256 lbl_0004:
         ;    1257           step=s3;
         ;    1258 		cnt_del=50;
         ;    1259           }
         ;    1260 
         ;    1261 	else if(step==s3)
         ;    1262 		{
         ;    1263 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1264           cnt_del--;
         ;    1265           if(cnt_del==0)
         ;    1266 			{
         ;    1267           	step=s4;
         ;    1268 			cnt_del=120;
         ;    1269 			}
         ;    1270           }
         ;    1271 
         ;    1272    	else if(step==s4)
         ;    1273 		{
         ;    1274 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1275 		cnt_del--;
         ;    1276 		if(cnt_del==0)
         ;    1277 			{
         ;    1278 			step=s5;
         ;    1279 			cnt_del=30;
         ;    1280 			}
         ;    1281 		}
         ;    1282 
         ;    1283 	else if(step==s5)
         ;    1284 		{
         ;    1285 		temp|=(1<<PP1)|(1<<PP4);
         ;    1286 		cnt_del--;
         ;    1287 		if(cnt_del==0)
         ;    1288 			{
         ;    1289 			step=s6;
         ;    1290 			cnt_del=120;
         ;    1291 			}
         ;    1292 		}
         ;    1293 
         ;    1294 	else if(step==s6)
         ;    1295 		{
         ;    1296 		temp|=(1<<PP4);
         ;    1297 		cnt_del--;
         ;    1298 		if(cnt_del==0)
         ;    1299 			{
         ;    1300 			step=sOFF;
         ;    1301 			}
         ;    1302 		}
         ;    1303 
         ;    1304 	}
         ;    1305 	
         ;    1306 step_contr_end:
         ;    1307 
         ;    1308 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1309 
         ;    1310 PORTB=~temp;
         ;    1311 //PORTB=0x55;
         ;    1312 }
         ;    1313 #endif 
         ;    1314 
         ;    1315 #ifdef I380_WI
         ;    1316 //-----------------------------------------------
         ;    1317 void step_contr(void)
         ;    1318 {
         ;    1319 char temp=0;
         ;    1320 DDRB=0xFF;
         ;    1321 
         ;    1322 if(step==sOFF)goto step_contr_end;
         ;    1323 
         ;    1324 else if(prog==p1)
         ;    1325 	{
         ;    1326 	if(step==s1)    //жесть
         ;    1327 		{
         ;    1328 		temp|=(1<<PP1);
         ;    1329           if(!bMD1)goto step_contr_end;
         ;    1330 
         ;    1331 			if(ee_vacuum_mode==evmOFF)
         ;    1332 				{
         ;    1333 				goto lbl_0001;
         ;    1334 				}
         ;    1335 			else step=s2;
         ;    1336 		}
         ;    1337 
         ;    1338 	else if(step==s2)
         ;    1339 		{
         ;    1340 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1341           if(!bVR)goto step_contr_end;
         ;    1342 lbl_0001:
         ;    1343 
         ;    1344           step=s100;
         ;    1345 		cnt_del=40;
         ;    1346           }
         ;    1347 	else if(step==s100)
         ;    1348 		{
         ;    1349 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1350           cnt_del--;
         ;    1351           if(cnt_del==0)
         ;    1352 			{
         ;    1353           	step=s3;
         ;    1354           	cnt_del=50;
         ;    1355 			}
         ;    1356 		}
         ;    1357 
         ;    1358 	else if(step==s3)
         ;    1359 		{
         ;    1360 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1361           cnt_del--;
         ;    1362           if(cnt_del==0)
         ;    1363 			{
         ;    1364           	step=s4;
         ;    1365 			}
         ;    1366 		}
         ;    1367 	else if(step==s4)
         ;    1368 		{
         ;    1369 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1370           if(!bMD2)goto step_contr_end;
         ;    1371           step=s54;
         ;    1372           cnt_del=20;
         ;    1373 		}
         ;    1374 	else if(step==s54)
         ;    1375 		{
         ;    1376 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1377           cnt_del--;
         ;    1378           if(cnt_del==0)
         ;    1379 			{
         ;    1380           	step=s5;
         ;    1381           	cnt_del=20;
         ;    1382 			}
         ;    1383           }
         ;    1384 
         ;    1385 	else if(step==s5)
         ;    1386 		{
         ;    1387 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1388           cnt_del--;
         ;    1389           if(cnt_del==0)
         ;    1390 			{
         ;    1391           	step=s6;
         ;    1392 			}
         ;    1393           }
         ;    1394 	else if(step==s6)
         ;    1395 		{
         ;    1396 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1397           if(!bMD3)goto step_contr_end;
         ;    1398           step=s55;
         ;    1399           cnt_del=40;
         ;    1400 		}
         ;    1401 	else if(step==s55)
         ;    1402 		{
         ;    1403 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV)|(1<<PP7);
         ;    1404           cnt_del--;
         ;    1405           if(cnt_del==0)
         ;    1406 			{
         ;    1407           	step=s7;
         ;    1408           	cnt_del=20;
         ;    1409 			}
         ;    1410           }
         ;    1411 	else if(step==s7)
         ;    1412 		{
         ;    1413 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1414           cnt_del--;
         ;    1415           if(cnt_del==0)
         ;    1416 			{
         ;    1417           	step=s8;
         ;    1418           	cnt_del=130;
         ;    1419 			}
         ;    1420           }
         ;    1421 	else if(step==s8)
         ;    1422 		{
         ;    1423 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1424           cnt_del--;
         ;    1425           if(cnt_del==0)
         ;    1426 			{
         ;    1427           	step=s9;
         ;    1428           	cnt_del=20;
         ;    1429 			}
         ;    1430           }
         ;    1431 	else if(step==s9)
         ;    1432 		{
         ;    1433 		temp|=(1<<PP1);
         ;    1434           cnt_del--;
         ;    1435           if(cnt_del==0)
         ;    1436 			{
         ;    1437           	step=sOFF;
         ;    1438           	}
         ;    1439           }
         ;    1440 	}
         ;    1441 
         ;    1442 else if(prog==p2)  //ско
         ;    1443 	{
         ;    1444 	if(step==s1)
         ;    1445 		{
         ;    1446 		temp|=(1<<PP1);
         ;    1447           if(!bMD1)goto step_contr_end;
         ;    1448 
         ;    1449 			if(ee_vacuum_mode==evmOFF)
         ;    1450 				{
         ;    1451 				goto lbl_0002;
         ;    1452 				}
         ;    1453 			else step=s2;
         ;    1454 
         ;    1455           //step=s2;
         ;    1456 		}
         ;    1457 
         ;    1458 	else if(step==s2)
         ;    1459 		{
         ;    1460 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1461           if(!bVR)goto step_contr_end;
         ;    1462 
         ;    1463 lbl_0002:
         ;    1464           step=s100;
         ;    1465 		cnt_del=40;
         ;    1466           }
         ;    1467 	else if(step==s100)
         ;    1468 		{
         ;    1469 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1470           cnt_del--;
         ;    1471           if(cnt_del==0)
         ;    1472 			{
         ;    1473           	step=s3;
         ;    1474           	cnt_del=50;
         ;    1475 			}
         ;    1476 		}
         ;    1477 	else if(step==s3)
         ;    1478 		{
         ;    1479 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1480           cnt_del--;
         ;    1481           if(cnt_del==0)
         ;    1482 			{
         ;    1483           	step=s4;
         ;    1484 			}
         ;    1485 		}
         ;    1486 	else if(step==s4)
         ;    1487 		{
         ;    1488 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<DV);
         ;    1489           if(!bMD2)goto step_contr_end;
         ;    1490           step=s5;
         ;    1491           cnt_del=20;
         ;    1492 		}
         ;    1493 	else if(step==s5)
         ;    1494 		{
         ;    1495 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<DV);
         ;    1496           cnt_del--;
         ;    1497           if(cnt_del==0)
         ;    1498 			{
         ;    1499           	step=s6;
         ;    1500           	cnt_del=130;
         ;    1501 			}
         ;    1502           }
         ;    1503 	else if(step==s6)
         ;    1504 		{
         ;    1505 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1506           cnt_del--;
         ;    1507           if(cnt_del==0)
         ;    1508 			{
         ;    1509           	step=s7;
         ;    1510           	cnt_del=20;
         ;    1511 			}
         ;    1512           }
         ;    1513 	else if(step==s7)
         ;    1514 		{
         ;    1515 		temp|=(1<<PP1);
         ;    1516           cnt_del--;
         ;    1517           if(cnt_del==0)
         ;    1518 			{
         ;    1519           	step=sOFF;
         ;    1520           	}
         ;    1521           }
         ;    1522 	}
         ;    1523 
         ;    1524 else if(prog==p3)   //твист
         ;    1525 	{
         ;    1526 	if(step==s1)
         ;    1527 		{
         ;    1528 		temp|=(1<<PP1);
         ;    1529           if(!bMD1)goto step_contr_end;
         ;    1530 
         ;    1531 			if(ee_vacuum_mode==evmOFF)
         ;    1532 				{
         ;    1533 				goto lbl_0003;
         ;    1534 				}
         ;    1535 			else step=s2;
         ;    1536 
         ;    1537           //step=s2;
         ;    1538 		}
         ;    1539 
         ;    1540 	else if(step==s2)
         ;    1541 		{
         ;    1542 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1543           if(!bVR)goto step_contr_end;
         ;    1544 lbl_0003:
         ;    1545           cnt_del=50;
         ;    1546 		step=s3;
         ;    1547 		}
         ;    1548 
         ;    1549 
         ;    1550 	else	if(step==s3)
         ;    1551 		{
         ;    1552 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1553 		cnt_del--;
         ;    1554 		if(cnt_del==0)
         ;    1555 			{
         ;    1556 			cnt_del=90;
         ;    1557 			step=s4;
         ;    1558 			}
         ;    1559           }
         ;    1560 	else if(step==s4)
         ;    1561 		{
         ;    1562 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1563 		cnt_del--;
         ;    1564  		if(cnt_del==0)
         ;    1565 			{
         ;    1566 			cnt_del=130;
         ;    1567 			step=s5;
         ;    1568 			}
         ;    1569 		}
         ;    1570 
         ;    1571 	else if(step==s5)
         ;    1572 		{
         ;    1573 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1574 		cnt_del--;
         ;    1575 		if(cnt_del==0)
         ;    1576 			{
         ;    1577 			step=s6;
         ;    1578 			cnt_del=20;
         ;    1579 			}
         ;    1580 		}
         ;    1581 
         ;    1582 	else if(step==s6)
         ;    1583 		{
         ;    1584 		temp|=(1<<PP1);
         ;    1585   		cnt_del--;
         ;    1586 		if(cnt_del==0)
         ;    1587 			{
         ;    1588 			step=sOFF;
         ;    1589 			}
         ;    1590 		}
         ;    1591 
         ;    1592 	}
         ;    1593 
         ;    1594 else if(prog==p4)      //замок
         ;    1595 	{
         ;    1596 	if(step==s1)
         ;    1597 		{
         ;    1598 		temp|=(1<<PP1);
         ;    1599           if(!bMD1)goto step_contr_end;
         ;    1600 
         ;    1601 			if(ee_vacuum_mode==evmOFF)
         ;    1602 				{
         ;    1603 				goto lbl_0004;
         ;    1604 				}
         ;    1605 			else step=s2;
         ;    1606           //step=s2;
         ;    1607 		}
         ;    1608 
         ;    1609 	else if(step==s2)
         ;    1610 		{
         ;    1611 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1612           if(!bVR)goto step_contr_end;
         ;    1613 lbl_0004:
         ;    1614           step=s3;
         ;    1615 		cnt_del=50;
         ;    1616           }
         ;    1617 
         ;    1618 	else if(step==s3)
         ;    1619 		{
         ;    1620 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1621           cnt_del--;
         ;    1622           if(cnt_del==0)
         ;    1623 			{
         ;    1624           	step=s4;
         ;    1625 			cnt_del=120U;
         ;    1626 			}
         ;    1627           }
         ;    1628 
         ;    1629    	else if(step==s4)
         ;    1630 		{
         ;    1631 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1632 		cnt_del--;
         ;    1633 		if(cnt_del==0)
         ;    1634 			{
         ;    1635 			step=s5;
         ;    1636 			cnt_del=30;
         ;    1637 			}
         ;    1638 		}
         ;    1639 
         ;    1640 	else if(step==s5)
         ;    1641 		{
         ;    1642 		temp|=(1<<PP1)|(1<<PP4);
         ;    1643 		cnt_del--;
         ;    1644 		if(cnt_del==0)
         ;    1645 			{
         ;    1646 			step=s6;
         ;    1647 			cnt_del=120U;
         ;    1648 			}
         ;    1649 		}
         ;    1650 
         ;    1651 	else if(step==s6)
         ;    1652 		{
         ;    1653 		temp|=(1<<PP4);
         ;    1654 		cnt_del--;
         ;    1655 		if(cnt_del==0)
         ;    1656 			{
         ;    1657 			step=sOFF;
         ;    1658 			}
         ;    1659 		}
         ;    1660 
         ;    1661 	}
         ;    1662 	
         ;    1663 step_contr_end:
         ;    1664 
         ;    1665 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1666 
         ;    1667 PORTB=~temp;
         ;    1668 //PORTB=0x55;
         ;    1669 }
         ;    1670 #endif
         ;    1671 
         ;    1672 #ifdef I220
         ;    1673 //-----------------------------------------------
         ;    1674 void step_contr(void)
         ;    1675 {
         ;    1676 char temp=0;
         ;    1677 DDRB=0xFF;
         ;    1678 
         ;    1679 if(step==sOFF)goto step_contr_end;
         ;    1680 
         ;    1681 else if(prog==p3)   //твист
         ;    1682 	{
         ;    1683 	if(step==s1)
         ;    1684 		{
         ;    1685 		temp|=(1<<PP1);
         ;    1686           if(!bMD1)goto step_contr_end;
         ;    1687 
         ;    1688 			if(ee_vacuum_mode==evmOFF)
         ;    1689 				{
         ;    1690 				goto lbl_0003;
         ;    1691 				}
         ;    1692 			else step=s2;
         ;    1693 
         ;    1694           //step=s2;
         ;    1695 		}
         ;    1696 
         ;    1697 	else if(step==s2)
         ;    1698 		{
         ;    1699 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1700           if(!bVR)goto step_contr_end;
         ;    1701 lbl_0003:
         ;    1702           cnt_del=50;
         ;    1703 		step=s3;
         ;    1704 		}
         ;    1705 
         ;    1706 
         ;    1707 	else	if(step==s3)
         ;    1708 		{
         ;    1709 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1710 		cnt_del--;
         ;    1711 		if(cnt_del==0)
         ;    1712 			{
         ;    1713 			cnt_del=ee_delay[prog,0]*10U;
         ;    1714 			step=s4;
         ;    1715 			}
         ;    1716           }
         ;    1717 	else if(step==s4)
         ;    1718 		{
         ;    1719 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4)|(1<<PP5)|(1<<PP7);
         ;    1720 		cnt_del--;
         ;    1721  		if(cnt_del==0)
         ;    1722 			{
         ;    1723 			cnt_del=ee_delay[prog,1]*10U;
         ;    1724 			step=s5;
         ;    1725 			}
         ;    1726 		}
         ;    1727 
         ;    1728 	else if(step==s5)
         ;    1729 		{
         ;    1730 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP5)|(1<<PP7);
         ;    1731 		cnt_del--;
         ;    1732 		if(cnt_del==0)
         ;    1733 			{
         ;    1734 			step=s6;
         ;    1735 			cnt_del=20;
         ;    1736 			}
         ;    1737 		}
         ;    1738 
         ;    1739 	else if(step==s6)
         ;    1740 		{
         ;    1741 		temp|=(1<<PP1);
         ;    1742   		cnt_del--;
         ;    1743 		if(cnt_del==0)
         ;    1744 			{
         ;    1745 			step=sOFF;
         ;    1746 			}
         ;    1747 		}
         ;    1748 
         ;    1749 	}
         ;    1750 
         ;    1751 else if(prog==p4)      //замок
         ;    1752 	{
         ;    1753 	if(step==s1)
         ;    1754 		{
         ;    1755 		temp|=(1<<PP1);
         ;    1756           if(!bMD1)goto step_contr_end;
         ;    1757 
         ;    1758 			if(ee_vacuum_mode==evmOFF)
         ;    1759 				{
         ;    1760 				goto lbl_0004;
         ;    1761 				}
         ;    1762 			else step=s2;
         ;    1763           //step=s2;
         ;    1764 		}
         ;    1765 
         ;    1766 	else if(step==s2)
         ;    1767 		{
         ;    1768 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3);
         ;    1769           if(!bVR)goto step_contr_end;
         ;    1770 lbl_0004:
         ;    1771           step=s3;
         ;    1772 		cnt_del=50;
         ;    1773           }
         ;    1774 
         ;    1775 	else if(step==s3)
         ;    1776 		{
         ;    1777 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP3)|(1<<PP4);
         ;    1778           cnt_del--;
         ;    1779           if(cnt_del==0)
         ;    1780 			{
         ;    1781           	step=s4;
         ;    1782 			cnt_del=ee_delay[prog,0]*10U;
         ;    1783 			}
         ;    1784           }
         ;    1785 
         ;    1786    	else if(step==s4)
         ;    1787 		{
         ;    1788 		temp|=(1<<PP1)|(1<<PP2)|(1<<PP4);
         ;    1789 		cnt_del--;
         ;    1790 		if(cnt_del==0)
         ;    1791 			{
         ;    1792 			step=s5;
         ;    1793 			cnt_del=30;
         ;    1794 			}
         ;    1795 		}
         ;    1796 
         ;    1797 	else if(step==s5)
         ;    1798 		{
         ;    1799 		temp|=(1<<PP1)|(1<<PP4);
         ;    1800 		cnt_del--;
         ;    1801 		if(cnt_del==0)
         ;    1802 			{
         ;    1803 			step=s6;
         ;    1804 			cnt_del=ee_delay[prog,1]*10U;
         ;    1805 			}
         ;    1806 		}
         ;    1807 
         ;    1808 	else if(step==s6)
         ;    1809 		{
         ;    1810 		temp|=(1<<PP4);
         ;    1811 		cnt_del--;
         ;    1812 		if(cnt_del==0)
         ;    1813 			{
         ;    1814 			step=sOFF;
         ;    1815 			}
         ;    1816 		}
         ;    1817 
         ;    1818 	}
         ;    1819 	
         ;    1820 step_contr_end:
         ;    1821 
         ;    1822 if(ee_vacuum_mode==evmOFF) temp&=~(1<<PP3);
         ;    1823 
         ;    1824 PORTB=~temp;
         ;    1825 //PORTB=0x55;
         ;    1826 }
         ;    1827 #endif 
         ;    1828 
         ;    1829 #ifdef TVIST_SKO
         ;    1830 //-----------------------------------------------
         ;    1831 void step_contr(void)
         ;    1832 {
         ;    1833 char temp=0;
         ;    1834 DDRB=0xFF;
         ;    1835 
         ;    1836 if(step==sOFF)
         ;    1837 	{
         ;    1838 	temp=0;
         ;    1839 	}
         ;    1840 
         ;    1841 if(prog==p2) //СКО
         ;    1842 	{
         ;    1843 	if(step==s1)
         ;    1844 		{
         ;    1845 		temp|=(1<<PP1);
         ;    1846 
         ;    1847 		cnt_del--;
         ;    1848 		if(cnt_del==0)
         ;    1849 			{
         ;    1850 			step=s2;
         ;    1851 			cnt_del=30;
         ;    1852 			}
         ;    1853 		}
         ;    1854 
         ;    1855 	else if(step==s2)
         ;    1856 		{
         ;    1857 		temp|=(1<<PP1)|(1<<DV);
         ;    1858 
         ;    1859 		cnt_del--;
         ;    1860 		if(cnt_del==0)
         ;    1861 			{
         ;    1862 			step=s3;
         ;    1863 			}
         ;    1864 		}
         ;    1865 
         ;    1866 
         ;    1867 	else if(step==s3)
         ;    1868 		{
         ;    1869 		temp|=(1<<PP1)|(1<<DV)|(1<<PP2);
         ;    1870 
         ;    1871                	if(bMD1)//goto step_contr_end;
         ;    1872                		{  
         ;    1873                		cnt_del=100;
         ;    1874 	       		step=s4;
         ;    1875 	       		}
         ;    1876 	       	}
         ;    1877 
         ;    1878 	else if(step==s4)
         ;    1879 		{
         ;    1880 		temp|=(1<<PP1);
         ;    1881 		cnt_del--;
         ;    1882 		if(cnt_del==0)
         ;    1883 			{
         ;    1884 			step=sOFF;
         ;    1885 			}
         ;    1886 		}
         ;    1887 
         ;    1888 	}
         ;    1889 
         ;    1890 if(prog==p3)
         ;    1891 	{
         ;    1892 	if(step==s1)
         ;    1893 		{
         ;    1894 		temp|=(1<<PP1);
         ;    1895 
         ;    1896 		cnt_del--;
         ;    1897 		if(cnt_del==0)
         ;    1898 			{
         ;    1899 			step=s2;
         ;    1900 			cnt_del=100;
         ;    1901 			}
         ;    1902 		}
         ;    1903 
         ;    1904 	else if(step==s2)
         ;    1905 		{
         ;    1906 		temp|=(1<<PP1)|(1<<PP2);
         ;    1907 
         ;    1908 		cnt_del--;
         ;    1909 		if(cnt_del==0)
         ;    1910 			{
         ;    1911 			step=s3;
         ;    1912 			cnt_del=50;
         ;    1913 			}
         ;    1914 		}
         ;    1915 
         ;    1916 
         ;    1917 	else if(step==s3)
         ;    1918 		{
         ;    1919 		temp|=(1<<PP2);
         ;    1920 	
         ;    1921 		cnt_del--;
         ;    1922 		if(cnt_del==0)
         ;    1923 			{
         ;    1924 			step=sOFF;
         ;    1925 			}
         ;    1926                	}
         ;    1927 	}
         ;    1928 step_contr_end:
         ;    1929 
         ;    1930 PORTB=~temp;
         ;    1931 }
         ;    1932 #endif
         ;    1933 //-----------------------------------------------
         ;    1934 void bin2bcd_int(unsigned int in)
         ;    1935 {
          _bin2bcd_int:
         ;    1936 char i;
         ;    1937 for(i=3;i>0;i--)
0001de 930a      	ST   -Y,R16
         ;	in -> Y+1
         ;	i -> R16
0001df e003      	LDI  R16,LOW(3)
          _0x5A:
0001e0 e0e0      	LDI  R30,LOW(0)
0001e1 17e0      	CP   R30,R16
0001e2 f4c8      	BRSH _0x5B
         ;    1938 	{
         ;    1939 	dig[i]=in%10;
0001e3 2fe0      	MOV  R30,R16
0001e4 e0f0      	LDI  R31,0
0001e5 59eb      	SUBI R30,LOW(-_dig)
0001e6 4ffe      	SBCI R31,HIGH(-_dig)
0001e7 93ff      	PUSH R31
0001e8 93ef      	PUSH R30
0001e9 81a9      	LDD  R26,Y+1
0001ea 81ba      	LDD  R27,Y+1+1
0001eb e0ea      	LDI  R30,LOW(10)
0001ec e0f0      	LDI  R31,HIGH(10)
0001ed 940e 058b 	CALL __MODW21U
0001ef 91af      	POP  R26
0001f0 91bf      	POP  R27
0001f1 93ec      	ST   X,R30
         ;    1940 	in/=10;
0001f2 81a9      	LDD  R26,Y+1
0001f3 81ba      	LDD  R27,Y+1+1
0001f4 e0ea      	LDI  R30,LOW(10)
0001f5 e0f0      	LDI  R31,HIGH(10)
0001f6 940e 0578 	CALL __DIVW21U
0001f8 83e9      	STD  Y+1,R30
0001f9 83fa      	STD  Y+1+1,R31
         ;    1941 	}   
0001fa 5001      	SUBI R16,1
0001fb cfe4      	RJMP _0x5A
          _0x5B:
         ;    1942 }
0001fc 8108      	LDD  R16,Y+0
0001fd c06a      	RJMP _0xC9
         ;    1943 
         ;    1944 //-----------------------------------------------
         ;    1945 void bcd2ind(char s)
         ;    1946 {
          _bcd2ind:
         ;    1947 char i;
         ;    1948 bZ=1;
0001fe 930a      	ST   -Y,R16
         ;	s -> Y+1
         ;	i -> R16
0001ff 9468      	SET
000200 f823      	BLD  R2,3
         ;    1949 for (i=0;i<5;i++)
000201 e000      	LDI  R16,LOW(0)
          _0x5D:
000202 3005      	CPI  R16,5
000203 f010      	BRLO PC+3
000204 940c 025b 	JMP _0x5E
         ;    1950 	{
         ;    1951 	if(bZ&&(!dig[i-1])&&(i<4))
000206 fe23      	SBRS R2,3
000207 c009      	RJMP _0x60
000208 940e 0529 	CALL SUBOPT_0x3
00020a 59eb      	SUBI R30,LOW(-_dig)
00020b 4ffe      	SBCI R31,HIGH(-_dig)
00020c 81e0      	LD   R30,Z
00020d 30e0      	CPI  R30,0
00020e f411      	BRNE _0x60
00020f 3004      	CPI  R16,4
000210 f008      	BRLO _0x61
          _0x60:
000211 c01f      	RJMP _0x5F
          _0x61:
         ;    1952 		{
         ;    1953 		if((4-i)>s)
000212 e0e4      	LDI  R30,LOW(4)
000213 1be0      	SUB  R30,R16
000214 2fae      	MOV  R26,R30
000215 81e9      	LDD  R30,Y+1
000216 17ea      	CP   R30,R26
000217 f460      	BRSH _0x62
         ;    1954 			{
         ;    1955 			ind_out[i-1]=DIGISYM[10];
000218 940e 0529 	CALL SUBOPT_0x3
00021a 5ae0      	SUBI R30,LOW(-_ind_out)
00021b 4ffe      	SBCI R31,HIGH(-_ind_out)
00021c 93ff      	PUSH R31
00021d 93ef      	PUSH R30
00021e   +  	__POINTW1FN _DIGISYM,10
000220 91e4      	LPM  R30,Z
000221 91af      	POP  R26
000222 91bf      	POP  R27
000223 c00b      	RJMP _0xCA
         ;    1956 			}
         ;    1957 		else ind_out[i-1]=DIGISYM[0];	
          _0x62:
000224 940e 0529 	CALL SUBOPT_0x3
000226 5ae0      	SUBI R30,LOW(-_ind_out)
000227 4ffe      	SBCI R31,HIGH(-_ind_out)
000228 93ff      	PUSH R31
000229 93ef      	PUSH R30
00022a e5ea      	LDI  R30,LOW(_DIGISYM*2)
00022b e0f0      	LDI  R31,HIGH(_DIGISYM*2)
00022c 91e4      	LPM  R30,Z
00022d 91af      	POP  R26
00022e 91bf      	POP  R27
          _0xCA:
00022f 93ec      	ST   X,R30
         ;    1958 		}
         ;    1959 	else
000230 c018      	RJMP _0x64
          _0x5F:
         ;    1960 		{
         ;    1961 		ind_out[i-1]=DIGISYM[dig[i-1]];
000231 940e 0529 	CALL SUBOPT_0x3
000233 5ae0      	SUBI R30,LOW(-_ind_out)
000234 4ffe      	SBCI R31,HIGH(-_ind_out)
000235 93ff      	PUSH R31
000236 93ef      	PUSH R30
000237 e5ea      	LDI  R30,LOW(_DIGISYM*2)
000238 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
000239 93ff      	PUSH R31
00023a 93ef      	PUSH R30
00023b 940e 0529 	CALL SUBOPT_0x3
00023d 59eb      	SUBI R30,LOW(-_dig)
00023e 4ffe      	SBCI R31,HIGH(-_dig)
00023f 81e0      	LD   R30,Z
000240 91af      	POP  R26
000241 91bf      	POP  R27
000242 940e 052d 	CALL SUBOPT_0x4
000244 91af      	POP  R26
000245 91bf      	POP  R27
000246 93ec      	ST   X,R30
         ;    1962 		bZ=0;
000247 94e8      	CLT
000248 f823      	BLD  R2,3
         ;    1963 		}                   
          _0x64:
         ;    1964 
         ;    1965 	if(s)
000249 81e9      	LDD  R30,Y+1
00024a 30e0      	CPI  R30,0
00024b f069      	BREQ _0x65
         ;    1966 		{
         ;    1967 		ind_out[3-s]&=0b01111111;
00024c 81a9      	LDD  R26,Y+1
00024d e0e3      	LDI  R30,LOW(3)
00024e 1bea      	SUB  R30,R26
00024f e0f0      	LDI  R31,0
000250 5ae0      	SUBI R30,LOW(-_ind_out)
000251 4ffe      	SBCI R31,HIGH(-_ind_out)
000252 93ff      	PUSH R31
000253 93ef      	PUSH R30
000254 81e0      	LD   R30,Z
000255 77ef      	ANDI R30,0x7F
000256 91af      	POP  R26
000257 91bf      	POP  R27
000258 93ec      	ST   X,R30
         ;    1968 		}	
         ;    1969  
         ;    1970 	}
          _0x65:
000259 5f0f      	SUBI R16,-1
00025a cfa7      	RJMP _0x5D
          _0x5E:
         ;    1971 }            
00025b 8108      	LDD  R16,Y+0
00025c 9622      	ADIW R28,2
00025d 9508      	RET
         ;    1972 //-----------------------------------------------
         ;    1973 void int2ind(unsigned int in,char s)
         ;    1974 {
          _int2ind:
         ;    1975 bin2bcd_int(in);
00025e 81e9      	LDD  R30,Y+1
00025f 81fa      	LDD  R31,Y+1+1
000260 93fa      	ST   -Y,R31
000261 93ea      	ST   -Y,R30
000262 940e 01de 	CALL _bin2bcd_int
         ;    1976 bcd2ind(s);
000264 81e8      	LD   R30,Y
000265 93ea      	ST   -Y,R30
000266 940e 01fe 	CALL _bcd2ind
         ;    1977 
         ;    1978 } 
          _0xC9:
000268 9623      	ADIW R28,3
000269 9508      	RET
         ;    1979 
         ;    1980 //-----------------------------------------------
         ;    1981 void ind_hndl(void)
         ;    1982 {
          _ind_hndl:
         ;    1983 int2ind(in_word,1);
00026a 2dee      	MOV  R30,R14
00026b e0f0      	LDI  R31,0
00026c 93fa      	ST   -Y,R31
00026d 93ea      	ST   -Y,R30
00026e e0e1      	LDI  R30,LOW(1)
00026f 93ea      	ST   -Y,R30
000270 940e 025e 	CALL _int2ind
         ;    1984 //int2ind(ee_delay[prog,sub_ind],1);  
         ;    1985 //ind_out[0]=0xff;//DIGISYM[0];
         ;    1986 //ind_out[1]=0xff;//DIGISYM[1];
         ;    1987 //ind_out[2]=DIGISYM[2];//0xff;
         ;    1988 //ind_out[0]=DIGISYM[7]; 
         ;    1989 
         ;    1990 ind_out[0]=DIGISYM[sub_ind+1];
000272 e5ea      	LDI  R30,LOW(_DIGISYM*2)
000273 e0f0      	LDI  R31,HIGH(_DIGISYM*2)
000274 93ff      	PUSH R31
000275 93ef      	PUSH R30
000276 2ded      	MOV  R30,R13
000277 5fef      	SUBI R30,-LOW(1)
000278 91af      	POP  R26
000279 91bf      	POP  R27
00027a 940e 052d 	CALL SUBOPT_0x4
00027c 93e0 0160 	STS  _ind_out,R30
         ;    1991 }
00027e 9508      	RET
         ;    1992 
         ;    1993 //-----------------------------------------------
         ;    1994 void led_hndl(void)
         ;    1995 {
          _led_hndl:
         ;    1996 ind_out[4]=DIGISYM[10]; 
00027f   +  	__POINTW1FN _DIGISYM,10
000281 91e4      	LPM  R30,Z
000282   +  	__PUTB1MN _ind_out,4
         ;    1997 
         ;    1998 ind_out[4]&=~(1<<LED_POW_ON); 
000284   +  	__POINTW1MN _ind_out,4
000286 93ff      	PUSH R31
000287 93ef      	PUSH R30
000288 81e0      	LD   R30,Z
000289 7def      	ANDI R30,0xDF
00028a 91af      	POP  R26
00028b 91bf      	POP  R27
00028c 93ec      	ST   X,R30
         ;    1999 
         ;    2000 if(step!=sOFF)
00028d 20bb      	TST  R11
00028e f049      	BREQ _0x66
         ;    2001 	{
         ;    2002 	ind_out[4]&=~(1<<LED_WRK);
00028f   +  	__POINTW1MN _ind_out,4
000291 93ff      	PUSH R31
000292 93ef      	PUSH R30
000293 81e0      	LD   R30,Z
000294 7bef      	ANDI R30,0xBF
000295 91af      	POP  R26
000296 91bf      	POP  R27
000297 c008      	RJMP _0xCB
         ;    2003 	}
         ;    2004 else ind_out[4]|=(1<<LED_WRK);
          _0x66:
000298   +  	__POINTW1MN _ind_out,4
00029a 93ff      	PUSH R31
00029b 93ef      	PUSH R30
00029c 81e0      	LD   R30,Z
00029d 64e0      	ORI  R30,0x40
00029e 91af      	POP  R26
00029f 91bf      	POP  R27
          _0xCB:
0002a0 93ec      	ST   X,R30
         ;    2005 
         ;    2006 
         ;    2007 if(step==sOFF)
0002a1 20bb      	TST  R11
0002a2 f4a9      	BRNE _0x68
         ;    2008 	{
         ;    2009  	if(bERR)
0002a3 fe31      	SBRS R3,1
0002a4 c009      	RJMP _0x69
         ;    2010 		{
         ;    2011 		ind_out[4]&=~(1<<LED_ERROR);
0002a5   +  	__POINTW1MN _ind_out,4
0002a7 93ff      	PUSH R31
0002a8 93ef      	PUSH R30
0002a9 81e0      	LD   R30,Z
0002aa 7fee      	ANDI R30,0xFE
0002ab 91af      	POP  R26
0002ac 91bf      	POP  R27
0002ad c008      	RJMP _0xCC
         ;    2012 		}
         ;    2013 	else
          _0x69:
         ;    2014 		{
         ;    2015 		ind_out[4]|=(1<<LED_ERROR);
0002ae   +  	__POINTW1MN _ind_out,4
0002b0 93ff      	PUSH R31
0002b1 93ef      	PUSH R30
0002b2 81e0      	LD   R30,Z
0002b3 60e1      	ORI  R30,1
0002b4 91af      	POP  R26
0002b5 91bf      	POP  R27
          _0xCC:
0002b6 93ec      	ST   X,R30
         ;    2016 		}
         ;    2017      }
         ;    2018 else ind_out[4]|=(1<<LED_ERROR);
0002b7 c009      	RJMP _0x6B
          _0x68:
0002b8   +  	__POINTW1MN _ind_out,4
0002ba 93ff      	PUSH R31
0002bb 93ef      	PUSH R30
0002bc 81e0      	LD   R30,Z
0002bd 60e1      	ORI  R30,1
0002be 91af      	POP  R26
0002bf 91bf      	POP  R27
0002c0 93ec      	ST   X,R30
          _0x6B:
         ;    2019 
         ;    2020 /* 	if(bMD1)
         ;    2021 		{
         ;    2022 		ind_out[4]&=~(1<<LED_ERROR);
         ;    2023 		}
         ;    2024 	else
         ;    2025 		{
         ;    2026 		ind_out[4]|=(1<<LED_ERROR);
         ;    2027 		} */
         ;    2028 
         ;    2029 //if(bERR)ind_out[4]&=~(1<<LED_ERROR);
         ;    2030 if(ee_vacuum_mode==evmON)ind_out[4]&=~(1<<LED_VACUUM);
0002c1 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0002c2 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0002c3 940e 0592 	CALL __EEPROMRDB
0002c5 35e5      	CPI  R30,LOW(0x55)
0002c6 f449      	BRNE _0x6C
0002c7   +  	__POINTW1MN _ind_out,4
0002c9 93ff      	PUSH R31
0002ca 93ef      	PUSH R30
0002cb 81e0      	LD   R30,Z
0002cc 77ef      	ANDI R30,0x7F
0002cd 91af      	POP  R26
0002ce 91bf      	POP  R27
0002cf c008      	RJMP _0xCD
         ;    2031 else ind_out[4]|=(1<<LED_VACUUM);
          _0x6C:
0002d0   +  	__POINTW1MN _ind_out,4
0002d2 93ff      	PUSH R31
0002d3 93ef      	PUSH R30
0002d4 81e0      	LD   R30,Z
0002d5 68e0      	ORI  R30,0x80
0002d6 91af      	POP  R26
0002d7 91bf      	POP  R27
          _0xCD:
0002d8 93ec      	ST   X,R30
         ;    2032 
         ;    2033 if(prog==p1) ind_out[4]&=~(1<<LED_PROG1);
0002d9 e0e1      	LDI  R30,LOW(1)
0002da 15ea      	CP   R30,R10
0002db f451      	BRNE _0x6E
0002dc   +  	__POINTW1MN _ind_out,4
0002de 93ff      	PUSH R31
0002df 93ef      	PUSH R30
0002e0 81e0      	LD   R30,Z
0002e1 7eef      	ANDI R30,0xEF
0002e2 91af      	POP  R26
0002e3 91bf      	POP  R27
0002e4 93ec      	ST   X,R30
         ;    2034 else if(prog==p2) ind_out[4]&=~(1<<LED_PROG2);
0002e5 c026      	RJMP _0x6F
          _0x6E:
0002e6 e0e2      	LDI  R30,LOW(2)
0002e7 15ea      	CP   R30,R10
0002e8 f451      	BRNE _0x70
0002e9   +  	__POINTW1MN _ind_out,4
0002eb 93ff      	PUSH R31
0002ec 93ef      	PUSH R30
0002ed 81e0      	LD   R30,Z
0002ee 7feb      	ANDI R30,0xFB
0002ef 91af      	POP  R26
0002f0 91bf      	POP  R27
0002f1 93ec      	ST   X,R30
         ;    2035 else if(prog==p3) ind_out[4]&=~(1<<LED_PROG3);
0002f2 c019      	RJMP _0x71
          _0x70:
0002f3 e0e3      	LDI  R30,LOW(3)
0002f4 15ea      	CP   R30,R10
0002f5 f451      	BRNE _0x72
0002f6   +  	__POINTW1MN _ind_out,4
0002f8 93ff      	PUSH R31
0002f9 93ef      	PUSH R30
0002fa 81e0      	LD   R30,Z
0002fb 7fe7      	ANDI R30,0XF7
0002fc 91af      	POP  R26
0002fd 91bf      	POP  R27
0002fe 93ec      	ST   X,R30
         ;    2036 else if(prog==p4) ind_out[4]&=~(1<<LED_PROG4);
0002ff c00c      	RJMP _0x73
          _0x72:
000300 e0e4      	LDI  R30,LOW(4)
000301 15ea      	CP   R30,R10
000302 f449      	BRNE _0x74
000303   +  	__POINTW1MN _ind_out,4
000305 93ff      	PUSH R31
000306 93ef      	PUSH R30
000307 81e0      	LD   R30,Z
000308 7fed      	ANDI R30,0xFD
000309 91af      	POP  R26
00030a 91bf      	POP  R27
00030b 93ec      	ST   X,R30
         ;    2037 
         ;    2038 if(ind==iPr_sel)
          _0x74:
          _0x73:
          _0x71:
          _0x6F:
00030c e0e1      	LDI  R30,LOW(1)
00030d 15ec      	CP   R30,R12
00030e f459      	BRNE _0x75
         ;    2039 	{
         ;    2040 	if(bFL5)ind_out[4]|=(1<<LED_PROG1)|(1<<LED_PROG2)|(1<<LED_PROG3)|(1<<LED_PROG4);
00030f fe30      	SBRS R3,0
000310 c009      	RJMP _0x76
000311   +  	__POINTW1MN _ind_out,4
000313 93ff      	PUSH R31
000314 93ef      	PUSH R30
000315 81e0      	LD   R30,Z
000316 61ee      	ORI  R30,LOW(0x1E)
000317 91af      	POP  R26
000318 91bf      	POP  R27
000319 93ec      	ST   X,R30
         ;    2041 	} 
          _0x76:
         ;    2042 	 
         ;    2043 if(ind==iVr)
          _0x75:
00031a e0e2      	LDI  R30,LOW(2)
00031b 15ec      	CP   R30,R12
00031c f459      	BRNE _0x77
         ;    2044 	{
         ;    2045 	if(bFL5)ind_out[4]|=(1<<LED_POW_ON);
00031d fe30      	SBRS R3,0
00031e c009      	RJMP _0x78
00031f   +  	__POINTW1MN _ind_out,4
000321 93ff      	PUSH R31
000322 93ef      	PUSH R30
000323 81e0      	LD   R30,Z
000324 62e0      	ORI  R30,0x20
000325 91af      	POP  R26
000326 91bf      	POP  R27
000327 93ec      	ST   X,R30
         ;    2046 	}	
          _0x78:
         ;    2047 }
          _0x77:
000328 9508      	RET
         ;    2048 
         ;    2049 //-----------------------------------------------
         ;    2050 // Подпрограмма драйва до 7 кнопок одного порта, 
         ;    2051 // различает короткое и длинное нажатие,
         ;    2052 // срабатывает на отпускание кнопки, возможность
         ;    2053 // ускорения перебора при длинном нажатии...
         ;    2054 #define but_port PORTC
         ;    2055 #define but_dir  DDRC
         ;    2056 #define but_pin  PINC
         ;    2057 #define but_mask 0b01101010
         ;    2058 #define no_but   0b11111111
         ;    2059 #define but_on   5
         ;    2060 #define but_onL  20
         ;    2061 
         ;    2062 
         ;    2063 
         ;    2064 
         ;    2065 void but_drv(void)
         ;    2066 { 
          _but_drv:
         ;    2067 DDRD&=0b00000111;
000329 b3e1      	IN   R30,0x11
00032a 70e7      	ANDI R30,LOW(0x7)
00032b 940e 0532 	CALL SUBOPT_0x5
         ;    2068 PORTD|=0b11111000;
         ;    2069 
         ;    2070 but_port|=(but_mask^0xff);
00032d 940e 0537 	CALL SUBOPT_0x6
         ;    2071 but_dir&=but_mask;
         ;    2072 #asm
         ;    2073 nop
00032f 0000      nop
         ;    2074 nop
000330 0000      nop
         ;    2075 nop
000331 0000      nop
         ;    2076 nop
000332 0000      nop
         ;    2077 #endasm
         
         ;    2078 
         ;    2079 but_n=but_pin|but_mask; 
000333 b3e3      	IN   R30,0x13
000334 66ea      	ORI  R30,LOW(0x6A)
000335 93e0 0169 	STS  _but_n_G1,R30
         ;    2080 
         ;    2081 if((but_n==no_but)||(but_n!=but_s))
000337 91a0 0169 	LDS  R26,_but_n_G1
000339 3faf      	CPI  R26,LOW(0xFF)
00033a f011      	BREQ _0x7A
00033b d202      	RCALL SUBOPT_0x7
00033c f109      	BREQ _0x79
          _0x7A:
         ;    2082  	{
         ;    2083  	speed=0;
00033d 94e8      	CLT
00033e f826      	BLD  R2,6
         ;    2084    	if (((but0_cnt>=but_on)||(but1_cnt!=0))&&(!l_but))
00033f 91a0 016b 	LDS  R26,_but0_cnt_G1
000341 30a5      	CPI  R26,LOW(0x5)
000342 f420      	BRSH _0x7D
000343 91a0 016c 	LDS  R26,_but1_cnt_G1
000345 30a0      	CPI  R26,LOW(0x0)
000346 f011      	BREQ _0x7F
          _0x7D:
000347 fe24      	SBRS R2,4
000348 c001      	RJMP _0x80
          _0x7F:
000349 c004      	RJMP _0x7C
          _0x80:
         ;    2085   		{
         ;    2086    	     n_but=1;
00034a 9468      	SET
00034b f825      	BLD  R2,5
         ;    2087           but=but_s;
00034c 9090 016a 	LDS  R9,_but_s_G1
         ;    2088           }
         ;    2089    	if (but1_cnt>=but_onL_temp)
          _0x7C:
00034e d1f5      	RCALL SUBOPT_0x8
00034f f018      	BRLO _0x81
         ;    2090   		{
         ;    2091    	     n_but=1;
000350 9468      	SET
000351 f825      	BLD  R2,5
         ;    2092           but=but_s&0b11111101;
000352 d1f7      	RCALL SUBOPT_0x9
         ;    2093           }
         ;    2094     	l_but=0;
          _0x81:
000353 94e8      	CLT
000354 f824      	BLD  R2,4
         ;    2095    	but_onL_temp=but_onL;
000355 e1e4      	LDI  R30,LOW(20)
000356 93e0 016d 	STS  _but_onL_temp_G1,R30
         ;    2096     	but0_cnt=0;
000358 e0e0      	LDI  R30,LOW(0)
000359 93e0 016b 	STS  _but0_cnt_G1,R30
         ;    2097   	but1_cnt=0;          
00035b 93e0 016c 	STS  _but1_cnt_G1,R30
         ;    2098      goto but_drv_out;
00035d c02b      	RJMP _0x82
         ;    2099   	}  
         ;    2100   	
         ;    2101 if(but_n==but_s)
          _0x79:
00035e d1df      	RCALL SUBOPT_0x7
00035f f549      	BRNE _0x83
         ;    2102  	{
         ;    2103   	but0_cnt++;
000360 91e0 016b 	LDS  R30,_but0_cnt_G1
000362 5fef      	SUBI R30,-LOW(1)
000363 93e0 016b 	STS  _but0_cnt_G1,R30
         ;    2104   	if(but0_cnt>=but_on)
000365 91a0 016b 	LDS  R26,_but0_cnt_G1
000367 30a5      	CPI  R26,LOW(0x5)
000368 f100      	BRLO _0x84
         ;    2105   		{
         ;    2106    		but0_cnt=0;
000369 e0e0      	LDI  R30,LOW(0)
00036a 93e0 016b 	STS  _but0_cnt_G1,R30
         ;    2107    		but1_cnt++;
00036c 91e0 016c 	LDS  R30,_but1_cnt_G1
00036e 5fef      	SUBI R30,-LOW(1)
00036f 93e0 016c 	STS  _but1_cnt_G1,R30
         ;    2108    		if(but1_cnt>=but_onL_temp)
000371 d1d2      	RCALL SUBOPT_0x8
000372 f0b0      	BRLO _0x85
         ;    2109    			{              
         ;    2110     			but=but_s&0b11111101;
000373 d1d6      	RCALL SUBOPT_0x9
         ;    2111     			but1_cnt=0;
000374 e0e0      	LDI  R30,LOW(0)
000375 93e0 016c 	STS  _but1_cnt_G1,R30
         ;    2112     			n_but=1;
000377 9468      	SET
000378 f825      	BLD  R2,5
         ;    2113     			l_but=1;
000379 9468      	SET
00037a f824      	BLD  R2,4
         ;    2114 			if(speed)
00037b fe26      	SBRS R2,6
00037c c00c      	RJMP _0x86
         ;    2115 				{
         ;    2116     				but_onL_temp=but_onL_temp>>1;
00037d 91e0 016d 	LDS  R30,_but_onL_temp_G1
00037f 95e6      	LSR  R30
000380 93e0 016d 	STS  _but_onL_temp_G1,R30
         ;    2117         			if(but_onL_temp<=2) but_onL_temp=2;
000382 91a0 016d 	LDS  R26,_but_onL_temp_G1
000384 e0e2      	LDI  R30,LOW(2)
000385 17ea      	CP   R30,R26
000386 f010      	BRLO _0x87
000387 93e0 016d 	STS  _but_onL_temp_G1,R30
         ;    2118 				}    
          _0x87:
         ;    2119    			}
          _0x86:
         ;    2120   		} 
          _0x85:
         ;    2121  	}
          _0x84:
         ;    2122 but_drv_out:
          _0x83:
          _0x82:
         ;    2123 but_s=but_n;
000389 91e0 0169 	LDS  R30,_but_n_G1
00038b 93e0 016a 	STS  _but_s_G1,R30
         ;    2124 but_port|=(but_mask^0xff);
00038d d1a9      	RCALL SUBOPT_0x6
         ;    2125 but_dir&=but_mask;
         ;    2126 }    
00038e 9508      	RET
         ;    2127 
         ;    2128 #define butV	239
         ;    2129 #define butV_	237
         ;    2130 #define butP	251
         ;    2131 #define butP_	249
         ;    2132 #define butR	127
         ;    2133 #define butR_	125
         ;    2134 #define butL	254
         ;    2135 #define butL_	252
         ;    2136 #define butLR	126
         ;    2137 #define butLR_	124 
         ;    2138 #define butVP_ 233
         ;    2139 //-----------------------------------------------
         ;    2140 void but_an(void)
         ;    2141 {
          _but_an:
         ;    2142 
         ;    2143 if(!(in_word&0x01))
00038f fce0      	SBRC R14,0
000390 c032      	RJMP _0x88
         ;    2144 	{
         ;    2145 	#ifdef TVIST_SKO
         ;    2146 	if((step==sOFF)&&(!bERR))
         ;    2147 		{
         ;    2148 		step=s1;
         ;    2149 		if(prog==p2) cnt_del=70;
         ;    2150 		else if(prog==p3) cnt_del=100;
         ;    2151 		}
         ;    2152 	#endif
         ;    2153 	#ifdef DV3KL2MD
         ;    2154 	if((step==sOFF)&&(!bERR))
000391 e0e0      	LDI  R30,LOW(0)
000392 15eb      	CP   R30,R11
000393 f411      	BRNE _0x8A
000394 fe31      	SBRS R3,1
000395 c001      	RJMP _0x8B
          _0x8A:
000396 c008      	RJMP _0x89
          _0x8B:
         ;    2155 		{
         ;    2156 		step=s1;
000397 e0e1      	LDI  R30,LOW(1)
000398 2ebe      	MOV  R11,R30
         ;    2157 		cnt_del=70;
000399 e4e6      	LDI  R30,LOW(70)
00039a e0f0      	LDI  R31,HIGH(70)
00039b 93e0 0171 	STS  _cnt_del,R30
00039d 93f0 0172 	STS  _cnt_del+1,R31
         ;    2158 		}
         ;    2159 	#endif	
         ;    2160 	#ifndef TVIST_SKO
         ;    2161 	if((step==sOFF)&&(!bERR))
          _0x89:
00039f e0e0      	LDI  R30,LOW(0)
0003a0 15eb      	CP   R30,R11
0003a1 f411      	BRNE _0x8D
0003a2 fe31      	SBRS R3,1
0003a3 c001      	RJMP _0x8E
          _0x8D:
0003a4 c01e      	RJMP _0x8C
          _0x8E:
         ;    2162 		{
         ;    2163 		step=s1;
0003a5 e0e1      	LDI  R30,LOW(1)
0003a6 2ebe      	MOV  R11,R30
         ;    2164 		if(prog==p1) cnt_del=50;
0003a7 15ea      	CP   R30,R10
0003a8 f439      	BRNE _0x8F
0003a9 e3e2      	LDI  R30,LOW(50)
0003aa e0f0      	LDI  R31,HIGH(50)
0003ab 93e0 0171 	STS  _cnt_del,R30
0003ad 93f0 0172 	STS  _cnt_del+1,R31
         ;    2165 		else if(prog==p2) cnt_del=50;
0003af c013      	RJMP _0x90
          _0x8F:
0003b0 e0e2      	LDI  R30,LOW(2)
0003b1 15ea      	CP   R30,R10
0003b2 f439      	BRNE _0x91
0003b3 e3e2      	LDI  R30,LOW(50)
0003b4 e0f0      	LDI  R31,HIGH(50)
0003b5 93e0 0171 	STS  _cnt_del,R30
0003b7 93f0 0172 	STS  _cnt_del+1,R31
         ;    2166 		else if(prog==p3) cnt_del=50;
0003b9 c009      	RJMP _0x92
          _0x91:
0003ba e0e3      	LDI  R30,LOW(3)
0003bb 15ea      	CP   R30,R10
0003bc f431      	BRNE _0x93
0003bd e3e2      	LDI  R30,LOW(50)
0003be e0f0      	LDI  R31,HIGH(50)
0003bf 93e0 0171 	STS  _cnt_del,R30
0003c1 93f0 0172 	STS  _cnt_del+1,R31
         ;    2167           #ifdef P380_MINI
         ;    2168   		cnt_del=100;
         ;    2169   		#endif
         ;    2170 		}
          _0x93:
          _0x92:
          _0x90:
         ;    2171 	#endif
         ;    2172 	}
          _0x8C:
         ;    2173 if(!(in_word&0x02))
          _0x88:
0003c3 fce1      	SBRC R14,1
0003c4 c001      	RJMP _0x94
         ;    2174 	{
         ;    2175 	step=sOFF;
0003c5 24bb      	CLR  R11
         ;    2176 
         ;    2177 	}
         ;    2178 
         ;    2179 if (!n_but) goto but_an_end;
          _0x94:
0003c6 fe25      	SBRS R2,5
0003c7 c0a0      	RJMP _0x96
         ;    2180 
         ;    2181 if(but==butV_)
0003c8 eeed      	LDI  R30,LOW(237)
0003c9 15e9      	CP   R30,R9
0003ca f469      	BRNE _0x97
         ;    2182 	{
         ;    2183 	if(ee_vacuum_mode==evmON)ee_vacuum_mode=evmOFF;
0003cb e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0003cc e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0003cd 940e 0592 	CALL __EEPROMRDB
0003cf 35e5      	CPI  R30,LOW(0x55)
0003d0 f411      	BRNE _0x98
0003d1 eaea      	LDI  R30,LOW(170)
0003d2 c001      	RJMP _0xCE
         ;    2184 	else ee_vacuum_mode=evmON;
          _0x98:
0003d3 e5e5      	LDI  R30,LOW(85)
          _0xCE:
0003d4 e0a0      	LDI  R26,LOW(_ee_vacuum_mode)
0003d5 e0b0      	LDI  R27,HIGH(_ee_vacuum_mode)
0003d6 940e 05a6 	CALL __EEPROMWRB
         ;    2185 	}
         ;    2186 
         ;    2187 if(but==butVP_)
          _0x97:
0003d8 eee9      	LDI  R30,LOW(233)
0003d9 15e9      	CP   R30,R9
0003da f431      	BRNE _0x9A
         ;    2188 	{
         ;    2189 	if(ind!=iVr)ind=iVr;
0003db e0e2      	LDI  R30,LOW(2)
0003dc 15ec      	CP   R30,R12
0003dd f011      	BREQ _0x9B
0003de 2ece      	MOV  R12,R30
         ;    2190 	else ind=iMn;
0003df c001      	RJMP _0x9C
          _0x9B:
0003e0 24cc      	CLR  R12
          _0x9C:
         ;    2191 	}
         ;    2192 
         ;    2193 	
         ;    2194 if(ind==iMn)
          _0x9A:
0003e1 20cc      	TST  R12
0003e2 f591      	BRNE _0x9D
         ;    2195 	{
         ;    2196 	if(but==butP_)ind=iPr_sel;
0003e3 efe9      	LDI  R30,LOW(249)
0003e4 15e9      	CP   R30,R9
0003e5 f411      	BRNE _0x9E
0003e6 e0e1      	LDI  R30,LOW(1)
0003e7 2ece      	MOV  R12,R30
         ;    2197 	if(but==butLR)	
          _0x9E:
0003e8 e7ee      	LDI  R30,LOW(126)
0003e9 15e9      	CP   R30,R9
0003ea f471      	BRNE _0x9F
         ;    2198 		{
         ;    2199 		if((prog==p3)||(prog==p4))
0003eb e0e3      	LDI  R30,LOW(3)
0003ec 15ea      	CP   R30,R10
0003ed f019      	BREQ _0xA1
0003ee e0e4      	LDI  R30,LOW(4)
0003ef 15ea      	CP   R30,R10
0003f0 f439      	BRNE _0xA0
          _0xA1:
         ;    2200 			{ 
         ;    2201 			if(sub_ind==0)sub_ind=1;
0003f1 20dd      	TST  R13
0003f2 f419      	BRNE _0xA3
0003f3 e0e1      	LDI  R30,LOW(1)
0003f4 2ede      	MOV  R13,R30
         ;    2202 			else sub_ind=0;
0003f5 c001      	RJMP _0xA4
          _0xA3:
0003f6 24dd      	CLR  R13
          _0xA4:
         ;    2203 			}
         ;    2204     		else sub_ind=0;
0003f7 c001      	RJMP _0xA5
          _0xA0:
0003f8 24dd      	CLR  R13
          _0xA5:
         ;    2205 		}	 
         ;    2206 	if((but==butR)||(but==butR_))	
          _0x9F:
0003f9 e7ef      	LDI  R30,LOW(127)
0003fa 15e9      	CP   R30,R9
0003fb f019      	BREQ _0xA7
0003fc e7ed      	LDI  R30,LOW(125)
0003fd 15e9      	CP   R30,R9
0003fe f441      	BRNE _0xA6
          _0xA7:
         ;    2207 		{  
         ;    2208 		speed=1;
0003ff 9468      	SET
000400 f826      	BLD  R2,6
         ;    2209 		ee_delay[prog,sub_ind]++;
000401 d14d      	RCALL SUBOPT_0xA
000402 9631      	ADIW R30,1
000403 940e 059e 	CALL __EEPROMWRW
000405 9731      	SBIW R30,1
         ;    2210 		}   
         ;    2211 	
         ;    2212 	else if((but==butL)||(but==butL_))	
000406 c00d      	RJMP _0xA9
          _0xA6:
000407 efee      	LDI  R30,LOW(254)
000408 15e9      	CP   R30,R9
000409 f019      	BREQ _0xAB
00040a efec      	LDI  R30,LOW(252)
00040b 15e9      	CP   R30,R9
00040c f439      	BRNE _0xAA
          _0xAB:
         ;    2213 		{  
         ;    2214     		speed=1;
00040d 9468      	SET
00040e f826      	BLD  R2,6
         ;    2215     		ee_delay[prog,sub_ind]--;
00040f d13f      	RCALL SUBOPT_0xA
000410 9731      	SBIW R30,1
000411 940e 059e 	CALL __EEPROMWRW
000413 9631      	ADIW R30,1
         ;    2216     		}		
         ;    2217 	} 
          _0xAA:
          _0xA9:
         ;    2218 	
         ;    2219 else if(ind==iPr_sel)
000414 c053      	RJMP _0xAD
          _0x9D:
000415 e0e1      	LDI  R30,LOW(1)
000416 15ec      	CP   R30,R12
000417 f5e9      	BRNE _0xAE
         ;    2220 	{
         ;    2221 	if(but==butP_)ind=iMn;
000418 efe9      	LDI  R30,LOW(249)
000419 15e9      	CP   R30,R9
00041a f409      	BRNE _0xAF
00041b 24cc      	CLR  R12
         ;    2222 	if(but==butP)
          _0xAF:
00041c efeb      	LDI  R30,LOW(251)
00041d 15e9      	CP   R30,R9
00041e f479      	BRNE _0xB0
         ;    2223 		{
         ;    2224 		prog++;
00041f d142      	RCALL SUBOPT_0xB
         ;    2225 		if(prog>MAXPROG)prog=MINPROG;
000420 f414      	BRGE _0xB1
000421 e0e2      	LDI  R30,LOW(2)
000422 2eae      	MOV  R10,R30
         ;    2226 		ee_program[0]=prog;
          _0xB1:
000423 d142      	RCALL SUBOPT_0xC
         ;    2227 		ee_program[1]=prog;
000424   +  	__POINTW2MN _ee_program,1
000426 2dea      	MOV  R30,R10
000427 940e 05a6 	CALL __EEPROMWRB
         ;    2228 		ee_program[2]=prog;
000429   +  	__POINTW2MN _ee_program,2
00042b 2dea      	MOV  R30,R10
00042c 940e 05a6 	CALL __EEPROMWRB
         ;    2229 		}
         ;    2230 	
         ;    2231 	if(but==butR)
          _0xB0:
00042e e7ef      	LDI  R30,LOW(127)
00042f 15e9      	CP   R30,R9
000430 f479      	BRNE _0xB2
         ;    2232 		{
         ;    2233 		prog++;
000431 d130      	RCALL SUBOPT_0xB
         ;    2234 		if(prog>MAXPROG)prog=MINPROG;
000432 f414      	BRGE _0xB3
000433 e0e2      	LDI  R30,LOW(2)
000434 2eae      	MOV  R10,R30
         ;    2235 		ee_program[0]=prog;
          _0xB3:
000435 d130      	RCALL SUBOPT_0xC
         ;    2236 		ee_program[1]=prog;
000436   +  	__POINTW2MN _ee_program,1
000438 2dea      	MOV  R30,R10
000439 940e 05a6 	CALL __EEPROMWRB
         ;    2237 		ee_program[2]=prog;
00043b   +  	__POINTW2MN _ee_program,2
00043d 2dea      	MOV  R30,R10
00043e 940e 05a6 	CALL __EEPROMWRB
         ;    2238 		}
         ;    2239 
         ;    2240 	if(but==butL)
          _0xB2:
000440 efee      	LDI  R30,LOW(254)
000441 15e9      	CP   R30,R9
000442 f489      	BRNE _0xB4
         ;    2241 		{
         ;    2242 		prog--;
000443 94aa      	DEC  R10
         ;    2243 		if(prog>MAXPROG)prog=MINPROG;
000444 e0e3      	LDI  R30,LOW(3)
000445 15ea      	CP   R30,R10
000446 f414      	BRGE _0xB5
000447 e0e2      	LDI  R30,LOW(2)
000448 2eae      	MOV  R10,R30
         ;    2244 		ee_program[0]=prog;
          _0xB5:
000449 d11c      	RCALL SUBOPT_0xC
         ;    2245 		ee_program[1]=prog;
00044a   +  	__POINTW2MN _ee_program,1
00044c 2dea      	MOV  R30,R10
00044d 940e 05a6 	CALL __EEPROMWRB
         ;    2246 		ee_program[2]=prog;
00044f   +  	__POINTW2MN _ee_program,2
000451 2dea      	MOV  R30,R10
000452 940e 05a6 	CALL __EEPROMWRB
         ;    2247 		}	
         ;    2248 	} 
          _0xB4:
         ;    2249 
         ;    2250 else if(ind==iVr)
000454 c013      	RJMP _0xB6
          _0xAE:
000455 e0e2      	LDI  R30,LOW(2)
000456 15ec      	CP   R30,R12
000457 f481      	BRNE _0xB7
         ;    2251 	{
         ;    2252 	if(but==butP_)
000458 efe9      	LDI  R30,LOW(249)
000459 15e9      	CP   R30,R9
00045a f469      	BRNE _0xB8
         ;    2253 		{
         ;    2254 		if(ee_vr_log)ee_vr_log=0;
00045b e1a3      	LDI  R26,LOW(_ee_vr_log)
00045c e0b0      	LDI  R27,HIGH(_ee_vr_log)
00045d 940e 0592 	CALL __EEPROMRDB
00045f 30e0      	CPI  R30,0
000460 f011      	BREQ _0xB9
000461 e0e0      	LDI  R30,LOW(0)
000462 c001      	RJMP _0xCF
         ;    2255 		else ee_vr_log=1;
          _0xB9:
000463 e0e1      	LDI  R30,LOW(1)
          _0xCF:
000464 e1a3      	LDI  R26,LOW(_ee_vr_log)
000465 e0b0      	LDI  R27,HIGH(_ee_vr_log)
000466 940e 05a6 	CALL __EEPROMWRB
         ;    2256 		}	
         ;    2257 	} 	
          _0xB8:
         ;    2258 
         ;    2259 but_an_end:
          _0xB7:
          _0xB6:
          _0xAD:
          _0x96:
         ;    2260 n_but=0;
000468 94e8      	CLT
000469 f825      	BLD  R2,5
         ;    2261 }
00046a 9508      	RET
         ;    2262 
         ;    2263 //-----------------------------------------------
         ;    2264 void ind_drv(void)
         ;    2265 {
          _ind_drv:
         ;    2266 if(++ind_cnt>=6)ind_cnt=0;
00046b 9483      	INC  R8
00046c e0e6      	LDI  R30,LOW(6)
00046d 168e      	CP   R8,R30
00046e f008      	BRLO _0xBB
00046f 2488      	CLR  R8
         ;    2267 
         ;    2268 if(ind_cnt<5)
          _0xBB:
000470 e0e5      	LDI  R30,LOW(5)
000471 168e      	CP   R8,R30
000472 f4c8      	BRSH _0xBC
         ;    2269 	{
         ;    2270 	DDRC=0xFF;
000473 efef      	LDI  R30,LOW(255)
000474 bbe4      	OUT  0x14,R30
         ;    2271 	PORTC=0xFF;
000475 bbe5      	OUT  0x15,R30
         ;    2272 	DDRD|=0b11111000;
000476 b3e1      	IN   R30,0x11
000477 6fe8      	ORI  R30,LOW(0xF8)
000478 d0b9      	RCALL SUBOPT_0x5
         ;    2273 	PORTD|=0b11111000;
         ;    2274 	PORTD&=IND_STROB[ind_cnt];
000479 b3e2      	IN   R30,0x12
00047a 93ef      	PUSH R30
00047b e5a4      	LDI  R26,LOW(_IND_STROB*2)
00047c e0b0      	LDI  R27,HIGH(_IND_STROB*2)
00047d 2de8      	MOV  R30,R8
00047e e0f0      	LDI  R31,0
00047f 0fea      	ADD  R30,R26
000480 1ffb      	ADC  R31,R27
000481 91e4      	LPM  R30,Z
000482 91af      	POP  R26
000483 23ea      	AND  R30,R26
000484 bbe2      	OUT  0x12,R30
         ;    2275 	PORTC=ind_out[ind_cnt];
000485 2de8      	MOV  R30,R8
000486 e0f0      	LDI  R31,0
000487 5ae0      	SUBI R30,LOW(-_ind_out)
000488 4ffe      	SBCI R31,HIGH(-_ind_out)
000489 81e0      	LD   R30,Z
00048a bbe5      	OUT  0x15,R30
         ;    2276 	}
         ;    2277 else but_drv();
00048b c002      	RJMP _0xBD
          _0xBC:
00048c 940e 0329 	CALL _but_drv
          _0xBD:
         ;    2278 }
00048e 9508      	RET
         ;    2279 
         ;    2280 //***********************************************
         ;    2281 //***********************************************
         ;    2282 //***********************************************
         ;    2283 //***********************************************
         ;    2284 interrupt [TIM0_OVF] void timer0_ovf_isr(void)
         ;    2285 {
          _timer0_ovf_isr:
00048f 920a      	ST   -Y,R0
000490 921a      	ST   -Y,R1
000491 92fa      	ST   -Y,R15
000492 936a      	ST   -Y,R22
000493 937a      	ST   -Y,R23
000494 938a      	ST   -Y,R24
000495 939a      	ST   -Y,R25
000496 93aa      	ST   -Y,R26
000497 93ba      	ST   -Y,R27
000498 93ea      	ST   -Y,R30
000499 93fa      	ST   -Y,R31
00049a b7ef      	IN   R30,SREG
00049b 93ea      	ST   -Y,R30
         ;    2286 TCCR0=0x02;
00049c d0cf      	RCALL SUBOPT_0xD
         ;    2287 TCNT0=-208;
         ;    2288 OCR0=0x00; 
         ;    2289 
         ;    2290 
         ;    2291 b600Hz=1;
00049d 9468      	SET
00049e f820      	BLD  R2,0
         ;    2292 ind_drv();
00049f dfcb      	RCALL _ind_drv
         ;    2293 if(++t0_cnt0>=6)
0004a0 9443      	INC  R4
0004a1 e0e6      	LDI  R30,LOW(6)
0004a2 164e      	CP   R4,R30
0004a3 f018      	BRLO _0xBE
         ;    2294 	{
         ;    2295 	t0_cnt0=0;
0004a4 2444      	CLR  R4
         ;    2296 	b100Hz=1;
0004a5 9468      	SET
0004a6 f821      	BLD  R2,1
         ;    2297 	}
         ;    2298 
         ;    2299 if(++t0_cnt1>=60)
          _0xBE:
0004a7 9453      	INC  R5
0004a8 e3ec      	LDI  R30,LOW(60)
0004a9 165e      	CP   R5,R30
0004aa f088      	BRLO _0xBF
         ;    2300 	{
         ;    2301 	t0_cnt1=0;
0004ab 2455      	CLR  R5
         ;    2302 	b10Hz=1;
0004ac 9468      	SET
0004ad f822      	BLD  R2,2
         ;    2303 	
         ;    2304 	if(++t0_cnt2>=2)
0004ae 9463      	INC  R6
0004af e0e2      	LDI  R30,LOW(2)
0004b0 166e      	CP   R6,R30
0004b1 f018      	BRLO _0xC0
         ;    2305 		{
         ;    2306 		t0_cnt2=0;
0004b2 2466      	CLR  R6
         ;    2307 		bFL5=!bFL5;
0004b3 e0e1      	LDI  R30,LOW(1)
0004b4 263e      	EOR  R3,R30
         ;    2308 		}
         ;    2309 		
         ;    2310 	if(++t0_cnt3>=5)
          _0xC0:
0004b5 9473      	INC  R7
0004b6 e0e5      	LDI  R30,LOW(5)
0004b7 167e      	CP   R7,R30
0004b8 f018      	BRLO _0xC1
         ;    2311 		{
         ;    2312 		t0_cnt3=0;
0004b9 2477      	CLR  R7
         ;    2313 		bFL2=!bFL2;
0004ba e8e0      	LDI  R30,LOW(128)
0004bb 262e      	EOR  R2,R30
         ;    2314 		}		
         ;    2315 	}
          _0xC1:
         ;    2316 }
          _0xBF:
0004bc 91e9      	LD   R30,Y+
0004bd bfef      	OUT  SREG,R30
0004be 91f9      	LD   R31,Y+
0004bf 91e9      	LD   R30,Y+
0004c0 91b9      	LD   R27,Y+
0004c1 91a9      	LD   R26,Y+
0004c2 9199      	LD   R25,Y+
0004c3 9189      	LD   R24,Y+
0004c4 9179      	LD   R23,Y+
0004c5 9169      	LD   R22,Y+
0004c6 90f9      	LD   R15,Y+
0004c7 9019      	LD   R1,Y+
0004c8 9009      	LD   R0,Y+
0004c9 9518      	RETI
         ;    2317 
         ;    2318 //===============================================
         ;    2319 //===============================================
         ;    2320 //===============================================
         ;    2321 //===============================================
         ;    2322 
         ;    2323 void main(void)
         ;    2324 {
          _main:
         ;    2325 
         ;    2326 PORTA=0xff;
0004ca efef      	LDI  R30,LOW(255)
0004cb bbeb      	OUT  0x1B,R30
         ;    2327 DDRA=0x00;
0004cc d045      	RCALL SUBOPT_0x0
         ;    2328 
         ;    2329 PORTB=0xff;
0004cd d0a6      	RCALL SUBOPT_0xE
         ;    2330 DDRB=0xFF;
         ;    2331 
         ;    2332 PORTC=0x00;
0004ce e0e0      	LDI  R30,LOW(0)
0004cf bbe5      	OUT  0x15,R30
         ;    2333 DDRC=0x00;
0004d0 bbe4      	OUT  0x14,R30
         ;    2334 
         ;    2335 
         ;    2336 PORTD=0x00;
0004d1 bbe2      	OUT  0x12,R30
         ;    2337 DDRD=0x00;
0004d2 bbe1      	OUT  0x11,R30
         ;    2338 
         ;    2339 
         ;    2340 TCCR0=0x02;
0004d3 d098      	RCALL SUBOPT_0xD
         ;    2341 TCNT0=-208;
         ;    2342 OCR0=0x00;
         ;    2343 
         ;    2344 TCCR1A=0x00;
0004d4 e0e0      	LDI  R30,LOW(0)
0004d5 bdef      	OUT  0x2F,R30
         ;    2345 TCCR1B=0x00;
0004d6 bdee      	OUT  0x2E,R30
         ;    2346 TCNT1H=0x00;
0004d7 bded      	OUT  0x2D,R30
         ;    2347 TCNT1L=0x00;
0004d8 bdec      	OUT  0x2C,R30
         ;    2348 ICR1H=0x00;
0004d9 bde7      	OUT  0x27,R30
         ;    2349 ICR1L=0x00;
0004da bde6      	OUT  0x26,R30
         ;    2350 OCR1AH=0x00;
0004db bdeb      	OUT  0x2B,R30
         ;    2351 OCR1AL=0x00;
0004dc bdea      	OUT  0x2A,R30
         ;    2352 OCR1BH=0x00;
0004dd bde9      	OUT  0x29,R30
         ;    2353 OCR1BL=0x00;
0004de bde8      	OUT  0x28,R30
         ;    2354 
         ;    2355 
         ;    2356 ASSR=0x00;
0004df bde2      	OUT  0x22,R30
         ;    2357 TCCR2=0x00;
0004e0 bde5      	OUT  0x25,R30
         ;    2358 TCNT2=0x00;
0004e1 bde4      	OUT  0x24,R30
         ;    2359 OCR2=0x00;
0004e2 bde3      	OUT  0x23,R30
         ;    2360 
         ;    2361 MCUCR=0x00;
0004e3 bfe5      	OUT  0x35,R30
         ;    2362 MCUCSR=0x00;
0004e4 bfe4      	OUT  0x34,R30
         ;    2363 
         ;    2364 TIMSK=0x01;
0004e5 e0e1      	LDI  R30,LOW(1)
0004e6 bfe9      	OUT  0x39,R30
         ;    2365 
         ;    2366 ACSR=0x80;
0004e7 e8e0      	LDI  R30,LOW(128)
0004e8 b9e8      	OUT  0x8,R30
         ;    2367 SFIOR=0x00;
0004e9 e0e0      	LDI  R30,LOW(0)
0004ea bfe0      	OUT  0x30,R30
         ;    2368 
         ;    2369 #asm("sei") 
0004eb 9478      	sei
         ;    2370 PORTB=0xFF;
0004ec efef      	LDI  R30,LOW(255)
0004ed d086      	RCALL SUBOPT_0xE
         ;    2371 DDRB=0xFF;
         ;    2372 ind=iMn;
0004ee 24cc      	CLR  R12
         ;    2373 prog_drv();
0004ef 940e 006a 	CALL _prog_drv
         ;    2374 ind_hndl();
0004f1 940e 026a 	CALL _ind_hndl
         ;    2375 led_hndl();
0004f3 940e 027f 	CALL _led_hndl
         ;    2376 while (1)
          _0xC2:
         ;    2377       {
         ;    2378       if(b600Hz)
0004f5 fe20      	SBRS R2,0
0004f6 c002      	RJMP _0xC5
         ;    2379 		{
         ;    2380 		b600Hz=0; 
0004f7 94e8      	CLT
0004f8 f820      	BLD  R2,0
         ;    2381           
         ;    2382 		}         
         ;    2383       if(b100Hz)
          _0xC5:
0004f9 fe21      	SBRS R2,1
0004fa c009      	RJMP _0xC6
         ;    2384 		{        
         ;    2385 		b100Hz=0; 
0004fb 94e8      	CLT
0004fc f821      	BLD  R2,1
         ;    2386 		but_an();
0004fd de91      	RCALL _but_an
         ;    2387 	    	in_drv();
0004fe 940e 00c9 	CALL _in_drv
         ;    2388           mdvr_drv();
000500 940e 0107 	CALL _mdvr_drv
         ;    2389           step_contr();
000502 940e 018f 	CALL _step_contr
         ;    2390 		}   
         ;    2391 	if(b10Hz)
          _0xC6:
000504 fe22      	SBRS R2,2
000505 c00a      	RJMP _0xC7
         ;    2392 		{
         ;    2393 		b10Hz=0;
000506 94e8      	CLT
000507 f822      	BLD  R2,2
         ;    2394 		prog_drv();
000508 940e 006a 	CALL _prog_drv
         ;    2395 		err_drv();
00050a 940e 00f0 	CALL _err_drv
         ;    2396 		
         ;    2397     	     ind_hndl();
00050c 940e 026a 	CALL _ind_hndl
         ;    2398           led_hndl();
00050e 940e 027f 	CALL _led_hndl
         ;    2399           
         ;    2400           }
         ;    2401 
         ;    2402       };
          _0xC7:
000510 cfe4      	RJMP _0xC2
         ;    2403 }
          _0xC8:
000511 cfff      	RJMP _0xC8
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x0:
000512 e0e0      	LDI  R30,LOW(0)
000513 bbea      	OUT  0x1A,R30
000514 efef      	LDI  R30,LOW(255)
000515 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES
          SUBOPT_0x1:
000516 91e0 0171 	LDS  R30,_cnt_del
000518 91f0 0172 	LDS  R31,_cnt_del+1
00051a 9731      	SBIW R30,1
00051b 93e0 0171 	STS  _cnt_del,R30
00051d 93f0 0172 	STS  _cnt_del+1,R31
00051f 9730      	SBIW R30,0
000520 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x2:
000521 2ebe      	MOV  R11,R30
000522 e3e2      	LDI  R30,LOW(50)
000523 e0f0      	LDI  R31,HIGH(50)
000524 93e0 0171 	STS  _cnt_del,R30
000526 93f0 0172 	STS  _cnt_del+1,R31
000528 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 5 TIMES
          SUBOPT_0x3:
000529 2fe0      	MOV  R30,R16
00052a 50e1      	SUBI R30,LOW(1)
00052b e0f0      	LDI  R31,0
00052c 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x4:
00052d e0f0      	LDI  R31,0
00052e 0fea      	ADD  R30,R26
00052f 1ffb      	ADC  R31,R27
000530 91e4      	LPM  R30,Z
000531 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x5:
000532 bbe1      	OUT  0x11,R30
000533 b3e2      	IN   R30,0x12
000534 6fe8      	ORI  R30,LOW(0xF8)
000535 bbe2      	OUT  0x12,R30
000536 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x6:
000537 b3e5      	IN   R30,0x15
000538 69e5      	ORI  R30,LOW(0x95)
000539 bbe5      	OUT  0x15,R30
00053a b3e4      	IN   R30,0x14
00053b 76ea      	ANDI R30,LOW(0x6A)
00053c bbe4      	OUT  0x14,R30
00053d 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x7:
00053e 91e0 016a 	LDS  R30,_but_s_G1
000540 91a0 0169 	LDS  R26,_but_n_G1
000542 17ea      	CP   R30,R26
000543 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x8:
000544 91e0 016d 	LDS  R30,_but_onL_temp_G1
000546 91a0 016c 	LDS  R26,_but1_cnt_G1
000548 17ae      	CP   R26,R30
000549 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0x9:
00054a 91e0 016a 	LDS  R30,_but_s_G1
00054c 7fed      	ANDI R30,0xFD
00054d 2e9e      	MOV  R9,R30
00054e 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xA:
00054f 2dea      	MOV  R30,R10
000550 e0a3      	LDI  R26,LOW(_ee_delay)
000551 e0b0      	LDI  R27,HIGH(_ee_delay)
000552 e0f0      	LDI  R31,0
000553 0fee      	LSL  R30
000554 1fff      	ROL  R31
000555 0fee      	LSL  R30
000556 1fff      	ROL  R31
000557 0fae      	ADD  R26,R30
000558 1fbf      	ADC  R27,R31
000559 2ded      	MOV  R30,R13
00055a e0f0      	LDI  R31,0
00055b 0fee      	LSL  R30
00055c 1fff      	ROL  R31
00055d 0fae      	ADD  R26,R30
00055e 1fbf      	ADC  R27,R31
00055f 940e 058e 	CALL __EEPROMRDW
000561 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xB:
000562 94a3      	INC  R10
000563 e0e3      	LDI  R30,LOW(3)
000564 15ea      	CP   R30,R10
000565 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES
          SUBOPT_0xC:
000566 2dea      	MOV  R30,R10
000567 e0a1      	LDI  R26,LOW(_ee_program)
000568 e0b0      	LDI  R27,HIGH(_ee_program)
000569 940e 05a6 	CALL __EEPROMWRB
00056b 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xD:
00056c e0e2      	LDI  R30,LOW(2)
00056d bfe3      	OUT  0x33,R30
00056e e3e0      	LDI  R30,LOW(65328)
00056f efff      	LDI  R31,HIGH(65328)
000570 bfe2      	OUT  0x32,R30
000571 e0e0      	LDI  R30,LOW(0)
000572 bfec      	OUT  0x3C,R30
000573 9508      	RET
         
         ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES
          SUBOPT_0xE:
000574 bbe8      	OUT  0x18,R30
000575 efef      	LDI  R30,LOW(255)
000576 bbe7      	OUT  0x17,R30
000577 9508      	RET
         
          __DIVW21U:
000578 2400      	CLR  R0
000579 2411      	CLR  R1
00057a e190      	LDI  R25,16
          __DIVW21U1:
00057b 0faa      	LSL  R26
00057c 1fbb      	ROL  R27
00057d 1c00      	ROL  R0
00057e 1c11      	ROL  R1
00057f 1a0e      	SUB  R0,R30
000580 0a1f      	SBC  R1,R31
000581 f418      	BRCC __DIVW21U2
000582 0e0e      	ADD  R0,R30
000583 1e1f      	ADC  R1,R31
000584 c001      	RJMP __DIVW21U3
          __DIVW21U2:
000585 60a1      	SBR  R26,1
          __DIVW21U3:
000586 959a      	DEC  R25
000587 f799      	BRNE __DIVW21U1
000588 01fd      	MOVW R30,R26
000589 01d0      	MOVW R26,R0
00058a 9508      	RET
         
          __MODW21U:
00058b dfec      	RCALL __DIVW21U
00058c 01fd      	MOVW R30,R26
00058d 9508      	RET
         
          __EEPROMRDW:
00058e 9611      	ADIW R26,1
00058f d002      	RCALL __EEPROMRDB
000590 2ffe      	MOV  R31,R30
000591 9711      	SBIW R26,1
         
          __EEPROMRDB:
000592 99e1      	SBIC EECR,EEWE
000593 cffe      	RJMP __EEPROMRDB
000594 93ff      	PUSH R31
000595 b7ff      	IN   R31,SREG
000596 94f8      	CLI
000597 bbae      	OUT  EEARL,R26
000598 bbbf      	OUT  EEARH,R27
000599 9ae0      	SBI  EECR,EERE
00059a b3ed      	IN   R30,EEDR
00059b bfff      	OUT  SREG,R31
00059c 91ff      	POP  R31
00059d 9508      	RET
         
          __EEPROMWRW:
00059e d007      	RCALL __EEPROMWRB
00059f 9611      	ADIW R26,1
0005a0 93ef      	PUSH R30
0005a1 2fef      	MOV  R30,R31
0005a2 d003      	RCALL __EEPROMWRB
0005a3 91ef      	POP  R30
0005a4 9711      	SBIW R26,1
0005a5 9508      	RET
         
          __EEPROMWRB:
0005a6 99e1      	SBIC EECR,EEWE
0005a7 cffe      	RJMP __EEPROMWRB
0005a8 b79f      	IN   R25,SREG
0005a9 94f8      	CLI
0005aa bbae      	OUT  EEARL,R26
0005ab bbbf      	OUT  EEARH,R27
0005ac 9ae0      	SBI  EECR,EERE
0005ad b38d      	IN   R24,EEDR
0005ae 17e8      	CP   R30,R24
0005af f019      	BREQ __EEPROMWRB0
0005b0 bbed      	OUT  EEDR,R30
0005b1 9ae2      	SBI  EECR,EEMWE
0005b2 9ae1      	SBI  EECR,EEWE
          __EEPROMWRB0:
0005b3 bf9f      	OUT  SREG,R25
0005b4 9508      	RET
         
          __SAVELOCR4:
0005b5 933a      	ST   -Y,R19
          __SAVELOCR3:
0005b6 932a      	ST   -Y,R18
          __SAVELOCR2:
0005b7 931a      	ST   -Y,R17
0005b8 930a      	ST   -Y,R16
0005b9 9508      	RET
         
          __LOADLOCR4:
0005ba 813b      	LDD  R19,Y+3
          __LOADLOCR3:
0005bb 812a      	LDD  R18,Y+2
          __LOADLOCR2:
0005bc 8119      	LDD  R17,Y+1
0005bd 8108      	LD   R16,Y
0005be 9508      	RET
         

Assembly complete with no errors.
